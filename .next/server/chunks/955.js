exports.id=955,exports.ids=[955],exports.modules={9601:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.addAdminServicesToServer=ee.registerAdminService=void 0;let et=[];function er($,ee){et.push({getServiceDefinition:$,getHandlers:ee})}function en($){for(let{getServiceDefinition:ee,getHandlers:er}of et)$.addService(ee(),er())}ee.registerAdminService=er,ee.addAdminServicesToServer=en},4934:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.BackoffTimeout=void 0;let et=1e3,er=1.6,en=12e4,ei=.2;function es($,ee){return Math.random()*(ee-$)+$}class eo{constructor($,ee){this.callback=$,this.initialDelay=et,this.multiplier=er,this.maxDelay=en,this.jitter=ei,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,ee&&(ee.initialDelay&&(this.initialDelay=ee.initialDelay),ee.multiplier&&(this.multiplier=ee.multiplier),ee.jitter&&(this.jitter=ee.jitter),ee.maxDelay&&(this.maxDelay=ee.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer($){var ee,et;this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},$),this.hasRef||null===(et=(ee=this.timerId).unref)||void 0===et||et.call(ee)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let $=Math.min(this.nextDelay*this.multiplier,this.maxDelay),ee=$*this.jitter;this.nextDelay=$+es(-ee,ee)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let $=new Date,ee=this.startTime;ee.setMilliseconds(ee.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),$<ee?this.runTimer(ee.getTime()-$.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var $,ee;this.hasRef=!0,null===(ee=($=this.timerId).ref)||void 0===ee||ee.call($)}unref(){var $,ee;this.hasRef=!1,null===(ee=($=this.timerId).unref)||void 0===ee||ee.call($)}getEndTime(){return this.endTime}}ee.BackoffTimeout=eo},8931:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.CallCredentials=void 0;let er=et(2252);function en($){return"getRequestHeaders"in $&&"function"==typeof $.getRequestHeaders}class ei{static createFromMetadataGenerator($){return new eo($)}static createFromGoogleCredential($){return ei.createFromMetadataGenerator((ee,et)=>{let ei;(ei=en($)?$.getRequestHeaders(ee.service_url):new Promise((et,er)=>{$.getRequestMetadata(ee.service_url,($,ee)=>{if($){er($);return}if(!ee){er(Error("Headers not set by metadata plugin"));return}et(ee)})})).then($=>{let ee=new er.Metadata;for(let et of Object.keys($))ee.add(et,$[et]);et(null,ee)},$=>{et($)})})}static createEmpty(){return new eu}}ee.CallCredentials=ei;class es extends ei{constructor($){super(),this.creds=$}async generateMetadata($){let ee=new er.Metadata;for(let et of(await Promise.all(this.creds.map(ee=>ee.generateMetadata($)))))ee.merge(et);return ee}compose($){return new es(this.creds.concat([$]))}_equals($){return this===$||$ instanceof es&&this.creds.every((ee,et)=>ee._equals($.creds[et]))}}class eo extends ei{constructor($){super(),this.metadataGenerator=$}generateMetadata($){return new Promise((ee,et)=>{this.metadataGenerator($,($,er)=>{void 0!==er?ee(er):et($)})})}compose($){return new es([this,$])}_equals($){return this===$||$ instanceof eo&&this.metadataGenerator===$.metadataGenerator}}class eu extends ei{generateMetadata($){return Promise.resolve(new er.Metadata)}compose($){return $}_equals($){return $ instanceof eu}}},6749:($,ee)=>{"use strict";function et($){return void 0!==$.onReceiveMetadata&&1===$.onReceiveMetadata.length}Object.defineProperty(ee,"__esModule",{value:!0}),ee.InterceptingListenerImpl=ee.isInterceptingListener=void 0,ee.isInterceptingListener=et;class er{constructor($,ee){this.listener=$,this.nextListener=ee,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata($){this.processingMetadata=!0,this.listener.onReceiveMetadata($,$=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata($),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage($){this.processingMessage=!0,this.listener.onReceiveMessage($,$=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=$,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage($),this.processPendingStatus())})}onReceiveStatus($){this.listener.onReceiveStatus($,$=>{this.processingMetadata||this.processingMessage?this.pendingStatus=$:this.nextListener.onReceiveStatus($)})}}ee.InterceptingListenerImpl=er},8445:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.getNextCallNumber=void 0;let et=0;function er(){return et++}ee.getNextCallNumber=er},8439:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.ClientDuplexStreamImpl=ee.ClientWritableStreamImpl=ee.ClientReadableStreamImpl=ee.ClientUnaryCallImpl=ee.callErrorFromStatus=void 0;let er=et(2361),en=et(2781),ei=et(2678);function es($,ee){let et=`${$.code} ${ei.Status[$.code]}: ${$.details}`,er=Error(et),en=`${er.stack}
for call at
${ee}`;return Object.assign(Error(et),$,{stack:en})}ee.callErrorFromStatus=es;class eo extends er.EventEmitter{constructor(){super()}cancel(){var $;null===($=this.call)||void 0===$||$.cancelWithStatus(ei.Status.CANCELLED,"Cancelled on client")}getPeer(){var $,ee;return null!==(ee=null===($=this.call)||void 0===$?void 0:$.getPeer())&&void 0!==ee?ee:"unknown"}}ee.ClientUnaryCallImpl=eo;class eu extends en.Readable{constructor($){super({objectMode:!0}),this.deserialize=$}cancel(){var $;null===($=this.call)||void 0===$||$.cancelWithStatus(ei.Status.CANCELLED,"Cancelled on client")}getPeer(){var $,ee;return null!==(ee=null===($=this.call)||void 0===$?void 0:$.getPeer())&&void 0!==ee?ee:"unknown"}_read($){var ee;null===(ee=this.call)||void 0===ee||ee.startRead()}}ee.ClientReadableStreamImpl=eu;class eh extends en.Writable{constructor($){super({objectMode:!0}),this.serialize=$}cancel(){var $;null===($=this.call)||void 0===$||$.cancelWithStatus(ei.Status.CANCELLED,"Cancelled on client")}getPeer(){var $,ee;return null!==(ee=null===($=this.call)||void 0===$?void 0:$.getPeer())&&void 0!==ee?ee:"unknown"}_write($,ee,et){var er;let en={callback:et},ei=Number(ee);Number.isNaN(ei)||(en.flags=ei),null===(er=this.call)||void 0===er||er.sendMessageWithContext(en,$)}_final($){var ee;null===(ee=this.call)||void 0===ee||ee.halfClose(),$()}}ee.ClientWritableStreamImpl=eh;class ef extends en.Duplex{constructor($,ee){super({objectMode:!0}),this.serialize=$,this.deserialize=ee}cancel(){var $;null===($=this.call)||void 0===$||$.cancelWithStatus(ei.Status.CANCELLED,"Cancelled on client")}getPeer(){var $,ee;return null!==(ee=null===($=this.call)||void 0===$?void 0:$.getPeer())&&void 0!==ee?ee:"unknown"}_read($){var ee;null===(ee=this.call)||void 0===ee||ee.startRead()}_write($,ee,et){var er;let en={callback:et},ei=Number(ee);Number.isNaN(ei)||(en.flags=ei),null===(er=this.call)||void 0===er||er.sendMessageWithContext(en,$)}_final($){var ee;null===(ee=this.call)||void 0===ee||ee.halfClose(),$()}}ee.ClientDuplexStreamImpl=ef},2528:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.ChannelCredentials=void 0;let er=et(4404),en=et(8931),ei=et(3009);function es($,ee){if($&&!($ instanceof Buffer))throw TypeError(`${ee}, if provided, must be a Buffer.`)}class eo{constructor($){this.callCredentials=$||en.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl($,ee,et,en){var eo;if(es($,"Root certificate"),es(ee,"Private key"),es(et,"Certificate chain"),ee&&!et)throw Error("Private key must be given with accompanying certificate chain");if(!ee&&et)throw Error("Certificate chain must be given with accompanying private key");return new eh((0,er.createSecureContext)({ca:null!==(eo=null!=$?$:(0,ei.getDefaultRootsData)())&&void 0!==eo?eo:void 0,key:null!=ee?ee:void 0,cert:null!=et?et:void 0,ciphers:ei.CIPHER_SUITES}),null!=en?en:{})}static createFromSecureContext($,ee){return new eh($,null!=ee?ee:{})}static createInsecure(){return new eu}}ee.ChannelCredentials=eo;class eu extends eo{constructor($){super($)}compose($){throw Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals($){return $ instanceof eu}}class eh extends eo{constructor($,ee){super(),this.secureContext=$,this.verifyOptions=ee,this.connectionOptions={secureContext:$},(null==ee?void 0:ee.checkServerIdentity)&&(this.connectionOptions.checkServerIdentity=ee.checkServerIdentity)}compose($){return new ef(this,this.callCredentials.compose($))}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals($){return this===$||$ instanceof eh&&this.secureContext===$.secureContext&&this.verifyOptions.checkServerIdentity===$.verifyOptions.checkServerIdentity}}class ef extends eo{constructor($,ee){super(ee),this.channelCredentials=$}compose($){let ee=this.callCredentials.compose($);return new ef(this.channelCredentials,ee)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals($){return this===$||$ instanceof ef&&this.channelCredentials._equals($.channelCredentials)&&this.callCredentials._equals($.callCredentials)}}},9387:($,ee)=>{"use strict";function et($,ee){let et=Object.keys($).sort(),er=Object.keys(ee).sort();if(et.length!==er.length)return!1;for(let en=0;en<et.length;en+=1)if(et[en]!==er[en]||$[et[en]]!==ee[er[en]])return!1;return!0}Object.defineProperty(ee,"__esModule",{value:!0}),ee.channelOptionsEqual=ee.recognizedOptions=void 0,ee.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0},ee.channelOptionsEqual=et},6261:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.ChannelImplementation=void 0;let er=et(2528),en=et(1118);class ei{constructor($,ee,et){if("string"!=typeof $)throw TypeError("Channel target must be a string");if(!(ee instanceof er.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(et&&"object"!=typeof et)throw TypeError("Channel options must be an object");this.internalChannel=new en.InternalChannel($,ee,et)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState($){return this.internalChannel.getConnectivityState($)}watchConnectivityState($,ee,et){this.internalChannel.watchConnectivityState($,ee,et)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall($,ee,et,er,en){if("string"!=typeof $)throw TypeError("Channel#createCall: method must be a string");if(!("number"==typeof ee||ee instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall($,ee,et,er,en)}}ee.ChannelImplementation=ei},5993:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.setup=ee.getChannelzServiceDefinition=ee.getChannelzHandlers=ee.unregisterChannelzRef=ee.registerChannelzSocket=ee.registerChannelzServer=ee.registerChannelzSubchannel=ee.registerChannelzChannel=ee.ChannelzCallTracker=ee.ChannelzChildrenTracker=ee.ChannelzTrace=void 0;let er=et(1808),en=et(3955),ei=et(2678),es=et(3906),eo=et(9601),eu=et(5085);function eh($){return{channel_id:$.id,name:$.name}}function ef($){return{subchannel_id:$.id,name:$.name}}function ep($){return{server_id:$.id}}function eg($){return{socket_id:$.id,name:$.name}}let em=32;class ey{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace($,ee,et){let er=new Date;this.events.push({description:ee,severity:$,timestamp:er,childChannel:(null==et?void 0:et.kind)==="channel"?et:void 0,childSubchannel:(null==et?void 0:et.kind)==="subchannel"?et:void 0}),this.events.length>=2*em&&(this.events=this.events.slice(em)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:eL(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map($=>({description:$.description,severity:$.severity,timestamp:eL($.timestamp),channel_ref:$.childChannel?eh($.childChannel):null,subchannel_ref:$.childSubchannel?ef($.childSubchannel):null}))}}}ee.ChannelzTrace=ey;class ev{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild($){var ee,et,er;switch($.kind){case"channel":{let et=null!==(ee=this.channelChildren.get($.id))&&void 0!==ee?ee:{ref:$,count:0};et.count+=1,this.channelChildren.set($.id,et);break}case"subchannel":{let ee=null!==(et=this.subchannelChildren.get($.id))&&void 0!==et?et:{ref:$,count:0};ee.count+=1,this.subchannelChildren.set($.id,ee);break}case"socket":{let ee=null!==(er=this.socketChildren.get($.id))&&void 0!==er?er:{ref:$,count:0};ee.count+=1,this.socketChildren.set($.id,ee)}}}unrefChild($){switch($.kind){case"channel":{let ee=this.channelChildren.get($.id);void 0!==ee&&(ee.count-=1,0===ee.count?this.channelChildren.delete($.id):this.channelChildren.set($.id,ee));break}case"subchannel":{let ee=this.subchannelChildren.get($.id);void 0!==ee&&(ee.count-=1,0===ee.count?this.subchannelChildren.delete($.id):this.subchannelChildren.set($.id,ee));break}case"socket":{let ee=this.socketChildren.get($.id);void 0!==ee&&(ee.count-=1,0===ee.count?this.socketChildren.delete($.id):this.socketChildren.set($.id,ee))}}}getChildLists(){let $=[];for(let{ref:ee}of this.channelChildren.values())$.push(ee);let ee=[];for(let{ref:$}of this.subchannelChildren.values())ee.push($);let et=[];for(let{ref:$}of this.socketChildren.values())et.push($);return{channels:$,subchannels:ee,sockets:et}}}ee.ChannelzChildrenTracker=ev;class eS{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}}ee.ChannelzCallTracker=eS;let eT=1;function ew(){return eT++}let eE=[],eC=[],e_=[],eR=[];function ex($,ee,et){let er=ew(),en={id:er,name:$,kind:"channel"};return et&&(eE[er]={ref:en,getInfo:ee}),en}function eI($,ee,et){let er=ew(),en={id:er,name:$,kind:"subchannel"};return et&&(eC[er]={ref:en,getInfo:ee}),en}function eP($,ee){let et=ew(),er={id:et,kind:"server"};return ee&&(e_[et]={ref:er,getInfo:$}),er}function eA($,ee,et){let er=ew(),en={id:er,name:$,kind:"socket"};return et&&(eR[er]={ref:en,getInfo:ee}),en}function eO($){switch($.kind){case"channel":delete eE[$.id];return;case"subchannel":delete eC[$.id];return;case"server":delete e_[$.id];return;case"socket":delete eR[$.id];return}}function eD($){let ee=Number.parseInt($,16);return[ee/256|0,ee%256]}function eN($){return""===$?[]:[].concat(...$.split(":").map($=>eD($)))}function ek($){if((0,er.isIPv4)($))return Buffer.from(Uint8Array.from($.split(".").map($=>Number.parseInt($))));if(!(0,er.isIPv6)($))return null;{let ee,et;let er=$.indexOf("::");-1===er?(ee=$,et=""):(ee=$.substring(0,er),et=$.substring(er+2));let en=Buffer.from(eN(ee)),ei=Buffer.from(eN(et)),es=Buffer.alloc(16-en.length-ei.length,0);return Buffer.concat([en,es,ei])}}function eM($){switch($){case en.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case en.ConnectivityState.IDLE:return{state:"IDLE"};case en.ConnectivityState.READY:return{state:"READY"};case en.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case en.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function eL($){if(!$)return null;let ee=$.getTime();return{seconds:ee/1e3|0,nanos:ee%1e3*1e6}}function ej($){let ee=$.getInfo();return{ref:eh($.ref),data:{target:ee.target,state:eM(ee.state),calls_started:ee.callTracker.callsStarted,calls_succeeded:ee.callTracker.callsSucceeded,calls_failed:ee.callTracker.callsFailed,last_call_started_timestamp:eL(ee.callTracker.lastCallStartedTimestamp),trace:ee.trace.getTraceMessage()},channel_ref:ee.children.channels.map($=>eh($)),subchannel_ref:ee.children.subchannels.map($=>ef($))}}function eB($,ee){let et=Number.parseInt($.request.channel_id),er=eE[et];if(void 0===er){ee({code:ei.Status.NOT_FOUND,details:"No channel data found for id "+et});return}ee(null,{channel:ej(er)})}function eF($,ee){let et=Number.parseInt($.request.max_results),er=[],en=Number.parseInt($.request.start_channel_id);for(;en<eE.length;en++){let $=eE[en];if(void 0!==$&&(er.push(ej($)),er.length>=et))break}ee(null,{channel:er,end:en>=e_.length})}function eV($){let ee=$.getInfo();return{ref:ep($.ref),data:{calls_started:ee.callTracker.callsStarted,calls_succeeded:ee.callTracker.callsSucceeded,calls_failed:ee.callTracker.callsFailed,last_call_started_timestamp:eL(ee.callTracker.lastCallStartedTimestamp),trace:ee.trace.getTraceMessage()},listen_socket:ee.listenerChildren.sockets.map($=>eg($))}}function eU($,ee){let et=Number.parseInt($.request.server_id),er=e_[et];if(void 0===er){ee({code:ei.Status.NOT_FOUND,details:"No server data found for id "+et});return}ee(null,{server:eV(er)})}function ez($,ee){let et=Number.parseInt($.request.max_results),er=[],en=Number.parseInt($.request.start_server_id);for(;en<e_.length;en++){let $=e_[en];if(void 0!==$&&(er.push(eV($)),er.length>=et))break}ee(null,{server:er,end:en>=e_.length})}function eq($,ee){let et=Number.parseInt($.request.subchannel_id),er=eC[et];if(void 0===er){ee({code:ei.Status.NOT_FOUND,details:"No subchannel data found for id "+et});return}let en=er.getInfo();ee(null,{subchannel:{ref:ef(er.ref),data:{target:en.target,state:eM(en.state),calls_started:en.callTracker.callsStarted,calls_succeeded:en.callTracker.callsSucceeded,calls_failed:en.callTracker.callsFailed,last_call_started_timestamp:eL(en.callTracker.lastCallStartedTimestamp),trace:en.trace.getTraceMessage()},socket_ref:en.children.sockets.map($=>eg($))}})}function eH($){var ee;return(0,es.isTcpSubchannelAddress)($)?{address:"tcpip_address",tcpip_address:{ip_address:null!==(ee=ek($.host))&&void 0!==ee?ee:void 0,port:$.port}}:{address:"uds_address",uds_address:{filename:$.path}}}function e$($,ee){var et,er,en,es,eo;let eu=Number.parseInt($.request.socket_id),eh=eR[eu];if(void 0===eh){ee({code:ei.Status.NOT_FOUND,details:"No socket data found for id "+eu});return}let ef=eh.getInfo(),ep=ef.security?{model:"tls",tls:{cipher_suite:ef.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:null!==(et=ef.security.cipherSuiteStandardName)&&void 0!==et?et:void 0,other_name:null!==(er=ef.security.cipherSuiteOtherName)&&void 0!==er?er:void 0,local_certificate:null!==(en=ef.security.localCertificate)&&void 0!==en?en:void 0,remote_certificate:null!==(es=ef.security.remoteCertificate)&&void 0!==es?es:void 0}}:null;ee(null,{socket:{ref:eg(eh.ref),local:ef.localAddress?eH(ef.localAddress):null,remote:ef.remoteAddress?eH(ef.remoteAddress):null,remote_name:null!==(eo=ef.remoteName)&&void 0!==eo?eo:void 0,security:ep,data:{keep_alives_sent:ef.keepAlivesSent,streams_started:ef.streamsStarted,streams_succeeded:ef.streamsSucceeded,streams_failed:ef.streamsFailed,last_local_stream_created_timestamp:eL(ef.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:eL(ef.lastRemoteStreamCreatedTimestamp),messages_received:ef.messagesReceived,messages_sent:ef.messagesSent,last_message_received_timestamp:eL(ef.lastMessageReceivedTimestamp),last_message_sent_timestamp:eL(ef.lastMessageSentTimestamp),local_flow_control_window:ef.localFlowControlWindow?{value:ef.localFlowControlWindow}:null,remote_flow_control_window:ef.remoteFlowControlWindow?{value:ef.remoteFlowControlWindow}:null}}})}function eG($,ee){let et=Number.parseInt($.request.server_id),er=e_[et];if(void 0===er){ee({code:ei.Status.NOT_FOUND,details:"No server data found for id "+et});return}let en=Number.parseInt($.request.start_socket_id),es=Number.parseInt($.request.max_results),eo=er.getInfo().sessionChildren.sockets.sort(($,ee)=>$.id-ee.id),eu=[],eh=0;for(;eh<eo.length&&(!(eo[eh].id>=en)||(eu.push(eg(eo[eh])),!(eu.length>=es)));eh++);ee(null,{socket_ref:eu,end:eh>=eo.length})}function eW(){return{GetChannel:eB,GetTopChannels:eF,GetServer:eU,GetServers:ez,GetSubchannel:eq,GetSocket:e$,GetServerSockets:eG}}ee.registerChannelzChannel=ex,ee.registerChannelzSubchannel=eI,ee.registerChannelzServer=eP,ee.registerChannelzSocket=eA,ee.unregisterChannelzRef=eO,ee.getChannelzHandlers=eW;let eK=null;function eQ(){if(eK)return eK;let $=(0,et(8715).J_)("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return eK=(0,eu.loadPackageDefinition)($).grpc.channelz.v1.Channelz.service}function eY(){(0,eo.registerAdminService)(eQ,eW)}ee.getChannelzServiceDefinition=eQ,ee.setup=eY},8601:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.getInterceptingCall=ee.InterceptingCall=ee.RequesterBuilder=ee.ListenerBuilder=ee.InterceptorConfigurationError=void 0;let er=et(2252),en=et(6749),ei=et(2678),es=et(5437);class eo extends Error{constructor($){super($),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,eo)}}ee.InterceptorConfigurationError=eo;class eu{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata($){return this.metadata=$,this}withOnReceiveMessage($){return this.message=$,this}withOnReceiveStatus($){return this.status=$,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}}ee.ListenerBuilder=eu;class eh{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart($){return this.start=$,this}withSendMessage($){return this.message=$,this}withHalfClose($){return this.halfClose=$,this}withCancel($){return this.cancel=$,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}}ee.RequesterBuilder=eh;let ef={onReceiveMetadata:($,ee)=>{ee($)},onReceiveMessage:($,ee)=>{ee($)},onReceiveStatus:($,ee)=>{ee($)}},ep={start:($,ee,et)=>{et($,ee)},sendMessage:($,ee)=>{ee($)},halfClose:$=>{$()},cancel:$=>{$()}};class eg{constructor($,ee){var et,er,en,ei;this.nextCall=$,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,ee?this.requester={start:null!==(et=ee.start)&&void 0!==et?et:ep.start,sendMessage:null!==(er=ee.sendMessage)&&void 0!==er?er:ep.sendMessage,halfClose:null!==(en=ee.halfClose)&&void 0!==en?en:ep.halfClose,cancel:null!==(ei=ee.cancel)&&void 0!==ei?ei:ep.cancel}:this.requester=ep}cancelWithStatus($,ee){this.requester.cancel(()=>{this.nextCall.cancelWithStatus($,ee)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start($,ee){var et,er,ei,es,eo,eu;let eh={onReceiveMetadata:null!==(er=null===(et=null==ee?void 0:ee.onReceiveMetadata)||void 0===et?void 0:et.bind(ee))&&void 0!==er?er:$=>{},onReceiveMessage:null!==(es=null===(ei=null==ee?void 0:ee.onReceiveMessage)||void 0===ei?void 0:ei.bind(ee))&&void 0!==es?es:$=>{},onReceiveStatus:null!==(eu=null===(eo=null==ee?void 0:ee.onReceiveStatus)||void 0===eo?void 0:eo.bind(ee))&&void 0!==eu?eu:$=>{}};this.processingMetadata=!0,this.requester.start($,eh,($,ee)=>{var et,er,ei;let es;if(this.processingMetadata=!1,(0,en.isInterceptingListener)(ee))es=ee;else{let $={onReceiveMetadata:null!==(et=ee.onReceiveMetadata)&&void 0!==et?et:ef.onReceiveMetadata,onReceiveMessage:null!==(er=ee.onReceiveMessage)&&void 0!==er?er:ef.onReceiveMessage,onReceiveStatus:null!==(ei=ee.onReceiveStatus)&&void 0!==ei?ei:ef.onReceiveStatus};es=new en.InterceptingListenerImpl($,eh)}this.nextCall.start($,es),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext($,ee){this.processingMessage=!0,this.requester.sendMessage(ee,et=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=$,this.pendingMessage=ee):(this.nextCall.sendMessageWithContext($,et),this.processPendingHalfClose())})}sendMessage($){this.sendMessageWithContext({},$)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}}function em($,ee,et){var er,en;let ei=null!==(er=et.deadline)&&void 0!==er?er:1/0,es=et.host,eo=null!==(en=et.parent)&&void 0!==en?en:null,eu=et.propagate_flags,eh=et.credentials,ef=$.createCall(ee,ei,es,eo,eu);return eh&&ef.setCredentials(eh),ef}ee.InterceptingCall=eg;class ey{constructor($,ee){this.call=$,this.methodDefinition=ee}cancelWithStatus($,ee){this.call.cancelWithStatus($,ee)}getPeer(){return this.call.getPeer()}sendMessageWithContext($,ee){let et;try{et=this.methodDefinition.requestSerialize(ee)}catch($){this.call.cancelWithStatus(ei.Status.INTERNAL,`Request message serialization failure: ${(0,es.getErrorMessage)($)}`);return}this.call.sendMessageWithContext($,et)}sendMessage($){this.sendMessageWithContext({},$)}start($,ee){let et=null;this.call.start($,{onReceiveMetadata:$=>{var et;null===(et=null==ee?void 0:ee.onReceiveMetadata)||void 0===et||et.call(ee,$)},onReceiveMessage:$=>{var en;let eo;try{eo=this.methodDefinition.responseDeserialize($)}catch($){et={code:ei.Status.INTERNAL,details:`Response message parsing error: ${(0,es.getErrorMessage)($)}`,metadata:new er.Metadata},this.call.cancelWithStatus(et.code,et.details);return}null===(en=null==ee?void 0:ee.onReceiveMessage)||void 0===en||en.call(ee,eo)},onReceiveStatus:$=>{var er,en;et?null===(er=null==ee?void 0:ee.onReceiveStatus)||void 0===er||er.call(ee,et):null===(en=null==ee?void 0:ee.onReceiveStatus)||void 0===en||en.call(ee,$)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}}class ev extends ey{constructor($,ee){super($,ee)}start($,ee){var et,er;let en=!1,ei={onReceiveMetadata:null!==(er=null===(et=null==ee?void 0:ee.onReceiveMetadata)||void 0===et?void 0:et.bind(ee))&&void 0!==er?er:$=>{},onReceiveMessage:$=>{var et;en=!0,null===(et=null==ee?void 0:ee.onReceiveMessage)||void 0===et||et.call(ee,$)},onReceiveStatus:$=>{var et,er;en||null===(et=null==ee?void 0:ee.onReceiveMessage)||void 0===et||et.call(ee,null),null===(er=null==ee?void 0:ee.onReceiveStatus)||void 0===er||er.call(ee,$)}};super.start($,ei),this.call.startRead()}}class eS extends ey{}function eT($,ee,et){let er=em($,et.path,ee);return et.responseStream?new eS(er,et):new ev(er,et)}function ew($,ee,et,er){if($.clientInterceptors.length>0&&$.clientInterceptorProviders.length>0)throw new eo("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if($.callInterceptors.length>0&&$.callInterceptorProviders.length>0)throw new eo("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let en=[];en=$.callInterceptors.length>0||$.callInterceptorProviders.length>0?[].concat($.callInterceptors,$.callInterceptorProviders.map($=>$(ee))).filter($=>$):[].concat($.clientInterceptors,$.clientInterceptorProviders.map($=>$(ee))).filter($=>$);let ei=Object.assign({},et,{method_definition:ee});return en.reduceRight(($,ee)=>et=>ee(et,$),$=>eT(er,$,ee))(ei)}ee.getInterceptingCall=ew},9800:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.Client=void 0;let er=et(8439),en=et(6261),ei=et(3955),es=et(2678),eo=et(2252),eu=et(8601),eh=Symbol(),ef=Symbol(),ep=Symbol(),eg=Symbol();function em($){return"function"==typeof $}function ey($){return $.stack.split("\n").slice(1).join("\n")}class ev{constructor($,ee,et={}){var er,ei;if(et=Object.assign({},et),this[ef]=null!==(er=et.interceptors)&&void 0!==er?er:[],delete et.interceptors,this[ep]=null!==(ei=et.interceptor_providers)&&void 0!==ei?ei:[],delete et.interceptor_providers,this[ef].length>0&&this[ep].length>0)throw Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[eg]=et.callInvocationTransformer,delete et.callInvocationTransformer,et.channelOverride)this[eh]=et.channelOverride;else if(et.channelFactoryOverride){let er=et.channelFactoryOverride;delete et.channelFactoryOverride,this[eh]=er($,ee,et)}else this[eh]=new en.ChannelImplementation($,ee,et)}close(){this[eh].close()}getChannel(){return this[eh]}waitForReady($,ee){let et=er=>{let en;if(er){ee(Error("Failed to connect before the deadline"));return}try{en=this[eh].getConnectivityState(!0)}catch($){ee(Error("The channel has been closed"));return}if(en===ei.ConnectivityState.READY)ee();else try{this[eh].watchConnectivityState(en,$,et)}catch($){ee(Error("The channel has been closed"))}};setImmediate(et)}checkOptionalUnaryResponseArguments($,ee,et){if(em($))return{metadata:new eo.Metadata,options:{},callback:$};if(em(ee))return $ instanceof eo.Metadata?{metadata:$,options:{},callback:ee}:{metadata:new eo.Metadata,options:$,callback:ee};if(!($ instanceof eo.Metadata&&ee instanceof Object&&em(et)))throw Error("Incorrect arguments passed");return{metadata:$,options:ee,callback:et}}makeUnaryRequest($,ee,et,en,ei,eo,em){var ev,eS;let eT=this.checkOptionalUnaryResponseArguments(ei,eo,em),ew={path:$,requestStream:!1,responseStream:!1,requestSerialize:ee,responseDeserialize:et},eE={argument:en,metadata:eT.metadata,call:new er.ClientUnaryCallImpl,channel:this[eh],methodDefinition:ew,callOptions:eT.options,callback:eT.callback};this[eg]&&(eE=this[eg](eE));let eC=eE.call,e_={clientInterceptors:this[ef],clientInterceptorProviders:this[ep],callInterceptors:null!==(ev=eE.callOptions.interceptors)&&void 0!==ev?ev:[],callInterceptorProviders:null!==(eS=eE.callOptions.interceptor_providers)&&void 0!==eS?eS:[]},eR=(0,eu.getInterceptingCall)(e_,eE.methodDefinition,eE.callOptions,eE.channel);eC.call=eR;let ex=null,eI=!1,eP=Error();return eR.start(eE.metadata,{onReceiveMetadata:$=>{eC.emit("metadata",$)},onReceiveMessage($){null!==ex&&eR.cancelWithStatus(es.Status.INTERNAL,"Too many responses received"),ex=$},onReceiveStatus($){if(!eI){if(eI=!0,$.code===es.Status.OK){if(null===ex){let ee=ey(eP);eE.callback((0,er.callErrorFromStatus)({code:es.Status.INTERNAL,details:"No message received",metadata:$.metadata},ee))}else eE.callback(null,ex)}else{let ee=ey(eP);eE.callback((0,er.callErrorFromStatus)($,ee))}eP=null,eC.emit("status",$)}}}),eR.sendMessage(en),eR.halfClose(),eC}makeClientStreamRequest($,ee,et,en,ei,eo){var em,ev;let eS=this.checkOptionalUnaryResponseArguments(en,ei,eo),eT={path:$,requestStream:!0,responseStream:!1,requestSerialize:ee,responseDeserialize:et},ew={metadata:eS.metadata,call:new er.ClientWritableStreamImpl(ee),channel:this[eh],methodDefinition:eT,callOptions:eS.options,callback:eS.callback};this[eg]&&(ew=this[eg](ew));let eE=ew.call,eC={clientInterceptors:this[ef],clientInterceptorProviders:this[ep],callInterceptors:null!==(em=ew.callOptions.interceptors)&&void 0!==em?em:[],callInterceptorProviders:null!==(ev=ew.callOptions.interceptor_providers)&&void 0!==ev?ev:[]},e_=(0,eu.getInterceptingCall)(eC,ew.methodDefinition,ew.callOptions,ew.channel);eE.call=e_;let eR=null,ex=!1,eI=Error();return e_.start(ew.metadata,{onReceiveMetadata:$=>{eE.emit("metadata",$)},onReceiveMessage($){null!==eR&&e_.cancelWithStatus(es.Status.INTERNAL,"Too many responses received"),eR=$},onReceiveStatus($){if(!ex){if(ex=!0,$.code===es.Status.OK){if(null===eR){let ee=ey(eI);ew.callback((0,er.callErrorFromStatus)({code:es.Status.INTERNAL,details:"No message received",metadata:$.metadata},ee))}else ew.callback(null,eR)}else{let ee=ey(eI);ew.callback((0,er.callErrorFromStatus)($,ee))}eI=null,eE.emit("status",$)}}}),eE}checkMetadataAndOptions($,ee){let et,er;return $ instanceof eo.Metadata?(et=$,er=ee||{}):(er=$||{},et=new eo.Metadata),{metadata:et,options:er}}makeServerStreamRequest($,ee,et,en,ei,eo){var em,ev;let eS=this.checkMetadataAndOptions(ei,eo),eT={path:$,requestStream:!1,responseStream:!0,requestSerialize:ee,responseDeserialize:et},ew={argument:en,metadata:eS.metadata,call:new er.ClientReadableStreamImpl(et),channel:this[eh],methodDefinition:eT,callOptions:eS.options};this[eg]&&(ew=this[eg](ew));let eE=ew.call,eC={clientInterceptors:this[ef],clientInterceptorProviders:this[ep],callInterceptors:null!==(em=ew.callOptions.interceptors)&&void 0!==em?em:[],callInterceptorProviders:null!==(ev=ew.callOptions.interceptor_providers)&&void 0!==ev?ev:[]},e_=(0,eu.getInterceptingCall)(eC,ew.methodDefinition,ew.callOptions,ew.channel);eE.call=e_;let eR=!1,ex=Error();return e_.start(ew.metadata,{onReceiveMetadata($){eE.emit("metadata",$)},onReceiveMessage($){eE.push($)},onReceiveStatus($){if(!eR){if(eR=!0,eE.push(null),$.code!==es.Status.OK){let ee=ey(ex);eE.emit("error",(0,er.callErrorFromStatus)($,ee))}ex=null,eE.emit("status",$)}}}),e_.sendMessage(en),e_.halfClose(),eE}makeBidiStreamRequest($,ee,et,en,ei){var eo,em;let ev=this.checkMetadataAndOptions(en,ei),eS={path:$,requestStream:!0,responseStream:!0,requestSerialize:ee,responseDeserialize:et},eT={metadata:ev.metadata,call:new er.ClientDuplexStreamImpl(ee,et),channel:this[eh],methodDefinition:eS,callOptions:ev.options};this[eg]&&(eT=this[eg](eT));let ew=eT.call,eE={clientInterceptors:this[ef],clientInterceptorProviders:this[ep],callInterceptors:null!==(eo=eT.callOptions.interceptors)&&void 0!==eo?eo:[],callInterceptorProviders:null!==(em=eT.callOptions.interceptor_providers)&&void 0!==em?em:[]},eC=(0,eu.getInterceptingCall)(eE,eT.methodDefinition,eT.callOptions,eT.channel);ew.call=eC;let e_=!1,eR=Error();return eC.start(eT.metadata,{onReceiveMetadata($){ew.emit("metadata",$)},onReceiveMessage($){ew.push($)},onReceiveStatus($){if(!e_){if(e_=!0,ew.push(null),$.code!==es.Status.OK){let ee=ey(eR);ew.emit("error",(0,er.callErrorFromStatus)($,ee))}eR=null,ew.emit("status",$)}}}),ew}}ee.Client=ev},9286:($,ee)=>{"use strict";var et;Object.defineProperty(ee,"__esModule",{value:!0}),ee.CompressionAlgorithms=void 0,function($){$[$.identity=0]="identity",$[$.deflate=1]="deflate",$[$.gzip=2]="gzip"}(et||(ee.CompressionAlgorithms=et={}))},4299:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.CompressionFilterFactory=ee.CompressionFilter=void 0;let er=et(9796),en=et(9286),ei=et(2678),es=et(8152),eo=et(7504),eu=$=>"number"==typeof $&&"string"==typeof en.CompressionAlgorithms[$];class eh{async writeMessage($,ee){let et=$;ee&&(et=await this.compressMessage(et));let er=Buffer.allocUnsafe(et.length+5);return er.writeUInt8(ee?1:0,0),er.writeUInt32BE(et.length,1),et.copy(er,5),er}async readMessage($){let ee=1===$.readUInt8(0),et=$.slice(5);return ee&&(et=await this.decompressMessage(et)),et}}class ef extends eh{async compressMessage($){return $}async writeMessage($,ee){let et=Buffer.allocUnsafe($.length+5);return et.writeUInt8(0,0),et.writeUInt32BE($.length,1),$.copy(et,5),et}decompressMessage($){return Promise.reject(Error('Received compressed message but "grpc-encoding" header was identity'))}}class ep extends eh{compressMessage($){return new Promise((ee,et)=>{er.deflate($,($,er)=>{$?et($):ee(er)})})}decompressMessage($){return new Promise((ee,et)=>{er.inflate($,($,er)=>{$?et($):ee(er)})})}}class eg extends eh{compressMessage($){return new Promise((ee,et)=>{er.gzip($,($,er)=>{$?et($):ee(er)})})}decompressMessage($){return new Promise((ee,et)=>{er.unzip($,($,er)=>{$?et($):ee(er)})})}}class em extends eh{constructor($){super(),this.compressionName=$}compressMessage($){return Promise.reject(Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage($){return Promise.reject(Error(`Compression method not supported: ${this.compressionName}`))}}function ey($){switch($){case"identity":return new ef;case"deflate":return new ep;case"gzip":return new eg;default:return new em($)}}class ev extends es.BaseFilter{constructor($,ee){var et;super(),this.sharedFilterConfig=ee,this.sendCompression=new ef,this.receiveCompression=new ef,this.currentCompressionAlgorithm="identity";let er=$["grpc.default_compression_algorithm"];if(void 0!==er){if(eu(er)){let $=en.CompressionAlgorithms[er],ei=null===(et=ee.serverSupportedEncodingHeader)||void 0===et?void 0:et.split(",");(!ei||ei.includes($))&&(this.currentCompressionAlgorithm=$,this.sendCompression=ey(this.currentCompressionAlgorithm))}else eo.log(ei.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${er}`)}}async sendMetadata($){let ee=await $;return ee.set("grpc-accept-encoding","identity,deflate,gzip"),ee.set("accept-encoding","identity"),"identity"===this.currentCompressionAlgorithm?ee.remove("grpc-encoding"):ee.set("grpc-encoding",this.currentCompressionAlgorithm),ee}receiveMetadata($){let ee=$.get("grpc-encoding");if(ee.length>0){let $=ee[0];"string"==typeof $&&(this.receiveCompression=ey($))}$.remove("grpc-encoding");let et=$.get("grpc-accept-encoding")[0];return et&&(this.sharedFilterConfig.serverSupportedEncodingHeader=et,et.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new ef,this.currentCompressionAlgorithm="identity")),$.remove("grpc-accept-encoding"),$}async sendMessage($){var ee;let et;let er=await $;return et=!(this.sendCompression instanceof ef)&&((null!==(ee=er.flags)&&void 0!==ee?ee:0)&2)==0,{message:await this.sendCompression.writeMessage(er.message,et),flags:er.flags}}async receiveMessage($){return this.receiveCompression.readMessage(await $)}}ee.CompressionFilter=ev;class eS{constructor($,ee){this.options=ee,this.sharedFilterConfig={}}createFilter(){return new ev(this.options,this.sharedFilterConfig)}}ee.CompressionFilterFactory=eS},3955:($,ee)=>{"use strict";var et;Object.defineProperty(ee,"__esModule",{value:!0}),ee.ConnectivityState=void 0,function($){$[$.IDLE=0]="IDLE",$[$.CONNECTING=1]="CONNECTING",$[$.READY=2]="READY",$[$.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",$[$.SHUTDOWN=4]="SHUTDOWN"}(et||(ee.ConnectivityState=et={}))},2678:($,ee)=>{"use strict";var et,er,en;Object.defineProperty(ee,"__esModule",{value:!0}),ee.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=ee.DEFAULT_MAX_SEND_MESSAGE_LENGTH=ee.Propagate=ee.LogVerbosity=ee.Status=void 0,function($){$[$.OK=0]="OK",$[$.CANCELLED=1]="CANCELLED",$[$.UNKNOWN=2]="UNKNOWN",$[$.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$[$.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$[$.NOT_FOUND=5]="NOT_FOUND",$[$.ALREADY_EXISTS=6]="ALREADY_EXISTS",$[$.PERMISSION_DENIED=7]="PERMISSION_DENIED",$[$.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$[$.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$[$.ABORTED=10]="ABORTED",$[$.OUT_OF_RANGE=11]="OUT_OF_RANGE",$[$.UNIMPLEMENTED=12]="UNIMPLEMENTED",$[$.INTERNAL=13]="INTERNAL",$[$.UNAVAILABLE=14]="UNAVAILABLE",$[$.DATA_LOSS=15]="DATA_LOSS",$[$.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(et||(ee.Status=et={})),function($){$[$.DEBUG=0]="DEBUG",$[$.INFO=1]="INFO",$[$.ERROR=2]="ERROR",$[$.NONE=3]="NONE"}(er||(ee.LogVerbosity=er={})),function($){$[$.DEADLINE=1]="DEADLINE",$[$.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",$[$.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",$[$.CANCELLATION=8]="CANCELLATION",$[$.DEFAULTS=65535]="DEFAULTS"}(en||(ee.Propagate=en={})),ee.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1,ee.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4194304},2155:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.restrictControlPlaneStatusCode=void 0;let er=et(2678),en=[er.Status.OK,er.Status.INVALID_ARGUMENT,er.Status.NOT_FOUND,er.Status.ALREADY_EXISTS,er.Status.FAILED_PRECONDITION,er.Status.ABORTED,er.Status.OUT_OF_RANGE,er.Status.DATA_LOSS];function ei($,ee){return en.includes($)?{code:er.Status.INTERNAL,details:`Invalid status from control plane: ${$} ${er.Status[$]} ${ee}`}:{code:$,details:ee}}ee.restrictControlPlaneStatusCode=ei},7931:($,ee)=>{"use strict";function et(...$){let ee=1/0;for(let et of $){let $=et instanceof Date?et.getTime():et;$<ee&&(ee=$)}return ee}Object.defineProperty(ee,"__esModule",{value:!0}),ee.deadlineToString=ee.getRelativeTimeout=ee.getDeadlineTimeoutString=ee.minDeadline=void 0,ee.minDeadline=et;let er=[["m",1],["S",1e3],["M",6e4],["H",36e5]];function en($){let ee=new Date().getTime();$ instanceof Date&&($=$.getTime());let et=Math.max($-ee,0);for(let[$,ee]of er){let er=et/ee;if(er<1e8)return String(Math.ceil(er))+$}throw Error("Deadline is too far in the future")}ee.getDeadlineTimeoutString=en;let ei=2147483647;function es($){let ee=($ instanceof Date?$.getTime():$)-new Date().getTime();return ee<0?0:ee>ei?1/0:ee}function eo($){if($ instanceof Date)return $.toISOString();{let ee=new Date($);return Number.isNaN(ee.getTime())?""+$:ee.toISOString()}}ee.getRelativeTimeout=es,ee.deadlineToString=eo},5330:($,ee)=>{"use strict";function et($){return{seconds:$/1e3|0,nanos:$%1e3*1e6|0}}function er($){return 1e3*$.seconds+$.nanos/1e6|0}function en($){return"number"==typeof $.seconds&&"number"==typeof $.nanos}Object.defineProperty(ee,"__esModule",{value:!0}),ee.isDuration=ee.durationToMs=ee.msToDuration=void 0,ee.msToDuration=et,ee.durationToMs=er,ee.isDuration=en},5437:($,ee)=>{"use strict";function et($){return $ instanceof Error?$.message:String($)}function er($){return"object"==typeof $&&null!==$&&"code"in $&&"number"==typeof $.code?$.code:null}Object.defineProperty(ee,"__esModule",{value:!0}),ee.getErrorCode=ee.getErrorMessage=void 0,ee.getErrorMessage=et,ee.getErrorCode=er},345:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.OutlierDetectionLoadBalancingConfig=ee.BaseSubchannelWrapper=ee.registerAdminService=ee.FilterStackFactory=ee.BaseFilter=ee.PickResultType=ee.QueuePicker=ee.UnavailablePicker=ee.ChildLoadBalancerHandler=ee.subchannelAddressToString=ee.validateLoadBalancingConfig=ee.getFirstUsableConfig=ee.registerLoadBalancerType=ee.createChildChannelControlHelper=ee.BackoffTimeout=ee.durationToMs=ee.uriToString=ee.createResolver=ee.registerResolver=ee.log=ee.trace=void 0;var er=et(7504);Object.defineProperty(ee,"trace",{enumerable:!0,get:function(){return er.trace}}),Object.defineProperty(ee,"log",{enumerable:!0,get:function(){return er.log}});var en=et(492);Object.defineProperty(ee,"registerResolver",{enumerable:!0,get:function(){return en.registerResolver}}),Object.defineProperty(ee,"createResolver",{enumerable:!0,get:function(){return en.createResolver}});var ei=et(8429);Object.defineProperty(ee,"uriToString",{enumerable:!0,get:function(){return ei.uriToString}});var es=et(5330);Object.defineProperty(ee,"durationToMs",{enumerable:!0,get:function(){return es.durationToMs}});var eo=et(4934);Object.defineProperty(ee,"BackoffTimeout",{enumerable:!0,get:function(){return eo.BackoffTimeout}});var eu=et(7176);Object.defineProperty(ee,"createChildChannelControlHelper",{enumerable:!0,get:function(){return eu.createChildChannelControlHelper}}),Object.defineProperty(ee,"registerLoadBalancerType",{enumerable:!0,get:function(){return eu.registerLoadBalancerType}}),Object.defineProperty(ee,"getFirstUsableConfig",{enumerable:!0,get:function(){return eu.getFirstUsableConfig}}),Object.defineProperty(ee,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return eu.validateLoadBalancingConfig}});var eh=et(3906);Object.defineProperty(ee,"subchannelAddressToString",{enumerable:!0,get:function(){return eh.subchannelAddressToString}});var ef=et(982);Object.defineProperty(ee,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return ef.ChildLoadBalancerHandler}});var ep=et(7064);Object.defineProperty(ee,"UnavailablePicker",{enumerable:!0,get:function(){return ep.UnavailablePicker}}),Object.defineProperty(ee,"QueuePicker",{enumerable:!0,get:function(){return ep.QueuePicker}}),Object.defineProperty(ee,"PickResultType",{enumerable:!0,get:function(){return ep.PickResultType}});var eg=et(8152);Object.defineProperty(ee,"BaseFilter",{enumerable:!0,get:function(){return eg.BaseFilter}});var em=et(2472);Object.defineProperty(ee,"FilterStackFactory",{enumerable:!0,get:function(){return em.FilterStackFactory}});var ey=et(9601);Object.defineProperty(ee,"registerAdminService",{enumerable:!0,get:function(){return ey.registerAdminService}});var ev=et(1407);Object.defineProperty(ee,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return ev.BaseSubchannelWrapper}});var eS=et(1433);Object.defineProperty(ee,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return eS.OutlierDetectionLoadBalancingConfig}})},2472:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.FilterStackFactory=ee.FilterStack=void 0;class et{constructor($){this.filters=$}sendMetadata($){let ee=$;for(let $=0;$<this.filters.length;$++)ee=this.filters[$].sendMetadata(ee);return ee}receiveMetadata($){let ee=$;for(let $=this.filters.length-1;$>=0;$--)ee=this.filters[$].receiveMetadata(ee);return ee}sendMessage($){let ee=$;for(let $=0;$<this.filters.length;$++)ee=this.filters[$].sendMessage(ee);return ee}receiveMessage($){let ee=$;for(let $=this.filters.length-1;$>=0;$--)ee=this.filters[$].receiveMessage(ee);return ee}receiveTrailers($){let ee=$;for(let $=this.filters.length-1;$>=0;$--)ee=this.filters[$].receiveTrailers(ee);return ee}push($){this.filters.unshift(...$)}getFilters(){return this.filters}}ee.FilterStack=et;class er{constructor($){this.factories=$}push($){this.factories.unshift(...$)}clone(){return new er([...this.factories])}createFilter(){return new et(this.factories.map($=>$.createFilter()))}}ee.FilterStackFactory=er},8152:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.BaseFilter=void 0;class et{async sendMetadata($){return $}receiveMetadata($){return $}async sendMessage($){return $}async receiveMessage($){return $}receiveTrailers($){return $}}ee.BaseFilter=et},2039:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.getProxiedConnection=ee.mapProxyName=void 0;let er=et(7504),en=et(2678),ei=et(492),es=et(3685),eo=et(4404),eu=et(7504),eh=et(3906),ef=et(8429),ep=et(7310),eg=et(4605),em="proxy";function ey($){eu.trace(en.LogVerbosity.DEBUG,em,$)}function ev(){let $,ee="",et="";if(process.env.grpc_proxy)et="grpc_proxy",ee=process.env.grpc_proxy;else if(process.env.https_proxy)et="https_proxy",ee=process.env.https_proxy;else{if(!process.env.http_proxy)return{};et="http_proxy",ee=process.env.http_proxy}try{$=new ep.URL(ee)}catch($){return(0,er.log)(en.LogVerbosity.ERROR,`cannot parse value of "${et}" env var`),{}}if("http:"!==$.protocol)return(0,er.log)(en.LogVerbosity.ERROR,`"${$.protocol}" scheme not supported in proxy URI`),{};let ei=null;$.username&&($.password?((0,er.log)(en.LogVerbosity.INFO,"userinfo found in proxy URI"),ei=`${$.username}:${$.password}`):ei=$.username);let es=$.hostname,eo=$.port;""===eo&&(eo="80");let eu={address:`${es}:${eo}`};return ei&&(eu.creds=ei),ey("Proxy server "+eu.address+" set by environment variable "+et),eu}function eS(){let $=process.env.no_grpc_proxy,ee="no_grpc_proxy";return($||($=process.env.no_proxy,ee="no_proxy"),$)?(ey("No proxy server list set by environment variable "+ee),$.split(",")):[]}function eT($,ee){var et;let er={target:$,extraOptions:{}};if((null!==(et=ee["grpc.enable_http_proxy"])&&void 0!==et?et:1)===0||"unix"===$.scheme)return er;let en=ev();if(!en.address)return er;let ei=(0,ef.splitHostPort)($.path);if(!ei)return er;let es=ei.host;for(let ee of eS())if(ee===es)return ey("Not using proxy for target in no_proxy list: "+(0,ef.uriToString)($)),er;let eo={"grpc.http_connect_target":(0,ef.uriToString)($)};return en.creds&&(eo["grpc.http_connect_creds"]=en.creds),{target:{scheme:"dns",path:en.address},extraOptions:eo}}function ew($,ee,et){var eu;if(!("grpc.http_connect_target"in ee))return Promise.resolve({});let ep=ee["grpc.http_connect_target"],em=(0,ef.parseUri)(ep);if(null===em)return Promise.resolve({});let ev=(0,ef.splitHostPort)(em.path);if(null===ev)return Promise.resolve({});let eS=`${ev.host}:${null!==(eu=ev.port)&&void 0!==eu?eu:eg.DEFAULT_PORT}`,eT={method:"CONNECT",path:eS},ew={Host:eS};(0,eh.isTcpSubchannelAddress)($)?(eT.host=$.host,eT.port=$.port):eT.socketPath=$.path,"grpc.http_connect_creds"in ee&&(ew["Proxy-Authorization"]="Basic "+Buffer.from(ee["grpc.http_connect_creds"]).toString("base64")),eT.headers=ew;let eE=(0,eh.subchannelAddressToString)($);return ey("Using proxy "+eE+" to connect to "+eT.path),new Promise(($,ee)=>{let eu=es.request(eT);eu.once("connect",(es,eh,ep)=>{var eg;if(eu.removeAllListeners(),eh.removeAllListeners(),200===es.statusCode){if(ey("Successfully connected to "+eT.path+" through proxy "+eE),"secureContext"in et){let er=(0,ei.getDefaultAuthority)(em),en=(0,ef.splitHostPort)(er),es=null!==(eg=null==en?void 0:en.host)&&void 0!==eg?eg:er,eu=eo.connect(Object.assign({host:es,servername:es,socket:eh},et),()=>{ey("Successfully established a TLS connection to "+eT.path+" through proxy "+eE),$({socket:eu,realTarget:em})});eu.on("error",$=>{ey("Failed to establish a TLS connection to "+eT.path+" through proxy "+eE+" with error "+$.message),ee()})}else ey("Successfully established a plaintext connection to "+eT.path+" through proxy "+eE),$({socket:eh,realTarget:em})}else(0,er.log)(en.LogVerbosity.ERROR,"Failed to connect to "+eT.path+" through proxy "+eE+" with status "+es.statusCode),ee()}),eu.once("error",$=>{eu.removeAllListeners(),(0,er.log)(en.LogVerbosity.ERROR,"Failed to connect to proxy "+eE+" with error "+$.message),ee()}),eu.end()})}ee.mapProxyName=eT,ee.getProxiedConnection=ew},2165:($,ee,et)=>{"use strict";eS={value:!0},eS=eS=eS=eS=eS=eS=eS=eS=eS=eS=eS=eS=eS=eS=eS=eS=eS=eS=eS=eS=eS=eS=eS=ee.Rz=eS=eS=eS=eS=eS=eS=ee.SF=ee.K9=void 0;let er=et(8931);eS={enumerable:!0,get:function(){return er.CallCredentials}};let en=et(6261);eS={enumerable:!0,get:function(){return en.ChannelImplementation}};let ei=et(9286);eS={enumerable:!0,get:function(){return ei.CompressionAlgorithms}};let es=et(3955);eS={enumerable:!0,get:function(){return es.ConnectivityState}};let eo=et(2528);eS={enumerable:!0,get:function(){return eo.ChannelCredentials}};let eu=et(9800);eS={enumerable:!0,get:function(){return eu.Client}};let eh=et(2678);eS={enumerable:!0,get:function(){return eh.LogVerbosity}},eS={enumerable:!0,get:function(){return eh.Status}},eS={enumerable:!0,get:function(){return eh.Propagate}};let ef=et(7504),ep=et(5085);Object.defineProperty(ee,"Rz",{enumerable:!0,get:function(){return ep.loadPackageDefinition}}),eS={enumerable:!0,get:function(){return ep.makeClientConstructor}},eS={enumerable:!0,get:function(){return ep.makeClientConstructor}};let eg=et(2252);Object.defineProperty(ee,"SF",{enumerable:!0,get:function(){return eg.Metadata}});let em=et(7691);eS={enumerable:!0,get:function(){return em.Server}};let ey=et(4181);eS={enumerable:!0,get:function(){return ey.ServerCredentials}};let ev=et(9932);eS={enumerable:!0,get:function(){return ev.StatusBuilder}},ee.K9={combineChannelCredentials:($,...ee)=>ee.reduce(($,ee)=>$.compose(ee),$),combineCallCredentials:($,...ee)=>ee.reduce(($,ee)=>$.compose(ee),$),createInsecure:eo.ChannelCredentials.createInsecure,createSsl:eo.ChannelCredentials.createSsl,createFromSecureContext:eo.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:er.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:er.CallCredentials.createFromGoogleCredential,createEmpty:er.CallCredentials.createEmpty},eS=$=>$.close(),eS=($,ee,et)=>$.waitForReady(ee,et),eS=($,ee)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},eS=($,ee,et)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},eS=$=>{ef.setLogger($)},eS=$=>{ef.setLoggerVerbosity($)},eS=$=>eu.Client.prototype.getChannel.call($);var eS,eT=et(8601);eS={enumerable:!0,get:function(){return eT.ListenerBuilder}},eS={enumerable:!0,get:function(){return eT.RequesterBuilder}},eS={enumerable:!0,get:function(){return eT.InterceptingCall}},eS={enumerable:!0,get:function(){return eT.InterceptorConfigurationError}};var ew=et(5993);eS={enumerable:!0,get:function(){return ew.getChannelzServiceDefinition}},eS={enumerable:!0,get:function(){return ew.getChannelzHandlers}};var eE=et(9601);eS={enumerable:!0,get:function(){return eE.addAdminServicesToServer}},eS=et(345);let eC=et(4605),e_=et(5862),eR=et(1665),ex=et(6170),eI=et(2255),eP=et(1433),eA=et(5993);(()=>{eC.setup(),e_.setup(),eR.setup(),ex.setup(),eI.setup(),eP.setup(),eA.setup()})()},1118:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.InternalChannel=void 0;let er=et(2528),en=et(2380),ei=et(2328),es=et(7064),eo=et(2678),eu=et(2472),eh=et(4299),ef=et(492),ep=et(7504),eg=et(5538),em=et(2039),ey=et(8429),ev=et(3955),eS=et(5993),eT=et(980),ew=et(7931),eE=et(3003),eC=et(8445),e_=et(2155),eR=et(4398),ex=et(1407),eI=2147483647,eP=1e3,eA=18e5,eO=new Map,eD=16777216,eN=1048576;class ek extends ex.BaseSubchannelWrapper{constructor($,ee){super($),this.channel=ee,this.refCount=0,this.subchannelStateListener=($,et,er,en)=>{ee.throttleKeepalive(en)},$.addConnectivityStateListener(this.subchannelStateListener)}ref(){this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}}class eM{constructor($,ee,et){var eT,ew,eE,eC,ex,eM,eL,ej;if(this.credentials=ee,this.options=et,this.connectivityState=ev.ConnectivityState.IDLE,this.currentPicker=new es.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.callTracker=new eS.ChannelzCallTracker,this.childrenTracker=new eS.ChannelzChildrenTracker,"string"!=typeof $)throw TypeError("Channel target must be a string");if(!(ee instanceof er.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(et&&"object"!=typeof et)throw TypeError("Channel options must be an object");this.originalTarget=$;let eB=(0,ey.parseUri)($);if(null===eB)throw Error(`Could not parse target name "${$}"`);let eF=(0,ef.mapUriDefaultScheme)(eB);if(null===eF)throw Error(`Could not find a default scheme for target name "${$}"`);this.callRefTimer=setInterval(()=>{},eI),null===(ew=(eT=this.callRefTimer).unref)||void 0===ew||ew.call(eT),0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new eS.ChannelzTrace,this.channelzRef=(0,eS.registerChannelzChannel)($,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,ef.getDefaultAuthority)(eF);let eV=(0,em.mapProxyName)(eF,et);this.target=eV.target,this.options=Object.assign({},this.options,eV.extraOptions),this.subchannelPool=(0,ei.getSubchannelPool)((null!==(eE=et["grpc.use_local_subchannel_pool"])&&void 0!==eE?eE:0)===0),this.retryBufferTracker=new eR.MessageBufferTracker(null!==(eC=et["grpc.retry_buffer_size"])&&void 0!==eC?eC:eD,null!==(ex=et["grpc.per_rpc_retry_buffer_size"])&&void 0!==ex?ex:eN),this.keepaliveTime=null!==(eM=et["grpc.keepalive_time_ms"])&&void 0!==eM?eM:-1,this.idleTimeoutMs=Math.max(null!==(eL=et["grpc.client_idle_timeout_ms"])&&void 0!==eL?eL:eA,eP);let eU={createSubchannel:($,ee)=>{let et=this.subchannelPool.getOrCreateSubchannel(this.target,$,Object.assign({},this.options,ee),this.credentials);et.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",et.getChannelzRef());let er=new ek(et,this);return this.wrappedSubchannels.add(er),er},updateState:($,ee)=>{this.currentPicker=ee;let et=this.pickQueue.slice();for(let $ of(this.pickQueue=[],et.length>0&&this.callRefTimerUnref(),et))$.doPick();this.updateState($)},requestReresolution:()=>{throw Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:$=>{this.channelzEnabled&&this.childrenTracker.refChild($)},removeChannelzChild:$=>{this.channelzEnabled&&this.childrenTracker.unrefChild($)}};this.resolvingLoadBalancer=new en.ResolvingLoadBalancer(this.target,eU,et,($,ee)=>{$.retryThrottling?eO.set(this.getTarget(),new eR.RetryThrottler($.retryThrottling.maxTokens,$.retryThrottling.tokenRatio,eO.get(this.getTarget()))):eO.delete(this.getTarget()),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=ee,this.currentResolutionError=null,process.nextTick(()=>{let $=this.configSelectionQueue;for(let ee of(this.configSelectionQueue=[],$.length>0&&this.callRefTimerUnref(),$))ee.getConfig()})},$=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+$.code+' and details "'+$.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),null===this.configSelector&&(this.currentResolutionError=Object.assign(Object.assign({},(0,e_.restrictControlPlaneStatusCode)($.code,$.details)),{metadata:$.metadata}));let ee=this.configSelectionQueue;for(let et of(this.configSelectionQueue=[],ee.length>0&&this.callRefTimerUnref(),ee))et.reportResolverError($)}),this.filterStackFactory=new eu.FilterStackFactory([new eg.MaxMessageSizeFilterFactory(this.options),new eh.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(et,void 0,2));let ez=Error();(0,ep.trace)(eo.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") Channel constructed \n"+(null===(ej=ez.stack)||void 0===ej?void 0:ej.substring(ez.stack.indexOf("\n")+1))),this.lastActivityTimestamp=new Date}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace($,ee){(0,ep.trace)(null!=ee?ee:eo.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,ey.uriToString)(this.target)+" "+$)}callRefTimerRef(){var $,ee,et,er;(null===(ee=($=this.callRefTimer).hasRef)||void 0===ee?void 0:ee.call($))||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(er=(et=this.callRefTimer).ref)||void 0===er||er.call(et))}callRefTimerUnref(){var $,ee;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(ee=($=this.callRefTimer).unref)||void 0===ee||ee.call($))}removeConnectivityStateWatcher($){let ee=this.connectivityStateWatchers.findIndex(ee=>ee===$);ee>=0&&this.connectivityStateWatchers.splice(ee,1)}updateState($){for(let ee of((0,ep.trace)(eo.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,ey.uriToString)(this.target)+" "+ev.ConnectivityState[this.connectivityState]+" -> "+ev.ConnectivityState[$]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+ev.ConnectivityState[$]),this.connectivityState=$,this.connectivityStateWatchers.slice()))$!==ee.currentState&&(ee.timer&&clearTimeout(ee.timer),this.removeConnectivityStateWatcher(ee),ee.callback());$!==ev.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive($){if($>this.keepaliveTime)for(let ee of(this.keepaliveTime=$,this.wrappedSubchannels))ee.throttleKeepalive($)}removeWrappedSubchannel($){this.wrappedSubchannels.delete($)}doPick($,ee){return this.currentPicker.pick({metadata:$,extraPickInfo:ee})}queueCallForPick($){this.pickQueue.push($),this.callRefTimerRef()}getConfig($,ee){return(this.resolvingLoadBalancer.exitIdle(),this.configSelector)?{type:"SUCCESS",config:this.configSelector($,ee)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig($){this.configSelectionQueue.push($),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(ev.ConnectivityState.IDLE),this.currentPicker=new es.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}startIdleTimeout($){var ee,et;this.idleTimer=setTimeout(()=>{if(this.callCount>0){this.startIdleTimeout(this.idleTimeoutMs);return}let $=new Date().valueOf()-this.lastActivityTimestamp.valueOf();$>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-$)},$),null===(et=(ee=this.idleTimer).unref)||void 0===et||et.call(ee)}maybeStartIdleTimer(){this.connectivityState===ev.ConnectivityState.SHUTDOWN||this.idleTimer||this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.callTracker.addCallStarted(),this.callCount+=1}onCallEnd($){this.channelzEnabled&&($.code===eo.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall($,ee,et,er,en){let ei=(0,eC.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+ei+'] method="'+ee+'"'),new eT.LoadBalancingCall(this,$,ee,et,er,en,ei)}createRetryingCall($,ee,et,er,en){let ei=(0,eC.getNextCallNumber)();return this.trace("createRetryingCall ["+ei+'] method="'+ee+'"'),new eR.RetryingCall(this,$,ee,et,er,en,ei,this.retryBufferTracker,eO.get(this.getTarget()))}createInnerCall($,ee,et,er,en){return 0===this.options["grpc.enable_retries"]?this.createLoadBalancingCall($,ee,et,er,en):this.createRetryingCall($,ee,et,er,en)}createResolvingCall($,ee,et,er,en){let ei=(0,eC.getNextCallNumber)();this.trace("createResolvingCall ["+ei+'] method="'+$+'", deadline='+(0,ew.deadlineToString)(ee));let es={deadline:ee,flags:null!=en?en:eo.Propagate.DEFAULTS,host:null!=et?et:this.defaultAuthority,parentCall:er},eu=new eE.ResolvingCall(this,$,es,this.filterStackFactory.clone(),this.credentials._getCallCredentials(),ei);return this.onCallStart(),eu.addStatusWatcher($=>{this.onCallEnd($)}),eu}close(){this.resolvingLoadBalancer.destroy(),this.updateState(ev.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,eS.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return(0,ey.uriToString)(this.target)}getConnectivityState($){let ee=this.connectivityState;return $&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),ee}watchConnectivityState($,ee,et){if(this.connectivityState===ev.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");let er=null;if(ee!==1/0){let $=ee instanceof Date?ee:new Date(ee),ei=new Date;if(ee===-1/0||$<=ei){process.nextTick(et,Error("Deadline passed without connectivity state change"));return}er=setTimeout(()=>{this.removeConnectivityStateWatcher(en),et(Error("Deadline passed without connectivity state change"))},$.getTime()-ei.getTime())}let en={currentState:$,callback:et,timer:er};this.connectivityStateWatchers.push(en)}getChannelzRef(){return this.channelzRef}createCall($,ee,et,er,en){if("string"!=typeof $)throw TypeError("Channel#createCall: method must be a string");if(!("number"==typeof ee||ee instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===ev.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");return this.createResolvingCall($,ee,et,er,en)}}ee.InternalChannel=eM},982:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.ChildLoadBalancerHandler=void 0;let er=et(7176),en=et(3955),ei="child_load_balancer_helper";class es{constructor($){this.channelControlHelper=$,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor($){this.parent=$,this.child=null}createSubchannel($,ee){return this.parent.channelControlHelper.createSubchannel($,ee)}updateState($,ee){var et;if(this.calledByPendingChild()){if($===en.ConnectivityState.CONNECTING)return;null===(et=this.parent.currentChild)||void 0===et||et.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState($,ee)}requestReresolution(){var $;let ee=null!==($=this.parent.pendingChild)&&void 0!==$?$:this.parent.currentChild;this.child===ee&&this.parent.channelControlHelper.requestReresolution()}setChild($){this.child=$}addChannelzChild($){this.parent.channelControlHelper.addChannelzChild($)}removeChannelzChild($){this.parent.channelControlHelper.removeChannelzChild($)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance($,ee){return $.getLoadBalancerName()!==ee.getLoadBalancerName()}updateAddressList($,ee,et){let en;if(null===this.currentChild||null===this.latestConfig||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,ee)){let $=new this.ChildPolicyHelper(this),et=(0,er.createLoadBalancer)(ee,$);$.setChild(et),null===this.currentChild?(this.currentChild=et,en=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=et,en=this.pendingChild)}else en=null===this.pendingChild?this.currentChild:this.pendingChild;this.latestConfig=ee,en.updateAddressList($,ee,et)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return ei}}ee.ChildLoadBalancerHandler=es},1433:($,ee,et)=>{"use strict";var er;Object.defineProperty(ee,"__esModule",{value:!0}),ee.setup=ee.OutlierDetectionLoadBalancer=ee.OutlierDetectionLoadBalancingConfig=void 0;let en=et(3955),ei=et(2678),es=et(5330),eo=et(345),eu=et(7176),eh=et(982),ef=et(7064),ep=et(3906),eg=et(1407),em=et(7504),ey="outlier_detection";function ev($){em.trace(ei.LogVerbosity.DEBUG,ey,$)}let eS="outlier_detection",eT=(null!==(er=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)&&void 0!==er?er:"true")==="true",ew={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},eE={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function eC($,ee,et,er){if(ee in $&&typeof $[ee]!==et){let en=er?`${er}.${ee}`:ee;throw Error(`outlier detection config ${en} parse error: expected ${et}, got ${typeof $[ee]}`)}}function e_($,ee,et){let er=et?`${et}.${ee}`:ee;if(ee in $){if(!(0,es.isDuration)($[ee]))throw Error(`outlier detection config ${er} parse error: expected Duration, got ${typeof $[ee]}`);if(!($[ee].seconds>=0&&$[ee].seconds<=315576e6&&$[ee].nanos>=0&&$[ee].nanos<=999999999))throw Error(`outlier detection config ${er} parse error: values out of range for non-negative Duaration`)}}function eR($,ee,et){let er=et?`${et}.${ee}`:ee;if(eC($,ee,"number",et),ee in $&&!($[ee]>=0&&$[ee]<=100))throw Error(`outlier detection config ${er} parse error: value out of range for percentage (0-100)`)}class ex{constructor($,ee,et,er,en,ei,es){if(this.childPolicy=es,es.length>0&&"pick_first"===es[0].getLoadBalancerName())throw Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=null!=$?$:1e4,this.baseEjectionTimeMs=null!=ee?ee:3e4,this.maxEjectionTimeMs=null!=et?et:3e5,this.maxEjectionPercent=null!=er?er:10,this.successRateEjection=en?Object.assign(Object.assign({},ew),en):null,this.failurePercentageEjection=ei?Object.assign(Object.assign({},eE),ei):null}getLoadBalancerName(){return eS}toJsonObject(){return{interval:(0,es.msToDuration)(this.intervalMs),base_ejection_time:(0,es.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,es.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map($=>$.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy($){return new ex(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,$)}static createFromJson($){var ee;if(e_($,"interval"),e_($,"base_ejection_time"),e_($,"max_ejection_time"),eR($,"max_ejection_percent"),"success_rate_ejection"in $){if("object"!=typeof $.success_rate_ejection)throw Error("outlier detection config success_rate_ejection must be an object");eC($.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),eR($.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),eC($.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),eC($.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in $){if("object"!=typeof $.failure_percentage_ejection)throw Error("outlier detection config failure_percentage_ejection must be an object");eR($.failure_percentage_ejection,"threshold","failure_percentage_ejection"),eR($.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),eC($.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),eC($.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new ex($.interval?(0,es.durationToMs)($.interval):null,$.base_ejection_time?(0,es.durationToMs)($.base_ejection_time):null,$.max_ejection_time?(0,es.durationToMs)($.max_ejection_time):null,null!==(ee=$.max_ejection_percent)&&void 0!==ee?ee:null,$.success_rate_ejection,$.failure_percentage_ejection,$.child_policy.map(eu.validateLoadBalancingConfig))}}ee.OutlierDetectionLoadBalancingConfig=ex;class eI extends eg.BaseSubchannelWrapper{constructor($,ee){super($),this.mapEntry=ee,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=$.getConnectivityState(),$.addConnectivityStateListener(($,ee,et,er)=>{if(this.childSubchannelState=et,!this.ejected)for(let $ of this.stateListeners)$(this,ee,et,er)})}getConnectivityState(){return this.ejected?en.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener($){this.stateListeners.push($)}removeConnectivityStateListener($){let ee=this.stateListeners.indexOf($);ee>-1&&this.stateListeners.splice(ee,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let $=this.mapEntry.subchannelWrappers.indexOf(this);$>=0&&this.mapEntry.subchannelWrappers.splice($,1)}}eject(){for(let $ of(this.ejected=!0,this.stateListeners))$(this,this.childSubchannelState,en.ConnectivityState.TRANSIENT_FAILURE,-1)}uneject(){for(let $ of(this.ejected=!1,this.stateListeners))$(this,en.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState,-1)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}function eP(){return{success:0,failure:0}}class eA{constructor(){this.activeBucket=eP(),this.inactiveBucket=eP()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=eP()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class eO{constructor($,ee){this.wrappedPicker=$,this.countCalls=ee}pick($){let ee=this.wrappedPicker.pick($);if(ee.pickResultType!==ef.PickResultType.COMPLETE)return ee;{let $=ee.subchannel,et=$.getMapEntry();if(!et)return Object.assign(Object.assign({},ee),{subchannel:$.getWrappedSubchannel()});{let er=ee.onCallEnded;return this.countCalls&&(er=$=>{var er;$===ei.Status.OK?et.counter.addSuccess():et.counter.addFailure(),null===(er=ee.onCallEnded)||void 0===er||er.call(ee,$)}),Object.assign(Object.assign({},ee),{subchannel:$.getWrappedSubchannel(),onCallEnded:er})}}}}class eD{constructor($){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new eh.ChildLoadBalancerHandler((0,eo.createChildChannelControlHelper)($,{createSubchannel:(ee,et)=>{let er=$.createSubchannel(ee,et),en=this.addressMap.get((0,ep.subchannelAddressToString)(ee)),ei=new eI(er,en);return(null==en?void 0:en.currentEjectionTimestamp)!==null&&ei.eject(),null==en||en.subchannelWrappers.push(ei),ei},updateState:(ee,et)=>{ee===en.ConnectivityState.READY?$.updateState(ee,new eO(et,this.isCountingEnabled())):$.updateState(ee,et)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return null!==this.latestConfig&&(null!==this.latestConfig.getSuccessRateEjectionConfig()||null!==this.latestConfig.getFailurePercentageEjectionConfig())}getCurrentEjectionPercent(){let $=0;for(let ee of this.addressMap.values())null!==ee.currentEjectionTimestamp&&($+=1);return 100*$/this.addressMap.size}runSuccessRateCheck($){if(!this.latestConfig)return;let ee=this.latestConfig.getSuccessRateEjectionConfig();if(!ee)return;ev("Running success rate check");let et=ee.request_volume,er=0,en=[];for(let[$,ee]of this.addressMap){let ei=ee.counter.getLastSuccesses(),es=ee.counter.getLastFailures();ev("Stats for "+$+": successes="+ei+" failures="+es+" targetRequestVolume="+et),ei+es>=et&&(er+=1,en.push(ei/(ei+es)))}if(ev("Found "+er+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+en+"]"),er<ee.minimum_hosts)return;let ei=en.reduce(($,ee)=>$+ee)/en.length,es=0;for(let $ of en){let ee=$-ei;es+=ee*ee}let eo=Math.sqrt(es/en.length),eu=ei-ee.stdev_factor/1e3*eo;for(let[er,en]of(ev("stdev="+eo+" ejectionThreshold="+eu),this.addressMap.entries())){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let ei=en.counter.getLastSuccesses(),es=en.counter.getLastFailures();if(ei+es<et)continue;let eo=ei/(ei+es);if(ev("Checking candidate "+er+" successRate="+eo),eo<eu){let et=100*Math.random();ev("Candidate "+er+" randomNumber="+et+" enforcement_percentage="+ee.enforcement_percentage),et<ee.enforcement_percentage&&(ev("Ejecting candidate "+er),this.eject(en,$))}}}runFailurePercentageCheck($){if(!this.latestConfig)return;let ee=this.latestConfig.getFailurePercentageEjectionConfig();if(!ee)return;ev("Running failure percentage check. threshold="+ee.threshold+" request volume threshold="+ee.request_volume);let et=0;for(let $ of this.addressMap.values())$.counter.getLastSuccesses()+$.counter.getLastFailures()>=ee.request_volume&&(et+=1);if(!(et<ee.minimum_hosts))for(let[et,er]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let en=er.counter.getLastSuccesses(),ei=er.counter.getLastFailures();if(ev("Candidate successes="+en+" failures="+ei),!(en+ei<ee.request_volume)&&100*ei/(ei+en)>ee.threshold){let en=100*Math.random();ev("Candidate "+et+" randomNumber="+en+" enforcement_percentage="+ee.enforcement_percentage),en<ee.enforcement_percentage&&(ev("Ejecting candidate "+et),this.eject(er,$))}}}eject($,ee){for(let ee of($.currentEjectionTimestamp=new Date,$.ejectionTimeMultiplier+=1,$.subchannelWrappers))ee.eject()}uneject($){for(let ee of($.currentEjectionTimestamp=null,$.subchannelWrappers))ee.uneject()}switchAllBuckets(){for(let $ of this.addressMap.values())$.counter.switchBuckets()}startTimer($){var ee,et;this.ejectionTimer=setTimeout(()=>this.runChecks(),$),null===(et=(ee=this.ejectionTimer).unref)||void 0===et||et.call(ee)}runChecks(){let $=new Date;if(ev("Ejection timer running"),this.switchAllBuckets(),this.latestConfig)for(let[ee,et]of(this.timerStartTime=$,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck($),this.runFailurePercentageCheck($),this.addressMap.entries()))if(null===et.currentEjectionTimestamp)et.ejectionTimeMultiplier>0&&(et.ejectionTimeMultiplier-=1);else{let $=this.latestConfig.getBaseEjectionTimeMs(),er=this.latestConfig.getMaxEjectionTimeMs(),en=new Date(et.currentEjectionTimestamp.getTime());en.setMilliseconds(en.getMilliseconds()+Math.min($*et.ejectionTimeMultiplier,Math.max($,er))),en<new Date&&(ev("Unejecting "+ee),this.uneject(et))}}updateAddressList($,ee,et){if(!(ee instanceof ex))return;let er=new Set;for(let ee of $)er.add((0,ep.subchannelAddressToString)(ee));for(let $ of er)this.addressMap.has($)||(ev("Adding map entry for "+$),this.addressMap.set($,{counter:new eA,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let $ of this.addressMap.keys())er.has($)||(ev("Removing map entry for "+$),this.addressMap.delete($));let en=(0,eu.getFirstUsableConfig)(ee.getChildPolicy(),!0);if(this.childBalancer.updateAddressList($,en,et),ee.getSuccessRateEjectionConfig()||ee.getFailurePercentageEjectionConfig()){if(this.timerStartTime){ev("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let $=ee.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer($)}else ev("Starting new timer"),this.timerStartTime=new Date,this.startTimer(ee.getIntervalMs()),this.switchAllBuckets()}else for(let $ of(ev("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer),this.addressMap.values()))this.uneject($),$.ejectionTimeMultiplier=0;this.latestConfig=ee}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return eS}}function eN(){eT&&(0,eo.registerLoadBalancerType)(eS,eD,ex)}ee.OutlierDetectionLoadBalancer=eD,ee.setup=eN},6170:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.setup=ee.PickFirstLoadBalancer=ee.shuffled=ee.PickFirstLoadBalancingConfig=void 0;let er=et(7176),en=et(3955),ei=et(7064),es=et(7504),eo=et(2678),eu="pick_first";function eh($){es.trace(eo.LogVerbosity.DEBUG,eu,$)}let ef="pick_first",ep=250;class eg{constructor($){this.shuffleAddressList=$}getLoadBalancerName(){return ef}toJsonObject(){return{[ef]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson($){if("shuffleAddressList"in $&&"boolean"!=typeof $.shuffleAddressList)throw Error("pick_first config field shuffleAddressList must be a boolean if provided");return new eg(!0===$.shuffleAddressList)}}ee.PickFirstLoadBalancingConfig=eg;class em{constructor($){this.subchannel=$}pick($){return{pickResultType:ei.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}}function ey($){let ee=$.slice();for(let $=ee.length-1;$>1;$--){let et=Math.floor(Math.random()*($+1)),er=ee[$];ee[$]=ee[et],ee[et]=er}return ee}ee.shuffled=ey;class ev{constructor($){this.channelControlHelper=$,this.children=[],this.currentState=en.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=($,ee,et,er,en)=>{this.onSubchannelStateUpdate($,ee,et,en)},this.triedAllSubchannels=!1,this.stickyTransientFailureMode=!1,this.requestedResolutionSinceLastUpdate=!1,this.lastError=null,this.latestAddressList=null,this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every($=>$.hasReportedTransientFailure)}calculateAndReportNewState(){this.currentPick?this.updateState(en.ConnectivityState.READY,new em(this.currentPick)):0===this.children.length?this.updateState(en.ConnectivityState.IDLE,new ei.QueuePicker(this)):this.stickyTransientFailureMode?this.updateState(en.ConnectivityState.TRANSIENT_FAILURE,new ei.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(en.ConnectivityState.CONNECTING,new ei.QueuePicker(this))}requestReresolution(){this.requestedResolutionSinceLastUpdate=!0,this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()&&(this.requestedResolutionSinceLastUpdate||this.requestReresolution(),!this.stickyTransientFailureMode)){for(let{subchannel:$}of(this.stickyTransientFailureMode=!0,this.children))$.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){if(null!==this.currentPick){let $=this.currentPick;this.currentPick=null,$.unref(),$.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild($.getChannelzRef())}}onSubchannelStateUpdate($,ee,et,er){var ei;if(null===(ei=this.currentPick)||void 0===ei?void 0:ei.realSubchannelEquals($)){et!==en.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState(),this.requestReresolution());return}for(let[ee,ei]of this.children.entries())if($.realSubchannelEquals(ei.subchannel)){et===en.ConnectivityState.READY&&this.pickSubchannel(ei.subchannel),et===en.ConnectivityState.TRANSIENT_FAILURE&&(ei.hasReportedTransientFailure=!0,er&&(this.lastError=er),this.maybeEnterStickyTransientFailureMode(),ee===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(ee+1)),ei.subchannel.startConnecting();return}}startNextSubchannelConnecting($){if(clearTimeout(this.connectionDelayTimeout),!this.triedAllSubchannels){for(let[ee,et]of this.children.entries())if(ee>=$){let $=et.subchannel.getConnectivityState();if($===en.ConnectivityState.IDLE||$===en.ConnectivityState.CONNECTING){this.startConnecting(ee);return}}this.triedAllSubchannels=!0,this.maybeEnterStickyTransientFailureMode()}}startConnecting($){var ee,et;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=$,this.children[$].subchannel.getConnectivityState()===en.ConnectivityState.IDLE&&(eh("Start connecting to subchannel with address "+this.children[$].subchannel.getAddress()),process.nextTick(()=>{var ee;null===(ee=this.children[$])||void 0===ee||ee.subchannel.startConnecting()})),this.connectionDelayTimeout=null===(et=(ee=setTimeout(()=>{this.startNextSubchannelConnecting($+1)},ep)).unref)||void 0===et?void 0:et.call(ee)}pickSubchannel($){this.currentPick&&$.realSubchannelEquals(this.currentPick)||(eh("Pick subchannel with address "+$.getAddress()),this.stickyTransientFailureMode=!1,null!==this.currentPick&&(this.currentPick.unref(),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeConnectivityStateListener(this.subchannelStateListener)),this.currentPick=$,$.ref(),this.channelControlHelper.addChannelzChild($.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState())}updateState($,ee){eh(en.ConnectivityState[this.currentState]+" -> "+en.ConnectivityState[$]),this.currentState=$,this.channelControlHelper.updateState($,ee)}resetSubchannelList(){for(let $ of this.children)this.currentPick&&$.subchannel.realSubchannelEquals(this.currentPick)||$.subchannel.removeConnectivityStateListener(this.subchannelStateListener),$.subchannel.unref(),this.channelControlHelper.removeChannelzChild($.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[],this.triedAllSubchannels=!1,this.requestedResolutionSinceLastUpdate=!1}connectToAddressList($){let ee=$.map($=>({subchannel:this.channelControlHelper.createSubchannel($,{}),hasReportedTransientFailure:!1}));for(let{subchannel:$}of ee)$.ref(),this.channelControlHelper.addChannelzChild($.getChannelzRef());for(let{subchannel:$}of(this.resetSubchannelList(),this.children=ee,this.children))if($.addConnectivityStateListener(this.subchannelStateListener),$.getConnectivityState()===en.ConnectivityState.READY){this.pickSubchannel($);return}for(let $ of this.children)$.subchannel.getConnectivityState()===en.ConnectivityState.TRANSIENT_FAILURE&&($.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList($,ee){ee instanceof eg&&(ee.getShuffleAddressList()&&($=ey($)),this.latestAddressList=$,this.connectToAddressList($))}exitIdle(){this.currentState===en.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return ef}}function eS(){(0,er.registerLoadBalancerType)(ef,ev,eg),(0,er.registerDefaultLoadBalancerType)(ef)}ee.PickFirstLoadBalancer=ev,ee.setup=eS},2255:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.setup=ee.RoundRobinLoadBalancer=void 0;let er=et(7176),en=et(3955),ei=et(7064),es=et(3906),eo=et(7504),eu=et(2678),eh="round_robin";function ef($){eo.trace(eu.LogVerbosity.DEBUG,eh,$)}let ep="round_robin";class eg{getLoadBalancerName(){return ep}constructor(){}toJsonObject(){return{[ep]:{}}}static createFromJson($){return new eg}}class em{constructor($,ee=0){this.subchannelList=$,this.nextIndex=ee}pick($){let ee=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:ei.PickResultType.COMPLETE,subchannel:ee,status:null,onCallStarted:null,onCallEnded:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}}class ey{constructor($){this.channelControlHelper=$,this.subchannels=[],this.currentState=en.ConnectivityState.IDLE,this.currentReadyPicker=null,this.lastError=null,this.subchannelStateListener=($,ee,et,er,ei)=>{this.calculateAndUpdateState(),(et===en.ConnectivityState.TRANSIENT_FAILURE||et===en.ConnectivityState.IDLE)&&(ei&&(this.lastError=ei),this.channelControlHelper.requestReresolution(),$.startConnecting())}}countSubchannelsWithState($){return this.subchannels.filter(ee=>ee.getConnectivityState()===$).length}calculateAndUpdateState(){if(this.countSubchannelsWithState(en.ConnectivityState.READY)>0){let $=this.subchannels.filter($=>$.getConnectivityState()===en.ConnectivityState.READY),ee=0;null!==this.currentReadyPicker&&(ee=$.indexOf(this.currentReadyPicker.peekNextSubchannel()))<0&&(ee=0),this.updateState(en.ConnectivityState.READY,new em($,ee))}else this.countSubchannelsWithState(en.ConnectivityState.CONNECTING)>0?this.updateState(en.ConnectivityState.CONNECTING,new ei.QueuePicker(this)):this.countSubchannelsWithState(en.ConnectivityState.TRANSIENT_FAILURE)>0?this.updateState(en.ConnectivityState.TRANSIENT_FAILURE,new ei.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(en.ConnectivityState.IDLE,new ei.QueuePicker(this))}updateState($,ee){ef(en.ConnectivityState[this.currentState]+" -> "+en.ConnectivityState[$]),$===en.ConnectivityState.READY?this.currentReadyPicker=ee:this.currentReadyPicker=null,this.currentState=$,this.channelControlHelper.updateState($,ee)}resetSubchannelList(){for(let $ of this.subchannels)$.removeConnectivityStateListener(this.subchannelStateListener),$.unref(),this.channelControlHelper.removeChannelzChild($.getChannelzRef());this.subchannels=[]}updateAddressList($,ee){for(let ee of(this.resetSubchannelList(),ef("Connect to address list "+$.map($=>(0,es.subchannelAddressToString)($))),this.subchannels=$.map($=>this.channelControlHelper.createSubchannel($,{})),this.subchannels)){ee.ref(),ee.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(ee.getChannelzRef());let $=ee.getConnectivityState();($===en.ConnectivityState.IDLE||$===en.ConnectivityState.TRANSIENT_FAILURE)&&ee.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let $ of this.subchannels)$.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return ep}}function ev(){(0,er.registerLoadBalancerType)(ep,ey,eg)}ee.RoundRobinLoadBalancer=ey,ee.setup=ev},7176:($,ee)=>{"use strict";function et($,ee){var et,er,en,ei,es,eo,eu,eh,ef,ep;return{createSubchannel:null!==(er=null===(et=ee.createSubchannel)||void 0===et?void 0:et.bind(ee))&&void 0!==er?er:$.createSubchannel.bind($),updateState:null!==(ei=null===(en=ee.updateState)||void 0===en?void 0:en.bind(ee))&&void 0!==ei?ei:$.updateState.bind($),requestReresolution:null!==(eo=null===(es=ee.requestReresolution)||void 0===es?void 0:es.bind(ee))&&void 0!==eo?eo:$.requestReresolution.bind($),addChannelzChild:null!==(eh=null===(eu=ee.addChannelzChild)||void 0===eu?void 0:eu.bind(ee))&&void 0!==eh?eh:$.addChannelzChild.bind($),removeChannelzChild:null!==(ep=null===(ef=ee.removeChannelzChild)||void 0===ef?void 0:ef.bind(ee))&&void 0!==ep?ep:$.removeChannelzChild.bind($)}}Object.defineProperty(ee,"__esModule",{value:!0}),ee.validateLoadBalancingConfig=ee.getFirstUsableConfig=ee.isLoadBalancerNameRegistered=ee.createLoadBalancer=ee.registerDefaultLoadBalancerType=ee.registerLoadBalancerType=ee.createChildChannelControlHelper=void 0,ee.createChildChannelControlHelper=et;let er={},en=null;function ei($,ee,et){er[$]={LoadBalancer:ee,LoadBalancingConfig:et}}function es($){en=$}function eo($,ee){let et=$.getLoadBalancerName();return et in er?new er[et].LoadBalancer(ee):null}function eu($){return $ in er}function eh($,ee=!1){for(let ee of $)if(ee.getLoadBalancerName() in er)return ee;return ee&&en?new er[en].LoadBalancingConfig:null}function ef($){if(!(null!==$&&"object"==typeof $))throw Error("Load balancing config must be an object");let ee=Object.keys($);if(1!==ee.length)throw Error("Provided load balancing config has multiple conflicting entries");let et=ee[0];if(et in er)return er[et].LoadBalancingConfig.createFromJson($[et]);throw Error(`Unrecognized load balancing config name ${et}`)}ee.registerLoadBalancerType=ei,ee.registerDefaultLoadBalancerType=es,ee.createLoadBalancer=eo,ee.isLoadBalancerNameRegistered=eu,ee.getFirstUsableConfig=eh,ee.validateLoadBalancingConfig=ef},980:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.LoadBalancingCall=void 0;let er=et(3955),en=et(2678),ei=et(7931),es=et(2252),eo=et(7064),eu=et(8429),eh=et(7504),ef=et(2155),ep=et(5158),eg="load_balancing_call";class em{constructor($,ee,et,er,en,ei,es){var eo,eh;this.channel=$,this.callConfig=ee,this.methodName=et,this.host=er,this.credentials=en,this.deadline=ei,this.callNumber=es,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null;let ef=this.methodName.split("/"),ep="";ef.length>=2&&(ep=ef[1]);let eg=null!==(eh=null===(eo=(0,eu.splitHostPort)(this.host))||void 0===eo?void 0:eo.host)&&void 0!==eh?eh:"localhost";this.serviceUrl=`https://${eg}/${ep}`}trace($){eh.trace(en.LogVerbosity.DEBUG,eg,"["+this.callNumber+"] "+$)}outputStatus($,ee){var et,er;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+$.code+' details="'+$.details+'"');let en=Object.assign(Object.assign({},$),{progress:ee});null===(et=this.listener)||void 0===et||et.onReceiveStatus(en),null===(er=this.onCallEnded)||void 0===er||er.call(this,en.code)}}doPick(){var $,ee;if(this.ended)return;if(!this.metadata)throw Error("doPick called before start");this.trace("Pick called");let et=this.channel.doPick(this.metadata,this.callConfig.pickInformation),eu=et.subchannel?"("+et.subchannel.getChannelzRef().id+") "+et.subchannel.getAddress():""+et.subchannel;switch(this.trace("Pick result: "+eo.PickResultType[et.pickResultType]+" subchannel: "+eu+" status: "+(null===($=et.status)||void 0===$?void 0:$.code)+" "+(null===(ee=et.status)||void 0===ee?void 0:ee.details)),et.pickResultType){case eo.PickResultType.COMPLETE:this.credentials.generateMetadata({service_url:this.serviceUrl}).then($=>{var ee,eo,eh;if(this.ended){this.trace("Credentials metadata generation finished after call ended");return}let ef=this.metadata.clone();if(ef.merge($),ef.get("authorization").length>1&&this.outputStatus({code:en.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new es.Metadata},"PROCESSED"),et.subchannel.getConnectivityState()!==er.ConnectivityState.READY){this.trace("Picked subchannel "+eu+" has state "+er.ConnectivityState[et.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}this.deadline!==1/0&&ef.set("grpc-timeout",(0,ei.getDeadlineTimeoutString)(this.deadline));try{this.child=et.subchannel.getRealSubchannel().createCall(ef,this.host,this.methodName,{onReceiveMetadata:$=>{this.trace("Received metadata"),this.listener.onReceiveMetadata($)},onReceiveMessage:$=>{this.trace("Received message"),this.listener.onReceiveMessage($)},onReceiveStatus:$=>{this.trace("Received status"),$.rstCode===ep.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus($,"REFUSED"):this.outputStatus($,"PROCESSED")}})}catch($){this.trace("Failed to start call on picked subchannel "+eu+" with error "+$.message),this.outputStatus({code:en.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+$.message,metadata:new es.Metadata},"NOT_STARTED");return}null===(eo=(ee=this.callConfig).onCommitted)||void 0===eo||eo.call(ee),null===(eh=et.onCallStarted)||void 0===eh||eh.call(et),this.onCallEnded=et.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()},$=>{let{code:ee,details:et}=(0,ef.restrictControlPlaneStatusCode)("number"==typeof $.code?$.code:en.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${$.message}`);this.outputStatus({code:ee,details:et,metadata:new es.Metadata},"PROCESSED")});break;case eo.PickResultType.DROP:let{code:eh,details:eg}=(0,ef.restrictControlPlaneStatusCode)(et.status.code,et.status.details);setImmediate(()=>{this.outputStatus({code:eh,details:eg,metadata:et.status.metadata},"DROP")});break;case eo.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{let{code:$,details:ee}=(0,ef.restrictControlPlaneStatusCode)(et.status.code,et.status.details);setImmediate(()=>{this.outputStatus({code:$,details:ee,metadata:et.status.metadata},"PROCESSED")})}break;case eo.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus($,ee){var et;this.trace("cancelWithStatus code: "+$+' details: "'+ee+'"'),null===(et=this.child)||void 0===et||et.cancelWithStatus($,ee),this.outputStatus({code:$,details:ee,metadata:new es.Metadata},"PROCESSED")}getPeer(){var $,ee;return null!==(ee=null===($=this.child)||void 0===$?void 0:$.getPeer())&&void 0!==ee?ee:this.channel.getTarget()}start($,ee){this.trace("start called"),this.listener=ee,this.metadata=$,this.doPick()}sendMessageWithContext($,ee){this.trace("write() called with message of length "+ee.length),this.child?this.child.sendMessageWithContext($,ee):this.pendingMessage={context:$,message:ee}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials($){throw Error("Method not implemented.")}getCallNumber(){return this.callNumber}}ee.LoadBalancingCall=em},7504:($,ee,et)=>{"use strict";var er,en,ei,es;Object.defineProperty(ee,"__esModule",{value:!0}),ee.isTracerEnabled=ee.trace=ee.log=ee.setLoggerVerbosity=ee.setLogger=ee.getLogger=void 0;let eo=et(2678),eu=et(7282),eh=et(1513).i8,ef={error:($,...ee)=>{console.error("E "+$,...ee)},info:($,...ee)=>{console.error("I "+$,...ee)},debug:($,...ee)=>{console.error("D "+$,...ee)}},ep=eo.LogVerbosity.ERROR;switch((null!==(en=null!==(er=process.env.GRPC_NODE_VERBOSITY)&&void 0!==er?er:process.env.GRPC_VERBOSITY)&&void 0!==en?en:"").toUpperCase()){case"DEBUG":ep=eo.LogVerbosity.DEBUG;break;case"INFO":ep=eo.LogVerbosity.INFO;break;case"ERROR":ep=eo.LogVerbosity.ERROR;break;case"NONE":ep=eo.LogVerbosity.NONE}let eg=()=>ef;ee.getLogger=eg;let em=$=>{ef=$};ee.setLogger=em;let ey=$=>{ep=$};ee.setLoggerVerbosity=ey;let ev=($,...ee)=>{let et;if($>=ep){switch($){case eo.LogVerbosity.DEBUG:et=ef.debug;break;case eo.LogVerbosity.INFO:et=ef.info;break;case eo.LogVerbosity.ERROR:et=ef.error}et||(et=ef.error),et&&et.bind(ef)(...ee)}};ee.log=ev;let eS=null!==(es=null!==(ei=process.env.GRPC_NODE_TRACE)&&void 0!==ei?ei:process.env.GRPC_TRACE)&&void 0!==es?es:"",eT=new Set,ew=new Set;for(let $ of eS.split(","))$.startsWith("-")?ew.add($.substring(1)):eT.add($);let eE=eT.has("all");function eC($,et,er){e_(et)&&(0,ee.log)($,new Date().toISOString()+" | v"+eh+" "+eu.pid+" | "+et+" | "+er)}function e_($){return!ew.has($)&&(eE||eT.has($))}ee.trace=eC,ee.isTracerEnabled=e_},5085:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.loadPackageDefinition=ee.makeClientConstructor=void 0;let er=et(9800),en={unary:er.Client.prototype.makeUnaryRequest,server_stream:er.Client.prototype.makeServerStreamRequest,client_stream:er.Client.prototype.makeClientStreamRequest,bidi:er.Client.prototype.makeBidiStreamRequest};function ei($){return["__proto__","prototype","constructor"].includes($)}function es($,ee,et){et||(et={});class es extends er.Client{}return Object.keys($).forEach(ee=>{let et;if(ei(ee))return;let er=$[ee];if("string"==typeof ee&&"$"===ee.charAt(0))throw Error("Method names cannot start with $");et=er.requestStream?er.responseStream?"bidi":"client_stream":er.responseStream?"server_stream":"unary";let eu=er.requestSerialize,eh=er.responseDeserialize,ef=eo(en[et],er.path,eu,eh);es.prototype[ee]=ef,Object.assign(es.prototype[ee],er),er.originalName&&!ei(er.originalName)&&(es.prototype[er.originalName]=es.prototype[ee])}),es.service=$,es.serviceName=ee,es}function eo($,ee,et,er){return function(...en){return $.call(this,ee,et,er,...en)}}function eu($){return"format"in $}function eh($){let ee={};for(let et in $)if(Object.prototype.hasOwnProperty.call($,et)){let er=$[et],en=et.split(".");if(en.some($=>ei($)))continue;let eo=en[en.length-1],eh=ee;for(let $ of en.slice(0,-1))eh[$]||(eh[$]={}),eh=eh[$];eu(er)?eh[eo]=er:eh[eo]=es(er,eo,{})}return ee}ee.makeClientConstructor=es,ee.loadPackageDefinition=eh},5538:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.MaxMessageSizeFilterFactory=ee.MaxMessageSizeFilter=void 0;let er=et(8152),en=et(2678),ei=et(2252);class es extends er.BaseFilter{constructor($){super(),this.maxSendMessageSize=en.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=en.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,"grpc.max_send_message_length"in $&&(this.maxSendMessageSize=$["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in $&&(this.maxReceiveMessageSize=$["grpc.max_receive_message_length"])}async sendMessage($){if(-1===this.maxSendMessageSize)return $;{let ee=await $;if(!(ee.message.length>this.maxSendMessageSize))return ee;throw{code:en.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${ee.message.length} vs. ${this.maxSendMessageSize})`,metadata:new ei.Metadata}}}async receiveMessage($){if(-1===this.maxReceiveMessageSize)return $;{let ee=await $;if(!(ee.length>this.maxReceiveMessageSize))return ee;throw{code:en.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${ee.length} vs. ${this.maxReceiveMessageSize})`,metadata:new ei.Metadata}}}}ee.MaxMessageSizeFilter=es;class eo{constructor($){this.options=$}createFilter(){return new es(this.options)}}ee.MaxMessageSizeFilterFactory=eo},2252:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.Metadata=void 0;let er=et(7504),en=et(2678),ei=et(5437),es=/^[0-9a-z_.-]+$/,eo=/^[ -~]*$/;function eu($){return es.test($)}function eh($){return eo.test($)}function ef($){return $.endsWith("-bin")}function ep($){return!$.startsWith("grpc-")}function eg($){return $.toLowerCase()}function em($,ee){if(!eu($))throw Error('Metadata key "'+$+'" contains illegal characters');if(null!=ee){if(ef($)){if(!Buffer.isBuffer(ee))throw Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(ee))throw Error("keys that don't end with '-bin' must have String values");if(!eh(ee))throw Error('Metadata string value "'+ee+'" contains illegal characters')}}}class ey{constructor($={}){this.internalRepr=new Map,this.options=$}set($,ee){em($=eg($),ee),this.internalRepr.set($,[ee])}add($,ee){em($=eg($),ee);let et=this.internalRepr.get($);void 0===et?this.internalRepr.set($,[ee]):et.push(ee)}remove($){$=eg($),this.internalRepr.delete($)}get($){return $=eg($),this.internalRepr.get($)||[]}getMap(){let $={};for(let[ee,et]of this.internalRepr)if(et.length>0){let er=et[0];$[ee]=Buffer.isBuffer(er)?Buffer.from(er):er}return $}clone(){let $=new ey(this.options),ee=$.internalRepr;for(let[$,et]of this.internalRepr){let er=et.map($=>Buffer.isBuffer($)?Buffer.from($):$);ee.set($,er)}return $}merge($){for(let[ee,et]of $.internalRepr){let $=(this.internalRepr.get(ee)||[]).concat(et);this.internalRepr.set(ee,$)}}setOptions($){this.options=$}getOptions(){return this.options}toHttp2Headers(){let $={};for(let[ee,et]of this.internalRepr)$[ee]=et.map(ev);return $}toJSON(){let $={};for(let[ee,et]of this.internalRepr)$[ee]=et;return $}static fromHttp2Headers($){let ee=new ey;for(let et of Object.keys($)){if(":"===et.charAt(0))continue;let es=$[et];try{ef(et)?Array.isArray(es)?es.forEach($=>{ee.add(et,Buffer.from($,"base64"))}):void 0!==es&&(ep(et)?es.split(",").forEach($=>{ee.add(et,Buffer.from($.trim(),"base64"))}):ee.add(et,Buffer.from(es,"base64"))):Array.isArray(es)?es.forEach($=>{ee.add(et,$)}):void 0!==es&&ee.add(et,es)}catch(ee){let $=`Failed to add metadata entry ${et}: ${es}. ${(0,ei.getErrorMessage)(ee)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,er.log)(en.LogVerbosity.ERROR,$)}}return ee}}ee.Metadata=ey;let ev=$=>Buffer.isBuffer($)?$.toString("base64"):$},7064:($,ee,et)=>{"use strict";var er;Object.defineProperty(ee,"__esModule",{value:!0}),ee.QueuePicker=ee.UnavailablePicker=ee.PickResultType=void 0;let en=et(2252),ei=et(2678);!function($){$[$.COMPLETE=0]="COMPLETE",$[$.QUEUE=1]="QUEUE",$[$.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",$[$.DROP=3]="DROP"}(er||(ee.PickResultType=er={}));class es{constructor($){this.status=Object.assign({code:ei.Status.UNAVAILABLE,details:"No connection established",metadata:new en.Metadata},$)}pick($){return{pickResultType:er.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}}ee.UnavailablePicker=es;class eo{constructor($){this.loadBalancer=$,this.calledExitIdle=!1}pick($){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:er.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}}ee.QueuePicker=eo},4605:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.setup=ee.DEFAULT_PORT=void 0;let er=et(492),en=et(9523),ei=et(3837),es=et(6262),eo=et(2678),eu=et(2252),eh=et(7504),ef=et(2678),ep=et(8429),eg=et(1808),em=et(4934),ey="dns_resolver";function ev($){eh.trace(ef.LogVerbosity.DEBUG,ey,$)}ee.DEFAULT_PORT=443;let eS=3e4,eT=ei.promisify(en.resolveTxt),ew=ei.promisify(en.lookup);function eE(...$){let ee=[];for(let et=0;et<Math.max.apply(null,$.map($=>$.length));et++)for(let er of $)et<er.length&&ee.push(er[et]);return ee}class eC{constructor($,et,er){var en,ei,es;this.target=$,this.listener=et,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,ev("Resolver constructed for target "+(0,ep.uriToString)($));let eh=(0,ep.splitHostPort)($.path);null===eh?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,eg.isIPv4)(eh.host)||(0,eg.isIPv6)(eh.host)?(this.ipResult=[{host:eh.host,port:null!==(en=eh.port)&&void 0!==en?en:ee.DEFAULT_PORT}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=eh.host,this.port=null!==(ei=eh.port)&&void 0!==ei?ei:ee.DEFAULT_PORT),this.percentage=100*Math.random(),1===er["grpc.service_config_disable_resolution"]&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:eo.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,ep.uriToString)(this.target)}`,metadata:new eu.Metadata};let ef={initialDelay:er["grpc.initial_reconnect_backoff_ms"],maxDelay:er["grpc.max_reconnect_backoff_ms"]};this.backoff=new em.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},ef),this.backoff.unref(),this.minTimeBetweenResolutionsMs=null!==(es=er["grpc.dns_min_time_between_resolutions_ms"])&&void 0!==es?es:eS,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(null!==this.ipResult){this.returnedIpResult||(ev("Returning IP address for target "+(0,ep.uriToString)(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),this.stopNextResolutionTimer();return}if(null===this.dnsHostname)ev("Failed to parse DNS address "+(0,ep.uriToString)(this.target)),setImmediate(()=>{this.listener.onError({code:eo.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,ep.uriToString)(this.target)}`,metadata:new eu.Metadata})}),this.stopNextResolutionTimer();else{if(null!==this.pendingLookupPromise)return;ev("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let $=this.dnsHostname;this.pendingLookupPromise=ew($,{all:!0}),this.pendingLookupPromise.then($=>{if(null===this.pendingLookupPromise)return;this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let ee=$.filter($=>4===$.family),et=$.filter($=>6===$.family);this.latestLookupResult=eE(et,ee).map($=>({host:$.address,port:+this.port}));let er="["+this.latestLookupResult.map($=>$.host+":"+$.port).join(",")+"]";if(ev("Resolved addresses for target "+(0,ep.uriToString)(this.target)+": "+er),0===this.latestLookupResult.length){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},$=>{null!==this.pendingLookupPromise&&(ev("Resolution error for target "+(0,ep.uriToString)(this.target)+": "+$.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError))}),this.isServiceConfigEnabled&&null===this.pendingTxtPromise&&(this.pendingTxtPromise=eT($),this.pendingTxtPromise.then($=>{if(null!==this.pendingTxtPromise){this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,es.extractAndSelectServiceConfig)($,this.percentage)}catch($){this.latestServiceConfigError={code:eo.Status.UNAVAILABLE,details:`Parsing service config failed with error ${$.message}`,metadata:new eu.Metadata}}null!==this.latestLookupResult&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}},$=>{}))}}startNextResolutionTimer(){var $,ee;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=null===(ee=($=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)||void 0===ee?void 0:ee.call($),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){null===this.pendingLookupPromise&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){null===this.pendingLookupPromise&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?ev('resolution update delayed by "min time between resolutions" rate limit'):ev("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.returnedIpResult=!1}static getDefaultAuthority($){return $.path}}function e_(){(0,er.registerResolver)("dns",eC),(0,er.registerDefaultScheme)("dns")}ee.setup=e_},1665:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.setup=void 0;let er=et(1808),en=et(2678),ei=et(2252),es=et(492),eo=et(8429),eu=et(7504),eh="ip_resolver";function ef($){eu.trace(en.LogVerbosity.DEBUG,eh,$)}let ep="ipv4",eg="ipv6",em=443;class ey{constructor($,ee,et){var es;this.listener=ee,this.addresses=[],this.error=null,this.hasReturnedResult=!1,ef("Resolver constructed for target "+(0,eo.uriToString)($));let eu=[];if(!($.scheme===ep||$.scheme===eg)){this.error={code:en.Status.UNAVAILABLE,details:`Unrecognized scheme ${$.scheme} in IP resolver`,metadata:new ei.Metadata};return}for(let ee of $.path.split(",")){let et=(0,eo.splitHostPort)(ee);if(null===et||$.scheme===ep&&!(0,er.isIPv4)(et.host)||$.scheme===eg&&!(0,er.isIPv6)(et.host)){this.error={code:en.Status.UNAVAILABLE,details:`Failed to parse ${$.scheme} address ${ee}`,metadata:new ei.Metadata};return}eu.push({host:et.host,port:null!==(es=et.port)&&void 0!==es?es:em})}this.addresses=eu,ef("Parsed "+$.scheme+" address list "+this.addresses)}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority($){return $.path.split(",")[0]}}function ev(){(0,es.registerResolver)(ep,ey),(0,es.registerResolver)(eg,ey)}ee.setup=ev},5862:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.setup=void 0;let er=et(492);class en{constructor($,ee,et){let er;this.listener=ee,this.addresses=[],this.hasReturnedResult=!1,er=""===$.authority?"/"+$.path:$.path,this.addresses=[{path:er}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{}))}destroy(){}static getDefaultAuthority($){return"localhost"}}function ei(){(0,er.registerResolver)("unix",en)}ee.setup=ei},492:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.mapUriDefaultScheme=ee.getDefaultAuthority=ee.createResolver=ee.registerDefaultScheme=ee.registerResolver=void 0;let er=et(8429),en={},ei=null;function es($,ee){en[$]=ee}function eo($){ei=$}function eu($,ee,et){if(void 0!==$.scheme&&$.scheme in en)return new en[$.scheme]($,ee,et);throw Error(`No resolver could be created for target ${(0,er.uriToString)($)}`)}function eh($){if(void 0!==$.scheme&&$.scheme in en)return en[$.scheme].getDefaultAuthority($);throw Error(`Invalid target ${(0,er.uriToString)($)}`)}function ef($){return void 0!==$.scheme&&$.scheme in en?$:null!==ei?{scheme:ei,authority:void 0,path:(0,er.uriToString)($)}:null}ee.registerResolver=es,ee.registerDefaultScheme=eo,ee.createResolver=eu,ee.getDefaultAuthority=eh,ee.mapUriDefaultScheme=ef},3003:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.ResolvingCall=void 0;let er=et(2678),en=et(7931),ei=et(2252),es=et(7504),eo=et(2155),eu="resolving_call";class eh{constructor($,ee,et,ei,es,eo){this.channel=$,this.method=ee,this.filterStackFactory=ei,this.credentials=es,this.callNumber=eo,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadline=et.deadline,this.host=et.host,et.parentCall&&(et.flags&er.Propagate.CANCELLATION&&et.parentCall.on("cancelled",()=>{this.cancelWithStatus(er.Status.CANCELLED,"Cancelled by parent call")}),et.flags&er.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+et.parentCall.getDeadline()),this.deadline=(0,en.minDeadline)(this.deadline,et.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace($){es.trace(er.LogVerbosity.DEBUG,eu,"["+this.callNumber+"] "+$)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.trace("Deadline: "+(0,en.deadlineToString)(this.deadline));let $=(0,en.getRelativeTimeout)(this.deadline);if($!==1/0){this.trace("Deadline will be reached in "+$+"ms");let ee=()=>{this.cancelWithStatus(er.Status.DEADLINE_EXCEEDED,"Deadline exceeded")};$<=0?process.nextTick(ee):this.deadlineTimer=setTimeout(ee,$)}}outputStatus($){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);let ee=this.filterStack.receiveTrailers($);this.trace("ended with status: code="+ee.code+' details="'+ee.details+'"'),this.statusWatchers.forEach($=>$(ee)),process.nextTick(()=>{var $;null===($=this.listener)||void 0===$||$.onReceiveStatus(ee)})}}sendMessageOnChild($,ee){if(!this.child)throw Error("sendMessageonChild called with child not populated");let et=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:ee,flags:$.flags})).then(ee=>{this.writeFilterPending=!1,et.sendMessageWithContext($,ee.message),this.pendingHalfClose&&et.halfClose()},$=>{this.cancelWithStatus($.code,$.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw Error("getConfig called before start");let $=this.channel.getConfig(this.method,this.metadata);if("NONE"===$.type){this.channel.queueCallForConfig(this);return}if("ERROR"===$.type){this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus($.error);return}let ee=$.config;if(ee.status!==er.Status.OK){let{code:$,details:et}=(0,eo.restrictControlPlaneStatusCode)(ee.status,"Failed to route call to method "+this.method);this.outputStatus({code:$,details:et,metadata:new ei.Metadata});return}if(ee.methodConfig.timeout){let $=new Date;$.setSeconds($.getSeconds()+ee.methodConfig.timeout.seconds),$.setMilliseconds($.getMilliseconds()+ee.methodConfig.timeout.nanos/1e6),this.deadline=(0,en.minDeadline)(this.deadline,$),this.runDeadlineTimer()}this.filterStackFactory.push(ee.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then($=>{this.child=this.channel.createInnerCall(ee,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.child.start($,{onReceiveMetadata:$=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata($))},onReceiveMessage:$=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage($).then($=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage($),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},$=>{this.cancelWithStatus($.code,$.details)})},onReceiveStatus:$=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=$:this.outputStatus($)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},$=>{this.outputStatus($)})}reportResolverError($){var ee;(null===(ee=this.metadata)||void 0===ee?void 0:ee.getOptions().waitForReady)?this.channel.queueCallForConfig(this):this.outputStatus($)}cancelWithStatus($,ee){var et;this.trace("cancelWithStatus code: "+$+' details: "'+ee+'"'),null===(et=this.child)||void 0===et||et.cancelWithStatus($,ee),this.outputStatus({code:$,details:ee,metadata:new ei.Metadata})}getPeer(){var $,ee;return null!==(ee=null===($=this.child)||void 0===$?void 0:$.getPeer())&&void 0!==ee?ee:this.channel.getTarget()}start($,ee){this.trace("start called"),this.metadata=$.clone(),this.listener=ee,this.getConfig()}sendMessageWithContext($,ee){this.trace("write() called with message of length "+ee.length),this.child?this.sendMessageOnChild($,ee):this.pendingMessage={context:$,message:ee}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials($){this.credentials=this.credentials.compose($)}addStatusWatcher($){this.statusWatchers.push($)}getCallNumber(){return this.callNumber}}ee.ResolvingCall=eh},2380:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.ResolvingLoadBalancer=void 0;let er=et(7176),en=et(6262),ei=et(3955),es=et(492),eo=et(7064),eu=et(4934),eh=et(2678),ef=et(2252),ep=et(7504),eg=et(2678),em=et(8429),ey=et(982),ev="resolving_load_balancer";function eS($){ep.trace(eg.LogVerbosity.DEBUG,ev,$)}let eT=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function ew($,ee,et,er){for(let en of et.name)switch(er){case"EMPTY":if(!en.service&&!en.method)return!0;break;case"SERVICE":if(en.service===$&&!en.method)return!0;break;case"SERVICE_AND_METHOD":if(en.service===$&&en.method===ee)return!0}return!1}function eE($,ee,et,er){for(let en of et)if(ew($,ee,en,er))return en;return null}function eC($){return function(ee,et){var er,en;let ei=ee.split("/").filter($=>$.length>0),es=null!==(er=ei[0])&&void 0!==er?er:"",eo=null!==(en=ei[1])&&void 0!==en?en:"";if($&&$.methodConfig)for(let ee of eT){let et=eE(es,eo,$.methodConfig,ee);if(et)return{methodConfig:et,pickInformation:{},status:eh.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:eh.Status.OK,dynamicFilterFactories:[]}}}class e_{constructor($,ee,et,ep,eg){this.target=$,this.channelControlHelper=ee,this.onSuccessfulResolution=ep,this.onFailedResolution=eg,this.latestChildState=ei.ConnectivityState.IDLE,this.latestChildPicker=new eo.QueuePicker(this),this.currentState=ei.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,et["grpc.service_config"]?this.defaultServiceConfig=(0,en.validateServiceConfig)(JSON.parse(et["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(ei.ConnectivityState.IDLE,new eo.QueuePicker(this)),this.childLoadBalancer=new ey.ChildLoadBalancerHandler({createSubchannel:ee.createSubchannel.bind(ee),requestReresolution:()=>{this.backoffTimeout.isRunning()?(eS("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:($,ee)=>{this.latestChildState=$,this.latestChildPicker=ee,this.updateState($,ee)},addChannelzChild:ee.addChannelzChild.bind(ee),removeChannelzChild:ee.removeChannelzChild.bind(ee)}),this.innerResolver=(0,es.createResolver)($,{onSuccessfulResolution:($,ee,et,en,ei)=>{var es;this.backoffTimeout.stop(),this.backoffTimeout.reset();let eo=null;null===ee?null===et?(this.previousServiceConfig=null,eo=this.defaultServiceConfig):null===this.previousServiceConfig?this.handleResolutionFailure(et):eo=this.previousServiceConfig:(eo=ee,this.previousServiceConfig=ee);let eu=null!==(es=null==eo?void 0:eo.loadBalancingConfig)&&void 0!==es?es:[],ep=(0,er.getFirstUsableConfig)(eu,!0);if(null===ep){this.handleResolutionFailure({code:eh.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new ef.Metadata});return}this.childLoadBalancer.updateAddressList($,ep,ei);let eg=null!=eo?eo:this.defaultServiceConfig;this.onSuccessfulResolution(eg,null!=en?en:eC(eg))},onError:$=>{this.handleResolutionFailure($)}},et);let em={initialDelay:et["grpc.initial_reconnect_backoff_ms"],maxDelay:et["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new eu.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},em),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===ei.ConnectivityState.IDLE&&this.updateState(ei.ConnectivityState.CONNECTING,new eo.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState($,ee){eS((0,em.uriToString)(this.target)+" "+ei.ConnectivityState[this.currentState]+" -> "+ei.ConnectivityState[$]),$===ei.ConnectivityState.IDLE&&(ee=new eo.QueuePicker(this)),this.currentState=$,this.channelControlHelper.updateState($,ee)}handleResolutionFailure($){this.latestChildState===ei.ConnectivityState.IDLE&&(this.updateState(ei.ConnectivityState.TRANSIENT_FAILURE,new eo.UnavailablePicker($)),this.onFailedResolution($))}exitIdle(){(this.currentState===ei.ConnectivityState.IDLE||this.currentState===ei.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList($,ee){throw Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=ei.ConnectivityState.IDLE,this.latestChildPicker=new eo.QueuePicker(this),this.currentState=ei.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}}ee.ResolvingLoadBalancer=e_},4398:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.RetryingCall=ee.MessageBufferTracker=ee.RetryThrottler=void 0;let er=et(2678),en=et(2252),ei=et(7504),es="retrying_call";class eo{constructor($,ee,et){this.maxTokens=$,this.tokenRatio=ee,et?this.tokens=et.tokens*($/et.maxTokens):this.tokens=$}addCallSucceeded(){this.tokens=Math.max(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.min(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}}ee.RetryThrottler=eo;class eu{constructor($,ee){this.totalLimit=$,this.limitPerCall=ee,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate($,ee){var et;let er=null!==(et=this.allocatedPerCall.get(ee))&&void 0!==et?et:0;return!(this.limitPerCall-er<$)&&!(this.totalLimit-this.totalAllocated<$)&&(this.allocatedPerCall.set(ee,er+$),this.totalAllocated+=$,!0)}free($,ee){var et;if(this.totalAllocated<$)throw Error(`Invalid buffer allocation state: call ${ee} freed ${$} > total allocated ${this.totalAllocated}`);this.totalAllocated-=$;let er=null!==(et=this.allocatedPerCall.get(ee))&&void 0!==et?et:0;if(er<$)throw Error(`Invalid buffer allocation state: call ${ee} freed ${$} > allocated for call ${er}`);this.allocatedPerCall.set(ee,er-$)}freeAll($){var ee;let et=null!==(ee=this.allocatedPerCall.get($))&&void 0!==ee?ee:0;if(this.totalAllocated<et)throw Error(`Invalid buffer allocation state: call ${$} allocated ${et} > total allocated ${this.totalAllocated}`);this.totalAllocated-=et,this.allocatedPerCall.delete($)}}ee.MessageBufferTracker=eu;let eh="grpc-previous-rpc-attempts";class ef{constructor($,ee,et,er,en,ei,es,eo,eu){if(this.channel=$,this.callConfig=ee,this.methodName=et,this.host=er,this.credentials=en,this.deadline=ei,this.callNumber=es,this.bufferTracker=eo,this.retryThrottler=eu,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0,ee.methodConfig.retryPolicy){this.state="RETRY";let $=ee.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number($.initialBackoff.substring(0,$.initialBackoff.length-1))}else ee.methodConfig.hedgingPolicy?this.state="HEDGING":this.state="TRANSPARENT_ONLY"}getCallNumber(){return this.callNumber}trace($){ei.trace(er.LogVerbosity.DEBUG,es,"["+this.callNumber+"] "+$)}reportStatus($){this.trace("ended with status: code="+$.code+' details="'+$.details+'"'),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var ee;null===(ee=this.listener)||void 0===ee||ee.onReceiveStatus({code:$.code,details:$.details,metadata:$.metadata})})}cancelWithStatus($,ee){for(let{call:et}of(this.trace("cancelWithStatus code: "+$+' details: "'+ee+'"'),this.reportStatus({code:$,details:ee,metadata:new en.Metadata}),this.underlyingCalls))et.cancelWithStatus($,ee)}getPeer(){return null!==this.committedCallIndex?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry($){var ee;return null!==(ee=this.writeBuffer[$-this.writeBufferOffset])&&void 0!==ee?ee:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if("COMMITTED"!==this.state)return;let $=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let ee=this.writeBufferOffset;ee<$;ee++){let $=this.getBufferEntry(ee);$.allocated&&this.bufferTracker.free($.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice($-this.writeBufferOffset),this.writeBufferOffset=$}commitCall($){if("COMMITTED"!==this.state&&"COMPLETED"!==this.underlyingCalls[$].state){this.trace("Committing call ["+this.underlyingCalls[$].call.getCallNumber()+"] at index "+$),this.state="COMMITTED",this.committedCallIndex=$;for(let ee=0;ee<this.underlyingCalls.length;ee++)ee!==$&&"COMPLETED"!==this.underlyingCalls[ee].state&&(this.underlyingCalls[ee].state="COMPLETED",this.underlyingCalls[ee].call.cancelWithStatus(er.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if("COMMITTED"===this.state)return;let $=-1,ee=-1;for(let[et,er]of this.underlyingCalls.entries())"ACTIVE"===er.state&&er.nextMessageToSend>$&&($=er.nextMessageToSend,ee=et);-1===ee?this.state="TRANSPARENT_ONLY":this.commitCall(ee)}isStatusCodeInList($,ee){return $.some($=>$===ee||$.toString().toLowerCase()===er.Status[ee].toLowerCase())}getNextRetryBackoffMs(){var $;let ee=null===($=this.callConfig)||void 0===$?void 0:$.methodConfig.retryPolicy;if(!ee)return 0;let et=Math.random()*this.nextRetryBackoffSec*1e3,er=Number(ee.maxBackoff.substring(0,ee.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*ee.backoffMultiplier,er),et}maybeRetryCall($,ee){let et;if("RETRY"!==this.state){ee(!1);return}let er=this.callConfig.methodConfig.retryPolicy;if(this.attempts>=Math.min(er.maxAttempts,5)){ee(!1);return}if(null===$)et=this.getNextRetryBackoffMs();else if($<0){this.state="TRANSPARENT_ONLY",ee(!1);return}else et=$,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var $,et;if("RETRY"!==this.state){ee(!1);return}(null===(et=null===($=this.retryThrottler)||void 0===$?void 0:$.canRetryCall())||void 0===et||et)&&(ee(!0),this.attempts+=1,this.startNewAttempt())},et)}countActiveCalls(){let $=0;for(let ee of this.underlyingCalls)(null==ee?void 0:ee.state)==="ACTIVE"&&($+=1);return $}handleProcessedStatus($,ee,et){var er,en,ei;switch(this.state){case"COMMITTED":case"TRANSPARENT_ONLY":this.commitCall(ee),this.reportStatus($);break;case"HEDGING":if(this.isStatusCodeInList(null!==(er=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)&&void 0!==er?er:[],$.code)){let er;if(null===(en=this.retryThrottler)||void 0===en||en.addCallFailed(),null===et)er=0;else if(et<0){this.state="TRANSPARENT_ONLY",this.commitCall(ee),this.reportStatus($);return}else er=et;setTimeout(()=>{this.maybeStartHedgingAttempt(),0===this.countActiveCalls()&&(this.commitCall(ee),this.reportStatus($))},er)}else this.commitCall(ee),this.reportStatus($);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,$.code)?(null===(ei=this.retryThrottler)||void 0===ei||ei.addCallFailed(),this.maybeRetryCall(et,et=>{et||(this.commitCall(ee),this.reportStatus($))})):(this.commitCall(ee),this.reportStatus($))}}getPushback($){let ee=$.get("grpc-retry-pushback-ms");if(0===ee.length)return null;try{return parseInt(ee[0])}catch($){return -1}}handleChildStatus($,ee){var et;if("COMPLETED"===this.underlyingCalls[ee].state)return;if(this.trace("state="+this.state+" handling status with progress "+$.progress+" from child ["+this.underlyingCalls[ee].call.getCallNumber()+"] in state "+this.underlyingCalls[ee].state),this.underlyingCalls[ee].state="COMPLETED",$.code===er.Status.OK){null===(et=this.retryThrottler)||void 0===et||et.addCallSucceeded(),this.commitCall(ee),this.reportStatus($);return}if("COMMITTED"===this.state){this.reportStatus($);return}let en=this.getPushback($.metadata);switch($.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus($,ee,en):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(ee),this.reportStatus($);break;case"PROCESSED":this.handleProcessedStatus($,ee,en)}}maybeStartHedgingAttempt(){if("HEDGING"!==this.state||!this.callConfig.methodConfig.hedgingPolicy)return;let $=this.callConfig.methodConfig.hedgingPolicy;this.attempts>=Math.min($.maxAttempts,5)||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer())}maybeStartHedgingTimer(){var $,ee,et;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),"HEDGING"!==this.state||!this.callConfig.methodConfig.hedgingPolicy)return;let er=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=Math.min(er.maxAttempts,5))return;let en=null!==($=er.hedgingDelay)&&void 0!==$?$:"0s",ei=Number(en.substring(0,en.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},1e3*ei),null===(et=(ee=this.hedgingTimer).unref)||void 0===et||et.call(ee)}startNewAttempt(){let $=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+$.getCallNumber()+"] for attempt "+this.attempts);let ee=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:$,nextMessageToSend:0});let et=this.attempts-1,er=this.initialMetadata.clone();et>0&&er.set(eh,`${et}`);let en=!1;$.start(er,{onReceiveMetadata:er=>{this.trace("Received metadata from child ["+$.getCallNumber()+"]"),this.commitCall(ee),en=!0,et>0&&er.set(eh,`${et}`),"ACTIVE"===this.underlyingCalls[ee].state&&this.listener.onReceiveMetadata(er)},onReceiveMessage:et=>{this.trace("Received message from child ["+$.getCallNumber()+"]"),this.commitCall(ee),"ACTIVE"===this.underlyingCalls[ee].state&&this.listener.onReceiveMessage(et)},onReceiveStatus:er=>{this.trace("Received status from child ["+$.getCallNumber()+"]"),!en&&et>0&&er.metadata.set(eh,`${et}`),this.handleChildStatus(er,ee)}}),this.sendNextChildMessage(ee),this.readStarted&&$.startRead()}start($,ee){this.trace("start called"),this.listener=ee,this.initialMetadata=$,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted($){var ee,et;let er=this.underlyingCalls[$],en=er.nextMessageToSend;null===(et=(ee=this.getBufferEntry(en)).callback)||void 0===et||et.call(ee),this.clearSentMessages(),er.nextMessageToSend+=1,this.sendNextChildMessage($)}sendNextChildMessage($){let ee=this.underlyingCalls[$];if("COMPLETED"!==ee.state&&this.getBufferEntry(ee.nextMessageToSend)){let et=this.getBufferEntry(ee.nextMessageToSend);switch(et.entryType){case"MESSAGE":ee.call.sendMessageWithContext({callback:ee=>{this.handleChildWriteCompleted($)}},et.message.message);break;case"HALF_CLOSE":ee.nextMessageToSend+=1,ee.call.halfClose()}}}sendMessageWithContext($,ee){var et;this.trace("write() called with message of length "+ee.length);let er={message:ee,flags:$.flags},en=this.getNextBufferIndex(),ei={entryType:"MESSAGE",message:er,allocated:this.bufferTracker.allocate(ee.length,this.callNumber)};if(this.writeBuffer.push(ei),ei.allocated)for(let[er,ei]of(null===(et=$.callback)||void 0===et||et.call($),this.underlyingCalls.entries()))"ACTIVE"===ei.state&&ei.nextMessageToSend===en&&ei.call.sendMessageWithContext({callback:$=>{this.handleChildWriteCompleted(er)}},ee);else{if(this.commitCallWithMostMessages(),null===this.committedCallIndex)return;let et=this.underlyingCalls[this.committedCallIndex];ei.callback=$.callback,"ACTIVE"===et.state&&et.nextMessageToSend===en&&et.call.sendMessageWithContext({callback:$=>{this.handleChildWriteCompleted(this.committedCallIndex)}},ee)}}startRead(){for(let $ of(this.trace("startRead called"),this.readStarted=!0,this.underlyingCalls))(null==$?void 0:$.state)==="ACTIVE"&&$.call.startRead()}halfClose(){this.trace("halfClose called");let $=this.getNextBufferIndex();for(let ee of(this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1}),this.underlyingCalls))(null==ee?void 0:ee.state)==="ACTIVE"&&ee.nextMessageToSend===$&&(ee.nextMessageToSend+=1,ee.call.halfClose())}setCredentials($){throw Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}}ee.RetryingCall=ef},7061:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.Http2ServerCallStream=ee.ServerDuplexStreamImpl=ee.ServerWritableStreamImpl=ee.ServerReadableStreamImpl=ee.ServerUnaryCallImpl=void 0;let er=et(2361),en=et(5158),ei=et(2781),es=et(9796),eo=et(3837),eu=et(2678),eh=et(2252),ef=et(8326),ep=et(7504),eg=et(5437),em="server_call",ey=(0,eo.promisify)(es.unzip),ev=(0,eo.promisify)(es.inflate);function eS($){ep.trace(eu.LogVerbosity.DEBUG,em,$)}let eT="grpc-message",ew="grpc-status",eE="grpc-timeout",eC=/(\d{1,8})\s*([HMSmun])/,e_={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},eR={"grpc-accept-encoding":"identity,deflate,gzip","grpc-encoding":"identity"},ex={[en.constants.HTTP2_HEADER_STATUS]:en.constants.HTTP_STATUS_OK,[en.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},eI={waitForTrailers:!0};class eP extends er.EventEmitter{constructor($,ee,et){super(),this.call=$,this.metadata=ee,this.request=et,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata($){this.call.sendMetadata($)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}ee.ServerUnaryCallImpl=eP;class eA extends ei.Readable{constructor($,ee,et,er){super({objectMode:!0}),this.call=$,this.metadata=ee,this.deserialize=et,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,er)}_read($){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata($){this.call.sendMetadata($)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}ee.ServerReadableStreamImpl=eA;class eO extends ei.Writable{constructor($,ee,et,er){super({objectMode:!0}),this.call=$,this.metadata=ee,this.serialize=et,this.request=er,this.cancelled=!1,this.trailingMetadata=new eh.Metadata,this.call.setupSurfaceCall(this),this.on("error",$=>{this.call.sendError($),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata($){this.call.sendMetadata($)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write($,ee,et){try{let ee=this.call.serializeMessage($);if(!this.call.write(ee)){this.call.once("drain",et);return}}catch($){this.emit("error",{details:(0,eg.getErrorMessage)($),code:eu.Status.INTERNAL})}et()}_final($){this.call.sendStatus({code:eu.Status.OK,details:"OK",metadata:this.trailingMetadata}),$(null)}end($){return $&&(this.trailingMetadata=$),super.end()}}ee.ServerWritableStreamImpl=eO;class eD extends ei.Duplex{constructor($,ee,et,er,en){super({objectMode:!0}),this.call=$,this.metadata=ee,this.serialize=et,this.deserialize=er,this.cancelled=!1,this.trailingMetadata=new eh.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,en),this.on("error",$=>{this.call.sendError($),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata($){this.call.sendMetadata($)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end($){return $&&(this.trailingMetadata=$),super.end()}}ee.ServerDuplexStreamImpl=eD,eD.prototype._read=eA.prototype._read,eD.prototype._write=eO.prototype._write,eD.prototype._final=eO.prototype._final;class eN extends er.EventEmitter{constructor($,ee,et){super(),this.stream=$,this.handler=ee,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=eu.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=eu.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",$=>{}),this.stream.once("close",()=>{var $;eS("Request to method "+(null===($=this.handler)||void 0===$?void 0:$.path)+" stream closed with rstCode "+this.stream.rstCode),!this.statusSent&&(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:eu.Status.CANCELLED,details:"Cancelled by client",metadata:null}),this.deadlineTimer&&clearTimeout(this.deadlineTimer))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in et&&(this.maxSendMessageSize=et["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in et&&(this.maxReceiveMessageSize=et["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage($,ee){return"deflate"===ee?ev($.subarray(5)):"gzip"===ee?ey($.subarray(5)):"identity"===ee?$.subarray(5):Promise.reject({code:eu.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${ee}"`})}sendMetadata($){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let ee=$?$.toHttp2Headers():null,et=Object.assign(Object.assign(Object.assign({},ex),eR),ee);this.stream.respond(et,eI)}receiveMetadata($){let ee=eh.Metadata.fromHttp2Headers($);ep.isTracerEnabled(em)&&eS("Request to "+this.handler.path+" received headers "+JSON.stringify(ee.toJSON()));let et=ee.get(eE);if(et.length>0){let $=et[0].toString().match(eC);if(null===$){let $=Error("Invalid deadline");return $.code=eu.Status.OUT_OF_RANGE,this.sendError($),ee}let er=+$[1]*e_[$[2]]|0,en=new Date;this.deadline=en.setMilliseconds(en.getMilliseconds()+er),this.deadlineTimer=setTimeout(ek,er,this),ee.remove(eE)}return ee.remove(en.constants.HTTP2_HEADER_ACCEPT_ENCODING),ee.remove(en.constants.HTTP2_HEADER_TE),ee.remove(en.constants.HTTP2_HEADER_CONTENT_TYPE),ee.remove("grpc-accept-encoding"),ee}receiveUnaryMessage($){return new Promise((ee,et)=>{let{stream:er}=this,en=0,ei=this,es=[],eo=this.maxReceiveMessageSize;function eh($){if(en+=$.byteLength,-1!==eo&&en>eo){er.removeListener("data",eh),er.removeListener("end",ef),er.removeListener("error",ef),et({code:eu.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${en} vs. ${eo})`});return}es.push($)}function ef(eo){if(er.removeListener("data",eh),er.removeListener("end",ef),er.removeListener("error",ef),void 0!==eo){et({code:eu.Status.INTERNAL,details:eo.message});return}if(0===en){et({code:eu.Status.INTERNAL,details:"received empty unary message"});return}ei.emit("receiveMessage");let ep=Buffer.concat(es,en),eg=1===ep.readUInt8(0)?$:"identity",em=ei.getDecompressedMessage(ep,eg);if(Buffer.isBuffer(em)){ee(ei.deserializeMessageWithInternalError(em));return}em.then($=>ee(ei.deserializeMessageWithInternalError($)),ee=>et(ee.code?ee:{code:eu.Status.INTERNAL,details:`Received "grpc-encoding" header "${$}" but ${$} decompression failed`}))}this.stream.on("data",eh),this.stream.on("end",ef),this.stream.on("error",ef)})}async deserializeMessageWithInternalError($){try{return this.deserializeMessage($)}catch($){throw{details:(0,eg.getErrorMessage)($),code:eu.Status.INTERNAL}}}serializeMessage($){let ee=this.handler.serialize($),et=ee.byteLength,er=Buffer.allocUnsafe(et+5);return er.writeUInt8(0,0),er.writeUInt32BE(et,1),ee.copy(er,5),er}deserializeMessage($){return this.handler.deserialize($)}async sendUnaryMessage($,ee,et,er){if(!this.checkCancelled()){if(void 0===et&&(et=null),$){!Object.prototype.hasOwnProperty.call($,"metadata")&&et&&($.metadata=et),this.sendError($);return}try{let $=this.serializeMessage(ee);this.write($),this.sendStatus({code:eu.Status.OK,details:"OK",metadata:et})}catch($){this.sendError({details:(0,eg.getErrorMessage)($),code:eu.Status.INTERNAL})}}}sendStatus($){var ee,et;if(this.emit("callEnd",$.code),this.emit("streamEnd",$.code===eu.Status.OK),!this.checkCancelled()){if(eS("Request to method "+(null===(ee=this.handler)||void 0===ee?void 0:ee.path)+" ended with status code: "+eu.Status[$.code]+" details: "+$.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.headersSent)this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var ee;let et=Object.assign({[ew]:$.code,[eT]:encodeURI($.details)},null===(ee=$.metadata)||void 0===ee?void 0:ee.toHttp2Headers());this.stream.sendTrailers(et),this.statusSent=!0}),this.stream.end());else{let ee=Object.assign(Object.assign({[ew]:$.code,[eT]:encodeURI($.details)},ex),null===(et=$.metadata)||void 0===et?void 0:et.toHttp2Headers());this.stream.respond(ee,{endStream:!0}),this.statusSent=!0}}}sendError($){let ee={code:eu.Status.UNKNOWN,details:"message"in $?$.message:"Unknown Error",metadata:"metadata"in $&&void 0!==$.metadata?$.metadata:null};"code"in $&&"number"==typeof $.code&&Number.isInteger($.code)&&(ee.code=$.code,"details"in $&&"string"==typeof $.details&&(ee.details=$.details)),this.sendStatus(ee)}write($){if(!this.checkCancelled()){if(-1!==this.maxSendMessageSize&&$.length>this.maxSendMessageSize){this.sendError({code:eu.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${$.length} vs. ${this.maxSendMessageSize})`});return}return this.sendMetadata(),this.emit("sendMessage"),this.stream.write($)}}resume(){this.stream.resume()}setupSurfaceCall($){this.once("cancelled",ee=>{$.cancelled=!0,$.emit("cancelled",ee)}),this.once("callEnd",ee=>$.emit("callEnd",ee))}setupReadable($,ee){let et=new ef.StreamDecoder,er=!1,en=!1,ei=!1,es=async()=>{ei||!er||en||(ei=!0,await this.pushOrBufferMessage($,null))};this.stream.on("data",async er=>{let ei=et.write(er);for(let et of(en=!0,this.stream.pause(),ei)){if(-1!==this.maxReceiveMessageSize&&et.length>this.maxReceiveMessageSize){this.sendError({code:eu.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${et.length} vs. ${this.maxReceiveMessageSize})`});return}this.emit("receiveMessage");let er=1===et.readUInt8(0)?ee:"identity",en=await this.getDecompressedMessage(et,er);if(!en)return;await this.pushOrBufferMessage($,en)}en=!1,this.stream.resume(),await es()}),this.stream.once("end",async()=>{er=!0,await es()})}consumeUnpushedMessages($){for(this.canPush=!0;this.messagesToPush.length>0;){let ee=this.messagesToPush.shift(),et=$.push(ee);if(null===ee||!1===et){this.canPush=!1;break}}return this.canPush}async pushOrBufferMessage($,ee){this.isPushPending?this.bufferedMessages.push(ee):await this.pushMessage($,ee)}async pushMessage($,ee){if(null===ee){eS("Received end of stream"),this.canPush?$.push(null):this.messagesToPush.push(null);return}eS("Received message of length "+ee.length),this.isPushPending=!0;try{let et=await this.deserializeMessage(ee);this.canPush?$.push(et)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(et)}catch(et){this.bufferedMessages.length=0;let ee=(0,eg.getErrorCode)(et);(null===ee||ee<eu.Status.OK||ee>eu.Status.UNAUTHENTICATED)&&(ee=eu.Status.INTERNAL),$.emit("error",{details:(0,eg.getErrorMessage)(et),code:ee})}this.isPushPending=!1,this.bufferedMessages.length>0&&await this.pushMessage($,this.bufferedMessages.shift())}getPeer(){var $;let ee=null===($=this.stream.session)||void 0===$?void 0:$.socket;return null!=ee&&ee.remoteAddress?ee.remotePort?`${ee.remoteAddress}:${ee.remotePort}`:ee.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}}function ek($){let ee=Error("Deadline exceeded");ee.code=eu.Status.DEADLINE_EXCEEDED,$.sendError(ee),$.cancelled=!0,$.emit("cancelled","deadline")}ee.Http2ServerCallStream=eN},4181:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.ServerCredentials=void 0;let er=et(3009);class en{static createInsecure(){return new ei}static createSsl($,ee,et=!1){if(null!==$&&!Buffer.isBuffer($))throw TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(ee))throw TypeError("keyCertPairs must be an array");if("boolean"!=typeof et)throw TypeError("checkClientCertificate must be a boolean");let en=[],ei=[];for(let $=0;$<ee.length;$++){let et=ee[$];if(null===et||"object"!=typeof et)throw TypeError(`keyCertPair[${$}] must be an object`);if(!Buffer.isBuffer(et.private_key))throw TypeError(`keyCertPair[${$}].private_key must be a Buffer`);if(!Buffer.isBuffer(et.cert_chain))throw TypeError(`keyCertPair[${$}].cert_chain must be a Buffer`);en.push(et.cert_chain),ei.push(et.private_key)}return new es({ca:$||(0,er.getDefaultRootsData)()||void 0,cert:en,key:ei,requestCert:et,ciphers:er.CIPHER_SUITES})}}ee.ServerCredentials=en;class ei extends en{_isSecure(){return!1}_getSettings(){return null}}class es extends en{constructor($){super(),this.options=$}_isSecure(){return!0}_getSettings(){return this.options}}},7691:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.Server=void 0;let er=et(5158),en=et(2678),ei=et(7061),es=et(4181),eo=et(492),eu=et(7504),eh=et(3906),ef=et(8429),ep=et(5993),eg=2147483647,em=2147483647,ey=2e4,{HTTP2_HEADER_PATH:ev}=er.constants,eS="server";function eT(){}function ew($){return{code:en.Status.UNIMPLEMENTED,details:`The server does not implement the method ${$}`}}function eE($,ee){let et=ew(ee);switch($){case"unary":return($,ee)=>{ee(et,null)};case"clientStream":return($,ee)=>{ee(et,null)};case"serverStream":return $=>{$.emit("error",et)};case"bidi":return $=>{$.emit("error",et)};default:throw Error(`Invalid handlerType ${$}`)}}class eC{constructor($){var ee,et,er,en;this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new ep.ChannelzTrace,this.callTracker=new ep.ChannelzCallTracker,this.listenerChildrenTracker=new ep.ChannelzChildrenTracker,this.sessionChildrenTracker=new ep.ChannelzChildrenTracker,this.options=null!=$?$:{},0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,ep.registerChannelzServer)(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=null!==(ee=this.options["grpc.max_connection_age_ms"])&&void 0!==ee?ee:eg,this.maxConnectionAgeGraceMs=null!==(et=this.options["grpc.max_connection_age_grace_ms"])&&void 0!==et?et:eg,this.keepaliveTimeMs=null!==(er=this.options["grpc.keepalive_time_ms"])&&void 0!==er?er:em,this.keepaliveTimeoutMs=null!==(en=this.options["grpc.keepalive_timeout_ms"])&&void 0!==en?en:ey,this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter($){return()=>{var ee,et,er;let en;let ei=this.sessions.get($),es=$.socket,eo=es.remoteAddress?(0,eh.stringToSubchannelAddress)(es.remoteAddress,es.remotePort):null,eu=es.localAddress?(0,eh.stringToSubchannelAddress)(es.localAddress,es.localPort):null;if($.encrypted){let $=es,et=$.getCipher(),er=$.getCertificate(),ei=$.getPeerCertificate();en={cipherSuiteStandardName:null!==(ee=et.standardName)&&void 0!==ee?ee:null,cipherSuiteOtherName:et.standardName?null:et.name,localCertificate:er&&"raw"in er?er.raw:null,remoteCertificate:ei&&"raw"in ei?ei.raw:null}}else en=null;return{remoteAddress:eo,localAddress:eu,security:en,remoteName:null,streamsStarted:ei.streamTracker.callsStarted,streamsSucceeded:ei.streamTracker.callsSucceeded,streamsFailed:ei.streamTracker.callsFailed,messagesSent:ei.messagesSent,messagesReceived:ei.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:ei.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:ei.lastMessageSentTimestamp,lastMessageReceivedTimestamp:ei.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(et=$.state.localWindowSize)&&void 0!==et?et:null,remoteFlowControlWindow:null!==(er=$.state.remoteWindowSize)&&void 0!==er?er:null}}}trace($){eu.trace(en.LogVerbosity.DEBUG,eS,"("+this.channelzRef.id+") "+$)}addProtoService(){throw Error("Not implemented. Use addService() instead")}addService($,ee){if(null===$||"object"!=typeof $||null===ee||"object"!=typeof ee)throw Error("addService() requires two objects as arguments");let et=Object.keys($);if(0===et.length)throw Error("Cannot add an empty service to a server");et.forEach(et=>{let er,en;let ei=$[et];er=ei.requestStream?ei.responseStream?"bidi":"clientStream":ei.responseStream?"serverStream":"unary";let es=ee[et];if(void 0===es&&"string"==typeof ei.originalName&&(es=ee[ei.originalName]),en=void 0!==es?es.bind(ee):eE(er,et),!1===this.register(ei.path,en,ei.responseSerialize,ei.requestDeserialize,er))throw Error(`Method handler for ${ei.path} already provided.`)})}removeService($){if(null===$||"object"!=typeof $)throw Error("removeService() requires object as argument");Object.keys($).forEach(ee=>{let et=$[ee];this.unregister(et.path)})}bind($,ee){throw Error("Not implemented. Use bindAsync() instead")}bindAsync($,ee,et){if(!0===this.started)throw Error("server is already started");if(this.shutdown)throw Error("bindAsync called after shutdown");if("string"!=typeof $)throw TypeError("port must be a string");if(null===ee||!(ee instanceof es.ServerCredentials))throw TypeError("creds must be a ServerCredentials object");if("function"!=typeof et)throw TypeError("callback must be a function");let ei=(0,ef.parseUri)($);if(null===ei)throw Error(`Could not parse port "${$}"`);let eg=(0,eo.mapUriDefaultScheme)(ei);if(null===eg)throw Error(`Could not get a default scheme for port "${$}"`);let em={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?em.maxSessionMemory=this.options["grpc-node.max_session_memory"]:em.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(em.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let ey=($,ee)=>{process.nextTick(()=>et($,ee))},ev=()=>{let $;if(ee._isSecure()){let et=Object.assign(em,ee._getSettings());et.enableTrace=1===this.options["grpc-node.tls_enable_trace"],($=er.createSecureServer(et)).on("secureConnection",$=>{$.on("error",$=>{this.trace("An incoming TLS connection closed with error: "+$.message)})})}else $=er.createServer(em);return $.setTimeout(0,eT),this._setupHandlers($),$},eS=($,ee,et)=>0===$.length?Promise.resolve({port:ee,count:et}):Promise.all($.map($=>{let et;this.trace("Attempting to bind "+(0,eh.subchannelAddressToString)($)),et=(0,eh.isTcpSubchannelAddress)($)?{host:$.host,port:ee}:$;let er=ev();return new Promise((en,ei)=>{let es=ee=>{this.trace("Failed to bind "+(0,eh.subchannelAddressToString)($)+" with error "+ee.message),en(ee)};er.once("error",es),er.listen(et,()=>{let $;if(this.shutdown){er.close(),en(Error("bindAsync failed because server is shutdown"));return}let et=er.address();$="string"==typeof et?{path:et}:{host:et.address,port:et.port};let ei=(0,ep.registerChannelzSocket)((0,eh.subchannelAddressToString)($),()=>({localAddress:$,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(ei),this.http2ServerList.push({server:er,channelzRef:ei}),this.trace("Successfully bound "+(0,eh.subchannelAddressToString)($)),en("port"in $?$.port:ee),er.removeListener("error",es)})})})).then($=>{let er=0;for(let et of $)if("number"==typeof et&&(er+=1,et!==ee))throw Error("Invalid state: multiple port numbers added from single address");return{port:ee,count:er+et}}),ew=$=>{if(0===$.length)return Promise.resolve({port:0,count:0});let ee=$[0],et=ev();return new Promise((er,en)=>{let ei=et=>{this.trace("Failed to bind "+(0,eh.subchannelAddressToString)(ee)+" with error "+et.message),er(ew($.slice(1)))};et.once("error",ei),et.listen(ee,()=>{if(this.shutdown){et.close(),er({port:0,count:0});return}let ee=et.address(),en={host:ee.address,port:ee.port},es=(0,ep.registerChannelzSocket)((0,eh.subchannelAddressToString)(en),()=>({localAddress:en,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(es),this.http2ServerList.push({server:et,channelzRef:es}),this.trace("Successfully bound "+(0,eh.subchannelAddressToString)(en)),er(eS($.slice(1),ee.port,1)),et.removeListener("error",ei)})})},eE={onSuccessfulResolution:(ee,et,er)=>{let ei;if(eE.onSuccessfulResolution=()=>{},this.shutdown&&ey(Error("bindAsync failed because server is shutdown"),0),0===ee.length){ey(Error(`No addresses resolved for port ${$}`),0);return}(ei=(0,eh.isTcpSubchannelAddress)(ee[0])?0===ee[0].port?ew(ee):eS(ee,ee[0].port,0):eS(ee,1,0)).then($=>{if(0===$.count){let $=`No address added out of total ${ee.length} resolved`;eu.log(en.LogVerbosity.ERROR,$),ey(Error($),0)}else $.count<ee.length&&eu.log(en.LogVerbosity.INFO,`WARNING Only ${$.count} addresses added out of total ${ee.length} resolved`),ey(null,$.port)},$=>{let et=`No address added out of total ${ee.length} resolved`;eu.log(en.LogVerbosity.ERROR,et),ey(Error(et),0)})},onError:$=>{ey(Error($.details),0)}};(0,eo.createResolver)(eg,eE,this.options).updateResolution()}forceShutdown(){for(let{server:$,channelzRef:ee}of this.http2ServerList)$.listening&&$.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(ee),(0,ep.unregisterChannelzRef)(ee))});this.started=!1,this.shutdown=!0,this.sessions.forEach(($,ee)=>{ee.destroy(er.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&(0,ep.unregisterChannelzRef)(this.channelzRef)}register($,ee,et,er,en){return!this.handlers.has($)&&(this.handlers.set($,{func:ee,serialize:et,deserialize:er,type:en,path:$}),!0)}unregister($){return this.handlers.delete($)}start(){if(0===this.http2ServerList.length||this.http2ServerList.every(({server:$})=>!0!==$.listening))throw Error("server must be bound in order to start");if(!0===this.started)throw Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown($){let ee=ee=>{this.channelzEnabled&&(0,ep.unregisterChannelzRef)(this.channelzRef),$(ee)},et=0;function er(){0==--et&&ee()}for(let{server:$,channelzRef:ee}of(this.started=!1,this.shutdown=!0,this.http2ServerList))$.listening&&(et++,$.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(ee),(0,ep.unregisterChannelzRef)(ee)),er()}));this.sessions.forEach(($,ee)=>{ee.closed||(et+=1,ee.close(er))}),0===et&&ee()}addHttp2Port(){throw Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType($,ee){let et=ee[er.constants.HTTP2_HEADER_CONTENT_TYPE];return!!("string"==typeof et&&et.startsWith("application/grpc"))||($.respond({[er.constants.HTTP2_HEADER_STATUS]:er.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1)}_retrieveHandler($){this.trace("Received call to method "+$+" at address "+this.serverAddressString);let ee=this.handlers.get($);return void 0===ee?(this.trace("No handler registered for method "+$+". Sending UNIMPLEMENTED status."),null):ee}_respondWithError($,ee,et=null){let er=new ei.Http2ServerCallStream(ee,null,this.options);void 0===$.code&&($.code=en.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),null==et||et.streamTracker.addCallFailed()),er.sendError($)}_channelzHandler($,ee){let et=this.sessions.get($.session);if(this.callTracker.addCallStarted(),null==et||et.streamTracker.addCallStarted(),!this._verifyContentType($,ee)){this.callTracker.addCallFailed(),null==et||et.streamTracker.addCallFailed();return}let er=ee[ev],es=this._retrieveHandler(er);if(!es){this._respondWithError(ew(er),$,et);return}let eo=new ei.Http2ServerCallStream($,es,this.options);eo.once("callEnd",$=>{$===en.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),et&&(eo.once("streamEnd",$=>{$?et.streamTracker.addCallSucceeded():et.streamTracker.addCallFailed()}),eo.on("sendMessage",()=>{et.messagesSent+=1,et.lastMessageSentTimestamp=new Date}),eo.on("receiveMessage",()=>{et.messagesReceived+=1,et.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(eo,es,ee)||(this.callTracker.addCallFailed(),null==et||et.streamTracker.addCallFailed(),eo.sendError({code:en.Status.INTERNAL,details:`Unknown handler type: ${es.type}`}))}_streamHandler($,ee){if(!0!==this._verifyContentType($,ee))return;let et=ee[ev],er=this._retrieveHandler(et);if(!er){this._respondWithError(ew(et),$,null);return}let es=new ei.Http2ServerCallStream($,er,this.options);this._runHandlerForCall(es,er,ee)||es.sendError({code:en.Status.INTERNAL,details:`Unknown handler type: ${er.type}`})}_runHandlerForCall($,ee,et){var er;let en=$.receiveMetadata(et),ei=null!==(er=en.get("grpc-encoding")[0])&&void 0!==er?er:"identity";en.remove("grpc-encoding");let{type:es}=ee;if("unary"===es)e_($,ee,en,ei);else if("clientStream"===es)eR($,ee,en,ei);else if("serverStream"===es)ex($,ee,en,ei);else{if("bidi"!==es)return!1;eI($,ee,en,ei)}return!0}_setupHandlers($){if(null===$)return;let ee=$.address(),et="null";ee&&(et="string"==typeof ee?ee:ee.address+":"+ee.port),this.serverAddressString=et;let en=this.channelzEnabled?this._channelzHandler:this._streamHandler;$.on("stream",en.bind(this)),$.on("session",$=>{var ee,et,en,ei,es;if(!this.started){$.destroy();return}let eo=(0,ep.registerChannelzSocket)(null!==(ee=$.socket.remoteAddress)&&void 0!==ee?ee:"unknown",this.getChannelzSessionInfoGetter($),this.channelzEnabled),eu={ref:eo,streamTracker:new ep.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set($,eu);let eh=$.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+eh),this.sessionChildrenTracker.refChild(eo));let ef=null,em=null,ey=!1;if(this.maxConnectionAgeMs!==eg){let ee=this.maxConnectionAgeMs/10,ei=Math.random()*ee*2-ee;ef=null===(en=(et=setTimeout(()=>{var ee,et;ey=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+eh);try{$.goaway(er.constants.NGHTTP2_NO_ERROR,2147483647,Buffer.from("max_age"))}catch(ee){$.destroy();return}$.close(),this.maxConnectionAgeGraceMs!==eg&&(em=null===(et=(ee=setTimeout(()=>{$.destroy()},this.maxConnectionAgeGraceMs)).unref)||void 0===et?void 0:et.call(ee))},this.maxConnectionAgeMs+ei)).unref)||void 0===en?void 0:en.call(et)}let ev=null===(es=(ei=setInterval(()=>{var ee,et;let er=null===(et=(ee=setTimeout(()=>{ey=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+eh),$.close()},this.keepaliveTimeoutMs)).unref)||void 0===et?void 0:et.call(ee);try{$.ping(($,ee,et)=>{clearTimeout(er)})}catch(ee){$.destroy()}},this.keepaliveTimeMs)).unref)||void 0===es?void 0:es.call(ei);$.on("close",()=>{this.channelzEnabled&&(ey||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+eh),this.sessionChildrenTracker.unrefChild(eo),(0,ep.unregisterChannelzRef)(eo)),ef&&clearTimeout(ef),em&&clearTimeout(em),ev&&clearTimeout(ev),this.sessions.delete($)})})}}async function e_($,ee,et,er){try{let en=await $.receiveUnaryMessage(er);if(void 0===en||$.cancelled)return;let es=new ei.ServerUnaryCallImpl($,et,en);ee.func(es,(ee,et,er,en)=>{$.sendUnaryMessage(ee,et,er,en)})}catch(ee){$.sendError(ee)}}function eR($,ee,et,er){let en=new ei.ServerReadableStreamImpl($,et,ee.deserialize,er);function es(ee,et,er,ei){en.destroy(),$.sendUnaryMessage(ee,et,er,ei)}$.cancelled||(en.on("error",es),ee.func(en,es))}async function ex($,ee,et,er){try{let en=await $.receiveUnaryMessage(er);if(void 0===en||$.cancelled)return;let es=new ei.ServerWritableStreamImpl($,et,ee.serialize,en);ee.func(es)}catch(ee){$.sendError(ee)}}function eI($,ee,et,er){let en=new ei.ServerDuplexStreamImpl($,et,ee.serialize,ee.deserialize,er);$.cancelled||ee.func(en)}ee.Server=eC},6262:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.extractAndSelectServiceConfig=ee.validateServiceConfig=ee.validateRetryThrottling=void 0;let er=et(2037),en=et(2678),ei=et(7176),es=/^\d+(\.\d{1,9})?s$/,eo="node";function eu($){if("service"in $&&""!==$.service){if("string"!=typeof $.service)throw Error(`Invalid method config name: invalid service: expected type string, got ${typeof $.service}`);if(!("method"in $)||""===$.method)return{service:$.service};if("string"!=typeof $.method)throw Error(`Invalid method config name: invalid method: expected type string, got ${typeof $.service}`);return{service:$.service,method:$.method}}if("method"in $&&void 0!==$.method)throw Error("Invalid method config name: method set with empty or unset service");return{}}function eh($){if(!("maxAttempts"in $)||!Number.isInteger($.maxAttempts)||$.maxAttempts<2)throw Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in $)||"string"!=typeof $.initialBackoff||!es.test($.initialBackoff))throw Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer followed by s");if(!("maxBackoff"in $)||"string"!=typeof $.maxBackoff||!es.test($.maxBackoff))throw Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer followed by s");if(!("backoffMultiplier"in $)||"number"!=typeof $.backoffMultiplier||$.backoffMultiplier<=0)throw Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in $&&Array.isArray($.retryableStatusCodes)))throw Error("Invalid method config retry policy: retryableStatusCodes is required");if(0===$.retryableStatusCodes.length)throw Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let ee of $.retryableStatusCodes)if("number"==typeof ee){if(!Object.values(en.Status).includes(ee))throw Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if("string"==typeof ee){if(!Object.values(en.Status).includes(ee.toUpperCase()))throw Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return{maxAttempts:$.maxAttempts,initialBackoff:$.initialBackoff,maxBackoff:$.maxBackoff,backoffMultiplier:$.backoffMultiplier,retryableStatusCodes:$.retryableStatusCodes}}function ef($){if(!("maxAttempts"in $)||!Number.isInteger($.maxAttempts)||$.maxAttempts<2)throw Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in $&&("string"!=typeof $.hedgingDelay||!es.test($.hedgingDelay)))throw Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in $&&Array.isArray($.nonFatalStatusCodes))for(let ee of $.nonFatalStatusCodes)if("number"==typeof ee){if(!Object.values(en.Status).includes(ee))throw Error("Invlid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if("string"==typeof ee){if(!Object.values(en.Status).includes(ee.toUpperCase()))throw Error("Invlid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw Error("Invlid method config hedging policy: nonFatalStatusCodes value must be a string or number");let ee={maxAttempts:$.maxAttempts};return $.hedgingDelay&&(ee.hedgingDelay=$.hedgingDelay),$.nonFatalStatusCodes&&(ee.nonFatalStatusCodes=$.nonFatalStatusCodes),ee}function ep($){var ee;let et={name:[]};if(!("name"in $)||!Array.isArray($.name))throw Error("Invalid method config: invalid name array");for(let ee of $.name)et.name.push(eu(ee));if("waitForReady"in $){if("boolean"!=typeof $.waitForReady)throw Error("Invalid method config: invalid waitForReady");et.waitForReady=$.waitForReady}if("timeout"in $){if("object"==typeof $.timeout){if(!("seconds"in $.timeout)||"number"!=typeof $.timeout.seconds)throw Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in $.timeout)||"number"!=typeof $.timeout.nanos)throw Error("Invalid method config: invalid timeout.nanos");et.timeout=$.timeout}else if("string"==typeof $.timeout&&es.test($.timeout)){let er=$.timeout.substring(0,$.timeout.length-1).split(".");et.timeout={seconds:0|er[0],nanos:(null!==(ee=er[1])&&void 0!==ee?ee:0)|0}}else throw Error("Invalid method config: invalid timeout")}if("maxRequestBytes"in $){if("number"!=typeof $.maxRequestBytes)throw Error("Invalid method config: invalid maxRequestBytes");et.maxRequestBytes=$.maxRequestBytes}if("maxResponseBytes"in $){if("number"!=typeof $.maxResponseBytes)throw Error("Invalid method config: invalid maxRequestBytes");et.maxResponseBytes=$.maxResponseBytes}if("retryPolicy"in $){if("hedgingPolicy"in $)throw Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");et.retryPolicy=eh($.retryPolicy)}else"hedgingPolicy"in $&&(et.hedgingPolicy=ef($.hedgingPolicy));return et}function eg($){if(!("maxTokens"in $)||"number"!=typeof $.maxTokens||$.maxTokens<=0||$.maxTokens>1e3)throw Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in $)||"number"!=typeof $.tokenRatio||$.tokenRatio<=0)throw Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+$.maxTokens.toFixed(3),tokenRatio:+$.tokenRatio.toFixed(3)}}function em($){let ee={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in $){if("string"==typeof $.loadBalancingPolicy)ee.loadBalancingPolicy=$.loadBalancingPolicy;else throw Error("Invalid service config: invalid loadBalancingPolicy")}if("loadBalancingConfig"in $){if(Array.isArray($.loadBalancingConfig))for(let et of $.loadBalancingConfig)ee.loadBalancingConfig.push((0,ei.validateLoadBalancingConfig)(et));else throw Error("Invalid service config: invalid loadBalancingConfig")}if("methodConfig"in $&&Array.isArray($.methodConfig))for(let et of $.methodConfig)ee.methodConfig.push(ep(et));"retryThrottling"in $&&(ee.retryThrottling=eg($.retryThrottling));let et=[];for(let $ of ee.methodConfig)for(let ee of $.name){for(let $ of et)if(ee.service===$.service&&ee.method===$.method)throw Error(`Invalid service config: duplicate name ${ee.service}/${ee.method}`);et.push(ee)}return ee}function ey($){if(!("serviceConfig"in $))throw Error("Invalid service config choice: missing service config");let ee={serviceConfig:em($.serviceConfig)};if("clientLanguage"in $){if(Array.isArray($.clientLanguage))for(let et of(ee.clientLanguage=[],$.clientLanguage))if("string"==typeof et)ee.clientLanguage.push(et);else throw Error("Invalid service config choice: invalid clientLanguage");else throw Error("Invalid service config choice: invalid clientLanguage")}if("clientHostname"in $){if(Array.isArray($.clientHostname))for(let et of(ee.clientHostname=[],$.clientHostname))if("string"==typeof et)ee.clientHostname.push(et);else throw Error("Invalid service config choice: invalid clientHostname");else throw Error("Invalid service config choice: invalid clientHostname")}if("percentage"in $){if("number"==typeof $.percentage&&0<=$.percentage&&$.percentage<=100)ee.percentage=$.percentage;else throw Error("Invalid service config choice: invalid percentage")}let et=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let ee in $)if(!et.includes(ee))throw Error(`Invalid service config choice: unexpected field ${ee}`);return ee}function ev($,ee){if(!Array.isArray($))throw Error("Invalid service config list");for(let et of $){let $=ey(et);if("number"!=typeof $.percentage||!(ee>$.percentage)){if(Array.isArray($.clientHostname)){let ee=!1;for(let et of $.clientHostname)et===er.hostname()&&(ee=!0);if(!ee)continue}if(Array.isArray($.clientLanguage)){let ee=!1;for(let et of $.clientLanguage)et===eo&&(ee=!0);if(!ee)continue}return $.serviceConfig}}throw Error("No matching service config found")}function eS($,ee){for(let et of $)if(et.length>0&&et[0].startsWith("grpc_config="))return ev(JSON.parse(et.join("").substring(12)),ee);return null}ee.validateRetryThrottling=eg,ee.validateServiceConfig=em,ee.extractAndSelectServiceConfig=eS},9932:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.StatusBuilder=void 0;class et{constructor(){this.code=null,this.details=null,this.metadata=null}withCode($){return this.code=$,this}withDetails($){return this.details=$,this}withMetadata($){return this.metadata=$,this}build(){let $={};return null!==this.code&&($.code=this.code),null!==this.details&&($.details=this.details),null!==this.metadata&&($.metadata=this.metadata),$}}ee.StatusBuilder=et},8326:($,ee)=>{"use strict";var et;Object.defineProperty(ee,"__esModule",{value:!0}),ee.StreamDecoder=void 0,function($){$[$.NO_DATA=0]="NO_DATA",$[$.READING_SIZE=1]="READING_SIZE",$[$.READING_MESSAGE=2]="READING_MESSAGE"}(et||(et={}));class er{constructor(){this.readState=et.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write($){let ee,er=0,en=[];for(;er<$.length;)switch(this.readState){case et.NO_DATA:this.readCompressFlag=$.slice(er,er+1),er+=1,this.readState=et.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case et.READING_SIZE:if(ee=Math.min($.length-er,this.readSizeRemaining),$.copy(this.readPartialSize,4-this.readSizeRemaining,er,er+ee),this.readSizeRemaining-=ee,er+=ee,0===this.readSizeRemaining){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=et.READING_MESSAGE;else{let $=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=et.NO_DATA,en.push($)}}break;case et.READING_MESSAGE:if(ee=Math.min($.length-er,this.readMessageRemaining),this.readPartialMessage.push($.slice(er,er+ee)),this.readMessageRemaining-=ee,er+=ee,0===this.readMessageRemaining){let $=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),ee=Buffer.concat($,this.readMessageSize+5);this.readState=et.NO_DATA,en.push(ee)}break;default:throw Error("Unexpected read state")}return en}}ee.StreamDecoder=er},3906:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.stringToSubchannelAddress=ee.subchannelAddressToString=ee.subchannelAddressEqual=ee.isTcpSubchannelAddress=void 0;let er=et(1808);function en($){return"port"in $}function ei($,ee){return!$&&!ee||!!$&&!!ee&&(en($)?en(ee)&&$.host===ee.host&&$.port===ee.port:!en(ee)&&$.path===ee.path)}function es($){return en($)?$.host+":"+$.port:$.path}ee.isTcpSubchannelAddress=en,ee.subchannelAddressEqual=ei,ee.subchannelAddressToString=es;let eo=443;function eu($,ee){return(0,er.isIP)($)?{host:$,port:null!=ee?ee:eo}:{path:$}}ee.stringToSubchannelAddress=eu},7060:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.Http2SubchannelCall=void 0;let er=et(5158),en=et(2037),ei=et(2678),es=et(2252),eo=et(8326),eu=et(7504),eh=et(2678),ef="subchannel_call";function ep($){for(let[ee,et]of Object.entries(en.constants.errno))if(et===$)return ee;return"Unknown system error "+$}class eg{constructor($,ee,et,en,eu){this.http2Stream=$,this.callEventTracker=ee,this.listener=et,this.transport=en,this.callId=eu,this.decoder=new eo.StreamDecoder,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.mappedStatusCode=ei.Status.UNKNOWN,this.finalStatus=null,this.internalError=null,$.on("response",($,ee)=>{let et="";for(let ee of Object.keys($))et+="		"+ee+": "+$[ee]+"\n";switch(this.trace("Received server headers:\n"+et),$[":status"]){case 400:this.mappedStatusCode=ei.Status.INTERNAL;break;case 401:this.mappedStatusCode=ei.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=ei.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=ei.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=ei.Status.UNAVAILABLE;break;default:this.mappedStatusCode=ei.Status.UNKNOWN}if(ee&er.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers($);else{let ee;try{ee=es.Metadata.fromHttp2Headers($)}catch($){this.endCall({code:ei.Status.UNKNOWN,details:$.message,metadata:new es.Metadata});return}this.listener.onReceiveMetadata(ee)}}),$.on("trailers",$=>{this.handleTrailers($)}),$.on("data",$=>{if(!this.statusOutput)for(let ee of(this.trace("receive HTTP/2 data frame of length "+$.length),this.decoder.write($)))this.trace("parsed message of length "+ee.length),this.callEventTracker.addMessageReceived(),this.tryPush(ee)}),$.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),$.on("close",()=>{process.nextTick(()=>{var ee;let et;if(this.trace("HTTP/2 stream closed with code "+$.rstCode),(null===(ee=this.finalStatus)||void 0===ee?void 0:ee.code)===ei.Status.OK)return;let en="";switch($.rstCode){case er.constants.NGHTTP2_NO_ERROR:if(null!==this.finalStatus)return;et=ei.Status.INTERNAL,en=`Received RST_STREAM with code ${$.rstCode}`;break;case er.constants.NGHTTP2_REFUSED_STREAM:et=ei.Status.UNAVAILABLE,en="Stream refused by server";break;case er.constants.NGHTTP2_CANCEL:et=ei.Status.CANCELLED,en="Call cancelled";break;case er.constants.NGHTTP2_ENHANCE_YOUR_CALM:et=ei.Status.RESOURCE_EXHAUSTED,en="Bandwidth exhausted or memory limit exceeded";break;case er.constants.NGHTTP2_INADEQUATE_SECURITY:et=ei.Status.PERMISSION_DENIED,en="Protocol not secure enough";break;case er.constants.NGHTTP2_INTERNAL_ERROR:et=ei.Status.INTERNAL,null===this.internalError?en=`Received RST_STREAM with code ${$.rstCode} (Internal server error)`:"ECONNRESET"===this.internalError.code||"ETIMEDOUT"===this.internalError.code?(et=ei.Status.UNAVAILABLE,en=this.internalError.message):en=`Received RST_STREAM with code ${$.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:et=ei.Status.INTERNAL,en=`Received RST_STREAM with code ${$.rstCode}`}this.endCall({code:et,details:en,metadata:new es.Metadata,rstCode:$.rstCode})})}),$.on("error",$=>{"ERR_HTTP2_STREAM_ERROR"!==$.code&&(this.trace("Node error event: message="+$.message+" code="+$.code+" errno="+ep($.errno)+" syscall="+$.syscall),this.internalError=$),this.callEventTracker.onStreamEnd(!1)})}onDisconnect(){this.endCall({code:ei.Status.UNAVAILABLE,details:"Connection dropped",metadata:new es.Metadata})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace($){eu.trace(eh.LogVerbosity.DEBUG,ef,"["+this.callId+"] "+$)}endCall($){(null===this.finalStatus||this.finalStatus.code===ei.Status.OK)&&(this.finalStatus=$,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){null===this.finalStatus||this.finalStatus.code===ei.Status.OK&&(!this.readsClosed||0!==this.unpushedReadMessages.length||this.isReadFilterPending||this.isPushPending)||this.outputStatus()}push($){this.trace("pushing to reader message of length "+($ instanceof Buffer?$.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,this.statusOutput||(this.listener.onReceiveMessage($),this.maybeOutputStatus())})}tryPush($){this.canPush?(this.http2Stream.pause(),this.push($)):(this.trace("unpushedReadMessages.push message of length "+$.length),this.unpushedReadMessages.push($))}handleTrailers($){let ee;this.callEventTracker.onStreamEnd(!0);let et="";for(let ee of Object.keys($))et+="		"+ee+": "+$[ee]+"\n";this.trace("Received server trailers:\n"+et);try{ee=es.Metadata.fromHttp2Headers($)}catch($){ee=new es.Metadata}let er=ee.getMap(),en=this.mappedStatusCode;if(en===ei.Status.UNKNOWN&&"string"==typeof er["grpc-status"]){let $=Number(er["grpc-status"]);$ in ei.Status&&(en=$,this.trace("received status code "+$+" from server")),ee.remove("grpc-status")}let eo="";if("string"==typeof er["grpc-message"]){try{eo=decodeURI(er["grpc-message"])}catch($){eo=er["grpc-message"]}ee.remove("grpc-message"),this.trace('received status details string "'+eo+'" from server')}let eu={code:en,details:eo,metadata:ee};this.endCall(eu)}destroyHttp2Stream(){var $;if(!this.http2Stream.destroyed){let ee;ee=(null===($=this.finalStatus)||void 0===$?void 0:$.code)===ei.Status.OK?er.constants.NGHTTP2_NO_ERROR:er.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+ee),this.http2Stream.close(ee)}}cancelWithStatus($,ee){this.trace("cancelWithStatus code: "+$+' details: "'+ee+'"'),this.endCall({code:$,details:ee,metadata:new es.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(null!==this.finalStatus&&this.finalStatus.code!==ei.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,this.unpushedReadMessages.length>0){let $=this.unpushedReadMessages.shift();this.push($);return}this.http2Stream.resume()}sendMessageWithContext($,ee){this.trace("write() called with message of length "+ee.length);let et=ee=>{process.nextTick(()=>{var et;let er=ei.Status.UNAVAILABLE;(null==ee?void 0:ee.code)==="ERR_STREAM_WRITE_AFTER_END"&&(er=ei.Status.INTERNAL),ee&&this.cancelWithStatus(er,`Write error: ${ee.message}`),null===(et=$.callback)||void 0===et||et.call($)})};this.trace("sending data chunk of length "+ee.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(ee,et)}catch($){this.endCall({code:ei.Status.UNAVAILABLE,details:`Write failed with error ${$.message}`,metadata:new es.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}}ee.Http2SubchannelCall=eg},1407:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.BaseSubchannelWrapper=void 0;class et{constructor($){this.child=$}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener($){this.child.addConnectivityStateListener($)}removeConnectivityStateListener($){this.child.removeConnectivityStateListener($)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive($){this.child.throttleKeepalive($)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals($){return this.getRealSubchannel()===$.getRealSubchannel()}}ee.BaseSubchannelWrapper=et},2328:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.getSubchannelPool=ee.SubchannelPool=void 0;let er=et(9387),en=et(1727),ei=et(3906),es=et(8429),eo=et(2869),eu=1e4;class eh{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let $=!0;for(let ee in this.pool){let et=this.pool[ee].filter($=>!$.subchannel.unrefIfOneRef());et.length>0&&($=!1),this.pool[ee]=et}$&&null!==this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var $,ee;null===this.cleanupTimer&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},eu),null===(ee=($=this.cleanupTimer).unref)||void 0===ee||ee.call($))}getOrCreateSubchannel($,ee,et,eu){this.ensureCleanupTask();let eh=(0,es.uriToString)($);if(eh in this.pool){for(let $ of this.pool[eh])if((0,ei.subchannelAddressEqual)(ee,$.subchannelAddress)&&(0,er.channelOptionsEqual)(et,$.channelArguments)&&eu._equals($.channelCredentials))return $.subchannel}let ef=new en.Subchannel($,ee,et,eu,new eo.Http2SubchannelConnector($));return eh in this.pool||(this.pool[eh]=[]),this.pool[eh].push({subchannelAddress:ee,channelArguments:et,channelCredentials:eu,subchannel:ef}),ef.ref(),ef}}ee.SubchannelPool=eh;let ef=new eh;function ep($){return $?ef:new eh}ee.getSubchannelPool=ep},1727:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.Subchannel=void 0;let er=et(3955),en=et(4934),ei=et(7504),es=et(2678),eo=et(8429),eu=et(3906),eh=et(5993),ef="subchannel",ep=2147483647;class eg{constructor($,ee,et,ei,es){var eo;this.channelTarget=$,this.subchannelAddress=ee,this.options=et,this.credentials=ei,this.connector=es,this.connectivityState=er.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new eh.ChannelzCallTracker,this.childrenTracker=new eh.ChannelzChildrenTracker,this.streamTracker=new eh.ChannelzCallTracker;let ef={initialDelay:et["grpc.initial_reconnect_backoff_ms"],maxDelay:et["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new en.BackoffTimeout(()=>{this.handleBackoffTimer()},ef),this.backoffTimeout.unref(),this.subchannelAddressString=(0,eu.subchannelAddressToString)(ee),this.keepaliveTime=null!==(eo=et["grpc.keepalive_time_ms"])&&void 0!==eo?eo:-1,0===et["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new eh.ChannelzTrace,this.channelzRef=(0,eh.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(et,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace($){ei.trace(es.LogVerbosity.DEBUG,ef,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+$)}refTrace($){ei.trace(es.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+$)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([er.ConnectivityState.TRANSIENT_FAILURE],er.ConnectivityState.CONNECTING):this.transitionToState([er.ConnectivityState.TRANSIENT_FAILURE],er.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let $=this.options;if($["grpc.keepalive_time_ms"]){let ee=Math.min(this.keepaliveTime,ep);$=Object.assign(Object.assign({},$),{"grpc.keepalive_time_ms":ee})}this.connector.connect(this.subchannelAddress,this.credentials,$).then($=>{this.transitionToState([er.ConnectivityState.CONNECTING],er.ConnectivityState.READY)?(this.transport=$,this.channelzEnabled&&this.childrenTracker.refChild($.getChannelzRef()),$.addDisconnectListener($=>{this.transitionToState([er.ConnectivityState.READY],er.ConnectivityState.IDLE),$&&this.keepaliveTime>0&&(this.keepaliveTime*=2,ei.log(es.LogVerbosity.ERROR,`Connection to ${(0,eo.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):$.shutdown()},$=>{this.transitionToState([er.ConnectivityState.CONNECTING],er.ConnectivityState.TRANSIENT_FAILURE,`${$}`)})}transitionToState($,ee,et){var en,ei;if(-1===$.indexOf(this.connectivityState))return!1;this.trace(er.ConnectivityState[this.connectivityState]+" -> "+er.ConnectivityState[ee]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+er.ConnectivityState[ee]);let es=this.connectivityState;switch(this.connectivityState=ee,ee){case er.ConnectivityState.READY:this.stopBackoff();break;case er.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case er.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(en=this.transport)||void 0===en||en.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case er.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(ei=this.transport)||void 0===ei||ei.shutdown(),this.transport=null;break;default:throw Error(`Invalid state: unknown ConnectivityState ${ee}`)}for(let $ of this.stateListeners)$(this,es,ee,this.keepaliveTime,et);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,0===this.refcount&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.channelzEnabled&&(0,eh.unregisterChannelzRef)(this.channelzRef),process.nextTick(()=>{this.transitionToState([er.ConnectivityState.CONNECTING,er.ConnectivityState.READY],er.ConnectivityState.IDLE)}))}unrefIfOneRef(){return 1===this.refcount&&(this.unref(),!0)}createCall($,ee,et,er){let en;if(!this.transport)throw Error("Cannot create call, subchannel not READY");return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),en={onCallEnd:$=>{$.code===es.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):en={},this.transport.createCall($,ee,et,er,en)}startConnecting(){process.nextTick(()=>{this.transitionToState([er.ConnectivityState.IDLE],er.ConnectivityState.CONNECTING)||this.connectivityState!==er.ConnectivityState.TRANSIENT_FAILURE||(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener($){this.stateListeners.add($)}removeConnectivityStateListener($){this.stateListeners.delete($)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([er.ConnectivityState.TRANSIENT_FAILURE],er.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}realSubchannelEquals($){return $.getRealSubchannel()===this}throttleKeepalive($){$>this.keepaliveTime&&(this.keepaliveTime=$)}}ee.Subchannel=eg},3009:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.getDefaultRootsData=ee.CIPHER_SUITES=void 0;let er=et(7147);ee.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;let en=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,ei=null;function es(){return en?(null===ei&&(ei=er.readFileSync(en)),ei):null}ee.getDefaultRootsData=es},2869:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.Http2SubchannelConnector=void 0;let er=et(5158),en=et(4404),ei=et(5993),es=et(2678),eo=et(2039),eu=et(7504),eh=et(492),ef=et(3906),ep=et(8429),eg=et(1808),em=et(7060),ey=et(8445),ev="transport",eS="transport_flowctrl",eT=et(1513).i8,{HTTP2_HEADER_AUTHORITY:ew,HTTP2_HEADER_CONTENT_TYPE:eE,HTTP2_HEADER_METHOD:eC,HTTP2_HEADER_PATH:e_,HTTP2_HEADER_TE:eR,HTTP2_HEADER_USER_AGENT:ex}=er.constants,eI=2e4,eP=Buffer.from("too_many_pings","ascii");class eA{constructor($,ee,et,en){this.session=$,this.remoteName=en,this.keepaliveTimeMs=-1,this.keepaliveTimeoutMs=eI,this.keepaliveTimerId=null,this.pendingSendKeepalivePing=!1,this.keepaliveTimeoutId=null,this.keepaliveWithoutCalls=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.streamTracker=new ei.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,ef.subchannelAddressToString)(ee),0===et["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,ei.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[et["grpc.primary_user_agent"],`grpc-node-js/${eT}`,et["grpc.secondary_user_agent"]].filter($=>$).join(" "),"grpc.keepalive_time_ms"in et&&(this.keepaliveTimeMs=et["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in et&&(this.keepaliveTimeoutMs=et["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in et?this.keepaliveWithoutCalls=1===et["grpc.keepalive_permit_without_calls"]:this.keepaliveWithoutCalls=!1,$.once("close",()=>{this.trace("session closed"),this.stopKeepalivePings(),this.handleDisconnect()}),$.once("goaway",($,ee,et)=>{let en=!1;$===er.constants.NGHTTP2_ENHANCE_YOUR_CALM&&et&&et.equals(eP)&&(en=!0),this.trace("connection closed by GOAWAY with code "+$+" and data "+(null==et?void 0:et.toString())),this.reportDisconnectToOwner(en)}),$.once("error",$=>{this.trace("connection closed with error "+$.message)}),eu.isTracerEnabled(ev)&&($.on("remoteSettings",ee=>{this.trace("new settings received"+(this.session!==$?" on the old connection":"")+": "+JSON.stringify(ee))}),$.on("localSettings",ee=>{this.trace("local settings acknowledged by remote"+(this.session!==$?" on the old connection":"")+": "+JSON.stringify(ee))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer()}getChannelzInfo(){var $,ee,et;let er;let en=this.session.socket,ei=en.remoteAddress?(0,ef.stringToSubchannelAddress)(en.remoteAddress,en.remotePort):null,es=en.localAddress?(0,ef.stringToSubchannelAddress)(en.localAddress,en.localPort):null;if(this.session.encrypted){let ee=en,et=ee.getCipher(),ei=ee.getCertificate(),es=ee.getPeerCertificate();er={cipherSuiteStandardName:null!==($=et.standardName)&&void 0!==$?$:null,cipherSuiteOtherName:et.standardName?null:et.name,localCertificate:ei&&"raw"in ei?ei.raw:null,remoteCertificate:es&&"raw"in es?es.raw:null}}else er=null;return{remoteAddress:ei,localAddress:es,security:er,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(ee=this.session.state.localWindowSize)&&void 0!==ee?ee:null,remoteFlowControlWindow:null!==(et=this.session.state.remoteWindowSize)&&void 0!==et?et:null}}trace($){eu.trace(es.LogVerbosity.DEBUG,ev,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+$)}keepaliveTrace($){eu.trace(es.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+$)}flowControlTrace($){eu.trace(es.LogVerbosity.DEBUG,eS,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+$)}internalsTrace($){eu.trace(es.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+$)}reportDisconnectToOwner($){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(ee=>ee($)))}handleDisconnect(){this.reportDisconnectToOwner(!1),setImmediate(()=>{for(let $ of this.activeCalls)$.onDisconnect()})}addDisconnectListener($){this.disconnectListeners.push($)}clearKeepaliveTimer(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null)}clearKeepaliveTimeout(){this.keepaliveTimeoutId&&(clearTimeout(this.keepaliveTimeoutId),this.keepaliveTimeoutId=null)}canSendPing(){return this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var $,ee;if(this.clearKeepaliveTimer(),!this.canSendPing()){this.pendingSendKeepalivePing=!0;return}this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId||(this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),null===(ee=($=this.keepaliveTimeoutId).unref)||void 0===ee||ee.call($));try{this.session.ping(($,ee,et)=>{$&&(this.keepaliveTrace("Ping failed with error "+$.message),this.handleDisconnect()),this.keepaliveTrace("Received ping response"),this.clearKeepaliveTimeout(),this.maybeStartKeepalivePingTimer()})}catch($){this.handleDisconnect()}}maybeStartKeepalivePingTimer(){var $,ee;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):this.keepaliveTimerId||this.keepaliveTimeoutId||(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimerId=null===(ee=($=setTimeout(()=>{this.maybeSendPing()},this.keepaliveTimeMs)).unref)||void 0===ee?void 0:ee.call($)))}stopKeepalivePings(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null),this.clearKeepaliveTimeout()}removeActiveCall($){this.activeCalls.delete($),0===this.activeCalls.size&&this.session.unref()}addActiveCall($){this.activeCalls.add($),1!==this.activeCalls.size||(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall($,ee,et,er,en){let ei,es,eo;let eu=$.toHttp2Headers();eu[ew]=ee,eu[ex]=this.userAgent,eu[eE]="application/grpc",eu[eC]="POST",eu[e_]=et,eu[eR]="trailers";try{ei=this.session.request(eu)}catch($){throw this.handleDisconnect(),$}return this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed),this.channelzEnabled?(this.streamTracker.addCallStarted(),es={addMessageSent:()=>{var $;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,null===($=en.addMessageSent)||void 0===$||$.call(en)},addMessageReceived:()=>{var $;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,null===($=en.addMessageReceived)||void 0===$||$.call(en)},onCallEnd:$=>{var ee;null===(ee=en.onCallEnd)||void 0===ee||ee.call(en,$),this.removeActiveCall(eo)},onStreamEnd:$=>{var ee;$?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),null===(ee=en.onStreamEnd)||void 0===ee||ee.call(en,$)}}):es={addMessageSent:()=>{var $;null===($=en.addMessageSent)||void 0===$||$.call(en)},addMessageReceived:()=>{var $;null===($=en.addMessageReceived)||void 0===$||$.call(en)},onCallEnd:$=>{var ee;null===(ee=en.onCallEnd)||void 0===ee||ee.call(en,$),this.removeActiveCall(eo)},onStreamEnd:$=>{var ee;null===(ee=en.onStreamEnd)||void 0===ee||ee.call(en,$)}},eo=new em.Http2SubchannelCall(ei,es,er,this,(0,ey.getNextCallNumber)()),this.addActiveCall(eo),eo}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}shutdown(){this.session.close(),(0,ei.unregisterChannelzRef)(this.channelzRef)}}class eO{constructor($){this.channelTarget=$,this.session=null,this.isShutdown=!1}trace($){eu.trace(es.LogVerbosity.DEBUG,ev,(0,ep.uriToString)(this.channelTarget)+" "+$)}createSession($,ee,et,ei){return this.isShutdown?Promise.reject():new Promise((es,eo)=>{var eu,em,ey;let ev;ei.realTarget?(ev=(0,ep.uriToString)(ei.realTarget),this.trace("creating HTTP/2 session through proxy to "+(0,ep.uriToString)(ei.realTarget))):(ev=null,this.trace("creating HTTP/2 session to "+(0,ef.subchannelAddressToString)($)));let eS=(0,eh.getDefaultAuthority)(null!==(eu=ei.realTarget)&&void 0!==eu?eu:this.channelTarget),eT=ee._getConnectionOptions()||{};eT.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in et?eT.maxSessionMemory=et["grpc-node.max_session_memory"]:eT.maxSessionMemory=Number.MAX_SAFE_INTEGER;let ew="http://";if("secureContext"in eT){if(ew="https://",et["grpc.ssl_target_name_override"]){let $=et["grpc.ssl_target_name_override"];eT.checkServerIdentity=(ee,et)=>(0,en.checkServerIdentity)($,et),eT.servername=$}else{let $=null!==(ey=null===(em=(0,ep.splitHostPort)(eS))||void 0===em?void 0:em.host)&&void 0!==ey?ey:"localhost";eT.servername=$}ei.socket&&(eT.createConnection=($,ee)=>ei.socket)}else eT.createConnection=(ee,et)=>ei.socket?ei.socket:eg.connect($);eT=Object.assign(Object.assign(Object.assign({},eT),$),{enableTrace:1===et["grpc-node.tls_enable_trace"]});let eE=er.connect(ew+eS,eT);this.session=eE;let eC="Failed to connect";eE.unref(),eE.once("connect",()=>{eE.removeAllListeners(),es(new eA(eE,$,et,ev)),this.session=null}),eE.once("close",()=>{this.session=null,setImmediate(()=>{eo(`${eC} (${new Date().toISOString()})`)})}),eE.once("error",$=>{eC=$.message,this.trace("connection failed with error "+eC)})})}connect($,ee,et){var er,ei;if(this.isShutdown)return Promise.reject();let es=ee._getConnectionOptions()||{};if("secureContext"in es){if(es.ALPNProtocols=["h2"],et["grpc.ssl_target_name_override"]){let $=et["grpc.ssl_target_name_override"];es.checkServerIdentity=(ee,et)=>(0,en.checkServerIdentity)($,et),es.servername=$}else if("grpc.http_connect_target"in et){let $=(0,eh.getDefaultAuthority)(null!==(er=(0,ep.parseUri)(et["grpc.http_connect_target"]))&&void 0!==er?er:{path:"localhost"}),ee=(0,ep.splitHostPort)($);es.servername=null!==(ei=null==ee?void 0:ee.host)&&void 0!==ei?ei:$}et["grpc-node.tls_enable_trace"]&&(es.enableTrace=!0)}return(0,eo.getProxiedConnection)($,et,es).then(er=>this.createSession($,ee,et,er))}shutdown(){var $;this.isShutdown=!0,null===($=this.session)||void 0===$||$.close(),this.session=null}}ee.Http2SubchannelConnector=eO},8429:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.uriToString=ee.splitHostPort=ee.parseUri=void 0;let et=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function er($){let ee=et.exec($);return null===ee?null:{scheme:ee[1],authority:ee[2],path:ee[3]}}ee.parseUri=er;let en=/^\d+$/;function ei($){if($.startsWith("[")){let ee=$.indexOf("]");if(-1===ee)return null;let et=$.substring(1,ee);if(-1===et.indexOf(":"))return null;if(!($.length>ee+1))return{host:et};if(":"!==$[ee+1])return null;{let er=$.substring(ee+2);return en.test(er)?{host:et,port:+er}:null}}{let ee=$.split(":");return 2!==ee.length?{host:$}:en.test(ee[1])?{host:ee[0],port:+ee[1]}:null}}function es($){let ee="";return void 0!==$.scheme&&(ee+=$.scheme+":"),void 0!==$.authority&&(ee+="//"+$.authority+"/"),ee+=$.path}ee.splitHostPort=ei,ee.uriToString=es},8715:($,ee,et)=>{"use strict";var er;/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */er={value:!0},er=er=ee.im=ee.J_=er=er=er=void 0;let en=et(1382),ei=et(5269),es=et(1725),eo=et(2916);er=et(1468),er=function($){return"@type"in $&&"string"==typeof $["@type"]};let eu={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function eh($,ee){return""===$?ee:$+"."+ee}function ef($){return $ instanceof ei.Service||$ instanceof ei.Type||$ instanceof ei.Enum}function ep($){return $ instanceof ei.Namespace||$ instanceof ei.Root}function eg($,ee){let et=eh(ee,$.name);return ef($)?[[et,$]]:ep($)&&void 0!==$.nested?Object.keys($.nested).map(ee=>eg($.nested[ee],et)).reduce(($,ee)=>$.concat(ee),[]):[]}function em($,ee){return function(et){return $.toObject($.decode(et),ee)}}function ey($){return function(ee){if(Array.isArray(ee))throw Error(`Failed to serialize message: expected object with ${$.name} structure, got array instead`);let et=$.fromObject(ee);return $.encode(et).finish()}}function ev($,ee,et,er){let ei=$.resolvedRequestType,es=$.resolvedResponseType;return{path:"/"+ee+"/"+$.name,requestStream:!!$.requestStream,responseStream:!!$.responseStream,requestSerialize:ey(ei),requestDeserialize:em(ei,et),responseSerialize:ey(es),responseDeserialize:em(es,et),originalName:en($.name),requestType:eT(ei,er),responseType:eT(es,er)}}function eS($,ee,et,er){let en={};for(let ei of $.methodsArray)en[ei.name]=ev(ei,ee,et,er);return en}function eT($,ee){let et=$.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:et.$type.toObject(et,eu),fileDescriptorProtos:ee}}function ew($,ee){let et=$.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:et.$type.toObject(et,eu),fileDescriptorProtos:ee}}function eE($,ee,et,er){if($ instanceof ei.Service)return eS($,ee,et,er);if($ instanceof ei.Type)return eT($,er);if($ instanceof ei.Enum)return ew($,er);throw Error("Type mismatch in reflection object handling")}function eC($,ee){let et={};$.resolveAll();let er=$.toDescriptor("proto3").file.map($=>Buffer.from(es.FileDescriptorProto.encode($).finish()));for(let[en,ei]of eg($,""))et[en]=eE(ei,en,ee,er);return et}function e_($,ee){ee=ee||{};let et=ei.Root.fromDescriptor($);return et.resolveAll(),eC(et,ee)}function eR($,ee){return eC((0,eo.loadProtosWithOptionsSync)($,ee),ee)}function ex($,ee){ee=ee||{};let et=ei.Root.fromJSON($);return et.resolveAll(),eC(et,ee)}er=function($,ee){return(0,eo.loadProtosWithOptions)($,ee).then($=>eC($,ee))},ee.J_=eR,ee.im=ex,er=function($,ee){return e_(es.FileDescriptorSet.decode($),ee)},er=function($,ee){return e_(es.FileDescriptorSet.fromObject($),ee)},(0,eo.addCommonProtos)()},2916:($,ee,et)=>{"use strict";/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */Object.defineProperty(ee,"__esModule",{value:!0}),ee.addCommonProtos=ee.loadProtosWithOptionsSync=ee.loadProtosWithOptions=void 0;let er=et(7147),en=et(1017),ei=et(5269);function es($,ee){let et=$.resolvePath;$.resolvePath=($,ei)=>{if(en.isAbsolute(ei))return ei;for(let $ of ee){let ee=en.join($,ei);try{return er.accessSync(ee,er.constants.R_OK),ee}catch($){continue}}return process.emitWarning(`${ei} not found in any of the include paths ${ee}`),et($,ei)}}async function eo($,ee){let et=new ei.Root;if((ee=ee||{}).includeDirs){if(!Array.isArray(ee.includeDirs))return Promise.reject(Error("The includeDirs option must be an array"));es(et,ee.includeDirs)}let er=await et.load($,ee);return er.resolveAll(),er}function eu($,ee){let et=new ei.Root;if((ee=ee||{}).includeDirs){if(!Array.isArray(ee.includeDirs))throw Error("The includeDirs option must be an array");es(et,ee.includeDirs)}let er=et.loadSync($,ee);return er.resolveAll(),er}function eh(){let $=et(6541),ee=et(9987),er=et(7674),en=et(3795);ei.common("api",$.nested.google.nested.protobuf.nested),ei.common("descriptor",ee.nested.google.nested.protobuf.nested),ei.common("source_context",er.nested.google.nested.protobuf.nested),ei.common("type",en.nested.google.nested.protobuf.nested)}ee.loadProtosWithOptions=eo,ee.loadProtosWithOptionsSync=eu,ee.addCommonProtos=eh},799:$=>{"use strict";function ee($,ee){for(var et=Array(arguments.length-1),er=0,en=2,ei=!0;en<arguments.length;)et[er++]=arguments[en++];return new Promise(function(en,es){et[er]=function($){if(ei){if(ei=!1,$)es($);else{for(var ee=Array(arguments.length-1),et=0;et<ee.length;)ee[et++]=arguments[et];en.apply(null,ee)}}};try{$.apply(ee||null,et)}catch($){ei&&(ei=!1,es($))}})}$.exports=ee},2130:($,ee)=>{"use strict";var et=ee;et.length=function($){var ee=$.length;if(!ee)return 0;for(var et=0;--ee%4>1&&"="===$.charAt(ee);)++et;return Math.ceil(3*$.length)/4-et};for(var er=Array(64),en=Array(123),ei=0;ei<64;)en[er[ei]=ei<26?ei+65:ei<52?ei+71:ei<62?ei-4:ei-59|43]=ei++;et.encode=function($,ee,et){for(var en,ei=null,es=[],eo=0,eu=0;ee<et;){var eh=$[ee++];switch(eu){case 0:es[eo++]=er[eh>>2],en=(3&eh)<<4,eu=1;break;case 1:es[eo++]=er[en|eh>>4],en=(15&eh)<<2,eu=2;break;case 2:es[eo++]=er[en|eh>>6],es[eo++]=er[63&eh],eu=0}eo>8191&&((ei||(ei=[])).push(String.fromCharCode.apply(String,es)),eo=0)}return(eu&&(es[eo++]=er[en],es[eo++]=61,1===eu&&(es[eo++]=61)),ei)?(eo&&ei.push(String.fromCharCode.apply(String,es.slice(0,eo))),ei.join("")):String.fromCharCode.apply(String,es.slice(0,eo))};var es="invalid encoding";et.decode=function($,ee,et){for(var er,ei=et,eo=0,eu=0;eu<$.length;){var eh=$.charCodeAt(eu++);if(61===eh&&eo>1)break;if(void 0===(eh=en[eh]))throw Error(es);switch(eo){case 0:er=eh,eo=1;break;case 1:ee[et++]=er<<2|(48&eh)>>4,er=eh,eo=2;break;case 2:ee[et++]=(15&er)<<4|(60&eh)>>2,er=eh,eo=3;break;case 3:ee[et++]=(3&er)<<6|eh,eo=0}}if(1===eo)throw Error(es);return et-ei},et.test=function($){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test($)}},2012:$=>{"use strict";function ee($,et){"string"==typeof $&&(et=$,$=void 0);var er=[];function en($){if("string"!=typeof $){var et=ei();if(ee.verbose&&console.log("codegen: "+et),et="return "+et,$){for(var es=Object.keys($),eo=Array(es.length+1),eu=Array(es.length),eh=0;eh<es.length;)eo[eh]=es[eh],eu[eh]=$[es[eh++]];return eo[eh]=et,Function.apply(null,eo).apply(null,eu)}return Function(et)()}for(var ef=Array(arguments.length-1),ep=0;ep<ef.length;)ef[ep]=arguments[++ep];if(ep=0,$=$.replace(/%([%dfijs])/g,function($,ee){var et=ef[ep++];switch(ee){case"d":case"f":return String(Number(et));case"i":return String(Math.floor(et));case"j":return JSON.stringify(et);case"s":return String(et)}return"%"}),ep!==ef.length)throw Error("parameter count mismatch");return er.push($),en}function ei(ee){return"function "+(ee||et||"")+"("+($&&$.join(",")||"")+"){\n  "+er.join("\n  ")+"\n}"}return en.toString=ei,en}$.exports=ee,ee.verbose=!1},854:$=>{"use strict";function ee(){this._listeners={}}$.exports=ee,ee.prototype.on=function($,ee,et){return(this._listeners[$]||(this._listeners[$]=[])).push({fn:ee,ctx:et||this}),this},ee.prototype.off=function($,ee){if(void 0===$)this._listeners={};else if(void 0===ee)this._listeners[$]=[];else for(var et=this._listeners[$],er=0;er<et.length;)et[er].fn===ee?et.splice(er,1):++er;return this},ee.prototype.emit=function($){var ee=this._listeners[$];if(ee){for(var et=[],er=1;er<arguments.length;)et.push(arguments[er++]);for(er=0;er<ee.length;)ee[er].fn.apply(ee[er++].ctx,et)}return this}},3035:($,ee,et)=>{"use strict";$.exports=ei;var er=et(799),en=et(449)("fs");function ei($,ee,et){return("function"==typeof ee?(et=ee,ee={}):ee||(ee={}),et)?!ee.xhr&&en&&en.readFile?en.readFile($,function(er,en){return er&&"undefined"!=typeof XMLHttpRequest?ei.xhr($,ee,et):er?et(er):et(null,ee.binary?en:en.toString("utf8"))}):ei.xhr($,ee,et):er(ei,this,$,ee)}ei.xhr=function($,ee,et){var er=new XMLHttpRequest;er.onreadystatechange=function(){if(4===er.readyState){if(0!==er.status&&200!==er.status)return et(Error("status "+er.status));if(ee.binary){var $=er.response;if(!$){$=[];for(var en=0;en<er.responseText.length;++en)$.push(255&er.responseText.charCodeAt(en))}return et(null,"undefined"!=typeof Uint8Array?new Uint8Array($):$)}return et(null,er.responseText)}},ee.binary&&("overrideMimeType"in er&&er.overrideMimeType("text/plain; charset=x-user-defined"),er.responseType="arraybuffer"),er.open("GET",$),er.send()}},4324:$=>{"use strict";function ee($){return"undefined"!=typeof Float32Array?function(){var ee=new Float32Array([-0]),et=new Uint8Array(ee.buffer),er=128===et[3];function en($,er,en){ee[0]=$,er[en]=et[0],er[en+1]=et[1],er[en+2]=et[2],er[en+3]=et[3]}function ei($,er,en){ee[0]=$,er[en]=et[3],er[en+1]=et[2],er[en+2]=et[1],er[en+3]=et[0]}function es($,er){return et[0]=$[er],et[1]=$[er+1],et[2]=$[er+2],et[3]=$[er+3],ee[0]}function eo($,er){return et[3]=$[er],et[2]=$[er+1],et[1]=$[er+2],et[0]=$[er+3],ee[0]}$.writeFloatLE=er?en:ei,$.writeFloatBE=er?ei:en,$.readFloatLE=er?es:eo,$.readFloatBE=er?eo:es}():function(){function ee($,ee,et,er){var en=ee<0?1:0;if(en&&(ee=-ee),0===ee)$(1/ee>0?0:2147483648,et,er);else if(isNaN(ee))$(2143289344,et,er);else if(ee>34028234663852886e22)$((en<<31|2139095040)>>>0,et,er);else if(ee<11754943508222875e-54)$((en<<31|Math.round(ee/1401298464324817e-60))>>>0,et,er);else{var ei=Math.floor(Math.log(ee)/Math.LN2),es=8388607&Math.round(ee*Math.pow(2,-ei)*8388608);$((en<<31|ei+127<<23|es)>>>0,et,er)}}function es($,ee,et){var er=$(ee,et),en=(er>>31)*2+1,ei=er>>>23&255,es=8388607&er;return 255===ei?es?NaN:1/0*en:0===ei?1401298464324817e-60*en*es:en*Math.pow(2,ei-150)*(es+8388608)}$.writeFloatLE=ee.bind(null,et),$.writeFloatBE=ee.bind(null,er),$.readFloatLE=es.bind(null,en),$.readFloatBE=es.bind(null,ei)}(),"undefined"!=typeof Float64Array?function(){var ee=new Float64Array([-0]),et=new Uint8Array(ee.buffer),er=128===et[7];function en($,er,en){ee[0]=$,er[en]=et[0],er[en+1]=et[1],er[en+2]=et[2],er[en+3]=et[3],er[en+4]=et[4],er[en+5]=et[5],er[en+6]=et[6],er[en+7]=et[7]}function ei($,er,en){ee[0]=$,er[en]=et[7],er[en+1]=et[6],er[en+2]=et[5],er[en+3]=et[4],er[en+4]=et[3],er[en+5]=et[2],er[en+6]=et[1],er[en+7]=et[0]}function es($,er){return et[0]=$[er],et[1]=$[er+1],et[2]=$[er+2],et[3]=$[er+3],et[4]=$[er+4],et[5]=$[er+5],et[6]=$[er+6],et[7]=$[er+7],ee[0]}function eo($,er){return et[7]=$[er],et[6]=$[er+1],et[5]=$[er+2],et[4]=$[er+3],et[3]=$[er+4],et[2]=$[er+5],et[1]=$[er+6],et[0]=$[er+7],ee[0]}$.writeDoubleLE=er?en:ei,$.writeDoubleBE=er?ei:en,$.readDoubleLE=er?es:eo,$.readDoubleBE=er?eo:es}():function(){function ee($,ee,et,er,en,ei){var es,eo=er<0?1:0;if(eo&&(er=-er),0===er)$(0,en,ei+ee),$(1/er>0?0:2147483648,en,ei+et);else if(isNaN(er))$(0,en,ei+ee),$(2146959360,en,ei+et);else if(er>17976931348623157e292)$(0,en,ei+ee),$((eo<<31|2146435072)>>>0,en,ei+et);else if(er<22250738585072014e-324)$((es=er/5e-324)>>>0,en,ei+ee),$((eo<<31|es/4294967296)>>>0,en,ei+et);else{var eu=Math.floor(Math.log(er)/Math.LN2);1024===eu&&(eu=1023),$(4503599627370496*(es=er*Math.pow(2,-eu))>>>0,en,ei+ee),$((eo<<31|eu+1023<<20|1048576*es&1048575)>>>0,en,ei+et)}}function es($,ee,et,er,en){var ei=$(er,en+ee),es=$(er,en+et),eo=(es>>31)*2+1,eu=es>>>20&2047,eh=4294967296*(1048575&es)+ei;return 2047===eu?eh?NaN:1/0*eo:0===eu?5e-324*eo*eh:eo*Math.pow(2,eu-1075)*(eh+4503599627370496)}$.writeDoubleLE=ee.bind(null,et,0,4),$.writeDoubleBE=ee.bind(null,er,4,0),$.readDoubleLE=es.bind(null,en,0,4),$.readDoubleBE=es.bind(null,ei,4,0)}(),$}function et($,ee,et){ee[et]=255&$,ee[et+1]=$>>>8&255,ee[et+2]=$>>>16&255,ee[et+3]=$>>>24}function er($,ee,et){ee[et]=$>>>24,ee[et+1]=$>>>16&255,ee[et+2]=$>>>8&255,ee[et+3]=255&$}function en($,ee){return($[ee]|$[ee+1]<<8|$[ee+2]<<16|$[ee+3]<<24)>>>0}function ei($,ee){return($[ee]<<24|$[ee+1]<<16|$[ee+2]<<8|$[ee+3])>>>0}$.exports=ee(ee)},449:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},9986:($,ee)=>{"use strict";var et=ee,er=et.isAbsolute=function($){return/^(?:\/|\w+:)/.test($)},en=et.normalize=function($){var ee=($=$.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),et=er($),en="";et&&(en=ee.shift()+"/");for(var ei=0;ei<ee.length;)".."===ee[ei]?ei>0&&".."!==ee[ei-1]?ee.splice(--ei,2):et?ee.splice(ei,1):++ei:"."===ee[ei]?ee.splice(ei,1):++ei;return en+ee.join("/")};et.resolve=function($,ee,et){return(et||(ee=en(ee)),er(ee))?ee:(et||($=en($)),($=$.replace(/(?:\/|^)[^/]+$/,"")).length?en($+"/"+ee):ee)}},6035:$=>{"use strict";function ee($,ee,et){var er=et||8192,en=er>>>1,ei=null,es=er;return function(et){if(et<1||et>en)return $(et);es+et>er&&(ei=$(er),es=0);var eo=ee.call(ei,es,es+=et);return 7&es&&(es=(7|es)+1),eo}}$.exports=ee},8131:($,ee)=>{"use strict";var et=ee;et.length=function($){for(var ee=0,et=0,er=0;er<$.length;++er)(et=$.charCodeAt(er))<128?ee+=1:et<2048?ee+=2:(64512&et)==55296&&(64512&$.charCodeAt(er+1))==56320?(++er,ee+=4):ee+=3;return ee},et.read=function($,ee,et){if(et-ee<1)return"";for(var er,en=null,ei=[],es=0;ee<et;)(er=$[ee++])<128?ei[es++]=er:er>191&&er<224?ei[es++]=(31&er)<<6|63&$[ee++]:er>239&&er<365?(er=((7&er)<<18|(63&$[ee++])<<12|(63&$[ee++])<<6|63&$[ee++])-65536,ei[es++]=55296+(er>>10),ei[es++]=56320+(1023&er)):ei[es++]=(15&er)<<12|(63&$[ee++])<<6|63&$[ee++],es>8191&&((en||(en=[])).push(String.fromCharCode.apply(String,ei)),es=0);return en?(es&&en.push(String.fromCharCode.apply(String,ei.slice(0,es))),en.join("")):String.fromCharCode.apply(String,ei.slice(0,es))},et.write=function($,ee,et){for(var er,en,ei=et,es=0;es<$.length;++es)(er=$.charCodeAt(es))<128?ee[et++]=er:(er<2048?ee[et++]=er>>6|192:((64512&er)==55296&&(64512&(en=$.charCodeAt(es+1)))==56320?(er=65536+((1023&er)<<10)+(1023&en),++es,ee[et++]=er>>18|240,ee[et++]=er>>12&63|128):ee[et++]=er>>12|224,ee[et++]=er>>6&63|128),ee[et++]=63&er|128);return et-ei}},1382:$=>{var ee=1/0,et="[object Symbol]",er=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,en=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ei="\ud800-\udfff",es="\\u0300-\\u036f\\ufe20-\\ufe23",eo="\\u20d0-\\u20f0",eu="\\u2700-\\u27bf",eh="a-z\\xdf-\\xf6\\xf8-\\xff",ef="A-Z\\xc0-\\xd6\\xd8-\\xde",ep="\\ufe0e\\ufe0f",eg="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",em="['’]",ey="["+ei+"]",ev="["+eg+"]",eS="["+es+eo+"]",eT="\\d+",ew="["+eu+"]",eE="["+eh+"]",eC="[^"+ei+eg+eT+eu+eh+ef+"]",e_="\ud83c[\udffb-\udfff]",eR="[^"+ei+"]",ex="(?:\ud83c[\udde6-\uddff]){2}",eI="[\ud800-\udbff][\udc00-\udfff]",eP="["+ef+"]",eA="\\u200d",eO="(?:"+eE+"|"+eC+")",eD="(?:"+eP+"|"+eC+")",eN="(?:"+em+"(?:d|ll|m|re|s|t|ve))?",ek="(?:"+em+"(?:D|LL|M|RE|S|T|VE))?",eM="(?:"+eS+"|"+e_+")?",eL="["+ep+"]?",ej="(?:"+eA+"(?:"+[eR,ex,eI].join("|")+")"+eL+eM+")*",eB=eL+eM+ej,eF="(?:"+[ew,ex,eI].join("|")+")"+eB,eV="(?:"+[eR+eS+"?",eS,ex,eI,ey].join("|")+")",eU=RegExp(em,"g"),ez=RegExp(eS,"g"),eq=RegExp(e_+"(?="+e_+")|"+eV+eB,"g"),eH=RegExp([eP+"?"+eE+"+"+eN+"(?="+[ev,eP,"$"].join("|")+")",eD+"+"+ek+"(?="+[ev,eP+eO,"$"].join("|")+")",eP+"?"+eO+"+"+eN,eP+"+"+ek,eT,eF].join("|"),"g"),e$=RegExp("["+eA+ei+es+eo+ep+"]"),eG=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eW={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},eK="object"==typeof global&&global&&global.Object===Object&&global,eQ="object"==typeof self&&self&&self.Object===Object&&self,eY=eK||eQ||Function("return this")();function eX($,ee,et,er){var en=-1,ei=$?$.length:0;for(er&&ei&&(et=$[++en]);++en<ei;)et=ee(et,$[en],en,$);return et}function eJ($){return $.split("")}function eZ($){return $.match(er)||[]}var e0=function($){return function(ee){return null==$?void 0:$[ee]}}(eW);function e1($){return e$.test($)}function e2($){return eG.test($)}function e4($){return e1($)?e3($):eJ($)}function e3($){return $.match(eq)||[]}function e6($){return $.match(eH)||[]}var e5=Object.prototype.toString,e9=eY.Symbol,e8=e9?e9.prototype:void 0,e7=e8?e8.toString:void 0;function te($,ee,et){var er=-1,en=$.length;ee<0&&(ee=-ee>en?0:en+ee),(et=et>en?en:et)<0&&(et+=en),en=ee>et?0:et-ee>>>0,ee>>>=0;for(var ei=Array(en);++er<en;)ei[er]=$[er+ee];return ei}function tt($){if("string"==typeof $)return $;if(tl($))return e7?e7.call($):"";var et=$+"";return"0"==et&&1/$==-ee?"-0":et}function tr($,ee,et){var er=$.length;return et=void 0===et?er:et,!ee&&et>=er?$:te($,ee,et)}function ti($){return function(ee){var et=e1(ee=tu(ee))?e4(ee):void 0,er=et?et[0]:ee.charAt(0),en=et?tr(et,1).join(""):ee.slice(1);return er[$]()+en}}function ts($){return!!$&&"object"==typeof $}function tl($){return"symbol"==typeof $||ts($)&&e5.call($)==et}function tu($){return null==$?"":tt($)}var th=function($){return function(ee){return eX(tm(tp(ee).replace(eU,"")),$,"")}}(function($,ee,et){return ee=ee.toLowerCase(),$+(et?tf(ee):ee)});function tf($){return tg(tu($).toLowerCase())}function tp($){return($=tu($))&&$.replace(en,e0).replace(ez,"")}var tg=ti("toUpperCase");function tm($,ee,et){return($=tu($),void 0===(ee=et?void 0:ee))?e2($)?e6($):eZ($):$.match(ee)||[]}$.exports=th},8928:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"addBasePath",{enumerable:!0,get:function(){return es}});let er=et(1870),en=et(9847),ei="";function es($,ee){return(0,en.normalizePathTrailingSlash)((0,er.addPathPrefix)($,ei))}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},1314:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"addLocale",{enumerable:!0,get:function(){return er}}),et(9847);let er=function($){for(var ee=arguments.length,et=Array(ee>1?ee-1:0),er=1;er<ee;er++)et[er-1]=arguments[er];return $};("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},3664:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"callServer",{enumerable:!0,get:function(){return en}});let er=et(2583);async function en($,ee){let et=(0,er.getServerActionDispatcher)();if(!et)throw Error("Invariant: missing action dispatcher.");return new Promise((er,en)=>{et({actionId:$,actionArgs:ee,resolve:er,reject:en})})}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},3371:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"AppRouterAnnouncer",{enumerable:!0,get:function(){return eu}});let er=et(3729),en=et(1202),ei="next-route-announcer",es="__next-route-announcer__";function eo(){var $;let ee=document.getElementsByName(ei)[0];if(null==ee?void 0:null==($=ee.shadowRoot)?void 0:$.childNodes[0])return ee.shadowRoot.childNodes[0];{let $=document.createElement(ei);$.style.cssText="position:absolute";let ee=document.createElement("div");return ee.ariaLive="assertive",ee.id=es,ee.role="alert",ee.style.cssText="position:absolute;border:0;height:1px;margin:-1px;padding:0;width:1px;clip:rect(0 0 0 0);overflow:hidden;white-space:nowrap;word-wrap:normal",$.attachShadow({mode:"open"}).appendChild(ee),document.body.appendChild($),ee}}function eu($){let{tree:ee}=$,[et,es]=(0,er.useState)(null);(0,er.useEffect)(()=>(es(eo()),()=>{let $=document.getElementsByTagName(ei)[0];(null==$?void 0:$.isConnected)&&document.body.removeChild($)}),[]);let[eu,eh]=(0,er.useState)(""),ef=(0,er.useRef)();return(0,er.useEffect)(()=>{let $="";if(document.title)$=document.title;else{let ee=document.querySelector("h1");ee&&($=ee.innerText||ee.textContent||"")}void 0!==ef.current&&ef.current!==$&&eh($),ef.current=$},[ee]),et?(0,en.createPortal)(eu,et):null}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},5048:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{RSC_HEADER:function(){return et},ACTION:function(){return er},NEXT_ROUTER_STATE_TREE:function(){return en},NEXT_ROUTER_PREFETCH_HEADER:function(){return ei},NEXT_URL:function(){return es},RSC_CONTENT_TYPE_HEADER:function(){return eo},RSC_VARY_HEADER:function(){return eu},FLIGHT_PARAMETERS:function(){return eh},NEXT_RSC_UNION_QUERY:function(){return ef},NEXT_DID_POSTPONE_HEADER:function(){return ep}});let et="RSC",er="Next-Action",en="Next-Router-State-Tree",ei="Next-Router-Prefetch",es="Next-Url",eo="text/x-component",eu=et+", "+en+", "+ei+", "+es,eh=[[et],[en],[ei]],ef="_rsc",ep="x-nextjs-postponed";("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},2583:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{getServerActionDispatcher:function(){return ex},urlToUrlWithoutFlightMarker:function(){return eP},createEmptyCacheNode:function(){return eD},default:function(){return ej}});let er=et(7824)._(et(3729)),en=et(6860),ei=et(8085),es=et(7475),eo=et(8486),eu=et(4954),eh=et(6840),ef=et(7995),ep=et(6338),eg=et(8928),em=et(3371),ey=et(7046),ev=et(7550),eS=et(5897),eT=et(5048),ew=et(2874),eE=et(6411),eC=!0,e_=null,eR=null;function ex(){return eR}let eI={};function eP($){let ee=new URL($,location.origin);return ee.searchParams.delete(eT.NEXT_RSC_UNION_QUERY),ee}function eA($){return $.origin!==window.location.origin}function eO($){let{appRouterState:ee,sync:et}=$;return(0,er.useInsertionEffect)(()=>{let{tree:$,pushRef:er,canonicalUrl:en}=ee,ei={__NA:!0,__PRIVATE_NEXTJS_INTERNALS_TREE:$};er.pendingPush&&(0,es.createHrefFromUrl)(new URL(window.location.href))!==en?(er.pendingPush=!1,window.history.pushState(ei,"",en)):window.history.replaceState(ei,"",en),et(ee)},[ee,et]),null}let eD=()=>({status:en.CacheStates.LAZY_INITIALIZED,data:null,subTreeData:null,parallelRoutes:new Map});function eN($){eR=(0,er.useCallback)(ee=>{(0,er.startTransition)(()=>{$({...ee,type:ei.ACTION_SERVER_ACTION})})},[$])}function ek($){return(0,er.useCallback)((ee,et,en)=>{(0,er.startTransition)(()=>{$({type:ei.ACTION_SERVER_PATCH,flightData:et,previousTree:ee,overrideCanonicalUrl:en})})},[$])}function eM($){return(0,er.useCallback)((ee,et,er)=>{let en=new URL((0,eg.addBasePath)(ee),location.href);return $({type:ei.ACTION_NAVIGATE,url:en,isExternalUrl:eA(en),locationSearch:location.search,shouldScroll:null==er||er,navigateType:et})},[$])}function eL($){let{buildId:ee,initialHead:et,initialTree:es,initialCanonicalUrl:eh,initialSeedData:eT,assetPrefix:eR}=$,ex=(0,er.useMemo)(()=>(0,ef.createInitialRouterState)({buildId:ee,initialSeedData:eT,initialCanonicalUrl:eh,initialTree:es,initialParallelRoutes:e_,isServer:eC,location:eC?null:window.location,initialHead:et}),[ee,eT,eh,es,et]),[eP,eD,eL]=(0,eu.useReducerWithReduxDevtools)(ex);(0,er.useEffect)(()=>{e_=null},[]);let{canonicalUrl:ej}=(0,eu.useUnwrapState)(eP),{searchParams:eB,pathname:eF}=(0,er.useMemo)(()=>{let $=new URL(ej,"http://n");return{searchParams:$.searchParams,pathname:(0,eE.hasBasePath)($.pathname)?(0,ew.removeBasePath)($.pathname):$.pathname}},[ej]),eV=ek(eD),eU=eM(eD);eN(eD);let ez=(0,er.useMemo)(()=>({back:()=>window.history.back(),forward:()=>window.history.forward(),prefetch:($,ee)=>{if((0,ep.isBot)(window.navigator.userAgent))return;let et=new URL((0,eg.addBasePath)($),window.location.href);eA(et)||(0,er.startTransition)(()=>{var $;eD({type:ei.ACTION_PREFETCH,url:et,kind:null!=($=null==ee?void 0:ee.kind)?$:ei.PrefetchKind.FULL})})},replace:($,ee)=>{void 0===ee&&(ee={}),(0,er.startTransition)(()=>{var et;eU($,"replace",null==(et=ee.scroll)||et)})},push:($,ee)=>{void 0===ee&&(ee={}),(0,er.startTransition)(()=>{var et;eU($,"push",null==(et=ee.scroll)||et)})},refresh:()=>{(0,er.startTransition)(()=>{eD({type:ei.ACTION_REFRESH,origin:window.location.origin})})},fastRefresh:()=>{throw Error("fastRefresh can only be used in development mode. Please use refresh instead.")}}),[eD,eU]);(0,er.useEffect)(()=>{window.next&&(window.next.router=ez)},[ez]),(0,er.useEffect)(()=>{function $($){var ee;$.persisted&&(null==(ee=window.history.state)?void 0:ee.__PRIVATE_NEXTJS_INTERNALS_TREE)&&eD({type:ei.ACTION_RESTORE,url:new URL(window.location.href),tree:window.history.state.__PRIVATE_NEXTJS_INTERNALS_TREE})}return window.addEventListener("pageshow",$),()=>{window.removeEventListener("pageshow",$)}},[eD]);let{pushRef:eq}=(0,eu.useUnwrapState)(eP);if(eq.mpaNavigation){if(eI.pendingMpaPath!==ej){let $=window.location;eq.pendingPush?$.assign(ej):$.replace(ej),eI.pendingMpaPath=ej}(0,er.use)((0,eS.createInfinitePromise)())}(0,er.useEffect)(()=>{window.history.pushState.bind(window.history),window.history.replaceState.bind(window.history);let $=$=>{let{state:ee}=$;if(ee){if(!ee.__NA){window.location.reload();return}(0,er.startTransition)(()=>{eD({type:ei.ACTION_RESTORE,url:new URL(window.location.href),tree:ee.__PRIVATE_NEXTJS_INTERNALS_TREE})})}};return window.addEventListener("popstate",$),()=>{window.removeEventListener("popstate",$)}},[eD]);let{cache:eH,tree:e$,nextUrl:eG,focusAndScrollRef:eW}=(0,eu.useUnwrapState)(eP),eK=(0,er.useMemo)(()=>(0,ev.findHeadInCache)(eH,e$[1]),[eH,e$]),eQ=er.default.createElement(ey.RedirectBoundary,null,eK,eH.subTreeData,er.default.createElement(em.AppRouterAnnouncer,{tree:e$}));return er.default.createElement(er.default.Fragment,null,er.default.createElement(eO,{appRouterState:(0,eu.useUnwrapState)(eP),sync:eL}),er.default.createElement(eo.PathnameContext.Provider,{value:eF},er.default.createElement(eo.SearchParamsContext.Provider,{value:eB},er.default.createElement(en.GlobalLayoutRouterContext.Provider,{value:{buildId:ee,changeByServerResponse:eV,tree:e$,focusAndScrollRef:eW,nextUrl:eG}},er.default.createElement(en.AppRouterContext.Provider,{value:ez},er.default.createElement(en.LayoutRouterContext.Provider,{value:{childNodes:eH.parallelRoutes,tree:e$,url:ej}},eQ))))))}function ej($){let{globalErrorComponent:ee,...et}=$;return er.default.createElement(eh.ErrorBoundary,{errorComponent:ee},er.default.createElement(eL,et))}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},4586:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"bailoutToClientRendering",{enumerable:!0,get:function(){return ei}});let er=et(1462),en=et(4749);function ei(){let $=en.staticGenerationAsyncStorage.getStore();(null==$||!$.forceStatic)&&(null==$?void 0:$.isStaticGeneration)&&(0,er.throwWithNoSSR)()}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},8446:($,ee,et)=>{"use strict";function er($){}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"clientHookInServerComponentError",{enumerable:!0,get:function(){return er}}),et(9694),et(3729),("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},6840:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{ErrorBoundaryHandler:function(){return eo},GlobalError:function(){return eu},default:function(){return eh},ErrorBoundary:function(){return ef}});let er=et(9694)._(et(3729)),en=et(4767),ei={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"}};function es($){let{error:ee}=$;if("function"==typeof fetch.__nextGetStaticStore){var et;let $=null==(et=fetch.__nextGetStaticStore())?void 0:et.getStore();if((null==$?void 0:$.isRevalidate)||(null==$?void 0:$.isStaticGeneration))throw console.error(ee),ee}return null}class eo extends er.default.Component{static getDerivedStateFromError($){return{error:$}}static getDerivedStateFromProps($,ee){return $.pathname!==ee.previousPathname&&ee.error?{error:null,previousPathname:$.pathname}:{error:ee.error,previousPathname:$.pathname}}render(){return this.state.error?er.default.createElement(er.default.Fragment,null,er.default.createElement(es,{error:this.state.error}),this.props.errorStyles,this.props.errorScripts,er.default.createElement(this.props.errorComponent,{error:this.state.error,reset:this.reset})):this.props.children}constructor($){super($),this.reset=()=>{this.setState({error:null})},this.state={error:null,previousPathname:this.props.pathname}}}function eu($){let{error:ee}=$,et=null==ee?void 0:ee.digest;return er.default.createElement("html",{id:"__next_error__"},er.default.createElement("head",null),er.default.createElement("body",null,er.default.createElement(es,{error:ee}),er.default.createElement("div",{style:ei.error},er.default.createElement("div",null,er.default.createElement("h2",{style:ei.text},"Application error: a "+(et?"server":"client")+"-side exception has occurred (see the "+(et?"server logs":"browser console")+" for more information)."),et?er.default.createElement("p",{style:ei.text},"Digest: "+et):null))))}let eh=eu;function ef($){let{errorComponent:ee,errorStyles:et,errorScripts:ei,children:es}=$,eu=(0,en.usePathname)();return ee?er.default.createElement(eo,{pathname:eu,errorComponent:ee,errorStyles:et,errorScripts:ei},es):er.default.createElement(er.default.Fragment,null,es)}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},3082:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{DYNAMIC_ERROR_CODE:function(){return et},DynamicServerError:function(){return er}});let et="DYNAMIC_SERVER_USAGE";class er extends Error{constructor($){super("Dynamic server usage: "+$),this.digest=et}}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},5897:($,ee)=>{"use strict";let et;function er(){return et||(et=new Promise(()=>{})),et}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"createInfinitePromise",{enumerable:!0,get:function(){return er}}),("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},8771:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"default",{enumerable:!0,get:function(){return eI}}),et(9694);let er=et(7824)._(et(3729));et(1202);let en=et(6860),ei=et(7013),es=et(5897),eo=et(6840),eu=et(4287),eh=et(1586),ef=et(7046),ep=et(3225),eg=et(3717),em=et(5325);function ey($,ee){if($){let[et,er]=$,en=2===$.length;if((0,eu.matchSegment)(ee[0],et)&&ee[1].hasOwnProperty(er)){if(en){let $=ey(void 0,ee[1][er]);return[ee[0],{...ee[1],[er]:[$[0],$[1],$[2],"refetch"]}]}return[ee[0],{...ee[1],[er]:ey($.slice(2),ee[1][er])}]}}return ee}function ev($){return null}let eS=["bottom","height","left","right","top","width","x","y"];function eT($){if(["sticky","fixed"].includes(getComputedStyle($).position))return!0;let ee=$.getBoundingClientRect();return eS.every($=>0===ee[$])}function ew($,ee){let et=$.getBoundingClientRect();return et.top>=0&&et.top<=ee}function eE($){var ee;return"top"===$?document.body:null!=(ee=document.getElementById($))?ee:document.getElementsByName($)[0]}class eC extends er.default.Component{componentDidMount(){this.handlePotentialScroll()}componentDidUpdate(){this.props.focusAndScrollRef.apply&&this.handlePotentialScroll()}render(){return this.props.children}constructor(...$){super(...$),this.handlePotentialScroll=()=>{let{focusAndScrollRef:$,segmentPath:ee}=this.props;if($.apply){if(0!==$.segmentPaths.length&&!$.segmentPaths.some($=>ee.every((ee,et)=>(0,eu.matchSegment)(ee,$[et]))))return;let et=null,er=$.hashFragment;if(er&&(et=eE(er)),et||(et=ev(this)),!(et instanceof Element))return;for(;!(et instanceof HTMLElement)||eT(et);){if(null===et.nextElementSibling)return;et=et.nextElementSibling}$.apply=!1,$.hashFragment=null,$.segmentPaths=[],(0,eh.handleSmoothScroll)(()=>{if(er){et.scrollIntoView();return}let $=document.documentElement,ee=$.clientHeight;!ew(et,ee)&&($.scrollTop=0,ew(et,ee)||et.scrollIntoView())},{dontForceLayout:!0,onlyHashChange:$.onlyHashChange}),$.onlyHashChange=!1,et.focus()}}}}function e_($){let{segmentPath:ee,children:et}=$,ei=(0,er.useContext)(en.GlobalLayoutRouterContext);if(!ei)throw Error("invariant global layout router not mounted");return er.default.createElement(eC,{segmentPath:ee,focusAndScrollRef:ei.focusAndScrollRef},et)}function eR($){let{parallelRouterKey:ee,url:et,childNodes:eo,segmentPath:eu,tree:eh,cacheKey:ef}=$,ep=(0,er.useContext)(en.GlobalLayoutRouterContext);if(!ep)throw Error("invariant global layout router not mounted");let{buildId:eg,changeByServerResponse:em,tree:ev}=ep,eS=eo.get(ef);if(!eS||eS.status===en.CacheStates.LAZY_INITIALIZED){let $=ey(["",...eu],ev);eS={status:en.CacheStates.DATA_FETCH,data:(0,ei.fetchServerResponse)(new URL(et,location.origin),$,ep.nextUrl,eg),subTreeData:null,head:eS&&eS.status===en.CacheStates.LAZY_INITIALIZED?eS.head:void 0,parallelRoutes:eS&&eS.status===en.CacheStates.LAZY_INITIALIZED?eS.parallelRoutes:new Map},eo.set(ef,eS)}if(!eS)throw Error("Child node should always exist");if(eS.subTreeData&&eS.data)throw Error("Child node should not have both subTreeData and data");if(eS.data){let[$,ee]=(0,er.use)(eS.data);eS.data=null,setTimeout(()=>{(0,er.startTransition)(()=>{em(ev,$,ee)})}),(0,er.use)((0,es.createInfinitePromise)())}return eS.subTreeData||(0,er.use)((0,es.createInfinitePromise)()),er.default.createElement(en.LayoutRouterContext.Provider,{value:{tree:eh[1][ee],childNodes:eS.parallelRoutes,url:et}},eS.subTreeData)}function ex($){let{children:ee,loading:et,loadingStyles:en,loadingScripts:ei,hasLoading:es}=$;return es?er.default.createElement(er.Suspense,{fallback:er.default.createElement(er.default.Fragment,null,en,ei,et)},ee):er.default.createElement(er.default.Fragment,null,ee)}function eI($){let{parallelRouterKey:ee,segmentPath:et,error:ei,errorStyles:es,errorScripts:eu,templateStyles:eh,templateScripts:ey,loading:ev,loadingStyles:eS,loadingScripts:eT,hasLoading:ew,template:eE,notFound:eC,notFoundStyles:eI,styles:eP}=$,eA=(0,er.useContext)(en.LayoutRouterContext);if(!eA)throw Error("invariant expected layout router to be mounted");let{childNodes:eO,tree:eD,url:eN}=eA,ek=eO.get(ee);ek||(ek=new Map,eO.set(ee,ek));let eM=eD[1][ee][0],eL=(0,eg.getSegmentValue)(eM),ej=[eM];return er.default.createElement(er.default.Fragment,null,eP,ej.map($=>{let eP=(0,eg.getSegmentValue)($),eA=(0,em.createRouterCacheKey)($);return er.default.createElement(en.TemplateContext.Provider,{key:(0,em.createRouterCacheKey)($,!0),value:er.default.createElement(e_,{segmentPath:et},er.default.createElement(eo.ErrorBoundary,{errorComponent:ei,errorStyles:es,errorScripts:eu},er.default.createElement(ex,{hasLoading:ew,loading:ev,loadingStyles:eS,loadingScripts:eT},er.default.createElement(ep.NotFoundBoundary,{notFound:eC,notFoundStyles:eI},er.default.createElement(ef.RedirectBoundary,null,er.default.createElement(eR,{parallelRouterKey:ee,url:eN,tree:eD,childNodes:ek,segmentPath:et,cacheKey:eA,isActive:eL===eP}))))))},eh,ey,eE)}))}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},4287:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{matchSegment:function(){return en},canSegmentBeOverridden:function(){return ei}});let er=et(4269),en=($,ee)=>"string"==typeof $?"string"==typeof ee&&$===ee:"string"!=typeof ee&&$[0]===ee[0]&&$[1]===ee[1],ei=($,ee)=>{var et;return!Array.isArray($)&&!!Array.isArray(ee)&&(null==(et=(0,er.getSegmentParam)($))?void 0:et.param)===ee[0]};("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},4767:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{ReadonlyURLSearchParams:function(){return em},useSearchParams:function(){return ey},usePathname:function(){return ev},ServerInsertedHTMLContext:function(){return eu.ServerInsertedHTMLContext},useServerInsertedHTML:function(){return eu.useServerInsertedHTML},useRouter:function(){return eS},useParams:function(){return ew},useSelectedLayoutSegments:function(){return eC},useSelectedLayoutSegment:function(){return e_},redirect:function(){return eh.redirect},permanentRedirect:function(){return eh.permanentRedirect},RedirectType:function(){return eh.RedirectType},notFound:function(){return ef.notFound}});let er=et(3729),en=et(6860),ei=et(8486),es=et(8446),eo=et(3717),eu=et(9505),eh=et(2792),ef=et(226),ep=Symbol("internal for urlsearchparams readonly");function eg(){return Error("ReadonlyURLSearchParams cannot be modified")}class em{[Symbol.iterator](){return this[ep][Symbol.iterator]()}append(){throw eg()}delete(){throw eg()}set(){throw eg()}sort(){throw eg()}constructor($){this[ep]=$,this.entries=$.entries.bind($),this.forEach=$.forEach.bind($),this.get=$.get.bind($),this.getAll=$.getAll.bind($),this.has=$.has.bind($),this.keys=$.keys.bind($),this.values=$.values.bind($),this.toString=$.toString.bind($),this.size=$.size}}function ey(){(0,es.clientHookInServerComponentError)("useSearchParams");let $=(0,er.useContext)(ei.SearchParamsContext),ee=(0,er.useMemo)(()=>$?new em($):null,[$]);{let{bailoutToClientRendering:$}=et(4586);$()}return ee}function ev(){return(0,es.clientHookInServerComponentError)("usePathname"),(0,er.useContext)(ei.PathnameContext)}function eS(){(0,es.clientHookInServerComponentError)("useRouter");let $=(0,er.useContext)(en.AppRouterContext);if(null===$)throw Error("invariant expected app router to be mounted");return $}function eT($,ee){for(let et of(void 0===ee&&(ee={}),Object.values($[1]))){let $=et[0],er=Array.isArray($),en=er?$[1]:$;!en||en.startsWith("__PAGE__")||(er&&("c"===$[2]||"oc"===$[2])?ee[$[0]]=$[1].split("/"):er&&(ee[$[0]]=$[1]),ee=eT(et,ee))}return ee}function ew(){(0,es.clientHookInServerComponentError)("useParams");let $=(0,er.useContext)(en.GlobalLayoutRouterContext),ee=(0,er.useContext)(ei.PathParamsContext);return(0,er.useMemo)(()=>(null==$?void 0:$.tree)?eT($.tree):ee,[null==$?void 0:$.tree,ee])}function eE($,ee,et,er){let en;if(void 0===et&&(et=!0),void 0===er&&(er=[]),et)en=$[1][ee];else{var ei;let ee=$[1];en=null!=(ei=ee.children)?ei:Object.values(ee)[0]}if(!en)return er;let es=en[0],eu=(0,eo.getSegmentValue)(es);return!eu||eu.startsWith("__PAGE__")?er:(er.push(eu),eE(en,ee,!1,er))}function eC($){void 0===$&&($="children"),(0,es.clientHookInServerComponentError)("useSelectedLayoutSegments");let{tree:ee}=(0,er.useContext)(en.LayoutRouterContext);return eE(ee,$)}function e_($){void 0===$&&($="children"),(0,es.clientHookInServerComponentError)("useSelectedLayoutSegment");let ee=eC($);return 0===ee.length?null:ee[0]}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},3225:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"NotFoundBoundary",{enumerable:!0,get:function(){return es}});let er=et(9694)._(et(3729)),en=et(4767);class ei extends er.default.Component{static getDerivedStateFromError($){if((null==$?void 0:$.digest)==="NEXT_NOT_FOUND")return{notFoundTriggered:!0};throw $}static getDerivedStateFromProps($,ee){return $.pathname!==ee.previousPathname&&ee.notFoundTriggered?{notFoundTriggered:!1,previousPathname:$.pathname}:{notFoundTriggered:ee.notFoundTriggered,previousPathname:$.pathname}}render(){return this.state.notFoundTriggered?er.default.createElement(er.default.Fragment,null,er.default.createElement("meta",{name:"robots",content:"noindex"}),!1,this.props.notFoundStyles,this.props.notFound):this.props.children}constructor($){super($),this.state={notFoundTriggered:!!$.asNotFound,previousPathname:$.pathname}}}function es($){let{notFound:ee,notFoundStyles:et,asNotFound:es,children:eo}=$,eu=(0,en.usePathname)();return ee?er.default.createElement(ei,{pathname:eu,notFound:ee,notFoundStyles:et,asNotFound:es},eo):er.default.createElement(er.default.Fragment,null,eo)}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},226:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{notFound:function(){return er},isNotFoundError:function(){return en}});let et="NEXT_NOT_FOUND";function er(){let $=Error(et);throw $.digest=et,$}function en($){return(null==$?void 0:$.digest)===et}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},2051:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"PromiseQueue",{enumerable:!0,get:function(){return eh}});let er=et(9996),en=et(7074);var ei=en._("_maxConcurrency"),es=en._("_runningCount"),eo=en._("_queue"),eu=en._("_processNext");class eh{enqueue($){let ee,et;let en=new Promise(($,er)=>{ee=$,et=er}),ei={promiseFn:en,task:async()=>{try{er._(this,es)[es]++;let et=await $();ee(et)}catch($){et($)}finally{er._(this,es)[es]--,er._(this,eu)[eu]()}}};return er._(this,eo)[eo].push(ei),er._(this,eu)[eu](),en}bump($){let ee=er._(this,eo)[eo].findIndex(ee=>ee.promiseFn===$);if(ee>-1){let $=er._(this,eo)[eo].splice(ee,1)[0];er._(this,eo)[eo].unshift($),er._(this,eu)[eu](!0)}}constructor($=5){Object.defineProperty(this,eu,{value:ef}),Object.defineProperty(this,ei,{writable:!0,value:void 0}),Object.defineProperty(this,es,{writable:!0,value:void 0}),Object.defineProperty(this,eo,{writable:!0,value:void 0}),er._(this,ei)[ei]=$,er._(this,es)[es]=0,er._(this,eo)[eo]=[]}}function ef($){if(void 0===$&&($=!1),(er._(this,es)[es]<er._(this,ei)[ei]||$)&&er._(this,eo)[eo].length>0){var ee;null==(ee=er._(this,eo)[eo].shift())||ee.task()}}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},7046:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{RedirectErrorBoundary:function(){return eo},RedirectBoundary:function(){return eu}});let er=et(7824)._(et(3729)),en=et(4767),ei=et(2792);function es($){let{redirect:ee,reset:et,redirectType:es}=$,eo=(0,en.useRouter)();return(0,er.useEffect)(()=>{er.default.startTransition(()=>{es===ei.RedirectType.push?eo.push(ee,{}):eo.replace(ee,{}),et()})},[ee,es,et,eo]),null}class eo extends er.default.Component{static getDerivedStateFromError($){if((0,ei.isRedirectError)($))return{redirect:(0,ei.getURLFromRedirectError)($),redirectType:(0,ei.getRedirectTypeFromError)($)};throw $}render(){let{redirect:$,redirectType:ee}=this.state;return null!==$&&null!==ee?er.default.createElement(es,{redirect:$,redirectType:ee,reset:()=>this.setState({redirect:null})}):this.props.children}constructor($){super($),this.state={redirect:null,redirectType:null}}}function eu($){let{children:ee}=$,et=(0,en.useRouter)();return er.default.createElement(eo,{router:et},ee)}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},7761:($,ee)=>{"use strict";var et;Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"RedirectStatusCode",{enumerable:!0,get:function(){return et}}),function($){$[$.SeeOther=303]="SeeOther",$[$.TemporaryRedirect=307]="TemporaryRedirect",$[$.PermanentRedirect=308]="PermanentRedirect"}(et||(et={})),("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},2792:($,ee,et)=>{"use strict";var er;Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{RedirectType:function(){return er},getRedirectError:function(){return eu},redirect:function(){return eh},permanentRedirect:function(){return ef},isRedirectError:function(){return ep},getURLFromRedirectError:function(){return eg},getRedirectTypeFromError:function(){return em},getRedirectStatusCodeFromError:function(){return ey}});let en=et(5403),ei=et(7849),es=et(7761),eo="NEXT_REDIRECT";function eu($,ee,et){void 0===et&&(et=es.RedirectStatusCode.TemporaryRedirect);let er=Error(eo);er.digest=eo+";"+ee+";"+$+";"+et+";";let ei=en.requestAsyncStorage.getStore();return ei&&(er.mutableCookies=ei.mutableCookies),er}function eh($,ee){void 0===ee&&(ee="replace");let et=ei.actionAsyncStorage.getStore();throw eu($,ee,(null==et?void 0:et.isAction)?es.RedirectStatusCode.SeeOther:es.RedirectStatusCode.TemporaryRedirect)}function ef($,ee){void 0===ee&&(ee="replace");let et=ei.actionAsyncStorage.getStore();throw eu($,ee,(null==et?void 0:et.isAction)?es.RedirectStatusCode.SeeOther:es.RedirectStatusCode.PermanentRedirect)}function ep($){if("string"!=typeof(null==$?void 0:$.digest))return!1;let[ee,et,er,en]=$.digest.split(";",4),ei=Number(en);return ee===eo&&("replace"===et||"push"===et)&&"string"==typeof er&&!isNaN(ei)&&ei in es.RedirectStatusCode}function eg($){return ep($)?$.digest.split(";",3)[2]:null}function em($){if(!ep($))throw Error("Not a redirect error");return $.digest.split(";",2)[1]}function ey($){if(!ep($))throw Error("Not a redirect error");return Number($.digest.split(";",4)[3])}(function($){$.push="push",$.replace="replace"})(er||(er={})),("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},9295:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"default",{enumerable:!0,get:function(){return ei}});let er=et(7824)._(et(3729)),en=et(6860);function ei(){let $=(0,er.useContext)(en.TemplateContext);return er.default.createElement(er.default.Fragment,null,$)}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},9543:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"applyFlightData",{enumerable:!0,get:function(){return es}});let er=et(6860),en=et(7234),ei=et(6408);function es($,ee,et,es){void 0===es&&(es=!1);let[eo,eu,eh]=et.slice(-3);if(null===eu)return!1;if(3===et.length){let et=eu[2];ee.status=er.CacheStates.READY,ee.subTreeData=et,(0,en.fillLazyItemsTillLeafWithHead)(ee,$,eo,eu,eh,es)}else ee.status=er.CacheStates.READY,ee.subTreeData=$.subTreeData,ee.parallelRoutes=new Map($.parallelRoutes),(0,ei.fillCacheWithNewSubTreeData)(ee,$,et,es);return!0}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},1697:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"applyRouterStatePatchToTree",{enumerable:!0,get:function(){return ei}});let er=et(4287);function en($,ee){let[et,ei]=$,[es,eo]=ee;if("__DEFAULT__"===es&&"__DEFAULT__"!==et)return $;if((0,er.matchSegment)(et,es)){let ee={};for(let $ in ei)void 0!==eo[$]?ee[$]=en(ei[$],eo[$]):ee[$]=ei[$];for(let $ in eo)ee[$]||(ee[$]=eo[$]);let er=[et,ee];return $[2]&&(er[2]=$[2]),$[3]&&(er[3]=$[3]),$[4]&&(er[4]=$[4]),er}return ee}function ei($,ee,et){let es;let[eo,eu,,,eh]=ee;if(1===$.length)return en(ee,et);let[ef,ep]=$;if(!(0,er.matchSegment)(ef,eo))return null;if(2===$.length)es=en(eu[ep],et);else if(null===(es=ei($.slice(2),eu[ep],et)))return null;let eg=[$[0],{...eu,[ep]:es}];return eh&&(eg[4]=!0),eg}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},5684:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{extractPathFromFlightRouterState:function(){return eh},computeChangedPath:function(){return ep}});let er=et(5767),en=et(9457),ei=et(4287),es=$=>"/"===$[0]?$.slice(1):$,eo=$=>"string"==typeof $?$:$[1];function eu($){return $.reduce(($,ee)=>""===(ee=es(ee))||(0,en.isGroupSegment)(ee)?$:$+"/"+ee,"")||"/"}function eh($){var ee;let et=Array.isArray($[0])?$[0][1]:$[0];if("__DEFAULT__"===et||er.INTERCEPTION_ROUTE_MARKERS.some($=>et.startsWith($)))return;if(et.startsWith("__PAGE__"))return"";let en=[et],ei=null!=(ee=$[1])?ee:{},es=ei.children?eh(ei.children):void 0;if(void 0!==es)en.push(es);else for(let[$,ee]of Object.entries(ei)){if("children"===$)continue;let et=eh(ee);void 0!==et&&en.push(et)}return eu(en)}function ef($,ee){let[et,en]=$,[es,eu]=ee,ep=eo(et),eg=eo(es);if(er.INTERCEPTION_ROUTE_MARKERS.some($=>ep.startsWith($)||eg.startsWith($)))return"";if(!(0,ei.matchSegment)(et,es)){var em;return null!=(em=eh(ee))?em:""}for(let $ in en)if(eu[$]){let ee=ef(en[$],eu[$]);if(null!==ee)return eo(es)+"/"+ee}return null}function ep($,ee){let et=ef($,ee);return null==et||"/"===et?et:eu(et.split("/"))}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},7475:($,ee)=>{"use strict";function et($,ee){return void 0===ee&&(ee=!0),$.pathname+$.search+(ee?$.hash:"")}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"createHrefFromUrl",{enumerable:!0,get:function(){return et}}),("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},7995:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"createInitialRouterState",{enumerable:!0,get:function(){return eo}});let er=et(6860),en=et(7475),ei=et(7234),es=et(5684);function eo($){var ee;let{buildId:et,initialTree:eo,initialSeedData:eu,initialCanonicalUrl:eh,initialParallelRoutes:ef,isServer:ep,location:eg,initialHead:em}=$,ey=eu[2],ev={status:er.CacheStates.READY,data:null,subTreeData:ey,parallelRoutes:ep?new Map:ef};return(null===ef||0===ef.size)&&(0,ei.fillLazyItemsTillLeafWithHead)(ev,void 0,eo,eu,em),{buildId:et,tree:eo,cache:ev,prefetchCache:new Map,pushRef:{pendingPush:!1,mpaNavigation:!1,preserveCustomHistoryState:!0},focusAndScrollRef:{apply:!1,onlyHashChange:!1,hashFragment:null,segmentPaths:[]},canonicalUrl:eg?(0,en.createHrefFromUrl)(eg):eh,nextUrl:null!=(ee=(0,es.extractPathFromFlightRouterState)(eo)||(null==eg?void 0:eg.pathname))?ee:null}}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},5325:($,ee)=>{"use strict";function et($,ee){return void 0===ee&&(ee=!1),Array.isArray($)?($[0]+"|"+$[1]+"|"+$[2]).toLowerCase():ee&&$.startsWith("__PAGE__")?"__PAGE__":$}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"createRouterCacheKey",{enumerable:!0,get:function(){return et}}),("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},7013:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"fetchServerResponse",{enumerable:!0,get:function(){return ef}});let er=et(5048),en=et(2583),ei=et(3664),es=et(8085),eo=et(5344),{createFromFetch:eu}=et(2228);function eh($){return[(0,en.urlToUrlWithoutFlightMarker)($).toString(),void 0]}async function ef($,ee,et,ef,ep){let eg={[er.RSC_HEADER]:"1",[er.NEXT_ROUTER_STATE_TREE]:encodeURIComponent(JSON.stringify(ee))};ep===es.PrefetchKind.AUTO&&(eg[er.NEXT_ROUTER_PREFETCH_HEADER]="1"),et&&(eg[er.NEXT_URL]=et);let em=(0,eo.hexHash)([eg[er.NEXT_ROUTER_PREFETCH_HEADER]||"0",eg[er.NEXT_ROUTER_STATE_TREE],eg[er.NEXT_URL]].join(","));try{let ee=new URL($);ee.searchParams.set(er.NEXT_RSC_UNION_QUERY,em);let et=await fetch(ee,{credentials:"same-origin",headers:eg}),es=(0,en.urlToUrlWithoutFlightMarker)(et.url),eo=et.redirected?es:void 0,ep=et.headers.get("content-type")||"",ey=!!et.headers.get(er.NEXT_DID_POSTPONE_HEADER);if(ep!==er.RSC_CONTENT_TYPE_HEADER||!et.ok)return $.hash&&(es.hash=$.hash),eh(es.toString());let[ev,eS]=await eu(Promise.resolve(et),{callServer:ei.callServer});if(ef!==ev)return eh(et.url);return[eS,eo,ey]}catch(ee){return console.error("Failed to fetch RSC payload for "+$+". Falling back to browser navigation.",ee),[$.toString(),void 0]}}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},7676:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"fillCacheWithDataProperty",{enumerable:!0,get:function(){return ei}});let er=et(6860),en=et(5325);function ei($,ee,et,es){let eo=et.length<=2,[eu,eh]=et,ef=(0,en.createRouterCacheKey)(eh),ep=ee.parallelRoutes.get(eu),eg=$.parallelRoutes.get(eu);eg&&eg!==ep||(eg=new Map(ep),$.parallelRoutes.set(eu,eg));let em=null==ep?void 0:ep.get(ef),ey=eg.get(ef);if(eo){ey&&ey.data&&ey!==em||eg.set(ef,{status:er.CacheStates.DATA_FETCH,data:es(),subTreeData:null,parallelRoutes:new Map});return}if(!ey||!em){ey||eg.set(ef,{status:er.CacheStates.DATA_FETCH,data:es(),subTreeData:null,parallelRoutes:new Map});return}return ey===em&&(ey={status:ey.status,data:ey.data,subTreeData:ey.subTreeData,parallelRoutes:new Map(ey.parallelRoutes)},eg.set(ef,ey)),ei(ey,em,et.slice(2),es)}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},6408:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"fillCacheWithNewSubTreeData",{enumerable:!0,get:function(){return eo}});let er=et(6860),en=et(250),ei=et(7234),es=et(5325);function eo($,ee,et,eu){let eh=et.length<=5,[ef,ep]=et,eg=(0,es.createRouterCacheKey)(ep),em=ee.parallelRoutes.get(ef);if(!em)return;let ey=$.parallelRoutes.get(ef);ey&&ey!==em||(ey=new Map(em),$.parallelRoutes.set(ef,ey));let ev=em.get(eg),eS=ey.get(eg);if(eh){if(!eS||!eS.data||eS===ev){let $=et[3],ee=$[2];eS={status:er.CacheStates.READY,data:null,subTreeData:ee,parallelRoutes:ev?new Map(ev.parallelRoutes):new Map},ev&&(0,en.invalidateCacheByRouterState)(eS,ev,et[2]),(0,ei.fillLazyItemsTillLeafWithHead)(eS,ev,et[2],$,et[4],eu),ey.set(eg,eS)}return}eS&&ev&&(eS===ev&&(eS={status:eS.status,data:eS.data,subTreeData:eS.subTreeData,parallelRoutes:new Map(eS.parallelRoutes)},ey.set(eg,eS)),eo(eS,ev,et.slice(2),eu))}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},7234:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"fillLazyItemsTillLeafWithHead",{enumerable:!0,get:function(){return ei}});let er=et(6860),en=et(5325);function ei($,ee,et,es,eo,eu){if(0===Object.keys(et[1]).length){$.head=eo;return}for(let eh in et[1]){let ef;let ep=et[1][eh],eg=ep[0],em=(0,en.createRouterCacheKey)(eg),ey=null!==es&&null!==es[1]&&void 0!==es[1][eh]?es[1][eh]:null;if(ee){let et=ee.parallelRoutes.get(eh);if(et){let ee,en=new Map(et),es=en.get(em);if(null!==ey){let $=ey[2];ee={status:er.CacheStates.READY,data:null,subTreeData:$,parallelRoutes:new Map(null==es?void 0:es.parallelRoutes)}}else ee=eu&&es?{status:es.status,data:es.data,subTreeData:es.subTreeData,parallelRoutes:new Map(es.parallelRoutes)}:{status:er.CacheStates.LAZY_INITIALIZED,data:null,subTreeData:null,parallelRoutes:new Map(null==es?void 0:es.parallelRoutes)};en.set(em,ee),ei(ee,es,ep,ey||null,eo,eu),$.parallelRoutes.set(eh,en);continue}}if(null!==ey){let $=ey[2];ef={status:er.CacheStates.READY,data:null,subTreeData:$,parallelRoutes:new Map}}else ef={status:er.CacheStates.LAZY_INITIALIZED,data:null,subTreeData:null,parallelRoutes:new Map};let ev=$.parallelRoutes.get(eh);ev?ev.set(em,ef):$.parallelRoutes.set(eh,new Map([[em,ef]])),ei(ef,void 0,ep,ey,eo,eu)}}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},696:($,ee)=>{"use strict";var et;Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{PrefetchCacheEntryStatus:function(){return et},getPrefetchEntryCacheStatus:function(){return ei}});let er=3e5,en=3e4;function ei($){let{kind:ee,prefetchTime:et,lastUsedTime:ei}=$;return Date.now()<(null!=ei?ei:et)+en?ei?"reusable":"fresh":"auto"===ee&&Date.now()<et+er?"stale":"full"===ee&&Date.now()<et+er?"reusable":"expired"}(function($){$.fresh="fresh",$.reusable="reusable",$.expired="expired",$.stale="stale"})(et||(et={})),("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},4080:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"handleMutable",{enumerable:!0,get:function(){return ei}});let er=et(5684);function en($){return void 0!==$}function ei($,ee){var et,ei,es;let eo=null==(ei=ee.shouldScroll)||ei,eu=$.nextUrl;if(en(ee.patchedTree)){let et=(0,er.computeChangedPath)($.tree,ee.patchedTree);et?eu=et:eu||(eu=$.canonicalUrl)}return{buildId:$.buildId,canonicalUrl:en(ee.canonicalUrl)?ee.canonicalUrl===$.canonicalUrl?$.canonicalUrl:ee.canonicalUrl:$.canonicalUrl,pushRef:{pendingPush:en(ee.pendingPush)?ee.pendingPush:$.pushRef.pendingPush,mpaNavigation:en(ee.mpaNavigation)?ee.mpaNavigation:$.pushRef.mpaNavigation,preserveCustomHistoryState:en(ee.preserveCustomHistoryState)?ee.preserveCustomHistoryState:$.pushRef.preserveCustomHistoryState},focusAndScrollRef:{apply:!!eo&&(!!en(null==ee?void 0:ee.scrollableSegments)||$.focusAndScrollRef.apply),onlyHashChange:!!ee.hashFragment&&$.canonicalUrl.split("#",1)[0]===(null==(et=ee.canonicalUrl)?void 0:et.split("#",1)[0]),hashFragment:eo?ee.hashFragment&&""!==ee.hashFragment?decodeURIComponent(ee.hashFragment.slice(1)):$.focusAndScrollRef.hashFragment:null,segmentPaths:eo?null!=(es=null==ee?void 0:ee.scrollableSegments)?es:$.focusAndScrollRef.segmentPaths:[]},cache:ee.cache?ee.cache:$.cache,prefetchCache:ee.prefetchCache?ee.prefetchCache:$.prefetchCache,tree:en(ee.patchedTree)?ee.patchedTree:$.tree,nextUrl:eu}}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},2293:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"invalidateCacheBelowFlightSegmentPath",{enumerable:!0,get:function(){return en}});let er=et(5325);function en($,ee,et){let ei=et.length<=2,[es,eo]=et,eu=(0,er.createRouterCacheKey)(eo),eh=ee.parallelRoutes.get(es);if(!eh)return;let ef=$.parallelRoutes.get(es);if(ef&&ef!==eh||(ef=new Map(eh),$.parallelRoutes.set(es,ef)),ei){ef.delete(eu);return}let ep=eh.get(eu),eg=ef.get(eu);eg&&ep&&(eg===ep&&(eg={status:eg.status,data:eg.data,subTreeData:eg.subTreeData,parallelRoutes:new Map(eg.parallelRoutes)},ef.set(eu,eg)),en(eg,ep,et.slice(2)))}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},250:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"invalidateCacheByRouterState",{enumerable:!0,get:function(){return en}});let er=et(5325);function en($,ee,et){for(let en in et[1]){let ei=et[1][en][0],es=(0,er.createRouterCacheKey)(ei),eo=ee.parallelRoutes.get(en);if(eo){let ee=new Map(eo);ee.delete(es),$.parallelRoutes.set(en,ee)}}}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},3694:($,ee)=>{"use strict";function et($,ee){let er=$[0],en=ee[0];if(Array.isArray(er)&&Array.isArray(en)){if(er[0]!==en[0]||er[2]!==en[2])return!0}else if(er!==en)return!0;if($[4])return!ee[4];if(ee[4])return!0;let ei=Object.values($[1])[0],es=Object.values(ee[1])[0];return!ei||!es||et(ei,es)}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"isNavigatingToNewRootLayout",{enumerable:!0,get:function(){return et}}),("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},2298:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"fastRefreshReducer",{enumerable:!0,get:function(){return er}}),et(7013),et(7475),et(1697),et(3694),et(9643),et(4080),et(9543),et(2583);let er=function($,ee){return $};("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},7550:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"findHeadInCache",{enumerable:!0,get:function(){return en}});let er=et(5325);function en($,ee){if(0===Object.keys(ee).length)return $.head;for(let et in ee){let[ei,es]=ee[et],eo=$.parallelRoutes.get(et);if(!eo)continue;let eu=(0,er.createRouterCacheKey)(ei),eh=eo.get(eu);if(!eh)continue;let ef=en(eh,es);if(ef)return ef}}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},3717:($,ee)=>{"use strict";function et($){return Array.isArray($)?$[1]:$}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"getSegmentValue",{enumerable:!0,get:function(){return et}}),("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},9643:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{handleExternalUrl:function(){return ew},navigateReducer:function(){return e_}});let er=et(6860),en=et(7013),ei=et(7475),es=et(2293),eo=et(7676),eu=et(1697),eh=et(7528),ef=et(3694),ep=et(8085),eg=et(4080),em=et(9543),ey=et(696),ev=et(2574),eS=et(7772),eT=et(2583);function ew($,ee,et,er){return ee.mpaNavigation=!0,ee.canonicalUrl=et,ee.pendingPush=er,ee.scrollableSegments=void 0,(0,eg.handleMutable)($,ee)}function eE($){let ee=[],[et,er]=$;if(0===Object.keys(er).length)return[[et]];for(let[$,en]of Object.entries(er))for(let er of eE(en))""===et?ee.push([$,...er]):ee.push([et,$,...er]);return ee}function eC($,ee,et,en,ei){let es=!1;for(let eu of($.status=er.CacheStates.READY,$.subTreeData=ee.subTreeData,$.parallelRoutes=new Map(ee.parallelRoutes),eE(en).map($=>[...et,...$])))(0,eo.fillCacheWithDataProperty)($,ee,eu,ei),es=!0;return es}function e_($,ee){let{url:et,isExternalUrl:eo,navigateType:e_,shouldScroll:eR}=ee,ex={},{hash:eI}=et,eP=(0,ei.createHrefFromUrl)(et),eA="push"===e_;if((0,ev.prunePrefetchCache)($.prefetchCache),ex.preserveCustomHistoryState=!1,eo)return ew($,ex,et.toString(),eA);let eO=$.prefetchCache.get((0,ei.createHrefFromUrl)(et,!1));if(!eO){let ee={data:(0,en.fetchServerResponse)(et,$.tree,$.nextUrl,$.buildId,void 0),kind:ep.PrefetchKind.TEMPORARY,prefetchTime:Date.now(),treeAtTimeOfPrefetch:$.tree,lastUsedTime:null};$.prefetchCache.set((0,ei.createHrefFromUrl)(et,!1),ee),eO=ee}let eD=(0,ey.getPrefetchEntryCacheStatus)(eO),{treeAtTimeOfPrefetch:eN,data:ek}=eO;return eS.prefetchQueue.bump(ek),ek.then(ee=>{let[eo,ep,ev]=ee;if(eO&&!eO.lastUsedTime&&(eO.lastUsedTime=Date.now()),"string"==typeof eo)return ew($,ex,eo,eA);let eS=$.tree,e_=$.cache,ek=[];for(let ee of eo){let ei=ee.slice(0,-4),eo=ee.slice(-3)[0],ep=["",...ei],eg=(0,eu.applyRouterStatePatchToTree)(ep,eS,eo);if(null===eg&&(eg=(0,eu.applyRouterStatePatchToTree)(ep,eN,eo)),null!==eg){if((0,ef.isNavigatingToNewRootLayout)(eS,eg))return ew($,ex,eP,eA);let eu=(0,eT.createEmptyCacheNode)(),eR=(0,em.applyFlightData)(e_,eu,ee,(null==eO?void 0:eO.kind)==="auto"&&eD===ey.PrefetchCacheEntryStatus.reusable);for(let ee of((!eR&&eD===ey.PrefetchCacheEntryStatus.stale||ev)&&(eR=eC(eu,e_,ei,eo,()=>(0,en.fetchServerResponse)(et,eS,$.nextUrl,$.buildId))),(0,eh.shouldHardNavigate)(ep,eS)?(eu.status=er.CacheStates.READY,eu.subTreeData=e_.subTreeData,(0,es.invalidateCacheBelowFlightSegmentPath)(eu,e_,ei),ex.cache=eu):eR&&(ex.cache=eu),e_=eu,eS=eg,eE(eo))){let $=[...ei,...ee];"__DEFAULT__"!==$[$.length-1]&&ek.push($)}}}return ex.patchedTree=eS,ex.canonicalUrl=ep?(0,ei.createHrefFromUrl)(ep):eP,ex.pendingPush=eA,ex.scrollableSegments=ek,ex.hashFragment=eI,ex.shouldScroll=eR,(0,eg.handleMutable)($,ex)},()=>$)}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},7772:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{prefetchQueue:function(){return eu},prefetchReducer:function(){return eh}});let er=et(7475),en=et(7013),ei=et(8085),es=et(2574),eo=et(5048),eu=new(et(2051)).PromiseQueue(5);function eh($,ee){(0,es.prunePrefetchCache)($.prefetchCache);let{url:et}=ee;et.searchParams.delete(eo.NEXT_RSC_UNION_QUERY);let eh=(0,er.createHrefFromUrl)(et,!1),ef=$.prefetchCache.get(eh);if(ef&&(ef.kind===ei.PrefetchKind.TEMPORARY&&$.prefetchCache.set(eh,{...ef,kind:ee.kind}),!(ef.kind===ei.PrefetchKind.AUTO&&ee.kind===ei.PrefetchKind.FULL)))return $;let ep=eu.enqueue(()=>(0,en.fetchServerResponse)(et,$.tree,$.nextUrl,$.buildId,ee.kind));return $.prefetchCache.set(eh,{treeAtTimeOfPrefetch:$.tree,data:ep,kind:ee.kind,prefetchTime:Date.now(),lastUsedTime:null}),$}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},2574:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"prunePrefetchCache",{enumerable:!0,get:function(){return en}});let er=et(696);function en($){for(let[ee,et]of $)(0,er.getPrefetchEntryCacheStatus)(et)===er.PrefetchCacheEntryStatus.expired&&$.delete(ee)}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},7787:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"refreshReducer",{enumerable:!0,get:function(){return eg}});let er=et(7013),en=et(7475),ei=et(1697),es=et(3694),eo=et(9643),eu=et(4080),eh=et(6860),ef=et(7234),ep=et(2583);function eg($,ee){let{origin:et}=ee,eg={},em=$.canonicalUrl,ey=$.tree;eg.preserveCustomHistoryState=!1;let ev=(0,ep.createEmptyCacheNode)();return ev.data=(0,er.fetchServerResponse)(new URL(em,et),[ey[0],ey[1],ey[2],"refetch"],$.nextUrl,$.buildId),ev.data.then(ee=>{let[et,er]=ee;if("string"==typeof et)return(0,eo.handleExternalUrl)($,eg,et,$.pushRef.pendingPush);for(let ee of(ev.data=null,et)){if(3!==ee.length)return console.log("REFRESH FAILED"),$;let[et]=ee,eu=(0,ei.applyRouterStatePatchToTree)([""],ey,et);if(null===eu)throw Error("SEGMENT MISMATCH");if((0,es.isNavigatingToNewRootLayout)(ey,eu))return(0,eo.handleExternalUrl)($,eg,em,$.pushRef.pendingPush);let ep=er?(0,en.createHrefFromUrl)(er):void 0;er&&(eg.canonicalUrl=ep);let[eS,eT]=ee.slice(-2);if(null!==eS){let $=eS[2];ev.status=eh.CacheStates.READY,ev.subTreeData=$,(0,ef.fillLazyItemsTillLeafWithHead)(ev,void 0,et,eS,eT),eg.cache=ev,eg.prefetchCache=new Map}eg.patchedTree=eu,eg.canonicalUrl=em,ey=eu}return(0,eu.handleMutable)($,eg)},()=>$)}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},5206:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"restoreReducer",{enumerable:!0,get:function(){return ei}});let er=et(7475),en=et(5684);function ei($,ee){var et;let{url:ei,tree:es}=ee,eo=(0,er.createHrefFromUrl)(ei);return{buildId:$.buildId,canonicalUrl:eo,pushRef:{pendingPush:!1,mpaNavigation:!1,preserveCustomHistoryState:!0},focusAndScrollRef:$.focusAndScrollRef,cache:$.cache,prefetchCache:$.prefetchCache,tree:es,nextUrl:null!=(et=(0,en.extractPathFromFlightRouterState)(es))?et:ei.pathname}}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},9501:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"serverActionReducer",{enumerable:!0,get:function(){return ew}});let er=et(3664),en=et(5048),ei=et(8928),es=et(7475),eo=et(9643),eu=et(1697),eh=et(3694),ef=et(6860),ep=et(4080),eg=et(7234),em=et(2583),ey=et(5684),{createFromFetch:ev,encodeReply:eS}=et(2228);async function eT($,ee){let et,{actionId:es,actionArgs:eo}=ee,eu=await eS(eo),eh=(0,ey.extractPathFromFlightRouterState)($.tree),ef=$.nextUrl&&$.nextUrl!==eh,ep=await fetch("",{method:"POST",headers:{Accept:en.RSC_CONTENT_TYPE_HEADER,[en.ACTION]:es,[en.NEXT_ROUTER_STATE_TREE]:encodeURIComponent(JSON.stringify($.tree)),...ef?{[en.NEXT_URL]:$.nextUrl}:{}},body:eu}),eg=ep.headers.get("x-action-redirect");try{let $=JSON.parse(ep.headers.get("x-action-revalidated")||"[[],0,0]");et={paths:$[0]||[],tag:!!$[1],cookie:$[2]}}catch($){et={paths:[],tag:!1,cookie:!1}}let em=eg?new URL((0,ei.addBasePath)(eg),new URL($.canonicalUrl,window.location.href)):void 0;if(ep.headers.get("content-type")===en.RSC_CONTENT_TYPE_HEADER){let $=await ev(Promise.resolve(ep),{callServer:er.callServer});if(eg){let[,ee]=null!=$?$:[];return{actionFlightData:ee,redirectLocation:em,revalidatedParts:et}}let[ee,[,en]]=null!=$?$:[];return{actionResult:ee,actionFlightData:en,redirectLocation:em,revalidatedParts:et}}return{redirectLocation:em,revalidatedParts:et}}function ew($,ee){let{resolve:et,reject:er}=ee,en={},ei=$.canonicalUrl,ey=$.tree;return en.preserveCustomHistoryState=!1,en.inFlightServerAction=eT($,ee),en.inFlightServerAction.then(ee=>{let{actionResult:er,actionFlightData:ev,redirectLocation:eS}=ee;if(eS&&($.pushRef.pendingPush=!0,en.pendingPush=!0),!ev)return(en.actionResultResolved||(et(er),en.actionResultResolved=!0),eS)?(0,eo.handleExternalUrl)($,en,eS.href,$.pushRef.pendingPush):$;if("string"==typeof ev)return(0,eo.handleExternalUrl)($,en,ev,$.pushRef.pendingPush);for(let ee of(en.inFlightServerAction=null,ev)){if(3!==ee.length)return console.log("SERVER ACTION APPLY FAILED"),$;let[et]=ee,er=(0,eu.applyRouterStatePatchToTree)([""],ey,et);if(null===er)throw Error("SEGMENT MISMATCH");if((0,eh.isNavigatingToNewRootLayout)(ey,er))return(0,eo.handleExternalUrl)($,en,ei,$.pushRef.pendingPush);let[es,ep]=ee.slice(-2),ev=null!==es?es[2]:null;if(null!==ev){let $=(0,em.createEmptyCacheNode)();$.status=ef.CacheStates.READY,$.subTreeData=ev,(0,eg.fillLazyItemsTillLeafWithHead)($,void 0,et,es,ep),en.cache=$,en.prefetchCache=new Map}en.patchedTree=er,en.canonicalUrl=ei,ey=er}if(eS){let $=(0,es.createHrefFromUrl)(eS,!1);en.canonicalUrl=$}return en.actionResultResolved||(et(er),en.actionResultResolved=!0),(0,ep.handleMutable)($,en)},ee=>{if("rejected"===ee.status)return en.actionResultResolved||(er(ee.reason),en.actionResultResolved=!0),$;throw ee})}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},7910:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"serverPatchReducer",{enumerable:!0,get:function(){return ef}});let er=et(7475),en=et(1697),ei=et(3694),es=et(9643),eo=et(9543),eu=et(4080),eh=et(2583);function ef($,ee){let{flightData:et,overrideCanonicalUrl:ef}=ee,ep={};if(ep.preserveCustomHistoryState=!1,"string"==typeof et)return(0,es.handleExternalUrl)($,ep,et,$.pushRef.pendingPush);let eg=$.tree,em=$.cache;for(let ee of et){let et=ee.slice(0,-4),[eu]=ee.slice(-3,-2),ey=(0,en.applyRouterStatePatchToTree)(["",...et],eg,eu);if(null===ey)throw Error("SEGMENT MISMATCH");if((0,ei.isNavigatingToNewRootLayout)(eg,ey))return(0,es.handleExternalUrl)($,ep,$.canonicalUrl,$.pushRef.pendingPush);let ev=ef?(0,er.createHrefFromUrl)(ef):void 0;ev&&(ep.canonicalUrl=ev);let eS=(0,eh.createEmptyCacheNode)();(0,eo.applyFlightData)(em,eS,ee),ep.patchedTree=ey,ep.cache=eS,em=eS,eg=ey}return(0,eu.handleMutable)($,ep)}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},8085:($,ee)=>{"use strict";var et;Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{PrefetchKind:function(){return et},ACTION_REFRESH:function(){return er},ACTION_NAVIGATE:function(){return en},ACTION_RESTORE:function(){return ei},ACTION_SERVER_PATCH:function(){return es},ACTION_PREFETCH:function(){return eo},ACTION_FAST_REFRESH:function(){return eu},ACTION_SERVER_ACTION:function(){return eh},isThenable:function(){return ef}});let er="refresh",en="navigate",ei="restore",es="server-patch",eo="prefetch",eu="fast-refresh",eh="server-action";function ef($){return $&&("object"==typeof $||"function"==typeof $)&&"function"==typeof $.then}(function($){$.AUTO="auto",$.FULL="full",$.TEMPORARY="temporary"})(et||(et={})),("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},3479:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"reducer",{enumerable:!0,get:function(){return er}}),et(8085),et(9643),et(7910),et(5206),et(7787),et(7772),et(2298),et(9501);let er=function($,ee){return $};("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},7528:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"shouldHardNavigate",{enumerable:!0,get:function(){return en}});let er=et(4287);function en($,ee){let[et,ei]=ee,[es,eo]=$;return(0,er.matchSegment)(es,et)?!($.length<=2)&&en($.slice(2),ei[eo]):!!Array.isArray(es)}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},5517:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"createSearchParamsBailoutProxy",{enumerable:!0,get:function(){return en}});let er=et(1396);function en(){return new Proxy({},{get($,ee){"string"==typeof ee&&(0,er.staticGenerationBailout)("searchParams."+ee)}})}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},1396:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"staticGenerationBailout",{enumerable:!0,get:function(){return eo}});let er=et(3082),en=et(4749);class ei extends Error{constructor(...$){super(...$),this.code="NEXT_STATIC_GEN_BAILOUT"}}function es($,ee){let{dynamic:et,link:er}=ee||{};return"Page"+(et?' with `dynamic = "'+et+'"`':"")+" couldn't be rendered statically because it used `"+$+"`."+(er?" See more info here: "+er:"")}let eo=($,ee)=>{let{dynamic:et,link:eo}=void 0===ee?{}:ee,eu=en.staticGenerationAsyncStorage.getStore();if(!eu)return!1;if(eu.forceStatic)return!0;if(eu.dynamicShouldError)throw new ei(es($,{link:eo,dynamic:null!=et?et:"error"}));let eh=es($,{dynamic:et,link:"https://nextjs.org/docs/messages/dynamic-server-error"});if(null==eu.postpone||eu.postpone.call(eu,$),eu.revalidate=0,eu.isStaticGeneration){let ee=new er.DynamicServerError(eh);throw eu.dynamicUsageDescription=$,eu.dynamicUsageStack=ee.stack,ee}return!1};("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},3982:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"default",{enumerable:!0,get:function(){return ei}});let er=et(9694)._(et(3729)),en=et(5517);function ei($){let{Component:ee,propsForComponent:et,isStaticGeneration:ei}=$;if(ei){let $=(0,en.createSearchParamsBailoutProxy)();return er.default.createElement(ee,{searchParams:$,...et})}return er.default.createElement(ee,et)}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},4954:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{useUnwrapState:function(){return es},useReducerWithReduxDevtools:function(){return eo}});let er=et(7824)._(et(3729)),en=et(8085);function ei($){if($ instanceof Map){let ee={};for(let[et,er]of $.entries()){if("function"==typeof er){ee[et]="fn()";continue}if("object"==typeof er&&null!==er){if(er.$$typeof){ee[et]=er.$$typeof.toString();continue}if(er._bundlerConfig){ee[et]="FlightData";continue}}ee[et]=ei(er)}return ee}if("object"==typeof $&&null!==$){let ee={};for(let et in $){let er=$[et];if("function"==typeof er){ee[et]="fn()";continue}if("object"==typeof er&&null!==er){if(er.$$typeof){ee[et]=er.$$typeof.toString();continue}if(er.hasOwnProperty("_bundlerConfig")){ee[et]="FlightData";continue}}ee[et]=ei(er)}return ee}return Array.isArray($)?$.map(ei):$}function es($){return(0,en.isThenable)($)?(0,er.use)($):$}et(4087);let eo=function($){return[$,()=>{},()=>{}]};("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},3055:($,ee,et)=>{"use strict";function er($,ee,et,er){return!1}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"getDomainLocale",{enumerable:!0,get:function(){return er}}),et(9847),("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},6411:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"hasBasePath",{enumerable:!0,get:function(){return ei}});let er=et(6050),en="";function ei($){return(0,er.pathHasPrefix)($,en)}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},1900:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"Image",{enumerable:!0,get:function(){return eT}});let er=et(9694),en=et(7824)._(et(3729)),ei=er._(et(1202)),es=er._(et(1758)),eo=et(3855),eu=et(3053),eh=et(4187);et(837);let ef=et(6150),ep=er._(et(4931)),eg={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function em($,ee,et,er,en,ei){let es=null==$?void 0:$.src;$&&$["data-loaded-src"]!==es&&($["data-loaded-src"]=es,("decode"in $?$.decode():Promise.resolve()).catch(()=>{}).then(()=>{if($.parentElement&&$.isConnected){if("empty"!==ee&&en(!0),null==et?void 0:et.current){let ee=new Event("load");Object.defineProperty(ee,"target",{writable:!1,value:$});let er=!1,en=!1;et.current({...ee,nativeEvent:ee,currentTarget:$,target:$,isDefaultPrevented:()=>er,isPropagationStopped:()=>en,persist:()=>{},preventDefault:()=>{er=!0,ee.preventDefault()},stopPropagation:()=>{en=!0,ee.stopPropagation()}})}(null==er?void 0:er.current)&&er.current($)}}))}function ey($){let[ee,et]=en.version.split(".",2),er=parseInt(ee,10),ei=parseInt(et,10);return er>18||18===er&&ei>=3?{fetchPriority:$}:{fetchpriority:$}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let ev=(0,en.forwardRef)(($,ee)=>{let{src:et,srcSet:er,sizes:ei,height:es,width:eo,decoding:eu,className:eh,style:ef,fetchPriority:ep,placeholder:eg,loading:ev,unoptimized:eS,fill:eT,onLoadRef:ew,onLoadingCompleteRef:eE,setBlurComplete:eC,setShowAltText:e_,onLoad:eR,onError:ex,...eI}=$;return en.default.createElement("img",{...eI,...ey(ep),loading:ev,width:eo,height:es,decoding:eu,"data-nimg":eT?"fill":"1",className:eh,style:ef,sizes:ei,srcSet:er,src:et,ref:(0,en.useCallback)($=>{ee&&("function"==typeof ee?ee($):"object"==typeof ee&&(ee.current=$)),$&&(ex&&($.src=$.src),$.complete&&em($,eg,ew,eE,eC,eS))},[et,eg,ew,eE,eC,ex,eS,ee]),onLoad:$=>{em($.currentTarget,eg,ew,eE,eC,eS)},onError:$=>{e_(!0),"empty"!==eg&&eC(!0),ex&&ex($)}})});function eS($){let{isAppRouter:ee,imgAttributes:et}=$,er={as:"image",imageSrcSet:et.srcSet,imageSizes:et.sizes,crossOrigin:et.crossOrigin,referrerPolicy:et.referrerPolicy,...ey(et.fetchPriority)};return ee&&ei.default.preload?(ei.default.preload(et.src,er),null):en.default.createElement(es.default,null,en.default.createElement("link",{key:"__nimg-"+et.src+et.srcSet+et.sizes,rel:"preload",href:et.srcSet?void 0:et.src,...er}))}let eT=(0,en.forwardRef)(($,ee)=>{let et=!(0,en.useContext)(ef.RouterContext),er=(0,en.useContext)(eh.ImageConfigContext),ei=(0,en.useMemo)(()=>{let $=eg||er||eu.imageConfigDefault,ee=[...$.deviceSizes,...$.imageSizes].sort(($,ee)=>$-ee),et=$.deviceSizes.sort(($,ee)=>$-ee);return{...$,allSizes:ee,deviceSizes:et}},[er]),{onLoad:es,onLoadingComplete:em}=$,ey=(0,en.useRef)(es);(0,en.useEffect)(()=>{ey.current=es},[es]);let eT=(0,en.useRef)(em);(0,en.useEffect)(()=>{eT.current=em},[em]);let[ew,eE]=(0,en.useState)(!1),[eC,e_]=(0,en.useState)(!1),{props:eR,meta:ex}=(0,eo.getImgProps)($,{defaultLoader:ep.default,imgConf:ei,blurComplete:ew,showAltText:eC});return en.default.createElement(en.default.Fragment,null,en.default.createElement(ev,{...eR,unoptimized:ex.unoptimized,placeholder:ex.placeholder,fill:ex.fill,onLoadRef:ey,onLoadingCompleteRef:eT,setBlurComplete:eE,setShowAltText:e_,ref:ee}),ex.priority?en.default.createElement(eS,{isAppRouter:et,imgAttributes:eR}):null)});("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},1476:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"default",{enumerable:!0,get:function(){return ew}});let er=et(9694)._(et(3729)),en=et(6656),ei=et(6737),es=et(2421),eo=et(853),eu=et(1314),eh=et(6150),ef=et(6860),ep=et(3470),eg=et(3055),em=et(8928),ey=et(8085);function ev($){let ee=$.currentTarget.getAttribute("target");return ee&&"_self"!==ee||$.metaKey||$.ctrlKey||$.shiftKey||$.altKey||$.nativeEvent&&2===$.nativeEvent.which}function eS($,ee,et,en,es,eo,eu,eh,ef){let{nodeName:ep}=$.currentTarget;if("A"===ep.toUpperCase()&&(ev($)||!ef&&!(0,ei.isLocalURL)(et)))return;$.preventDefault();let eg=()=>{let $=null==eu||eu;"beforePopState"in ee?ee[es?"replace":"push"](et,en,{shallow:eo,locale:eh,scroll:$}):ee[es?"replace":"push"](en||et,{scroll:$})};ef?er.default.startTransition(eg):eg()}function eT($){return"string"==typeof $?$:(0,es.formatUrl)($)}let ew=er.default.forwardRef(function($,ee){let et,ei;let{href:es,as:ev,children:ew,prefetch:eE=null,passHref:eC,replace:e_,shallow:eR,scroll:ex,locale:eI,onClick:eP,onMouseEnter:eA,onTouchStart:eO,legacyBehavior:eD=!1,...eN}=$;et=ew,eD&&("string"==typeof et||"number"==typeof et)&&(et=er.default.createElement("a",null,et));let ek=er.default.useContext(eh.RouterContext),eM=er.default.useContext(ef.AppRouterContext),eL=null!=ek?ek:eM,ej=!ek,eB=!1!==eE,eF=null===eE?ey.PrefetchKind.AUTO:ey.PrefetchKind.FULL,{href:eV,as:eU}=er.default.useMemo(()=>{if(!ek){let $=eT(es);return{href:$,as:ev?eT(ev):$}}let[$,ee]=(0,en.resolveHref)(ek,es,!0);return{href:$,as:ev?(0,en.resolveHref)(ek,ev):ee||$}},[ek,es,ev]),ez=er.default.useRef(eV),eq=er.default.useRef(eU);eD&&(ei=er.default.Children.only(et));let eH=eD?ei&&"object"==typeof ei&&ei.ref:ee,[e$,eG,eW]=(0,ep.useIntersection)({rootMargin:"200px"}),eK=er.default.useCallback($=>{(eq.current!==eU||ez.current!==eV)&&(eW(),eq.current=eU,ez.current=eV),e$($),eH&&("function"==typeof eH?eH($):"object"==typeof eH&&(eH.current=$))},[eU,eH,eV,eW,e$]);er.default.useEffect(()=>{},[eU,eV,eG,eI,eB,null==ek?void 0:ek.locale,eL,ej,eF]);let eQ={ref:eK,onClick($){eD||"function"!=typeof eP||eP($),eD&&ei.props&&"function"==typeof ei.props.onClick&&ei.props.onClick($),eL&&!$.defaultPrevented&&eS($,eL,eV,eU,e_,eR,ex,eI,ej)},onMouseEnter($){eD||"function"!=typeof eA||eA($),eD&&ei.props&&"function"==typeof ei.props.onMouseEnter&&ei.props.onMouseEnter($)},onTouchStart($){eD||"function"!=typeof eO||eO($),eD&&ei.props&&"function"==typeof ei.props.onTouchStart&&ei.props.onTouchStart($)}};if((0,eo.isAbsoluteUrl)(eU))eQ.href=eU;else if(!eD||eC||"a"===ei.type&&!("href"in ei.props)){let $=void 0!==eI?eI:null==ek?void 0:ek.locale,ee=(null==ek?void 0:ek.isLocaleDomain)&&(0,eg.getDomainLocale)(eU,$,null==ek?void 0:ek.locales,null==ek?void 0:ek.domainLocales);eQ.href=ee||(0,em.addBasePath)((0,eu.addLocale)(eU,$,null==ek?void 0:ek.defaultLocale))}return eD?er.default.cloneElement(ei,eQ):er.default.createElement("a",{...eN,...eQ},et)});("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},9847:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"normalizePathTrailingSlash",{enumerable:!0,get:function(){return ei}});let er=et(4310),en=et(2244),ei=$=>{if(!$.startsWith("/"))return $;let{pathname:ee,query:et,hash:ei}=(0,en.parsePath)($);return""+(0,er.removeTrailingSlash)(ee)+et+ei};("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},2874:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"removeBasePath",{enumerable:!0,get:function(){return en}}),et(6411);let er="";function en($){return 0===er.length||($=$.slice(er.length)).startsWith("/")||($="/"+$),$}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},6252:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{requestIdleCallback:function(){return et},cancelIdleCallback:function(){return er}});let et="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function($){let ee=Date.now();return self.setTimeout(function(){$({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-ee))}})},1)},er="undefined"!=typeof self&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function($){return clearTimeout($)};("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},6656:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"resolveHref",{enumerable:!0,get:function(){return ep}});let er=et(7043),en=et(2421),ei=et(663),es=et(853),eo=et(9847),eu=et(6737),eh=et(4831),ef=et(8729);function ep($,ee,et){let ep;let eg="string"==typeof ee?ee:(0,en.formatWithValidation)(ee),em=eg.match(/^[a-zA-Z]{1,}:\/\//),ey=em?eg.slice(em[0].length):eg;if((ey.split("?",1)[0]||"").match(/(\/\/|\\)/)){console.error("Invalid href '"+eg+"' passed to next/router in page: '"+$.pathname+"'. Repeated forward-slashes (//) or backslashes \\ are not valid in the href.");let ee=(0,es.normalizeRepeatedSlashes)(ey);eg=(em?em[0]:"")+ee}if(!(0,eu.isLocalURL)(eg))return et?[eg]:eg;try{ep=new URL(eg.startsWith("#")?$.asPath:$.pathname,"http://n")}catch($){ep=new URL("/","http://n")}try{let $=new URL(eg,ep);$.pathname=(0,eo.normalizePathTrailingSlash)($.pathname);let ee="";if((0,eh.isDynamicRoute)($.pathname)&&$.searchParams&&et){let et=(0,er.searchParamsToUrlQuery)($.searchParams),{result:es,params:eo}=(0,ef.interpolateAs)($.pathname,$.pathname,et);es&&(ee=(0,en.formatWithValidation)({pathname:es,hash:$.hash,query:(0,ei.omit)(et,eo)}))}let es=$.origin===ep.origin?$.href.slice($.origin.length):$.href;return et?[es,ee||es]:es}catch($){return et?[eg]:eg}}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},3470:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"useIntersection",{enumerable:!0,get:function(){return ef}});let er=et(3729),en=et(6252),ei="function"==typeof IntersectionObserver,es=new Map,eo=[];function eu($){let ee;let et={root:$.root||null,margin:$.rootMargin||""},er=eo.find($=>$.root===et.root&&$.margin===et.margin);if(er&&(ee=es.get(er)))return ee;let en=new Map;return ee={id:et,observer:new IntersectionObserver($=>{$.forEach($=>{let ee=en.get($.target),et=$.isIntersecting||$.intersectionRatio>0;ee&&et&&ee(et)})},$),elements:en},eo.push(et),es.set(et,ee),ee}function eh($,ee,et){let{id:er,observer:en,elements:ei}=eu(et);return ei.set($,ee),en.observe($),function(){if(ei.delete($),en.unobserve($),0===ei.size){en.disconnect(),es.delete(er);let $=eo.findIndex($=>$.root===er.root&&$.margin===er.margin);$>-1&&eo.splice($,1)}}}function ef($){let{rootRef:ee,rootMargin:et,disabled:es}=$,eo=es||!ei,[eu,ef]=(0,er.useState)(!1),ep=(0,er.useRef)(null),eg=(0,er.useCallback)($=>{ep.current=$},[]);return(0,er.useEffect)(()=>{if(ei){if(eo||eu)return;let $=ep.current;if($&&$.tagName)return eh($,$=>$&&ef($),{root:null==ee?void 0:ee.current,rootMargin:et})}else if(!eu){let $=(0,en.requestIdleCallback)(()=>ef(!0));return()=>(0,en.cancelIdleCallback)($)}},[eo,et,ee,eu,ep.current]),[eg,eu,(0,er.useCallback)(()=>{ef(!1)},[])]}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},4269:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"getSegmentParam",{enumerable:!0,get:function(){return en}});let er=et(5767);function en($){let ee=er.INTERCEPTION_ROUTE_MARKERS.find(ee=>$.startsWith(ee));return(ee&&($=$.slice(ee.length)),$.startsWith("[[...")&&$.endsWith("]]"))?{type:"optional-catchall",param:$.slice(5,-2)}:$.startsWith("[...")&&$.endsWith("]")?{type:"catchall",param:$.slice(4,-1)}:$.startsWith("[")&&$.endsWith("]")?{type:"dynamic",param:$.slice(1,-1)}:null}},5767:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{INTERCEPTION_ROUTE_MARKERS:function(){return en},isInterceptionRouteAppPath:function(){return ei},extractInterceptionRouteInformation:function(){return es}});let er=et(7655),en=["(..)(..)","(.)","(..)","(...)"];function ei($){return void 0!==$.split("/").find($=>en.find(ee=>$.startsWith(ee)))}function es($){let ee,et,ei;for(let er of $.split("/"))if(et=en.find($=>er.startsWith($))){[ee,ei]=$.split(et,2);break}if(!ee||!et||!ei)throw Error(`Invalid interception route: ${$}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(ee=(0,er.normalizeAppPath)(ee),et){case"(.)":ei="/"===ee?`/${ei}`:ee+"/"+ei;break;case"(..)":if("/"===ee)throw Error(`Invalid interception route: ${$}. Cannot use (..) marker at the root level, use (.) instead.`);ei=ee.split("/").slice(0,-1).concat(ei).join("/");break;case"(...)":ei="/"+ei;break;case"(..)(..)":let es=ee.split("/");if(es.length<=2)throw Error(`Invalid interception route: ${$}. Cannot use (..)(..) marker at the root level or one level up.`);ei=es.slice(0,-2).concat(ei).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:ee,interceptedRoute:ei}}},6372:($,ee,et)=>{"use strict";$.exports=et(399)},7637:($,ee,et)=>{"use strict";$.exports=et(6372).vendored.contexts.AmpContext},6860:($,ee,et)=>{"use strict";$.exports=et(6372).vendored.contexts.AppRouterContext},2158:($,ee,et)=>{"use strict";$.exports=et(6372).vendored.contexts.HeadManagerContext},8486:($,ee,et)=>{"use strict";$.exports=et(6372).vendored.contexts.HooksClientContext},4187:($,ee,et)=>{"use strict";$.exports=et(6372).vendored.contexts.ImageConfigContext},6150:($,ee,et)=>{"use strict";$.exports=et(6372).vendored.contexts.RouterContext},9505:($,ee,et)=>{"use strict";$.exports=et(6372).vendored.contexts.ServerInsertedHtml},1202:($,ee,et)=>{"use strict";$.exports=et(6372).vendored["react-ssr"].ReactDOM},2295:($,ee,et)=>{"use strict";$.exports=et(6372).vendored["react-ssr"].ReactJsxRuntime},2228:($,ee,et)=>{"use strict";$.exports=et(6372).vendored["react-ssr"].ReactServerDOMWebpackClientEdge},3729:($,ee,et)=>{"use strict";$.exports=et(6372).vendored["react-ssr"].React},3126:($,ee)=>{"use strict";function et($){let{ampFirst:ee=!1,hybrid:et=!1,hasQuery:er=!1}=void 0===$?{}:$;return ee||et&&er}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"isInAmpMode",{enumerable:!0,get:function(){return et}})},7866:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"escapeStringRegexp",{enumerable:!0,get:function(){return en}});let et=/[|\\{}()[\]^$+*?.-]/,er=/[|\\{}()[\]^$+*?.-]/g;function en($){return et.test($)?$.replace(er,"\\$&"):$}},3855:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"getImgProps",{enumerable:!0,get:function(){return ep}}),et(837);let er=et(6358),en=et(3053);function ei($){return void 0!==$.default}function es($){return void 0!==$.src}function eo($){return"object"==typeof $&&(ei($)||es($))}function eu($){return void 0===$?$:"number"==typeof $?Number.isFinite($)?$:NaN:"string"==typeof $&&/^[0-9]+$/.test($)?parseInt($,10):NaN}function eh($,ee,et){let{deviceSizes:er,allSizes:en}=$;if(et){let $=/(^|\s)(1?\d?\d)vw/g,ee=[];for(let er;er=$.exec(et);er)ee.push(parseInt(er[2]));if(ee.length){let $=.01*Math.min(...ee);return{widths:en.filter(ee=>ee>=er[0]*$),kind:"w"}}return{widths:en,kind:"w"}}return"number"!=typeof ee?{widths:er,kind:"w"}:{widths:[...new Set([ee,2*ee].map($=>en.find(ee=>ee>=$)||en[en.length-1]))],kind:"x"}}function ef($){let{config:ee,src:et,unoptimized:er,width:en,quality:ei,sizes:es,loader:eo}=$;if(er)return{src:et,srcSet:void 0,sizes:void 0};let{widths:eu,kind:ef}=eh(ee,en,es),ep=eu.length-1;return{sizes:es||"w"!==ef?es:"100vw",srcSet:eu.map(($,er)=>eo({config:ee,src:et,quality:ei,width:$})+" "+("w"===ef?$:er+1)+ef).join(", "),src:eo({config:ee,src:et,quality:ei,width:eu[ep]})}}function ep($,ee){let et,es,eh,{src:ep,sizes:eg,unoptimized:em=!1,priority:ey=!1,loading:ev,className:eS,quality:eT,width:ew,height:eE,fill:eC=!1,style:e_,onLoad:eR,onLoadingComplete:ex,placeholder:eI="empty",blurDataURL:eP,fetchPriority:eA,layout:eO,objectFit:eD,objectPosition:eN,lazyBoundary:ek,lazyRoot:eM,...eL}=$,{imgConf:ej,showAltText:eB,blurComplete:eF,defaultLoader:eV}=ee,eU=ej||en.imageConfigDefault;if("allSizes"in eU)et=eU;else{let $=[...eU.deviceSizes,...eU.imageSizes].sort(($,ee)=>$-ee),ee=eU.deviceSizes.sort(($,ee)=>$-ee);et={...eU,allSizes:$,deviceSizes:ee}}let ez=eL.loader||eV;delete eL.loader,delete eL.srcSet;let eq="__next_img_default"in ez;if(eq){if("custom"===et.loader)throw Error('Image with src "'+ep+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let $=ez;ez=ee=>{let{config:et,...er}=ee;return $(er)}}if(eO){"fill"===eO&&(eC=!0);let $={responsive:"100vw",fill:"100vw"},ee={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[eO];ee&&(e_={...e_,...ee});let et=$[eO];et&&!eg&&(eg=et)}let eH="",e$=eu(ew),eG=eu(eE);if(eo(ep)){let $=ei(ep)?ep.default:ep;if(!$.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify($));if(!$.height||!$.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify($));if(es=$.blurWidth,eh=$.blurHeight,eP=eP||$.blurDataURL,eH=$.src,!eC){if(e$||eG){if(e$&&!eG){let ee=e$/$.width;eG=Math.round($.height*ee)}else if(!e$&&eG){let ee=eG/$.height;e$=Math.round($.width*ee)}}else e$=$.width,eG=$.height}}let eW=!ey&&("lazy"===ev||void 0===ev);(!(ep="string"==typeof ep?ep:eH)||ep.startsWith("data:")||ep.startsWith("blob:"))&&(em=!0,eW=!1),et.unoptimized&&(em=!0),eq&&ep.endsWith(".svg")&&!et.dangerouslyAllowSVG&&(em=!0),ey&&(eA="high");let eK=eu(eT),eQ=Object.assign(eC?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:eD,objectPosition:eN}:{},eB?{}:{color:"transparent"},e_),eY=eF||"empty"===eI?null:"blur"===eI?'url("data:image/svg+xml;charset=utf-8,'+(0,er.getImageBlurSvg)({widthInt:e$,heightInt:eG,blurWidth:es,blurHeight:eh,blurDataURL:eP||"",objectFit:eQ.objectFit})+'")':'url("'+eI+'")',eX=eY?{backgroundSize:eQ.objectFit||"cover",backgroundPosition:eQ.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:eY}:{},eJ=ef({config:et,src:ep,unoptimized:em,width:e$,quality:eK,sizes:eg,loader:ez});return{props:{...eL,loading:eW?"lazy":ev,fetchPriority:eA,width:e$,height:eG,decoding:"async",className:eS,style:{...eQ,...eX},sizes:eJ.sizes,srcSet:eJ.srcSet,src:eJ.src},meta:{unoptimized:em,priority:ey,placeholder:eI,fill:eC}}}},5344:($,ee)=>{"use strict";function et($){let ee=5381;for(let et=0;et<$.length;et++)ee=(ee<<5)+ee+$.charCodeAt(et)&4294967295;return ee>>>0}function er($){return et($).toString(36).slice(0,5)}Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{djb2Hash:function(){return et},hexHash:function(){return er}})},1758:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{defaultHead:function(){return eh},default:function(){return ey}});let er=et(9694),en=et(7824)._(et(3729)),ei=er._(et(7984)),es=et(7637),eo=et(2158),eu=et(3126);function eh($){void 0===$&&($=!1);let ee=[en.default.createElement("meta",{charSet:"utf-8"})];return $||ee.push(en.default.createElement("meta",{name:"viewport",content:"width=device-width"})),ee}function ef($,ee){return"string"==typeof ee||"number"==typeof ee?$:ee.type===en.default.Fragment?$.concat(en.default.Children.toArray(ee.props.children).reduce(($,ee)=>"string"==typeof ee||"number"==typeof ee?$:$.concat(ee),[])):$.concat(ee)}et(837);let ep=["name","httpEquiv","charSet","itemProp"];function eg(){let $=new Set,ee=new Set,et=new Set,er={};return en=>{let ei=!0,es=!1;if(en.key&&"number"!=typeof en.key&&en.key.indexOf("$")>0){es=!0;let ee=en.key.slice(en.key.indexOf("$")+1);$.has(ee)?ei=!1:$.add(ee)}switch(en.type){case"title":case"base":ee.has(en.type)?ei=!1:ee.add(en.type);break;case"meta":for(let $=0,ee=ep.length;$<ee;$++){let ee=ep[$];if(en.props.hasOwnProperty(ee)){if("charSet"===ee)et.has(ee)?ei=!1:et.add(ee);else{let $=en.props[ee],et=er[ee]||new Set;("name"!==ee||!es)&&et.has($)?ei=!1:(et.add($),er[ee]=et)}}}}return ei}}function em($,ee){let{inAmpMode:et}=ee;return $.reduce(ef,[]).reverse().concat(eh(et).reverse()).filter(eg()).reverse().map(($,ee)=>{let er=$.key||ee;if(!et&&"link"===$.type&&$.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(ee=>$.props.href.startsWith(ee))){let ee={...$.props||{}};return ee["data-href"]=ee.href,ee.href=void 0,ee["data-optimized-fonts"]=!0,en.default.cloneElement($,ee)}return en.default.cloneElement($,{key:er})})}let ey=function($){let{children:ee}=$,et=(0,en.useContext)(es.AmpStateContext),er=(0,en.useContext)(eo.HeadManagerContext);return en.default.createElement(ei.default,{reduceComponentsToState:em,headManager:er,inAmpMode:(0,eu.isInAmpMode)(et)},ee)};("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},6358:($,ee)=>{"use strict";function et($){let{widthInt:ee,heightInt:et,blurWidth:er,blurHeight:en,blurDataURL:ei,objectFit:es}=$,eo=er?40*er:ee,eu=en?40*en:et,eh=eo&&eu?"viewBox='0 0 "+eo+" "+eu+"'":"",ef=eh?"none":"contain"===es?"xMidYMid":"cover"===es?"xMidYMid slice":"none";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+eh+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+ef+"' style='filter: url(%23b);' href='"+ei+"'/%3E%3C/svg%3E"}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"getImageBlurSvg",{enumerable:!0,get:function(){return et}})},3053:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{VALID_LOADERS:function(){return et},imageConfigDefault:function(){return er}});let et=["default","imgix","cloudinary","akamai","custom"],er={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1}},7412:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{unstable_getImgProps:function(){return eu},default:function(){return eh}});let er=et(9694),en=et(3855),ei=et(837),es=et(1900),eo=er._(et(4931)),eu=$=>{(0,ei.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:ee}=(0,en.getImgProps)($,{defaultLoader:eo.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[$,et]of Object.entries(ee))void 0===et&&delete ee[$];return{props:ee}},eh=es.Image},4931:($,ee)=>{"use strict";function et($){let{config:ee,src:et,width:er,quality:en}=$;return ee.path+"?url="+encodeURIComponent(et)+"&w="+er+"&q="+(en||75)}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"default",{enumerable:!0,get:function(){return er}}),et.__next_img_default=!0;let er=et},1462:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{NEXT_DYNAMIC_NO_SSR_CODE:function(){return et},throwWithNoSSR:function(){return er}});let et="NEXT_DYNAMIC_NO_SSR_CODE";function er(){let $=Error(et);throw $.digest=et,$}},8092:($,ee)=>{"use strict";function et($){return $.startsWith("/")?$:"/"+$}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"ensureLeadingSlash",{enumerable:!0,get:function(){return et}})},4087:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{ActionQueueContext:function(){return eo},createMutableActionQueue:function(){return ep}});let er=et(7824),en=et(8085),ei=et(3479),es=er._(et(3729)),eo=es.default.createContext(null);function eu($,ee){null!==$.pending&&($.pending=$.pending.next,null!==$.pending&&eh({actionQueue:$,action:$.pending,setState:ee}))}async function eh($){let{actionQueue:ee,action:et,setState:er}=$,ei=ee.state;if(!ei)throw Error("Invariant: Router state not initialized");ee.pending=et;let es=et.payload,eo=ee.action(ei,es);function eh($){if(et.discarded){ee.needsRefresh&&null===ee.pending&&(ee.needsRefresh=!1,ee.dispatch({type:en.ACTION_REFRESH,origin:window.location.origin},er));return}ee.state=$,ee.devToolsInstance&&ee.devToolsInstance.send(es,$),eu(ee,er),et.resolve($)}(0,en.isThenable)(eo)?eo.then(eh,$=>{eu(ee,er),et.reject($)}):eh(eo)}function ef($,ee,et){let er={resolve:et,reject:()=>{}};if(ee.type!==en.ACTION_RESTORE){let $=new Promise(($,ee)=>{er={resolve:$,reject:ee}});(0,es.startTransition)(()=>{et($)})}let ei={payload:ee,next:null,resolve:er.resolve,reject:er.reject};null===$.pending?($.last=ei,eh({actionQueue:$,action:ei,setState:et})):ee.type===en.ACTION_NAVIGATE?($.pending.discarded=!0,$.last=ei,$.pending.payload.type===en.ACTION_SERVER_ACTION&&($.needsRefresh=!0),eh({actionQueue:$,action:ei,setState:et})):(null!==$.last&&($.last.next=ei),$.last=ei)}function ep(){let $={state:null,dispatch:(ee,et)=>ef($,ee,et),action:async($,ee)=>{if(null===$)throw Error("Invariant: Router state not initialized");return(0,ei.reducer)($,ee)},pending:null,last:null};return $}},1870:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"addPathPrefix",{enumerable:!0,get:function(){return en}});let er=et(2244);function en($,ee){if(!$.startsWith("/")||!ee)return $;let{pathname:et,query:en,hash:ei}=(0,er.parsePath)($);return""+ee+et+en+ei}},7655:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{normalizeAppPath:function(){return ei},normalizeRscURL:function(){return es}});let er=et(8092),en=et(9457);function ei($){return(0,er.ensureLeadingSlash)($.split("/").reduce(($,ee,et,er)=>!ee||(0,en.isGroupSegment)(ee)||"@"===ee[0]||("page"===ee||"route"===ee)&&et===er.length-1?$:$+"/"+ee,""))}function es($){return $.replace(/\.rsc($|\?)/,"$1")}},2421:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{formatUrl:function(){return ei},urlObjectKeys:function(){return es},formatWithValidation:function(){return eo}});let er=et(7824)._(et(7043)),en=/https?|ftp|gopher|file/;function ei($){let{auth:ee,hostname:et}=$,ei=$.protocol||"",es=$.pathname||"",eo=$.hash||"",eu=$.query||"",eh=!1;ee=ee?encodeURIComponent(ee).replace(/%3A/i,":")+"@":"",$.host?eh=ee+$.host:et&&(eh=ee+(~et.indexOf(":")?"["+et+"]":et),$.port&&(eh+=":"+$.port)),eu&&"object"==typeof eu&&(eu=String(er.urlQueryToSearchParams(eu)));let ef=$.search||eu&&"?"+eu||"";return ei&&!ei.endsWith(":")&&(ei+=":"),$.slashes||(!ei||en.test(ei))&&!1!==eh?(eh="//"+(eh||""),es&&"/"!==es[0]&&(es="/"+es)):eh||(eh=""),eo&&"#"!==eo[0]&&(eo="#"+eo),ef&&"?"!==ef[0]&&(ef="?"+ef),""+ei+eh+(es=es.replace(/[?#]/g,encodeURIComponent))+(ef=ef.replace("#","%23"))+eo}let es=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function eo($){return ei($)}},1586:($,ee)=>{"use strict";function et($,ee){if(void 0===ee&&(ee={}),ee.onlyHashChange){$();return}let et=document.documentElement,er=et.style.scrollBehavior;et.style.scrollBehavior="auto",ee.dontForceLayout||et.getClientRects(),$(),et.style.scrollBehavior=er}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"handleSmoothScroll",{enumerable:!0,get:function(){return et}})},4831:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{getSortedRoutes:function(){return er.getSortedRoutes},isDynamicRoute:function(){return en.isDynamicRoute}});let er=et(6177),en=et(5508)},8729:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"interpolateAs",{enumerable:!0,get:function(){return ei}});let er=et(2694),en=et(6603);function ei($,ee,et){let ei="",es=(0,en.getRouteRegex)($),eo=es.groups,eu=(ee!==$?(0,er.getRouteMatcher)(es)(ee):"")||et;ei=$;let eh=Object.keys(eo);return eh.every($=>{let ee=eu[$]||"",{repeat:et,optional:er}=eo[$],en="["+(et?"...":"")+$+"]";return er&&(en=(ee?"":"/")+"["+en+"]"),et&&!Array.isArray(ee)&&(ee=[ee]),(er||$ in eu)&&(ei=ei.replace(en,et?ee.map($=>encodeURIComponent($)).join("/"):encodeURIComponent(ee))||"/")})||(ei=""),{params:eh,result:ei}}},6338:($,ee)=>{"use strict";function et($){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test($)}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"isBot",{enumerable:!0,get:function(){return et}})},5508:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"isDynamicRoute",{enumerable:!0,get:function(){return ei}});let er=et(5767),en=/\/\[[^/]+?\](?=\/|$)/;function ei($){return(0,er.isInterceptionRouteAppPath)($)&&($=(0,er.extractInterceptionRouteInformation)($).interceptedRoute),en.test($)}},6737:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"isLocalURL",{enumerable:!0,get:function(){return ei}});let er=et(853),en=et(6411);function ei($){if(!(0,er.isAbsoluteUrl)($))return!0;try{let ee=(0,er.getLocationOrigin)(),et=new URL($,ee);return et.origin===ee&&(0,en.hasBasePath)(et.pathname)}catch($){return!1}}},663:($,ee)=>{"use strict";function et($,ee){let et={};return Object.keys($).forEach(er=>{ee.includes(er)||(et[er]=$[er])}),et}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"omit",{enumerable:!0,get:function(){return et}})},2244:($,ee)=>{"use strict";function et($){let ee=$.indexOf("#"),et=$.indexOf("?"),er=et>-1&&(ee<0||et<ee);return er||ee>-1?{pathname:$.substring(0,er?et:ee),query:er?$.substring(et,ee>-1?ee:void 0):"",hash:ee>-1?$.slice(ee):""}:{pathname:$,query:"",hash:""}}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"parsePath",{enumerable:!0,get:function(){return et}})},6050:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"pathHasPrefix",{enumerable:!0,get:function(){return en}});let er=et(2244);function en($,ee){if("string"!=typeof $)return!1;let{pathname:et}=(0,er.parsePath)($);return et===ee||et.startsWith(ee+"/")}},7043:($,ee)=>{"use strict";function et($){let ee={};return $.forEach(($,et)=>{void 0===ee[et]?ee[et]=$:Array.isArray(ee[et])?ee[et].push($):ee[et]=[ee[et],$]}),ee}function er($){return"string"!=typeof $&&("number"!=typeof $||isNaN($))&&"boolean"!=typeof $?"":String($)}function en($){let ee=new URLSearchParams;return Object.entries($).forEach($=>{let[et,en]=$;Array.isArray(en)?en.forEach($=>ee.append(et,er($))):ee.set(et,er(en))}),ee}function ei($){for(var ee=arguments.length,et=Array(ee>1?ee-1:0),er=1;er<ee;er++)et[er-1]=arguments[er];return et.forEach(ee=>{Array.from(ee.keys()).forEach(ee=>$.delete(ee)),ee.forEach((ee,et)=>$.append(et,ee))}),$}Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{searchParamsToUrlQuery:function(){return et},urlQueryToSearchParams:function(){return en},assign:function(){return ei}})},4310:($,ee)=>{"use strict";function et($){return $.replace(/\/$/,"")||"/"}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"removeTrailingSlash",{enumerable:!0,get:function(){return et}})},2694:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"getRouteMatcher",{enumerable:!0,get:function(){return en}});let er=et(853);function en($){let{re:ee,groups:et}=$;return $=>{let en=ee.exec($);if(!en)return!1;let ei=$=>{try{return decodeURIComponent($)}catch($){throw new er.DecodeError("failed to decode param")}},es={};return Object.keys(et).forEach($=>{let ee=et[$],er=en[ee.pos];void 0!==er&&(es[$]=~er.indexOf("/")?er.split("/").map($=>ei($)):ee.repeat?[ei(er)]:ei(er))}),es}}},6603:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{getRouteRegex:function(){return ef},getNamedRouteRegex:function(){return ey},getNamedMiddlewareRegex:function(){return ev}});let er=et(5767),en=et(7866),ei=et(4310),es="nxtP",eo="nxtI";function eu($){let ee=$.startsWith("[")&&$.endsWith("]");ee&&($=$.slice(1,-1));let et=$.startsWith("...");return et&&($=$.slice(3)),{key:$,repeat:et,optional:ee}}function eh($){let ee=(0,ei.removeTrailingSlash)($).slice(1).split("/"),et={},es=1;return{parameterizedRoute:ee.map($=>{let ee=er.INTERCEPTION_ROUTE_MARKERS.find(ee=>$.startsWith(ee)),ei=$.match(/\[((?:\[.*\])|.+)\]/);if(ee&&ei){let{key:$,optional:er,repeat:eo}=eu(ei[1]);return et[$]={pos:es++,repeat:eo,optional:er},"/"+(0,en.escapeStringRegexp)(ee)+"([^/]+?)"}if(!ei)return"/"+(0,en.escapeStringRegexp)($);{let{key:$,repeat:ee,optional:er}=eu(ei[1]);return et[$]={pos:es++,repeat:ee,optional:er},ee?er?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}}).join(""),groups:et}}function ef($){let{parameterizedRoute:ee,groups:et}=eh($);return{re:RegExp("^"+ee+"(?:/)?$"),groups:et}}function ep(){let $=0;return()=>{let ee="",et=++$;for(;et>0;)ee+=String.fromCharCode(97+(et-1)%26),et=Math.floor((et-1)/26);return ee}}function eg($){let{interceptionMarker:ee,getSafeRouteKey:et,segment:er,routeKeys:ei,keyPrefix:es}=$,{key:eo,optional:eh,repeat:ef}=eu(er),ep=eo.replace(/\W/g,"");es&&(ep=""+es+ep);let eg=!1;(0===ep.length||ep.length>30)&&(eg=!0),isNaN(parseInt(ep.slice(0,1)))||(eg=!0),eg&&(ep=et()),es?ei[ep]=""+es+eo:ei[ep]=eo;let em=ee?(0,en.escapeStringRegexp)(ee):"";return ef?eh?"(?:/"+em+"(?<"+ep+">.+?))?":"/"+em+"(?<"+ep+">.+?)":"/"+em+"(?<"+ep+">[^/]+?)"}function em($,ee){let et=(0,ei.removeTrailingSlash)($).slice(1).split("/"),eu=ep(),eh={};return{namedParameterizedRoute:et.map($=>{let et=er.INTERCEPTION_ROUTE_MARKERS.some(ee=>$.startsWith(ee)),ei=$.match(/\[((?:\[.*\])|.+)\]/);if(et&&ei){let[et]=$.split(ei[0]);return eg({getSafeRouteKey:eu,interceptionMarker:et,segment:ei[1],routeKeys:eh,keyPrefix:ee?eo:void 0})}return ei?eg({getSafeRouteKey:eu,segment:ei[1],routeKeys:eh,keyPrefix:ee?es:void 0}):"/"+(0,en.escapeStringRegexp)($)}).join(""),routeKeys:eh}}function ey($,ee){let et=em($,ee);return{...ef($),namedRegex:"^"+et.namedParameterizedRoute+"(?:/)?$",routeKeys:et.routeKeys}}function ev($,ee){let{parameterizedRoute:et}=eh($),{catchAll:er=!0}=ee;if("/"===et)return{namedRegex:"^/"+(er?".*":"")+"$"};let{namedParameterizedRoute:en}=em($,!1);return{namedRegex:"^"+en+(er?"(?:(/.*)?)":"")+"$"}}},6177:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"getSortedRoutes",{enumerable:!0,get:function(){return er}});class et{insert($){this._insert($.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh($){void 0===$&&($="/");let ee=[...this.children.keys()].sort();null!==this.slugName&&ee.splice(ee.indexOf("[]"),1),null!==this.restSlugName&&ee.splice(ee.indexOf("[...]"),1),null!==this.optionalRestSlugName&&ee.splice(ee.indexOf("[[...]]"),1);let et=ee.map(ee=>this.children.get(ee)._smoosh(""+$+ee+"/")).reduce(($,ee)=>[...$,...ee],[]);if(null!==this.slugName&&et.push(...this.children.get("[]")._smoosh($+"["+this.slugName+"]/")),!this.placeholder){let ee="/"===$?"/":$.slice(0,-1);if(null!=this.optionalRestSlugName)throw Error('You cannot define a route with the same specificity as a optional catch-all route ("'+ee+'" and "'+ee+"[[..."+this.optionalRestSlugName+']]").');et.unshift(ee)}return null!==this.restSlugName&&et.push(...this.children.get("[...]")._smoosh($+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&et.push(...this.children.get("[[...]]")._smoosh($+"[[..."+this.optionalRestSlugName+"]]/")),et}_insert($,ee,er){if(0===$.length){this.placeholder=!1;return}if(er)throw Error("Catch-all must be the last part of the URL.");let en=$[0];if(en.startsWith("[")&&en.endsWith("]")){let et=en.slice(1,-1),es=!1;if(et.startsWith("[")&&et.endsWith("]")&&(et=et.slice(1,-1),es=!0),et.startsWith("...")&&(et=et.substring(3),er=!0),et.startsWith("[")||et.endsWith("]"))throw Error("Segment names may not start or end with extra brackets ('"+et+"').");if(et.startsWith("."))throw Error("Segment names may not start with erroneous periods ('"+et+"').");function ei($,et){if(null!==$&&$!==et)throw Error("You cannot use different slug names for the same dynamic path ('"+$+"' !== '"+et+"').");ee.forEach($=>{if($===et)throw Error('You cannot have the same slug name "'+et+'" repeat within a single dynamic path');if($.replace(/\W/g,"")===en.replace(/\W/g,""))throw Error('You cannot have the slug names "'+$+'" and "'+et+'" differ only by non-word symbols within a single dynamic path')}),ee.push(et)}if(er){if(es){if(null!=this.restSlugName)throw Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+$[0]+'" ).');ei(this.optionalRestSlugName,et),this.optionalRestSlugName=et,en="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+$[0]+'").');ei(this.restSlugName,et),this.restSlugName=et,en="[...]"}}else{if(es)throw Error('Optional route parameters are not yet supported ("'+$[0]+'").');ei(this.slugName,et),this.slugName=et,en="[]"}}this.children.has(en)||this.children.set(en,new et),this.children.get(en)._insert($.slice(1),ee,er)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function er($){let ee=new et;return $.forEach($=>ee.insert($)),ee.smoosh()}},9457:($,ee)=>{"use strict";function et($){return"("===$[0]&&$.endsWith(")")}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"isGroupSegment",{enumerable:!0,get:function(){return et}})},7984:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"default",{enumerable:!0,get:function(){return eo}});let er=et(3729),en=!0,ei=()=>{},es=()=>{};function eo($){let{headManager:ee,reduceComponentsToState:et}=$;function eo(){if(ee&&ee.mountedInstances){let en=er.Children.toArray(Array.from(ee.mountedInstances).filter(Boolean));ee.updateHead(et(en,$))}}if(en){var eu;null==ee||null==(eu=ee.mountedInstances)||eu.add($.children),eo()}return ei(()=>{var et;return null==ee||null==(et=ee.mountedInstances)||et.add($.children),()=>{var et;null==ee||null==(et=ee.mountedInstances)||et.delete($.children)}}),ei(()=>(ee&&(ee._pendingUpdate=eo),()=>{ee&&(ee._pendingUpdate=eo)})),es(()=>(ee&&ee._pendingUpdate&&(ee._pendingUpdate(),ee._pendingUpdate=null),()=>{ee&&ee._pendingUpdate&&(ee._pendingUpdate(),ee._pendingUpdate=null)})),null}},853:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{WEB_VITALS:function(){return et},execOnce:function(){return er},isAbsoluteUrl:function(){return ei},getLocationOrigin:function(){return es},getURL:function(){return eo},getDisplayName:function(){return eu},isResSent:function(){return eh},normalizeRepeatedSlashes:function(){return ef},loadGetInitialProps:function(){return ep},SP:function(){return eg},ST:function(){return em},DecodeError:function(){return ey},NormalizeError:function(){return ev},PageNotFoundError:function(){return eS},MissingStaticPage:function(){return eT},MiddlewareNotFoundError:function(){return ew},stringifyError:function(){return eE}});let et=["CLS","FCP","FID","INP","LCP","TTFB"];function er($){let ee,et=!1;return function(){for(var er=arguments.length,en=Array(er),ei=0;ei<er;ei++)en[ei]=arguments[ei];return et||(et=!0,ee=$(...en)),ee}}let en=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,ei=$=>en.test($);function es(){let{protocol:$,hostname:ee,port:et}=window.location;return $+"//"+ee+(et?":"+et:"")}function eo(){let{href:$}=window.location,ee=es();return $.substring(ee.length)}function eu($){return"string"==typeof $?$:$.displayName||$.name||"Unknown"}function eh($){return $.finished||$.headersSent}function ef($){let ee=$.split("?");return ee[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(ee[1]?"?"+ee.slice(1).join("?"):"")}async function ep($,ee){let et=ee.res||ee.ctx&&ee.ctx.res;if(!$.getInitialProps)return ee.ctx&&ee.Component?{pageProps:await ep(ee.Component,ee.ctx)}:{};let er=await $.getInitialProps(ee);if(et&&eh(et))return er;if(!er)throw Error('"'+eu($)+'.getInitialProps()" should resolve to an object. But found "'+er+'" instead.');return er}let eg="undefined"!=typeof performance,em=eg&&["mark","measure","getEntriesByName"].every($=>"function"==typeof performance[$]);class ey extends Error{}class ev extends Error{}class eS extends Error{constructor($){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+$}}class eT extends Error{constructor($,ee){super(),this.message="Failed to load static file for page: "+$+" "+ee}}class ew extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function eE($){return JSON.stringify({message:$.message,stack:$.stack})}},837:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"warnOnce",{enumerable:!0,get:function(){return et}});let et=$=>{}},1223:($,ee,et)=>{$.exports=et(7412)},783:($,ee,et)=>{$.exports=et(1476)},2254:($,ee,et)=>{$.exports=et(4767)},1725:($,ee,et)=>{"use strict";var er=et(5269);$.exports=ee=er.descriptor=er.Root.fromJSON(et(9987)).lookup(".google.protobuf");var en=er.Namespace,ei=er.Root,es=er.Enum,eo=er.Type,eu=er.Field,eh=er.MapField,ef=er.OneOf,ep=er.Service,eg=er.Method;function em($,et,er){var eh=ee.FileDescriptorProto.create({name:$.filename||($.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});er&&(eh.syntax=er),$ instanceof ei||(eh.package=$.fullName.substring(1));for(var ef,eg=0;eg<$.nestedArray.length;++eg)(ef=$._nestedArray[eg])instanceof eo?eh.messageType.push(ef.toDescriptor(er)):ef instanceof es?eh.enumType.push(ef.toDescriptor()):ef instanceof eu?eh.extension.push(ef.toDescriptor(er)):ef instanceof ep?eh.service.push(ef.toDescriptor()):ef instanceof en&&em(ef,et,er);eh.options=eI($.options,ee.FileOptions),eh.messageType.length+eh.enumType.length+eh.extension.length+eh.service.length&&et.push(eh)}ei.fromDescriptor=function($){"number"==typeof $.length&&($=ee.FileDescriptorSet.decode($));var et=new ei;if($.file)for(var er,en,eh,ef=0;ef<$.file.length;++ef){if(en=et,(er=$.file[ef]).package&&er.package.length&&(en=et.define(er.package)),er.name&&er.name.length&&et.files.push(en.filename=er.name),er.messageType)for(eh=0;eh<er.messageType.length;++eh)en.add(eo.fromDescriptor(er.messageType[eh],er.syntax));if(er.enumType)for(eh=0;eh<er.enumType.length;++eh)en.add(es.fromDescriptor(er.enumType[eh]));if(er.extension)for(eh=0;eh<er.extension.length;++eh)en.add(eu.fromDescriptor(er.extension[eh]));if(er.service)for(eh=0;eh<er.service.length;++eh)en.add(ep.fromDescriptor(er.service[eh]));var eg=ex(er.options,ee.FileOptions);if(eg){var em=Object.keys(eg);for(eh=0;eh<em.length;++eh)en.setOption(em[eh],eg[em[eh]])}}return et},ei.prototype.toDescriptor=function($){var et=ee.FileDescriptorSet.create();return em(this,et.file,$),et};var ey=0;eo.fromDescriptor=function($,et){"number"==typeof $.length&&($=ee.DescriptorProto.decode($));var er,en=new eo($.name.length?$.name:"Type"+ey++,ex($.options,ee.MessageOptions));if($.oneofDecl)for(er=0;er<$.oneofDecl.length;++er)en.add(ef.fromDescriptor($.oneofDecl[er]));if($.field)for(er=0;er<$.field.length;++er){var ei=eu.fromDescriptor($.field[er],et);en.add(ei),$.field[er].hasOwnProperty("oneofIndex")&&en.oneofsArray[$.field[er].oneofIndex].add(ei)}if($.extension)for(er=0;er<$.extension.length;++er)en.add(eu.fromDescriptor($.extension[er],et));if($.nestedType)for(er=0;er<$.nestedType.length;++er)en.add(eo.fromDescriptor($.nestedType[er],et)),$.nestedType[er].options&&$.nestedType[er].options.mapEntry&&en.setOption("map_entry",!0);if($.enumType)for(er=0;er<$.enumType.length;++er)en.add(es.fromDescriptor($.enumType[er]));if($.extensionRange&&$.extensionRange.length)for(er=0,en.extensions=[];er<$.extensionRange.length;++er)en.extensions.push([$.extensionRange[er].start,$.extensionRange[er].end]);if($.reservedRange&&$.reservedRange.length||$.reservedName&&$.reservedName.length){if(en.reserved=[],$.reservedRange)for(er=0;er<$.reservedRange.length;++er)en.reserved.push([$.reservedRange[er].start,$.reservedRange[er].end]);if($.reservedName)for(er=0;er<$.reservedName.length;++er)en.reserved.push($.reservedName[er])}return en},eo.prototype.toDescriptor=function($){var et,er,en=ee.DescriptorProto.create({name:this.name});for(er=0;er<this.fieldsArray.length;++er)if(en.field.push(et=this._fieldsArray[er].toDescriptor($)),this._fieldsArray[er]instanceof eh){var ei=eR(this._fieldsArray[er].keyType,this._fieldsArray[er].resolvedKeyType),ef=eR(this._fieldsArray[er].type,this._fieldsArray[er].resolvedType),ep=11===ef||14===ef?this._fieldsArray[er].resolvedType&&eP(this.parent,this._fieldsArray[er].resolvedType)||this._fieldsArray[er].type:void 0;en.nestedType.push(ee.DescriptorProto.create({name:et.typeName,field:[ee.FieldDescriptorProto.create({name:"key",number:1,label:1,type:ei}),ee.FieldDescriptorProto.create({name:"value",number:2,label:1,type:ef,typeName:ep})],options:ee.MessageOptions.create({mapEntry:!0})}))}for(er=0;er<this.oneofsArray.length;++er)en.oneofDecl.push(this._oneofsArray[er].toDescriptor());for(er=0;er<this.nestedArray.length;++er)this._nestedArray[er]instanceof eu?en.field.push(this._nestedArray[er].toDescriptor($)):this._nestedArray[er]instanceof eo?en.nestedType.push(this._nestedArray[er].toDescriptor($)):this._nestedArray[er]instanceof es&&en.enumType.push(this._nestedArray[er].toDescriptor());if(this.extensions)for(er=0;er<this.extensions.length;++er)en.extensionRange.push(ee.DescriptorProto.ExtensionRange.create({start:this.extensions[er][0],end:this.extensions[er][1]}));if(this.reserved)for(er=0;er<this.reserved.length;++er)"string"==typeof this.reserved[er]?en.reservedName.push(this.reserved[er]):en.reservedRange.push(ee.DescriptorProto.ReservedRange.create({start:this.reserved[er][0],end:this.reserved[er][1]}));return en.options=eI(this.options,ee.MessageOptions),en};var ev=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;eu.fromDescriptor=function($,et){if("number"==typeof $.length&&($=ee.DescriptorProto.decode($)),"number"!=typeof $.number)throw Error("missing field id");switch(er=$.typeName&&$.typeName.length?$.typeName:eC($.type),$.label){case 1:en=void 0;break;case 2:en="required";break;case 3:en="repeated";break;default:throw Error("illegal label: "+$.label)}var er,en,ei=$.extendee;void 0!==$.extendee&&(ei=ei.length?ei:void 0);var es=new eu($.name.length?$.name:"field"+$.number,$.number,er,en,ei);if(es.options=ex($.options,ee.FieldOptions),$.defaultValue&&$.defaultValue.length){var eo=$.defaultValue;switch(eo){case"true":case"TRUE":eo=!0;break;case"false":case"FALSE":eo=!1;break;default:ev.exec(eo)&&(eo=parseInt(eo))}es.setOption("default",eo)}return e_($.type)&&("proto3"===et?$.options&&!$.options.packed&&es.setOption("packed",!1):$.options&&$.options.packed||es.setOption("packed",!1)),es},eu.prototype.toDescriptor=function($){var et=ee.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)et.type=11,et.typeName=er.util.ucFirst(this.name),et.label=3;else{switch(et.type=eR(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:et.typeName=this.resolvedType?eP(this.parent,this.resolvedType):this.type}switch(this.rule){case"repeated":et.label=3;break;case"required":et.label=2;break;default:et.label=1}}if(et.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(et.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(et.options=eI(this.options,ee.FieldOptions),null!=this.options.default&&(et.defaultValue=String(this.options.default))),"proto3"===$?this.packed||((et.options||(et.options=ee.FieldOptions.create())).packed=!1):this.packed&&((et.options||(et.options=ee.FieldOptions.create())).packed=!0),et};var eS=0;es.fromDescriptor=function($){"number"==typeof $.length&&($=ee.EnumDescriptorProto.decode($));var et={};if($.value)for(var er=0;er<$.value.length;++er){var en=$.value[er].name,ei=$.value[er].number||0;et[en&&en.length?en:"NAME"+ei]=ei}return new es($.name&&$.name.length?$.name:"Enum"+eS++,et,ex($.options,ee.EnumOptions))},es.prototype.toDescriptor=function(){for(var $=[],et=0,er=Object.keys(this.values);et<er.length;++et)$.push(ee.EnumValueDescriptorProto.create({name:er[et],number:this.values[er[et]]}));return ee.EnumDescriptorProto.create({name:this.name,value:$,options:eI(this.options,ee.EnumOptions)})};var eT=0;ef.fromDescriptor=function($){return"number"==typeof $.length&&($=ee.OneofDescriptorProto.decode($)),new ef($.name&&$.name.length?$.name:"oneof"+eT++)},ef.prototype.toDescriptor=function(){return ee.OneofDescriptorProto.create({name:this.name})};var ew=0;ep.fromDescriptor=function($){"number"==typeof $.length&&($=ee.ServiceDescriptorProto.decode($));var et=new ep($.name&&$.name.length?$.name:"Service"+ew++,ex($.options,ee.ServiceOptions));if($.method)for(var er=0;er<$.method.length;++er)et.add(eg.fromDescriptor($.method[er]));return et},ep.prototype.toDescriptor=function(){for(var $=[],et=0;et<this.methodsArray.length;++et)$.push(this._methodsArray[et].toDescriptor());return ee.ServiceDescriptorProto.create({name:this.name,method:$,options:eI(this.options,ee.ServiceOptions)})};var eE=0;function eC($){switch($){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+$)}function e_($){switch($){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function eR($,ee){switch($){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(ee instanceof es)return 14;if(ee instanceof eo)return ee.group?10:11;throw Error("illegal type: "+$)}function ex($,ee){if($){for(var et,en,ei,eo=[],eu=0;eu<ee.fieldsArray.length;++eu)"uninterpretedOption"!==(en=(et=ee._fieldsArray[eu]).name)&&$.hasOwnProperty(en)&&(ei=$[en],et.resolvedType instanceof es&&"number"==typeof ei&&void 0!==et.resolvedType.valuesById[ei]&&(ei=et.resolvedType.valuesById[ei]),eo.push(eA(en),ei));return eo.length?er.util.toObject(eo):void 0}}function eI($,ee){if($){for(var et,en,ei=[],es=0,eo=Object.keys($);es<eo.length;++es)if(en=$[et=eo[es]],"default"!==et){var eu=ee.fields[et];(eu||(eu=ee.fields[et=er.util.camelCase(et)]))&&ei.push(et,en)}return ei.length?ee.fromObject(er.util.toObject(ei)):void 0}}function eP($,ee){var et=$.fullName.split("."),er=ee.fullName.split("."),es=0,eo=0,eu=er.length-1;if(!($ instanceof ei)&&ee instanceof en)for(;es<et.length&&eo<eu&&et[es]===er[eo];){var eh=ee.lookup(et[es++],!0);if(null!==eh&&eh!==ee)break;++eo}else for(;es<et.length&&eo<eu&&et[es]===er[eo];++es,++eo);return er.slice(eo).join(".")}function eA($){return $.substring(0,1)+$.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function($,ee){return"_"+ee.toLowerCase()})}eg.fromDescriptor=function($){return"number"==typeof $.length&&($=ee.MethodDescriptorProto.decode($)),new eg($.name&&$.name.length?$.name:"Method"+eE++,"rpc",$.inputType,$.outputType,!!$.clientStreaming,!!$.serverStreaming,ex($.options,ee.MethodOptions))},eg.prototype.toDescriptor=function(){return ee.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:eI(this.options,ee.MethodOptions)})}},5269:($,ee,et)=>{"use strict";$.exports=et(7954)},2516:$=>{"use strict";$.exports=er;var ee,et=/\/|\./;function er($,ee){et.test($)||($="google/protobuf/"+$+".proto",ee={nested:{google:{nested:{protobuf:{nested:ee}}}}}),er[$]=ee}er("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),er("duration",{Duration:ee={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),er("timestamp",{Timestamp:ee}),er("empty",{Empty:{fields:{}}}),er("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),er("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),er("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),er.get=function($){return er[$]||null}},5944:($,ee,et)=>{"use strict";var er=ee,en=et(5519),ei=et(8289);function es($,ee,et,er){var ei=!1;if(ee.resolvedType){if(ee.resolvedType instanceof en){$("switch(d%s){",er);for(var es=ee.resolvedType.values,eo=Object.keys(es),eu=0;eu<eo.length;++eu)es[eo[eu]]!==ee.typeDefault||ei||($("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',er,er,er),ee.repeated||$("break"),ei=!0),$("case%j:",eo[eu])("case %i:",es[eo[eu]])("m%s=%j",er,es[eo[eu]])("break");$("}")}else $('if(typeof d%s!=="object")',er)("throw TypeError(%j)",ee.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",er,et,er)}else{var eh=!1;switch(ee.type){case"double":case"float":$("m%s=Number(d%s)",er,er);break;case"uint32":case"fixed32":$("m%s=d%s>>>0",er,er);break;case"int32":case"sint32":case"sfixed32":$("m%s=d%s|0",er,er);break;case"uint64":eh=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":$("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",er,er,eh)('else if(typeof d%s==="string")',er)("m%s=parseInt(d%s,10)",er,er)('else if(typeof d%s==="number")',er)("m%s=d%s",er,er)('else if(typeof d%s==="object")',er)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",er,er,er,eh?"true":"");break;case"bytes":$('if(typeof d%s==="string")',er)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",er,er,er)("else if(d%s.length >= 0)",er)("m%s=d%s",er,er);break;case"string":$("m%s=String(d%s)",er,er);break;case"bool":$("m%s=Boolean(d%s)",er,er)}}return $}function eo($,ee,et,er){if(ee.resolvedType)ee.resolvedType instanceof en?$("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",er,et,er,er,et,er,er):$("d%s=types[%i].toObject(m%s,o)",er,et,er);else{var ei=!1;switch(ee.type){case"double":case"float":$("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",er,er,er,er);break;case"uint64":ei=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":$('if(typeof m%s==="number")',er)("d%s=o.longs===String?String(m%s):m%s",er,er,er)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",er,er,er,er,ei?"true":"",er);break;case"bytes":$("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",er,er,er,er,er);break;default:$("d%s=m%s",er,er)}}return $}er.fromObject=function($){var ee=$.fieldsArray,et=ei.codegen(["d"],$.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!ee.length)return et("return new this.ctor");et("var m=new this.ctor");for(var er=0;er<ee.length;++er){var eo=ee[er].resolve(),eu=ei.safeProp(eo.name);eo.map?(et("if(d%s){",eu)('if(typeof d%s!=="object")',eu)("throw TypeError(%j)",eo.fullName+": object expected")("m%s={}",eu)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",eu),es(et,eo,er,eu+"[ks[i]]")("}")("}")):eo.repeated?(et("if(d%s){",eu)("if(!Array.isArray(d%s))",eu)("throw TypeError(%j)",eo.fullName+": array expected")("m%s=[]",eu)("for(var i=0;i<d%s.length;++i){",eu),es(et,eo,er,eu+"[i]")("}")("}")):(eo.resolvedType instanceof en||et("if(d%s!=null){",eu),es(et,eo,er,eu),eo.resolvedType instanceof en||et("}"))}return et("return m")},er.toObject=function($){var ee=$.fieldsArray.slice().sort(ei.compareFieldsById);if(!ee.length)return ei.codegen()("return {}");for(var et=ei.codegen(["m","o"],$.name+"$toObject")("if(!o)")("o={}")("var d={}"),er=[],es=[],eu=[],eh=0;eh<ee.length;++eh)ee[eh].partOf||(ee[eh].resolve().repeated?er:ee[eh].map?es:eu).push(ee[eh]);if(er.length){for(et("if(o.arrays||o.defaults){"),eh=0;eh<er.length;++eh)et("d%s=[]",ei.safeProp(er[eh].name));et("}")}if(es.length){for(et("if(o.objects||o.defaults){"),eh=0;eh<es.length;++eh)et("d%s={}",ei.safeProp(es[eh].name));et("}")}if(eu.length){for(et("if(o.defaults){"),eh=0;eh<eu.length;++eh){var ef=eu[eh],ep=ei.safeProp(ef.name);if(ef.resolvedType instanceof en)et("d%s=o.enums===String?%j:%j",ep,ef.resolvedType.valuesById[ef.typeDefault],ef.typeDefault);else if(ef.long)et("if(util.Long){")("var n=new util.Long(%i,%i,%j)",ef.typeDefault.low,ef.typeDefault.high,ef.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",ep)("}else")("d%s=o.longs===String?%j:%i",ep,ef.typeDefault.toString(),ef.typeDefault.toNumber());else if(ef.bytes){var eg="["+Array.prototype.slice.call(ef.typeDefault).join(",")+"]";et("if(o.bytes===String)d%s=%j",ep,String.fromCharCode.apply(String,ef.typeDefault))("else{")("d%s=%s",ep,eg)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",ep,ep)("}")}else et("d%s=%j",ep,ef.typeDefault)}et("}")}var em=!1;for(eh=0;eh<ee.length;++eh){var ef=ee[eh],ey=$._fieldsArray.indexOf(ef),ep=ei.safeProp(ef.name);ef.map?(em||(em=!0,et("var ks2")),et("if(m%s&&(ks2=Object.keys(m%s)).length){",ep,ep)("d%s={}",ep)("for(var j=0;j<ks2.length;++j){"),eo(et,ef,ey,ep+"[ks2[j]]")("}")):ef.repeated?(et("if(m%s&&m%s.length){",ep,ep)("d%s=[]",ep)("for(var j=0;j<m%s.length;++j){",ep),eo(et,ef,ey,ep+"[j]")("}")):(et("if(m%s!=null&&m.hasOwnProperty(%j)){",ep,ef.name),eo(et,ef,ey,ep),ef.partOf&&et("if(o.oneofs)")("d%s=%j",ei.safeProp(ef.partOf.name),ef.name)),et("}")}return et("return d")}},8983:($,ee,et)=>{"use strict";$.exports=eo;var er=et(5519),en=et(1627),ei=et(8289);function es($){return"missing required '"+$.name+"'"}function eo($){var ee=ei.codegen(["r","l"],$.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+($.fieldsArray.filter(function($){return $.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");$.group&&ee("if((t&7)===4)")("break"),ee("switch(t>>>3){");for(var et=0;et<$.fieldsArray.length;++et){var eo=$._fieldsArray[et].resolve(),eu=eo.resolvedType instanceof er?"int32":eo.type,eh="m"+ei.safeProp(eo.name);ee("case %i: {",eo.id),eo.map?(ee("if(%s===util.emptyObject)",eh)("%s={}",eh)("var c2 = r.uint32()+r.pos"),void 0!==en.defaults[eo.keyType]?ee("k=%j",en.defaults[eo.keyType]):ee("k=null"),void 0!==en.defaults[eu]?ee("value=%j",en.defaults[eu]):ee("value=null"),ee("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",eo.keyType)("case 2:"),void 0===en.basic[eu]?ee("value=types[%i].decode(r,r.uint32())",et):ee("value=r.%s()",eu),ee("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),ee(void 0!==en.long[eo.keyType]?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",eh)):eo.repeated?(ee("if(!(%s&&%s.length))",eh,eh)("%s=[]",eh),void 0!==en.packed[eu]&&ee("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",eh,eu)("}else"),void 0===en.basic[eu]?ee(eo.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",eh,et):ee("%s.push(r.%s())",eh,eu)):void 0===en.basic[eu]?ee(eo.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",eh,et):ee("%s=r.%s()",eh,eu),ee("break")("}")}for(ee("default:")("r.skipType(t&7)")("break")("}")("}"),et=0;et<$._fieldsArray.length;++et){var ef=$._fieldsArray[et];ef.required&&ee("if(!m.hasOwnProperty(%j))",ef.name)("throw util.ProtocolError(%j,{instance:m})",es(ef))}return ee("return m")}},7337:($,ee,et)=>{"use strict";$.exports=eo;var er=et(5519),en=et(1627),ei=et(8289);function es($,ee,et,er){return ee.resolvedType.group?$("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",et,er,(ee.id<<3|3)>>>0,(ee.id<<3|4)>>>0):$("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",et,er,(ee.id<<3|2)>>>0)}function eo($){for(var ee,et,eo=ei.codegen(["m","w"],$.name+"$encode")("if(!w)")("w=Writer.create()"),eu=$.fieldsArray.slice().sort(ei.compareFieldsById),ee=0;ee<eu.length;++ee){var eh=eu[ee].resolve(),ef=$._fieldsArray.indexOf(eh),ep=eh.resolvedType instanceof er?"int32":eh.type,eg=en.basic[ep];et="m"+ei.safeProp(eh.name),eh.map?(eo("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",et,eh.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",et)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(eh.id<<3|2)>>>0,8|en.mapKey[eh.keyType],eh.keyType),void 0===eg?eo("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",ef,et):eo(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|eg,ep,et),eo("}")("}")):eh.repeated?(eo("if(%s!=null&&%s.length){",et,et),eh.packed&&void 0!==en.packed[ep]?eo("w.uint32(%i).fork()",(eh.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",et)("w.%s(%s[i])",ep,et)("w.ldelim()"):(eo("for(var i=0;i<%s.length;++i)",et),void 0===eg?es(eo,eh,ef,et+"[i]"):eo("w.uint32(%i).%s(%s[i])",(eh.id<<3|eg)>>>0,ep,et)),eo("}")):(eh.optional&&eo("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",et,eh.name),void 0===eg?es(eo,eh,ef,et):eo("w.uint32(%i).%s(%s)",(eh.id<<3|eg)>>>0,ep,et))}return eo("return w")}},5519:($,ee,et)=>{"use strict";$.exports=es;var er=et(8831);((es.prototype=Object.create(er.prototype)).constructor=es).className="Enum";var en=et(4622),ei=et(8289);function es($,ee,et,en,ei,es){if(er.call(this,$,et),ee&&"object"!=typeof ee)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=en,this.comments=ei||{},this.valuesOptions=es,this.reserved=void 0,ee)for(var eo=Object.keys(ee),eu=0;eu<eo.length;++eu)"number"==typeof ee[eo[eu]]&&(this.valuesById[this.values[eo[eu]]=ee[eo[eu]]]=eo[eu])}es.fromJSON=function($,ee){var et=new es($,ee.values,ee.options,ee.comment,ee.comments);return et.reserved=ee.reserved,et},es.prototype.toJSON=function($){var ee=!!$&&!!$.keepComments;return ei.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",ee?this.comment:void 0,"comments",ee?this.comments:void 0])},es.prototype.add=function($,ee,et,er){if(!ei.isString($))throw TypeError("name must be a string");if(!ei.isInteger(ee))throw TypeError("id must be an integer");if(void 0!==this.values[$])throw Error("duplicate name '"+$+"' in "+this);if(this.isReservedId(ee))throw Error("id "+ee+" is reserved in "+this);if(this.isReservedName($))throw Error("name '"+$+"' is reserved in "+this);if(void 0!==this.valuesById[ee]){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+ee+" in "+this);this.values[$]=ee}else this.valuesById[this.values[$]=ee]=$;return er&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[$]=er||null),this.comments[$]=et||null,this},es.prototype.remove=function($){if(!ei.isString($))throw TypeError("name must be a string");var ee=this.values[$];if(null==ee)throw Error("name '"+$+"' does not exist in "+this);return delete this.valuesById[ee],delete this.values[$],delete this.comments[$],this.valuesOptions&&delete this.valuesOptions[$],this},es.prototype.isReservedId=function($){return en.isReservedId(this.reserved,$)},es.prototype.isReservedName=function($){return en.isReservedName(this.reserved,$)}},2548:($,ee,et)=>{"use strict";$.exports=eh;var er,en=et(8831);((eh.prototype=Object.create(en.prototype)).constructor=eh).className="Field";var ei=et(5519),es=et(1627),eo=et(8289),eu=/^required|optional|repeated$/;function eh($,ee,et,er,ei,eh,ef){if(eo.isObject(er)?(ef=ei,eh=er,er=ei=void 0):eo.isObject(ei)&&(ef=eh,eh=ei,ei=void 0),en.call(this,$,eh),!eo.isInteger(ee)||ee<0)throw TypeError("id must be a non-negative integer");if(!eo.isString(et))throw TypeError("type must be a string");if(void 0!==er&&!eu.test(er=er.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==ei&&!eo.isString(ei))throw TypeError("extend must be a string");"proto3_optional"===er&&(er="optional"),this.rule=er&&"optional"!==er?er:void 0,this.type=et,this.id=ee,this.extend=ei||void 0,this.required="required"===er,this.optional=!this.required,this.repeated="repeated"===er,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!eo.Long&&void 0!==es.long[et],this.bytes="bytes"===et,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=ef}eh.fromJSON=function($,ee){return new eh($,ee.id,ee.type,ee.rule,ee.extend,ee.options,ee.comment)},Object.defineProperty(eh.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),eh.prototype.setOption=function($,ee,et){return"packed"===$&&(this._packed=null),en.prototype.setOption.call(this,$,ee,et)},eh.prototype.toJSON=function($){var ee=!!$&&!!$.keepComments;return eo.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",ee?this.comment:void 0])},eh.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=es.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof er?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof ei&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof ei)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=eo.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var $;eo.base64.test(this.typeDefault)?eo.base64.decode(this.typeDefault,$=eo.newBuffer(eo.base64.length(this.typeDefault)),0):eo.utf8.write(this.typeDefault,$=eo.newBuffer(eo.utf8.length(this.typeDefault)),0),this.typeDefault=$}return this.map?this.defaultValue=eo.emptyObject:this.repeated?this.defaultValue=eo.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof er&&(this.parent.ctor.prototype[this.name]=this.defaultValue),en.prototype.resolve.call(this)},eh.d=function($,ee,et,er){return"function"==typeof ee?ee=eo.decorateType(ee).name:ee&&"object"==typeof ee&&(ee=eo.decorateEnum(ee).name),function(en,ei){eo.decorateType(en.constructor).add(new eh(ei,$,ee,et,{default:er}))}},eh._configure=function($){er=$}},2822:($,ee,et)=>{"use strict";var er=$.exports=et(5748);function en($,ee,et){return"function"==typeof ee?(et=ee,ee=new er.Root):ee||(ee=new er.Root),ee.load($,et)}function ei($,ee){return ee||(ee=new er.Root),ee.loadSync($)}er.build="light",er.load=en,er.loadSync=ei,er.encoder=et(7337),er.decoder=et(8983),er.verifier=et(1181),er.converter=et(5944),er.ReflectionObject=et(8831),er.Namespace=et(4622),er.Root=et(4955),er.Enum=et(5519),er.Type=et(9396),er.Field=et(2548),er.OneOf=et(5677),er.MapField=et(372),er.Service=et(6962),er.Method=et(1670),er.Message=et(5326),er.wrappers=et(2969),er.types=et(1627),er.util=et(8289),er.ReflectionObject._configure(er.Root),er.Namespace._configure(er.Type,er.Service,er.Enum),er.Root._configure(er.Type),er.Field._configure(er.Type)},5748:($,ee,et)=>{"use strict";var er=ee;function en(){er.util._configure(),er.Writer._configure(er.BufferWriter),er.Reader._configure(er.BufferReader)}er.build="minimal",er.Writer=et(7474),er.BufferWriter=et(6985),er.Reader=et(8645),er.BufferReader=et(2126),er.util=et(6416),er.rpc=et(4415),er.roots=et(3675),er.configure=en,en()},7954:($,ee,et)=>{"use strict";var er=$.exports=et(2822);er.build="full",er.tokenize=et(9468),er.parse=et(580),er.common=et(2516),er.Root._configure(er.Type,er.parse,er.common)},372:($,ee,et)=>{"use strict";$.exports=es;var er=et(2548);((es.prototype=Object.create(er.prototype)).constructor=es).className="MapField";var en=et(1627),ei=et(8289);function es($,ee,et,en,es,eo){if(er.call(this,$,ee,en,void 0,void 0,es,eo),!ei.isString(et))throw TypeError("keyType must be a string");this.keyType=et,this.resolvedKeyType=null,this.map=!0}es.fromJSON=function($,ee){return new es($,ee.id,ee.keyType,ee.type,ee.options,ee.comment)},es.prototype.toJSON=function($){var ee=!!$&&!!$.keepComments;return ei.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",ee?this.comment:void 0])},es.prototype.resolve=function(){if(this.resolved)return this;if(void 0===en.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return er.prototype.resolve.call(this)},es.d=function($,ee,et){return"function"==typeof et?et=ei.decorateType(et).name:et&&"object"==typeof et&&(et=ei.decorateEnum(et).name),function(er,en){ei.decorateType(er.constructor).add(new es(en,$,ee,et))}}},5326:($,ee,et)=>{"use strict";$.exports=en;var er=et(6416);function en($){if($)for(var ee=Object.keys($),et=0;et<ee.length;++et)this[ee[et]]=$[ee[et]]}en.create=function($){return this.$type.create($)},en.encode=function($,ee){return this.$type.encode($,ee)},en.encodeDelimited=function($,ee){return this.$type.encodeDelimited($,ee)},en.decode=function($){return this.$type.decode($)},en.decodeDelimited=function($){return this.$type.decodeDelimited($)},en.verify=function($){return this.$type.verify($)},en.fromObject=function($){return this.$type.fromObject($)},en.toObject=function($,ee){return this.$type.toObject($,ee)},en.prototype.toJSON=function(){return this.$type.toObject(this,er.toJSONOptions)}},1670:($,ee,et)=>{"use strict";$.exports=ei;var er=et(8831);((ei.prototype=Object.create(er.prototype)).constructor=ei).className="Method";var en=et(8289);function ei($,ee,et,ei,es,eo,eu,eh,ef){if(en.isObject(es)?(eu=es,es=eo=void 0):en.isObject(eo)&&(eu=eo,eo=void 0),!(void 0===ee||en.isString(ee)))throw TypeError("type must be a string");if(!en.isString(et))throw TypeError("requestType must be a string");if(!en.isString(ei))throw TypeError("responseType must be a string");er.call(this,$,eu),this.type=ee||"rpc",this.requestType=et,this.requestStream=!!es||void 0,this.responseType=ei,this.responseStream=!!eo||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=eh,this.parsedOptions=ef}ei.fromJSON=function($,ee){return new ei($,ee.type,ee.requestType,ee.responseType,ee.requestStream,ee.responseStream,ee.options,ee.comment,ee.parsedOptions)},ei.prototype.toJSON=function($){var ee=!!$&&!!$.keepComments;return en.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",ee?this.comment:void 0,"parsedOptions",this.parsedOptions])},ei.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),er.prototype.resolve.call(this))}},4622:($,ee,et)=>{"use strict";$.exports=ep;var er,en,ei,es=et(8831);((ep.prototype=Object.create(es.prototype)).constructor=ep).className="Namespace";var eo=et(2548),eu=et(8289),eh=et(5677);function ef($,ee){if($&&$.length){for(var et={},er=0;er<$.length;++er)et[$[er].name]=$[er].toJSON(ee);return et}}function ep($,ee){es.call(this,$,ee),this.nested=void 0,this._nestedArray=null}function eg($){return $._nestedArray=null,$}ep.fromJSON=function($,ee){return new ep($,ee.options).addJSON(ee.nested)},ep.arrayToJSON=ef,ep.isReservedId=function($,ee){if($){for(var et=0;et<$.length;++et)if("string"!=typeof $[et]&&$[et][0]<=ee&&$[et][1]>ee)return!0}return!1},ep.isReservedName=function($,ee){if($){for(var et=0;et<$.length;++et)if($[et]===ee)return!0}return!1},Object.defineProperty(ep.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=eu.toArray(this.nested))}}),ep.prototype.toJSON=function($){return eu.toObject(["options",this.options,"nested",ef(this.nestedArray,$)])},ep.prototype.addJSON=function($){var ee=this;if($)for(var et,es=Object.keys($),eu=0;eu<es.length;++eu)et=$[es[eu]],ee.add((void 0!==et.fields?er.fromJSON:void 0!==et.values?ei.fromJSON:void 0!==et.methods?en.fromJSON:void 0!==et.id?eo.fromJSON:ep.fromJSON)(es[eu],et));return this},ep.prototype.get=function($){return this.nested&&this.nested[$]||null},ep.prototype.getEnum=function($){if(this.nested&&this.nested[$]instanceof ei)return this.nested[$].values;throw Error("no such enum: "+$)},ep.prototype.add=function($){if(!($ instanceof eo&&void 0!==$.extend||$ instanceof er||$ instanceof eh||$ instanceof ei||$ instanceof en||$ instanceof ep))throw TypeError("object must be a valid nested object");if(this.nested){var ee=this.get($.name);if(ee){if(ee instanceof ep&&$ instanceof ep&&!(ee instanceof er||ee instanceof en)){for(var et=ee.nestedArray,es=0;es<et.length;++es)$.add(et[es]);this.remove(ee),this.nested||(this.nested={}),$.setOptions(ee.options,!0)}else throw Error("duplicate name '"+$.name+"' in "+this)}}else this.nested={};return this.nested[$.name]=$,$.onAdd(this),eg(this)},ep.prototype.remove=function($){if(!($ instanceof es))throw TypeError("object must be a ReflectionObject");if($.parent!==this)throw Error($+" is not a member of "+this);return delete this.nested[$.name],Object.keys(this.nested).length||(this.nested=void 0),$.onRemove(this),eg(this)},ep.prototype.define=function($,ee){if(eu.isString($))$=$.split(".");else if(!Array.isArray($))throw TypeError("illegal path");if($&&$.length&&""===$[0])throw Error("path must be relative");for(var et=this;$.length>0;){var er=$.shift();if(et.nested&&et.nested[er]){if(!((et=et.nested[er])instanceof ep))throw Error("path conflicts with non-namespace objects")}else et.add(et=new ep(er))}return ee&&et.addJSON(ee),et},ep.prototype.resolveAll=function(){for(var $=this.nestedArray,ee=0;ee<$.length;)$[ee]instanceof ep?$[ee++].resolveAll():$[ee++].resolve();return this.resolve()},ep.prototype.lookup=function($,ee,et){if("boolean"==typeof ee?(et=ee,ee=void 0):ee&&!Array.isArray(ee)&&(ee=[ee]),eu.isString($)&&$.length){if("."===$)return this.root;$=$.split(".")}else if(!$.length)return this;if(""===$[0])return this.root.lookup($.slice(1),ee);var er=this.get($[0]);if(er){if(1===$.length){if(!ee||ee.indexOf(er.constructor)>-1)return er}else if(er instanceof ep&&(er=er.lookup($.slice(1),ee,!0)))return er}else for(var en=0;en<this.nestedArray.length;++en)if(this._nestedArray[en]instanceof ep&&(er=this._nestedArray[en].lookup($,ee,!0)))return er;return null===this.parent||et?null:this.parent.lookup($,ee)},ep.prototype.lookupType=function($){var ee=this.lookup($,[er]);if(!ee)throw Error("no such type: "+$);return ee},ep.prototype.lookupEnum=function($){var ee=this.lookup($,[ei]);if(!ee)throw Error("no such Enum '"+$+"' in "+this);return ee},ep.prototype.lookupTypeOrEnum=function($){var ee=this.lookup($,[er,ei]);if(!ee)throw Error("no such Type or Enum '"+$+"' in "+this);return ee},ep.prototype.lookupService=function($){var ee=this.lookup($,[en]);if(!ee)throw Error("no such Service '"+$+"' in "+this);return ee},ep._configure=function($,ee,et){er=$,en=ee,ei=et}},8831:($,ee,et)=>{"use strict";$.exports=ei,ei.className="ReflectionObject";var er,en=et(8289);function ei($,ee){if(!en.isString($))throw TypeError("name must be a string");if(ee&&!en.isObject(ee))throw TypeError("options must be an object");this.options=ee,this.parsedOptions=null,this.name=$,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(ei.prototype,{root:{get:function(){for(var $=this;null!==$.parent;)$=$.parent;return $}},fullName:{get:function(){for(var $=[this.name],ee=this.parent;ee;)$.unshift(ee.name),ee=ee.parent;return $.join(".")}}}),ei.prototype.toJSON=function(){throw Error()},ei.prototype.onAdd=function($){this.parent&&this.parent!==$&&this.parent.remove(this),this.parent=$,this.resolved=!1;var ee=$.root;ee instanceof er&&ee._handleAdd(this)},ei.prototype.onRemove=function($){var ee=$.root;ee instanceof er&&ee._handleRemove(this),this.parent=null,this.resolved=!1},ei.prototype.resolve=function(){return this.resolved||this.root instanceof er&&(this.resolved=!0),this},ei.prototype.getOption=function($){if(this.options)return this.options[$]},ei.prototype.setOption=function($,ee,et){return et&&this.options&&void 0!==this.options[$]||((this.options||(this.options={}))[$]=ee),this},ei.prototype.setParsedOption=function($,ee,et){this.parsedOptions||(this.parsedOptions=[]);var er=this.parsedOptions;if(et){var ei=er.find(function(ee){return Object.prototype.hasOwnProperty.call(ee,$)});if(ei){var es=ei[$];en.setProperty(es,et,ee)}else(ei={})[$]=en.setProperty({},et,ee),er.push(ei)}else{var eo={};eo[$]=ee,er.push(eo)}return this},ei.prototype.setOptions=function($,ee){if($)for(var et=Object.keys($),er=0;er<et.length;++er)this.setOption(et[er],$[et[er]],ee);return this},ei.prototype.toString=function(){var $=this.constructor.className,ee=this.fullName;return ee.length?$+" "+ee:$},ei._configure=function($){er=$}},5677:($,ee,et)=>{"use strict";$.exports=es;var er=et(8831);((es.prototype=Object.create(er.prototype)).constructor=es).className="OneOf";var en=et(2548),ei=et(8289);function es($,ee,et,en){if(Array.isArray(ee)||(et=ee,ee=void 0),er.call(this,$,et),!(void 0===ee||Array.isArray(ee)))throw TypeError("fieldNames must be an Array");this.oneof=ee||[],this.fieldsArray=[],this.comment=en}function eo($){if($.parent)for(var ee=0;ee<$.fieldsArray.length;++ee)$.fieldsArray[ee].parent||$.parent.add($.fieldsArray[ee])}es.fromJSON=function($,ee){return new es($,ee.oneof,ee.options,ee.comment)},es.prototype.toJSON=function($){var ee=!!$&&!!$.keepComments;return ei.toObject(["options",this.options,"oneof",this.oneof,"comment",ee?this.comment:void 0])},es.prototype.add=function($){if(!($ instanceof en))throw TypeError("field must be a Field");return $.parent&&$.parent!==this.parent&&$.parent.remove($),this.oneof.push($.name),this.fieldsArray.push($),$.partOf=this,eo(this),this},es.prototype.remove=function($){if(!($ instanceof en))throw TypeError("field must be a Field");var ee=this.fieldsArray.indexOf($);if(ee<0)throw Error($+" is not a member of "+this);return this.fieldsArray.splice(ee,1),(ee=this.oneof.indexOf($.name))>-1&&this.oneof.splice(ee,1),$.partOf=null,this},es.prototype.onAdd=function($){er.prototype.onAdd.call(this,$);for(var ee=this,et=0;et<this.oneof.length;++et){var en=$.get(this.oneof[et]);en&&!en.partOf&&(en.partOf=ee,ee.fieldsArray.push(en))}eo(this)},es.prototype.onRemove=function($){for(var ee,et=0;et<this.fieldsArray.length;++et)(ee=this.fieldsArray[et]).parent&&ee.parent.remove(ee);er.prototype.onRemove.call(this,$)},es.d=function(){for(var $=Array(arguments.length),ee=0;ee<arguments.length;)$[ee]=arguments[ee++];return function(ee,et){ei.decorateType(ee.constructor).add(new es(et,$)),Object.defineProperty(ee,et,{get:ei.oneOfGetter($),set:ei.oneOfSetter($)})}}},580:($,ee,et)=>{"use strict";$.exports=eI,eI.filename=null,eI.defaults={keepCase:!1};var er=et(9468),en=et(4955),ei=et(9396),es=et(2548),eo=et(372),eu=et(5677),eh=et(5519),ef=et(6962),ep=et(1670),eg=et(1627),em=et(8289),ey=/^[1-9][0-9]*$/,ev=/^-?[1-9][0-9]*$/,eS=/^0[x][0-9a-fA-F]+$/,eT=/^-?0[x][0-9a-fA-F]+$/,ew=/^0[0-7]+$/,eE=/^-?0[0-7]+$/,eC=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,e_=/^[a-zA-Z_][a-zA-Z_0-9]*$/,eR=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,ex=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function eI($,ee,et){ee instanceof en||(et=ee,ee=new en),et||(et=eI.defaults);var eP,eA,eO,eD,eN,ek=et.preferTrailingComment||!1,eM=er($,et.alternateCommentMode||!1),eL=eM.next,ej=eM.push,eB=eM.peek,eF=eM.skip,eV=eM.cmnt,eU=!0,ez=!1,eq=ee,eH=et.keepCase?function($){return $}:em.camelCase;function e$($,ee,et){var er=eI.filename;return et||(eI.filename=null),Error("illegal "+(ee||"token")+" '"+$+"' ("+(er?er+", ":"")+"line "+eM.line+")")}function eG(){var $,ee=[];do{if('"'!==($=eL())&&"'"!==$)throw e$($);ee.push(eL()),eF($),$=eB()}while('"'===$||"'"===$);return ee.join("")}function eW($){var ee=eL();switch(ee){case"'":case'"':return ej(ee),eG();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return eQ(ee,!0)}catch(et){if($&&eR.test(ee))return ee;throw e$(ee,"value")}}function eK($,ee){var et,er;do ee&&('"'===(et=eB())||"'"===et)?$.push(eG()):$.push([er=eY(eL()),eF("to",!0)?eY(eL()):er]);while(eF(",",!0));eF(";")}function eQ($,ee){var et=1;switch("-"===$.charAt(0)&&(et=-1,$=$.substring(1)),$){case"inf":case"INF":case"Inf":return 1/0*et;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(ey.test($))return et*parseInt($,10);if(eS.test($))return et*parseInt($,16);if(ew.test($))return et*parseInt($,8);if(eC.test($))return et*parseFloat($);throw e$($,"number",ee)}function eY($,ee){switch($){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!ee&&"-"===$.charAt(0))throw e$($,"id");if(ev.test($))return parseInt($,10);if(eT.test($))return parseInt($,16);if(eE.test($))return parseInt($,8);throw e$($,"id")}function eX(){if(void 0!==eA)throw e$("package");if(eA=eL(),!eR.test(eA))throw e$(eA,"name");eq=eq.define(eA),eF(";")}function eJ(){var $,ee=eB();switch(ee){case"weak":$=eD||(eD=[]),eL();break;case"public":eL();default:$=eO||(eO=[])}ee=eG(),eF(";"),$.push(ee)}function eZ(){if(eF("="),!(ez="proto3"===(eN=eG()))&&"proto2"!==eN)throw e$(eN,"syntax");eF(";")}function e0($,ee){switch(ee){case"option":return e7($,ee),eF(";"),!0;case"message":return e2($,ee),!0;case"enum":return e9($,ee),!0;case"service":return ts($,ee),!0;case"extend":return tu($,ee),!0}return!1}function e1($,ee,et){var er,en=eM.line;if($&&("string"!=typeof $.comment&&($.comment=eV()),$.filename=eI.filename),eF("{",!0)){for(;"}"!==(er=eL());)ee(er);eF(";",!0)}else et&&et(),eF(";"),$&&("string"!=typeof $.comment||ek)&&($.comment=eV(en)||$.comment)}function e2($,ee){if(!e_.test(ee=eL()))throw e$(ee,"type name");var et=new ei(ee);e1(et,function($){if(!e0(et,$))switch($){case"map":e6(et,$);break;case"required":case"repeated":e4(et,$);break;case"optional":ez?e4(et,"proto3_optional"):e4(et,"optional");break;case"oneof":e5(et,$);break;case"extensions":eK(et.extensions||(et.extensions=[]));break;case"reserved":eK(et.reserved||(et.reserved=[]),!0);break;default:if(!ez||!eR.test($))throw e$($);ej($),e4(et,"optional")}}),$.add(et)}function e4($,ee,et){var er=eL();if("group"===er){e3($,ee);return}for(;er.endsWith(".")||eB().startsWith(".");)er+=eL();if(!eR.test(er))throw e$(er,"type");var en=eL();if(!e_.test(en))throw e$(en,"name");en=eH(en),eF("=");var ei=new es(en,eY(eL()),er,ee,et);if(e1(ei,function($){if("option"===$)e7(ei,$),eF(";");else throw e$($)},function(){ti(ei)}),"proto3_optional"===ee){var eo=new eu("_"+en);ei.setOption("proto3_optional",!0),eo.add(ei),$.add(eo)}else $.add(ei);!ez&&ei.repeated&&(void 0!==eg.packed[er]||void 0===eg.basic[er])&&ei.setOption("packed",!1,!0)}function e3($,ee){var et=eL();if(!e_.test(et))throw e$(et,"name");var er=em.lcFirst(et);et===er&&(et=em.ucFirst(et)),eF("=");var en=eY(eL()),eo=new ei(et);eo.group=!0;var eu=new es(er,en,et,ee);eu.filename=eI.filename,e1(eo,function($){switch($){case"option":e7(eo,$),eF(";");break;case"required":case"repeated":e4(eo,$);break;case"optional":ez?e4(eo,"proto3_optional"):e4(eo,"optional");break;case"message":e2(eo,$);break;case"enum":e9(eo,$);break;default:throw e$($)}}),$.add(eo).add(eu)}function e6($){eF("<");var ee=eL();if(void 0===eg.mapKey[ee])throw e$(ee,"type");eF(",");var et=eL();if(!eR.test(et))throw e$(et,"type");eF(">");var er=eL();if(!e_.test(er))throw e$(er,"name");eF("=");var en=new eo(eH(er),eY(eL()),ee,et);e1(en,function($){if("option"===$)e7(en,$),eF(";");else throw e$($)},function(){ti(en)}),$.add(en)}function e5($,ee){if(!e_.test(ee=eL()))throw e$(ee,"name");var et=new eu(eH(ee));e1(et,function($){"option"===$?(e7(et,$),eF(";")):(ej($),e4(et,"optional"))}),$.add(et)}function e9($,ee){if(!e_.test(ee=eL()))throw e$(ee,"name");var et=new eh(ee);e1(et,function($){switch($){case"option":e7(et,$),eF(";");break;case"reserved":eK(et.reserved||(et.reserved=[]),!0);break;default:e8(et,$)}}),$.add(et)}function e8($,ee){if(!e_.test(ee))throw e$(ee,"name");eF("=");var et=eY(eL(),!0),er={options:void 0};er.setOption=function($,ee){void 0===this.options&&(this.options={}),this.options[$]=ee},e1(er,function($){if("option"===$)e7(er,$),eF(";");else throw e$($)},function(){ti(er)}),$.add(ee,et,er.comment,er.options)}function e7($,ee){var et,er=eF("(",!0);if(!eR.test(ee=eL()))throw e$(ee,"name");var en=ee,ei=en;er&&(eF(")"),ei=en="("+en+")",ee=eB(),ex.test(ee)&&(et=ee.slice(1),en+=ee,eL())),eF("=");var es=te($,en);tr($,ei,es,et)}function te($,ee){if(eF("{",!0)){for(var et={};!eF("}",!0);){if(!e_.test(eP=eL()))throw e$(eP,"name");if(null===eP)throw e$(eP,"end of input");var er,en,ei=eP;if(eF(":",!0),"{"===eB())er=te($,ee+"."+eP);else if("["===eB()){if(er=[],eF("[",!0)){do en=eW(!0),er.push(en);while(eF(",",!0));eF("]"),void 0!==en&&tt($,ee+"."+eP,en)}}else er=eW(!0),tt($,ee+"."+eP,er);var es=et[ei];es&&(er=[].concat(es).concat(er)),et[ei]=er,eF(",",!0),eF(";",!0)}return et}var eo=eW(!0);return tt($,ee,eo),eo}function tt($,ee,et){$.setOption&&$.setOption(ee,et)}function tr($,ee,et,er){$.setParsedOption&&$.setParsedOption(ee,et,er)}function ti($){if(eF("[",!0)){do e7($,"option");while(eF(",",!0));eF("]")}return $}function ts($,ee){if(!e_.test(ee=eL()))throw e$(ee,"service name");var et=new ef(ee);e1(et,function($){if(!e0(et,$)){if("rpc"===$)tl(et,$);else throw e$($)}}),$.add(et)}function tl($,ee){var et=eV(),er=ee;if(!e_.test(ee=eL()))throw e$(ee,"name");var en,ei,es,eo,eu=ee;if(eF("("),eF("stream",!0)&&(ei=!0),!eR.test(ee=eL())||(en=ee,eF(")"),eF("returns"),eF("("),eF("stream",!0)&&(eo=!0),!eR.test(ee=eL())))throw e$(ee);es=ee,eF(")");var eh=new ep(eu,er,en,es,ei,eo);eh.comment=et,e1(eh,function($){if("option"===$)e7(eh,$),eF(";");else throw e$($)}),$.add(eh)}function tu($,ee){if(!eR.test(ee=eL()))throw e$(ee,"reference");var et=ee;e1(null,function(ee){switch(ee){case"required":case"repeated":e4($,ee,et);break;case"optional":ez?e4($,"proto3_optional",et):e4($,"optional",et);break;default:if(!ez||!eR.test(ee))throw e$(ee);ej(ee),e4($,"optional",et)}})}for(;null!==(eP=eL());)switch(eP){case"package":if(!eU)throw e$(eP);eX();break;case"import":if(!eU)throw e$(eP);eJ();break;case"syntax":if(!eU)throw e$(eP);eZ();break;case"option":e7(eq,eP),eF(";");break;default:if(e0(eq,eP)){eU=!1;continue}throw e$(eP)}return eI.filename=null,{package:eA,imports:eO,weakImports:eD,syntax:eN,root:ee}}},8645:($,ee,et)=>{"use strict";$.exports=eu;var er,en=et(6416),ei=en.LongBits,es=en.utf8;function eo($,ee){return RangeError("index out of range: "+$.pos+" + "+(ee||1)+" > "+$.len)}function eu($){this.buf=$,this.pos=0,this.len=$.length}var eh="undefined"!=typeof Uint8Array?function($){if($ instanceof Uint8Array||Array.isArray($))return new eu($);throw Error("illegal buffer")}:function($){if(Array.isArray($))return new eu($);throw Error("illegal buffer")},ef=function(){return en.Buffer?function($){return(eu.create=function($){return en.Buffer.isBuffer($)?new er($):eh($)})($)}:eh};function ep(){var $=new ei(0,0),ee=0;if(this.len-this.pos>4){for(;ee<4;++ee)if($.lo=($.lo|(127&this.buf[this.pos])<<7*ee)>>>0,this.buf[this.pos++]<128)return $;if($.lo=($.lo|(127&this.buf[this.pos])<<28)>>>0,$.hi=($.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return $;ee=0}else{for(;ee<3;++ee){if(this.pos>=this.len)throw eo(this);if($.lo=($.lo|(127&this.buf[this.pos])<<7*ee)>>>0,this.buf[this.pos++]<128)return $}return $.lo=($.lo|(127&this.buf[this.pos++])<<7*ee)>>>0,$}if(this.len-this.pos>4){for(;ee<5;++ee)if($.hi=($.hi|(127&this.buf[this.pos])<<7*ee+3)>>>0,this.buf[this.pos++]<128)return $}else for(;ee<5;++ee){if(this.pos>=this.len)throw eo(this);if($.hi=($.hi|(127&this.buf[this.pos])<<7*ee+3)>>>0,this.buf[this.pos++]<128)return $}throw Error("invalid varint encoding")}function eg($,ee){return($[ee-4]|$[ee-3]<<8|$[ee-2]<<16|$[ee-1]<<24)>>>0}function em(){if(this.pos+8>this.len)throw eo(this,8);return new ei(eg(this.buf,this.pos+=4),eg(this.buf,this.pos+=4))}eu.create=ef(),eu.prototype._slice=en.Array.prototype.subarray||en.Array.prototype.slice,eu.prototype.uint32=function(){var $=4294967295;return function(){if($=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||($=($|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||($=($|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||($=($|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||($=($|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return $;if((this.pos+=5)>this.len)throw this.pos=this.len,eo(this,10);return $}}(),eu.prototype.int32=function(){return 0|this.uint32()},eu.prototype.sint32=function(){var $=this.uint32();return $>>>1^-(1&$)|0},eu.prototype.bool=function(){return 0!==this.uint32()},eu.prototype.fixed32=function(){if(this.pos+4>this.len)throw eo(this,4);return eg(this.buf,this.pos+=4)},eu.prototype.sfixed32=function(){if(this.pos+4>this.len)throw eo(this,4);return 0|eg(this.buf,this.pos+=4)},eu.prototype.float=function(){if(this.pos+4>this.len)throw eo(this,4);var $=en.float.readFloatLE(this.buf,this.pos);return this.pos+=4,$},eu.prototype.double=function(){if(this.pos+8>this.len)throw eo(this,4);var $=en.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,$},eu.prototype.bytes=function(){var $=this.uint32(),ee=this.pos,et=this.pos+$;if(et>this.len)throw eo(this,$);if(this.pos+=$,Array.isArray(this.buf))return this.buf.slice(ee,et);if(ee===et){var er=en.Buffer;return er?er.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,ee,et)},eu.prototype.string=function(){var $=this.bytes();return es.read($,0,$.length)},eu.prototype.skip=function($){if("number"==typeof $){if(this.pos+$>this.len)throw eo(this,$);this.pos+=$}else do if(this.pos>=this.len)throw eo(this);while(128&this.buf[this.pos++]);return this},eu.prototype.skipType=function($){switch($){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=($=7&this.uint32());)this.skipType($);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+$+" at offset "+this.pos)}return this},eu._configure=function($){er=$,eu.create=ef(),er._configure();var ee=en.Long?"toLong":"toNumber";en.merge(eu.prototype,{int64:function(){return ep.call(this)[ee](!1)},uint64:function(){return ep.call(this)[ee](!0)},sint64:function(){return ep.call(this).zzDecode()[ee](!1)},fixed64:function(){return em.call(this)[ee](!0)},sfixed64:function(){return em.call(this)[ee](!1)}})}},2126:($,ee,et)=>{"use strict";$.exports=ei;var er=et(8645);(ei.prototype=Object.create(er.prototype)).constructor=ei;var en=et(6416);function ei($){er.call(this,$)}ei._configure=function(){en.Buffer&&(ei.prototype._slice=en.Buffer.prototype.slice)},ei.prototype.string=function(){var $=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+$,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+$,this.len))},ei._configure()},4955:($,ee,et)=>{"use strict";$.exports=ep;var er,en,ei,es=et(4622);((ep.prototype=Object.create(es.prototype)).constructor=ep).className="Root";var eo=et(2548),eu=et(5519),eh=et(5677),ef=et(8289);function ep($){es.call(this,"",$),this.deferred=[],this.files=[]}function eg(){}ep.fromJSON=function($,ee){return ee||(ee=new ep),$.options&&ee.setOptions($.options),ee.addJSON($.nested)},ep.prototype.resolvePath=ef.path.resolve,ep.prototype.fetch=ef.fetch,ep.prototype.load=function $(ee,et,er){"function"==typeof et&&(er=et,et=void 0);var es=this;if(!er)return ef.asPromise($,es,ee,et);var eo=er===eg;function eu($,ee){if(er){if(eo)throw $;var et=er;er=null,et($,ee)}}function eh($){var ee=$.lastIndexOf("google/protobuf/");if(ee>-1){var et=$.substring(ee);if(et in ei)return et}return null}function ep($,ee){try{if(ef.isString(ee)&&"{"===ee.charAt(0)&&(ee=JSON.parse(ee)),ef.isString(ee)){en.filename=$;var er,ei=en(ee,es,et),ep=0;if(ei.imports)for(;ep<ei.imports.length;++ep)(er=eh(ei.imports[ep])||es.resolvePath($,ei.imports[ep]))&&em(er);if(ei.weakImports)for(ep=0;ep<ei.weakImports.length;++ep)(er=eh(ei.weakImports[ep])||es.resolvePath($,ei.weakImports[ep]))&&em(er,!0)}else es.setOptions(ee.options).addJSON(ee.nested)}catch($){eu($)}eo||ey||eu(null,es)}function em($,ee){if($=eh($)||$,!(es.files.indexOf($)>-1)){if(es.files.push($),$ in ei){eo?ep($,ei[$]):(++ey,setTimeout(function(){--ey,ep($,ei[$])}));return}if(eo){var et;try{et=ef.fs.readFileSync($).toString("utf8")}catch($){ee||eu($);return}ep($,et)}else++ey,es.fetch($,function(et,en){if(--ey,er){if(et){ee?ey||eu(null,es):eu(et);return}ep($,en)}})}}var ey=0;ef.isString(ee)&&(ee=[ee]);for(var ev,eS=0;eS<ee.length;++eS)(ev=es.resolvePath("",ee[eS]))&&em(ev);if(eo)return es;ey||eu(null,es)},ep.prototype.loadSync=function($,ee){if(!ef.isNode)throw Error("not supported");return this.load($,ee,eg)},ep.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function($){return"'extend "+$.extend+"' in "+$.parent.fullName}).join(", "));return es.prototype.resolveAll.call(this)};var em=/^[A-Z]/;function ey($,ee){var et=ee.parent.lookup(ee.extend);if(et){var er=new eo(ee.fullName,ee.id,ee.type,ee.rule,void 0,ee.options);return!!et.get(er.name)||(er.declaringField=ee,ee.extensionField=er,et.add(er),!0)}return!1}ep.prototype._handleAdd=function($){if($ instanceof eo)void 0===$.extend||$.extensionField||ey(this,$)||this.deferred.push($);else if($ instanceof eu)em.test($.name)&&($.parent[$.name]=$.values);else if(!($ instanceof eh)){if($ instanceof er)for(var ee=0;ee<this.deferred.length;)ey(this,this.deferred[ee])?this.deferred.splice(ee,1):++ee;for(var et=0;et<$.nestedArray.length;++et)this._handleAdd($._nestedArray[et]);em.test($.name)&&($.parent[$.name]=$)}},ep.prototype._handleRemove=function($){if($ instanceof eo){if(void 0!==$.extend){if($.extensionField)$.extensionField.parent.remove($.extensionField),$.extensionField=null;else{var ee=this.deferred.indexOf($);ee>-1&&this.deferred.splice(ee,1)}}}else if($ instanceof eu)em.test($.name)&&delete $.parent[$.name];else if($ instanceof es){for(var et=0;et<$.nestedArray.length;++et)this._handleRemove($._nestedArray[et]);em.test($.name)&&delete $.parent[$.name]}},ep._configure=function($,ee,et){er=$,en=ee,ei=et}},3675:$=>{"use strict";$.exports={}},4415:($,ee,et)=>{"use strict";ee.Service=et(9861)},9861:($,ee,et)=>{"use strict";$.exports=en;var er=et(6416);function en($,ee,et){if("function"!=typeof $)throw TypeError("rpcImpl must be a function");er.EventEmitter.call(this),this.rpcImpl=$,this.requestDelimited=!!ee,this.responseDelimited=!!et}(en.prototype=Object.create(er.EventEmitter.prototype)).constructor=en,en.prototype.rpcCall=function $(ee,et,en,ei,es){if(!ei)throw TypeError("request must be specified");var eo=this;if(!es)return er.asPromise($,eo,ee,et,en,ei);if(!eo.rpcImpl){setTimeout(function(){es(Error("already ended"))},0);return}try{return eo.rpcImpl(ee,et[eo.requestDelimited?"encodeDelimited":"encode"](ei).finish(),function($,et){if($)return eo.emit("error",$,ee),es($);if(null===et){eo.end(!0);return}if(!(et instanceof en))try{et=en[eo.responseDelimited?"decodeDelimited":"decode"](et)}catch($){return eo.emit("error",$,ee),es($)}return eo.emit("data",et,ee),es(null,et)})}catch($){eo.emit("error",$,ee),setTimeout(function(){es($)},0);return}},en.prototype.end=function($){return this.rpcImpl&&($||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},6962:($,ee,et)=>{"use strict";$.exports=eo;var er=et(4622);((eo.prototype=Object.create(er.prototype)).constructor=eo).className="Service";var en=et(1670),ei=et(8289),es=et(4415);function eo($,ee){er.call(this,$,ee),this.methods={},this._methodsArray=null}function eu($){return $._methodsArray=null,$}eo.fromJSON=function($,ee){var et=new eo($,ee.options);if(ee.methods)for(var er=Object.keys(ee.methods),ei=0;ei<er.length;++ei)et.add(en.fromJSON(er[ei],ee.methods[er[ei]]));return ee.nested&&et.addJSON(ee.nested),et.comment=ee.comment,et},eo.prototype.toJSON=function($){var ee=er.prototype.toJSON.call(this,$),et=!!$&&!!$.keepComments;return ei.toObject(["options",ee&&ee.options||void 0,"methods",er.arrayToJSON(this.methodsArray,$)||{},"nested",ee&&ee.nested||void 0,"comment",et?this.comment:void 0])},Object.defineProperty(eo.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=ei.toArray(this.methods))}}),eo.prototype.get=function($){return this.methods[$]||er.prototype.get.call(this,$)},eo.prototype.resolveAll=function(){for(var $=this.methodsArray,ee=0;ee<$.length;++ee)$[ee].resolve();return er.prototype.resolve.call(this)},eo.prototype.add=function($){if(this.get($.name))throw Error("duplicate name '"+$.name+"' in "+this);return $ instanceof en?(this.methods[$.name]=$,$.parent=this,eu(this)):er.prototype.add.call(this,$)},eo.prototype.remove=function($){if($ instanceof en){if(this.methods[$.name]!==$)throw Error($+" is not a member of "+this);return delete this.methods[$.name],$.parent=null,eu(this)}return er.prototype.remove.call(this,$)},eo.prototype.create=function($,ee,et){for(var er,en=new es.Service($,ee,et),eo=0;eo<this.methodsArray.length;++eo){var eu=ei.lcFirst((er=this._methodsArray[eo]).resolve().name).replace(/[^$\w_]/g,"");en[eu]=ei.codegen(["r","c"],ei.isReserved(eu)?eu+"_":eu)("return this.rpcCall(m,q,s,r,c)")({m:er,q:er.resolvedRequestType.ctor,s:er.resolvedResponseType.ctor})}return en}},9468:$=>{"use strict";$.exports=ep;var ee=/[\s{}=;:[\],'"()<>]/g,et=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,er=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,en=/^ *[*/]+ */,ei=/^\s*\*?\/*/,es=/\n/g,eo=/\s/,eu=/\\(.?)/g,eh={0:"\x00",r:"\r",n:"\n",t:"	"};function ef($){return $.replace(eu,function($,ee){switch(ee){case"\\":case"":return ee;default:return eh[ee]||""}})}function ep($,eu){$=$.toString();var eh=0,ep=$.length,eg=1,em=0,ey={},ev=[],eS=null;function eT($){return Error("illegal "+$+" (line "+eg+")")}function ew(){var ee="'"===eS?er:et;ee.lastIndex=eh-1;var en=ee.exec($);if(!en)throw eT("string");return eh=ee.lastIndex,eI(eS),eS=null,ef(en[1])}function eE(ee){return $.charAt(ee)}function eC(ee,et,er){var eo,eh,ef={type:$.charAt(ee++),lineEmpty:!1,leading:er},ep=ee-(eo=eu?2:3);do if(--ep<0||"\n"===(eh=$.charAt(ep))){ef.lineEmpty=!0;break}while(" "===eh||"	"===eh);for(var ev=$.substring(ee,et).split(es),eS=0;eS<ev.length;++eS)ev[eS]=ev[eS].replace(eu?ei:en,"").trim();ef.text=ev.join("\n").trim(),ey[eg]=ef,em=eg}function e_(ee){var et=eR(ee),er=$.substring(ee,et);return/^\s*\/\//.test(er)}function eR($){for(var ee=$;ee<ep&&"\n"!==eE(ee);)ee++;return ee}function ex(){if(ev.length>0)return ev.shift();if(eS)return ew();var et,er,en,ei,es,ef=0===eh;do{if(eh===ep)return null;for(et=!1;eo.test(en=eE(eh));)if("\n"===en&&(ef=!0,++eg),++eh===ep)return null;if("/"===eE(eh)){if(++eh===ep)throw eT("comment");if("/"===eE(eh)){if(eu){if(ei=eh,es=!1,e_(eh-1)){es=!0;do if((eh=eR(eh))===ep||(eh++,!ef))break;while(e_(eh))}else eh=Math.min(ep,eR(eh)+1);es&&(eC(ei,eh,ef),ef=!0),eg++,et=!0}else{for(es="/"===eE(ei=eh+1);"\n"!==eE(++eh);)if(eh===ep)return null;++eh,es&&(eC(ei,eh-1,ef),ef=!0),++eg,et=!0}}else{if("*"!==(en=eE(eh)))return"/";ei=eh+1,es=eu||"*"===eE(ei);do{if("\n"===en&&++eg,++eh===ep)throw eT("comment");er=en,en=eE(eh)}while("*"!==er||"/"!==en);++eh,es&&(eC(ei,eh-2,ef),ef=!0),et=!0}}}while(et);var em=eh;if(ee.lastIndex=0,!ee.test(eE(em++)))for(;em<ep&&!ee.test(eE(em));)++em;var ey=$.substring(eh,eh=em);return('"'===ey||"'"===ey)&&(eS=ey),ey}function eI($){ev.push($)}function eP(){if(!ev.length){var $=ex();if(null===$)return null;eI($)}return ev[0]}function eA($,ee){var et=eP();if(et===$)return ex(),!0;if(!ee)throw eT("token '"+et+"', '"+$+"' expected");return!1}function eO($){var ee,et=null;return void 0===$?(ee=ey[eg-1],delete ey[eg-1],ee&&(eu||"*"===ee.type||ee.lineEmpty)&&(et=ee.leading?ee.text:null)):(em<$&&eP(),ee=ey[$],delete ey[$],ee&&!ee.lineEmpty&&(eu||"/"===ee.type)&&(et=ee.leading?null:ee.text)),et}return Object.defineProperty({next:ex,peek:eP,push:eI,skip:eA,cmnt:eO},"line",{get:function(){return eg}})}ep.unescape=ef},9396:($,ee,et)=>{"use strict";$.exports=ew;var er=et(4622);((ew.prototype=Object.create(er.prototype)).constructor=ew).className="Type";var en=et(5519),ei=et(5677),es=et(2548),eo=et(372),eu=et(6962),eh=et(5326),ef=et(8645),ep=et(7474),eg=et(8289),em=et(7337),ey=et(8983),ev=et(1181),eS=et(5944),eT=et(2969);function ew($,ee){er.call(this,$,ee),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function eE($){return $._fieldsById=$._fieldsArray=$._oneofsArray=null,delete $.encode,delete $.decode,delete $.verify,$}Object.defineProperties(ew.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var $=Object.keys(this.fields),ee=0;ee<$.length;++ee){var et=this.fields[$[ee]],er=et.id;if(this._fieldsById[er])throw Error("duplicate id "+er+" in "+this);this._fieldsById[er]=et}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=eg.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=eg.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=ew.generateConstructor(this)())},set:function($){var ee=$.prototype;ee instanceof eh||(($.prototype=new eh).constructor=$,eg.merge($.prototype,ee)),$.$type=$.prototype.$type=this,eg.merge($,eh,!0),this._ctor=$;for(var et=0;et<this.fieldsArray.length;++et)this._fieldsArray[et].resolve();var er={};for(et=0;et<this.oneofsArray.length;++et)er[this._oneofsArray[et].resolve().name]={get:eg.oneOfGetter(this._oneofsArray[et].oneof),set:eg.oneOfSetter(this._oneofsArray[et].oneof)};et&&Object.defineProperties($.prototype,er)}}}),ew.generateConstructor=function($){for(var ee,et=eg.codegen(["p"],$.name),er=0;er<$.fieldsArray.length;++er)(ee=$._fieldsArray[er]).map?et("this%s={}",eg.safeProp(ee.name)):ee.repeated&&et("this%s=[]",eg.safeProp(ee.name));return et("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},ew.fromJSON=function($,ee){var et=new ew($,ee.options);et.extensions=ee.extensions,et.reserved=ee.reserved;for(var eh=Object.keys(ee.fields),ef=0;ef<eh.length;++ef)et.add((void 0!==ee.fields[eh[ef]].keyType?eo.fromJSON:es.fromJSON)(eh[ef],ee.fields[eh[ef]]));if(ee.oneofs)for(eh=Object.keys(ee.oneofs),ef=0;ef<eh.length;++ef)et.add(ei.fromJSON(eh[ef],ee.oneofs[eh[ef]]));if(ee.nested)for(eh=Object.keys(ee.nested),ef=0;ef<eh.length;++ef){var ep=ee.nested[eh[ef]];et.add((void 0!==ep.id?es.fromJSON:void 0!==ep.fields?ew.fromJSON:void 0!==ep.values?en.fromJSON:void 0!==ep.methods?eu.fromJSON:er.fromJSON)(eh[ef],ep))}return ee.extensions&&ee.extensions.length&&(et.extensions=ee.extensions),ee.reserved&&ee.reserved.length&&(et.reserved=ee.reserved),ee.group&&(et.group=!0),ee.comment&&(et.comment=ee.comment),et},ew.prototype.toJSON=function($){var ee=er.prototype.toJSON.call(this,$),et=!!$&&!!$.keepComments;return eg.toObject(["options",ee&&ee.options||void 0,"oneofs",er.arrayToJSON(this.oneofsArray,$),"fields",er.arrayToJSON(this.fieldsArray.filter(function($){return!$.declaringField}),$)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",ee&&ee.nested||void 0,"comment",et?this.comment:void 0])},ew.prototype.resolveAll=function(){for(var $=this.fieldsArray,ee=0;ee<$.length;)$[ee++].resolve();var et=this.oneofsArray;for(ee=0;ee<et.length;)et[ee++].resolve();return er.prototype.resolveAll.call(this)},ew.prototype.get=function($){return this.fields[$]||this.oneofs&&this.oneofs[$]||this.nested&&this.nested[$]||null},ew.prototype.add=function($){if(this.get($.name))throw Error("duplicate name '"+$.name+"' in "+this);if($ instanceof es&&void 0===$.extend){if(this._fieldsById?this._fieldsById[$.id]:this.fieldsById[$.id])throw Error("duplicate id "+$.id+" in "+this);if(this.isReservedId($.id))throw Error("id "+$.id+" is reserved in "+this);if(this.isReservedName($.name))throw Error("name '"+$.name+"' is reserved in "+this);return $.parent&&$.parent.remove($),this.fields[$.name]=$,$.message=this,$.onAdd(this),eE(this)}return $ instanceof ei?(this.oneofs||(this.oneofs={}),this.oneofs[$.name]=$,$.onAdd(this),eE(this)):er.prototype.add.call(this,$)},ew.prototype.remove=function($){if($ instanceof es&&void 0===$.extend){if(!this.fields||this.fields[$.name]!==$)throw Error($+" is not a member of "+this);return delete this.fields[$.name],$.parent=null,$.onRemove(this),eE(this)}if($ instanceof ei){if(!this.oneofs||this.oneofs[$.name]!==$)throw Error($+" is not a member of "+this);return delete this.oneofs[$.name],$.parent=null,$.onRemove(this),eE(this)}return er.prototype.remove.call(this,$)},ew.prototype.isReservedId=function($){return er.isReservedId(this.reserved,$)},ew.prototype.isReservedName=function($){return er.isReservedName(this.reserved,$)},ew.prototype.create=function($){return new this.ctor($)},ew.prototype.setup=function(){for(var $=this.fullName,ee=[],et=0;et<this.fieldsArray.length;++et)ee.push(this._fieldsArray[et].resolve().resolvedType);this.encode=em(this)({Writer:ep,types:ee,util:eg}),this.decode=ey(this)({Reader:ef,types:ee,util:eg}),this.verify=ev(this)({types:ee,util:eg}),this.fromObject=eS.fromObject(this)({types:ee,util:eg}),this.toObject=eS.toObject(this)({types:ee,util:eg});var er=eT[$];if(er){var en=Object.create(this);en.fromObject=this.fromObject,this.fromObject=er.fromObject.bind(en),en.toObject=this.toObject,this.toObject=er.toObject.bind(en)}return this},ew.prototype.encode=function($,ee){return this.setup().encode($,ee)},ew.prototype.encodeDelimited=function($,ee){return this.encode($,ee&&ee.len?ee.fork():ee).ldelim()},ew.prototype.decode=function($,ee){return this.setup().decode($,ee)},ew.prototype.decodeDelimited=function($){return $ instanceof ef||($=ef.create($)),this.decode($,$.uint32())},ew.prototype.verify=function($){return this.setup().verify($)},ew.prototype.fromObject=function($){return this.setup().fromObject($)},ew.prototype.toObject=function($,ee){return this.setup().toObject($,ee)},ew.d=function($){return function(ee){eg.decorateType(ee,$)}}},1627:($,ee,et)=>{"use strict";var er=ee,en=et(8289),ei=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function es($,ee){var et=0,er={};for(ee|=0;et<$.length;)er[ei[et+ee]]=$[et++];return er}er.basic=es([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),er.defaults=es([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",en.emptyArray,null]),er.long=es([0,0,0,1,1],7),er.mapKey=es([0,0,0,5,5,0,0,0,1,1,0,2],2),er.packed=es([1,5,0,0,0,5,5,0,0,0,1,1,0])},8289:($,ee,et)=>{"use strict";var er,en,ei=$.exports=et(6416),es=et(3675);ei.codegen=et(2012),ei.fetch=et(3035),ei.path=et(9986),ei.fs=ei.inquire("fs"),ei.toArray=function($){if($){for(var ee=Object.keys($),et=Array(ee.length),er=0;er<ee.length;)et[er]=$[ee[er++]];return et}return[]},ei.toObject=function($){for(var ee={},et=0;et<$.length;){var er=$[et++],en=$[et++];void 0!==en&&(ee[er]=en)}return ee};var eo=/\\/g,eu=/"/g;ei.isReserved=function($){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test($)},ei.safeProp=function($){return!/^[$\w_]+$/.test($)||ei.isReserved($)?'["'+$.replace(eo,"\\\\").replace(eu,'\\"')+'"]':"."+$},ei.ucFirst=function($){return $.charAt(0).toUpperCase()+$.substring(1)};var eh=/_([a-z])/g;ei.camelCase=function($){return $.substring(0,1)+$.substring(1).replace(eh,function($,ee){return ee.toUpperCase()})},ei.compareFieldsById=function($,ee){return $.id-ee.id},ei.decorateType=function($,ee){if($.$type)return ee&&$.$type.name!==ee&&(ei.decorateRoot.remove($.$type),$.$type.name=ee,ei.decorateRoot.add($.$type)),$.$type;er||(er=et(9396));var en=new er(ee||$.name);return ei.decorateRoot.add(en),en.ctor=$,Object.defineProperty($,"$type",{value:en,enumerable:!1}),Object.defineProperty($.prototype,"$type",{value:en,enumerable:!1}),en};var ef=0;ei.decorateEnum=function($){if($.$type)return $.$type;en||(en=et(5519));var ee=new en("Enum"+ef++,$);return ei.decorateRoot.add(ee),Object.defineProperty($,"$type",{value:ee,enumerable:!1}),ee},ei.setProperty=function($,ee,et){function er($,ee,et){var en=ee.shift();if("__proto__"===en||"prototype"===en)return $;if(ee.length>0)$[en]=er($[en]||{},ee,et);else{var ei=$[en];ei&&(et=[].concat(ei).concat(et)),$[en]=et}return $}if("object"!=typeof $)throw TypeError("dst must be an object");if(!ee)throw TypeError("path must be specified");return er($,ee=ee.split("."),et)},Object.defineProperty(ei,"decorateRoot",{get:function(){return es.decorated||(es.decorated=new(et(4955)))}})},9535:($,ee,et)=>{"use strict";$.exports=en;var er=et(6416);function en($,ee){this.lo=$>>>0,this.hi=ee>>>0}var ei=en.zero=new en(0,0);ei.toNumber=function(){return 0},ei.zzEncode=ei.zzDecode=function(){return this},ei.length=function(){return 1};var es=en.zeroHash="\x00\x00\x00\x00\x00\x00\x00\x00";en.fromNumber=function($){if(0===$)return ei;var ee=$<0;ee&&($=-$);var et=$>>>0,er=($-et)/4294967296>>>0;return ee&&(er=~er>>>0,et=~et>>>0,++et>4294967295&&(et=0,++er>4294967295&&(er=0))),new en(et,er)},en.from=function($){if("number"==typeof $)return en.fromNumber($);if(er.isString($)){if(!er.Long)return en.fromNumber(parseInt($,10));$=er.Long.fromString($)}return $.low||$.high?new en($.low>>>0,$.high>>>0):ei},en.prototype.toNumber=function($){if(!$&&this.hi>>>31){var ee=~this.lo+1>>>0,et=~this.hi>>>0;return ee||(et=et+1>>>0),-(ee+4294967296*et)}return this.lo+4294967296*this.hi},en.prototype.toLong=function($){return er.Long?new er.Long(0|this.lo,0|this.hi,!!$):{low:0|this.lo,high:0|this.hi,unsigned:!!$}};var eo=String.prototype.charCodeAt;en.fromHash=function($){return $===es?ei:new en((eo.call($,0)|eo.call($,1)<<8|eo.call($,2)<<16|eo.call($,3)<<24)>>>0,(eo.call($,4)|eo.call($,5)<<8|eo.call($,6)<<16|eo.call($,7)<<24)>>>0)},en.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},en.prototype.zzEncode=function(){var $=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^$)>>>0,this.lo=(this.lo<<1^$)>>>0,this},en.prototype.zzDecode=function(){var $=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^$)>>>0,this.hi=(this.hi>>>1^$)>>>0,this},en.prototype.length=function(){var $=this.lo,ee=(this.lo>>>28|this.hi<<4)>>>0,et=this.hi>>>24;return 0===et?0===ee?$<16384?$<128?1:2:$<2097152?3:4:ee<16384?ee<128?5:6:ee<2097152?7:8:et<128?9:10}},6416:function($,ee,et){"use strict";var er=ee;function en($,ee,et){for(var er=Object.keys(ee),en=0;en<er.length;++en)void 0!==$[er[en]]&&et||($[er[en]]=ee[er[en]]);return $}function ei($){function ee($,et){if(!(this instanceof ee))return new ee($,et);Object.defineProperty(this,"message",{get:function(){return $}}),Error.captureStackTrace?Error.captureStackTrace(this,ee):Object.defineProperty(this,"stack",{value:Error().stack||""}),et&&en(this,et)}return ee.prototype=Object.create(Error.prototype,{constructor:{value:ee,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return $},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),ee}er.asPromise=et(799),er.base64=et(2130),er.EventEmitter=et(854),er.float=et(4324),er.inquire=et(449),er.utf8=et(8131),er.pool=et(6035),er.LongBits=et(9535),er.isNode=!!("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),er.global=er.isNode&&global||"undefined"!=typeof self&&self||this,er.emptyArray=Object.freeze?Object.freeze([]):[],er.emptyObject=Object.freeze?Object.freeze({}):{},er.isInteger=Number.isInteger||function($){return"number"==typeof $&&isFinite($)&&Math.floor($)===$},er.isString=function($){return"string"==typeof $||$ instanceof String},er.isObject=function($){return $&&"object"==typeof $},er.isset=er.isSet=function($,ee){var et=$[ee];return!!(null!=et&&$.hasOwnProperty(ee))&&("object"!=typeof et||(Array.isArray(et)?et.length:Object.keys(et).length)>0)},er.Buffer=function(){try{var $=er.inquire("buffer").Buffer;return $.prototype.utf8Write?$:null}catch($){return null}}(),er._Buffer_from=null,er._Buffer_allocUnsafe=null,er.newBuffer=function($){return"number"==typeof $?er.Buffer?er._Buffer_allocUnsafe($):new er.Array($):er.Buffer?er._Buffer_from($):"undefined"==typeof Uint8Array?$:new Uint8Array($)},er.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,er.Long=er.global.dcodeIO&&er.global.dcodeIO.Long||er.global.Long||er.inquire("long"),er.key2Re=/^true|false|0|1$/,er.key32Re=/^-?(?:0|[1-9][0-9]*)$/,er.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,er.longToHash=function($){return $?er.LongBits.from($).toHash():er.LongBits.zeroHash},er.longFromHash=function($,ee){var et=er.LongBits.fromHash($);return er.Long?er.Long.fromBits(et.lo,et.hi,ee):et.toNumber(!!ee)},er.merge=en,er.lcFirst=function($){return $.charAt(0).toLowerCase()+$.substring(1)},er.newError=ei,er.ProtocolError=ei("ProtocolError"),er.oneOfGetter=function($){for(var ee={},et=0;et<$.length;++et)ee[$[et]]=1;return function(){for(var $=Object.keys(this),et=$.length-1;et>-1;--et)if(1===ee[$[et]]&&void 0!==this[$[et]]&&null!==this[$[et]])return $[et]}},er.oneOfSetter=function($){return function(ee){for(var et=0;et<$.length;++et)$[et]!==ee&&delete this[$[et]]}},er.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},er._configure=function(){var $=er.Buffer;if(!$){er._Buffer_from=er._Buffer_allocUnsafe=null;return}er._Buffer_from=$.from!==Uint8Array.from&&$.from||function(ee,et){return new $(ee,et)},er._Buffer_allocUnsafe=$.allocUnsafe||function(ee){return new $(ee)}}},1181:($,ee,et)=>{"use strict";$.exports=eu;var er=et(5519),en=et(8289);function ei($,ee){return $.name+": "+ee+($.repeated&&"array"!==ee?"[]":$.map&&"object"!==ee?"{k:"+$.keyType+"}":"")+" expected"}function es($,ee,et,en){if(ee.resolvedType){if(ee.resolvedType instanceof er){$("switch(%s){",en)("default:")("return%j",ei(ee,"enum value"));for(var es=Object.keys(ee.resolvedType.values),eo=0;eo<es.length;++eo)$("case %i:",ee.resolvedType.values[es[eo]]);$("break")("}")}else $("{")("var e=types[%i].verify(%s);",et,en)("if(e)")("return%j+e",ee.name+".")("}")}else switch(ee.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":$("if(!util.isInteger(%s))",en)("return%j",ei(ee,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":$("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",en,en,en,en)("return%j",ei(ee,"integer|Long"));break;case"float":case"double":$('if(typeof %s!=="number")',en)("return%j",ei(ee,"number"));break;case"bool":$('if(typeof %s!=="boolean")',en)("return%j",ei(ee,"boolean"));break;case"string":$("if(!util.isString(%s))",en)("return%j",ei(ee,"string"));break;case"bytes":$('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',en,en,en)("return%j",ei(ee,"buffer"))}return $}function eo($,ee,et){switch(ee.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":$("if(!util.key32Re.test(%s))",et)("return%j",ei(ee,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":$("if(!util.key64Re.test(%s))",et)("return%j",ei(ee,"integer|Long key"));break;case"bool":$("if(!util.key2Re.test(%s))",et)("return%j",ei(ee,"boolean key"))}return $}function eu($){var ee=en.codegen(["m"],$.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),et=$.oneofsArray,er={};et.length&&ee("var p={}");for(var eu=0;eu<$.fieldsArray.length;++eu){var eh=$._fieldsArray[eu].resolve(),ef="m"+en.safeProp(eh.name);if(eh.optional&&ee("if(%s!=null&&m.hasOwnProperty(%j)){",ef,eh.name),eh.map)ee("if(!util.isObject(%s))",ef)("return%j",ei(eh,"object"))("var k=Object.keys(%s)",ef)("for(var i=0;i<k.length;++i){"),eo(ee,eh,"k[i]"),es(ee,eh,eu,ef+"[k[i]]")("}");else if(eh.repeated)ee("if(!Array.isArray(%s))",ef)("return%j",ei(eh,"array"))("for(var i=0;i<%s.length;++i){",ef),es(ee,eh,eu,ef+"[i]")("}");else{if(eh.partOf){var ep=en.safeProp(eh.partOf.name);1===er[eh.partOf.name]&&ee("if(p%s===1)",ep)("return%j",eh.partOf.name+": multiple values"),er[eh.partOf.name]=1,ee("p%s=1",ep)}es(ee,eh,eu,ef)}eh.optional&&ee("}")}return ee("return null")}},2969:($,ee,et)=>{"use strict";var er=ee,en=et(5326);er[".google.protobuf.Any"]={fromObject:function($){if($&&$["@type"]){var ee=$["@type"].substring($["@type"].lastIndexOf("/")+1),et=this.lookup(ee);if(et){var er="."===$["@type"].charAt(0)?$["@type"].slice(1):$["@type"];return -1===er.indexOf("/")&&(er="/"+er),this.create({type_url:er,value:et.encode(et.fromObject($)).finish()})}}return this.fromObject($)},toObject:function($,ee){var et="type.googleapis.com/",er="",ei="";if(ee&&ee.json&&$.type_url&&$.value){ei=$.type_url.substring($.type_url.lastIndexOf("/")+1),er=$.type_url.substring(0,$.type_url.lastIndexOf("/")+1);var es=this.lookup(ei);es&&($=es.decode($.value))}if(!($ instanceof this.ctor)&&$ instanceof en){var eo=$.$type.toObject($,ee),eu="."===$.$type.fullName[0]?$.$type.fullName.slice(1):$.$type.fullName;return""===er&&(er=et),ei=er+eu,eo["@type"]=ei,eo}return this.toObject($,ee)}}},7474:($,ee,et)=>{"use strict";$.exports=ep;var er,en=et(6416),ei=en.LongBits,es=en.base64,eo=en.utf8;function eu($,ee,et){this.fn=$,this.len=ee,this.next=void 0,this.val=et}function eh(){}function ef($){this.head=$.head,this.tail=$.tail,this.len=$.len,this.next=$.states}function ep(){this.len=0,this.head=new eu(eh,0,0),this.tail=this.head,this.states=null}var eg=function(){return en.Buffer?function(){return(ep.create=function(){return new er})()}:function(){return new ep}};function em($,ee,et){ee[et]=255&$}function ey($,ee,et){for(;$>127;)ee[et++]=127&$|128,$>>>=7;ee[et]=$}function ev($,ee){this.len=$,this.next=void 0,this.val=ee}function eS($,ee,et){for(;$.hi;)ee[et++]=127&$.lo|128,$.lo=($.lo>>>7|$.hi<<25)>>>0,$.hi>>>=7;for(;$.lo>127;)ee[et++]=127&$.lo|128,$.lo=$.lo>>>7;ee[et++]=$.lo}function eT($,ee,et){ee[et]=255&$,ee[et+1]=$>>>8&255,ee[et+2]=$>>>16&255,ee[et+3]=$>>>24}ep.create=eg(),ep.alloc=function($){return new en.Array($)},en.Array!==Array&&(ep.alloc=en.pool(ep.alloc,en.Array.prototype.subarray)),ep.prototype._push=function($,ee,et){return this.tail=this.tail.next=new eu($,ee,et),this.len+=ee,this},ev.prototype=Object.create(eu.prototype),ev.prototype.fn=ey,ep.prototype.uint32=function($){return this.len+=(this.tail=this.tail.next=new ev(($>>>=0)<128?1:$<16384?2:$<2097152?3:$<268435456?4:5,$)).len,this},ep.prototype.int32=function($){return $<0?this._push(eS,10,ei.fromNumber($)):this.uint32($)},ep.prototype.sint32=function($){return this.uint32(($<<1^$>>31)>>>0)},ep.prototype.uint64=function($){var ee=ei.from($);return this._push(eS,ee.length(),ee)},ep.prototype.int64=ep.prototype.uint64,ep.prototype.sint64=function($){var ee=ei.from($).zzEncode();return this._push(eS,ee.length(),ee)},ep.prototype.bool=function($){return this._push(em,1,$?1:0)},ep.prototype.fixed32=function($){return this._push(eT,4,$>>>0)},ep.prototype.sfixed32=ep.prototype.fixed32,ep.prototype.fixed64=function($){var ee=ei.from($);return this._push(eT,4,ee.lo)._push(eT,4,ee.hi)},ep.prototype.sfixed64=ep.prototype.fixed64,ep.prototype.float=function($){return this._push(en.float.writeFloatLE,4,$)},ep.prototype.double=function($){return this._push(en.float.writeDoubleLE,8,$)};var ew=en.Array.prototype.set?function($,ee,et){ee.set($,et)}:function($,ee,et){for(var er=0;er<$.length;++er)ee[et+er]=$[er]};ep.prototype.bytes=function($){var ee=$.length>>>0;if(!ee)return this._push(em,1,0);if(en.isString($)){var et=ep.alloc(ee=es.length($));es.decode($,et,0),$=et}return this.uint32(ee)._push(ew,ee,$)},ep.prototype.string=function($){var ee=eo.length($);return ee?this.uint32(ee)._push(eo.write,ee,$):this._push(em,1,0)},ep.prototype.fork=function(){return this.states=new ef(this),this.head=this.tail=new eu(eh,0,0),this.len=0,this},ep.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new eu(eh,0,0),this.len=0),this},ep.prototype.ldelim=function(){var $=this.head,ee=this.tail,et=this.len;return this.reset().uint32(et),et&&(this.tail.next=$.next,this.tail=ee,this.len+=et),this},ep.prototype.finish=function(){for(var $=this.head.next,ee=this.constructor.alloc(this.len),et=0;$;)$.fn($.val,ee,et),et+=$.len,$=$.next;return ee},ep._configure=function($){er=$,ep.create=eg(),er._configure()}},6985:($,ee,et)=>{"use strict";$.exports=ei;var er=et(7474);(ei.prototype=Object.create(er.prototype)).constructor=ei;var en=et(6416);function ei(){er.call(this)}function es($,ee,et){$.length<40?en.utf8.write($,ee,et):ee.utf8Write?ee.utf8Write($,et):ee.write($,et)}ei._configure=function(){ei.alloc=en._Buffer_allocUnsafe,ei.writeBytesBuffer=en.Buffer&&en.Buffer.prototype instanceof Uint8Array&&"set"===en.Buffer.prototype.set.name?function($,ee,et){ee.set($,et)}:function($,ee,et){if($.copy)$.copy(ee,et,0,$.length);else for(var er=0;er<$.length;)ee[et++]=$[er++]}},ei.prototype.bytes=function($){en.isString($)&&($=en._Buffer_from($,"base64"));var ee=$.length>>>0;return this.uint32(ee),ee&&this._push(ei.writeBytesBuffer,ee,$),this},ei.prototype.string=function($){var ee=en.Buffer.byteLength($);return this.uint32(ee),ee&&this._push(es,ee,$),this},ei._configure()},1359:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{prefixes:function(){return en},bootstrap:function(){return eo},wait:function(){return eu},error:function(){return eh},warn:function(){return ef},ready:function(){return ep},info:function(){return eg},event:function(){return em},trace:function(){return ey},warnOnce:function(){return eS}});let er=et(1191),en={wait:(0,er.white)((0,er.bold)("○")),error:(0,er.red)((0,er.bold)("⨯")),warn:(0,er.yellow)((0,er.bold)("⚠")),ready:"▲",info:(0,er.white)((0,er.bold)(" ")),event:(0,er.green)((0,er.bold)("✓")),trace:(0,er.magenta)((0,er.bold)("\xbb"))},ei={log:"log",warn:"warn",error:"error"};function es($,...ee){(""===ee[0]||void 0===ee[0])&&1===ee.length&&ee.shift();let et=$ in ei?ei[$]:"log",er=en[$];0===ee.length?console[et](""):console[et](" "+er,...ee)}function eo(...$){console.log(" ",...$)}function eu(...$){es("wait",...$)}function eh(...$){es("error",...$)}function ef(...$){es("warn",...$)}function ep(...$){es("ready",...$)}function eg(...$){es("info",...$)}function em(...$){es("event",...$)}function ey(...$){es("trace",...$)}let ev=new Set;function eS(...$){ev.has($[0])||(ev.add($.join(" ")),ef(...$))}},6843:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"createProxy",{enumerable:!0,get:function(){return er}});let er=et(8195).createClientModuleProxy},7519:($,ee,et)=>{let{createProxy:er}=et(6843);$.exports=er("/Users/marina/Documents/GitHub/fox_dental/node_modules/next/dist/client/components/app-router.js")},2563:($,ee,et)=>{let{createProxy:er}=et(6843);$.exports=er("/Users/marina/Documents/GitHub/fox_dental/node_modules/next/dist/client/components/error-boundary.js")},8096:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{DYNAMIC_ERROR_CODE:function(){return et},DynamicServerError:function(){return er}});let et="DYNAMIC_SERVER_USAGE";class er extends Error{constructor($){super("Dynamic server usage: "+$),this.digest=et}}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},2517:($,ee,et)=>{let{createProxy:er}=et(6843);$.exports=er("/Users/marina/Documents/GitHub/fox_dental/node_modules/next/dist/client/components/layout-router.js")},1150:($,ee,et)=>{let{createProxy:er}=et(6843);$.exports=er("/Users/marina/Documents/GitHub/fox_dental/node_modules/next/dist/client/components/not-found-boundary.js")},9361:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"default",{enumerable:!0,get:function(){return ei}});let er=et(6783)._(et(2)),en={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},desc:{display:"inline-block"},h1:{display:"inline-block",margin:"0 20px 0 0",padding:"0 23px 0 0",fontSize:24,fontWeight:500,verticalAlign:"top",lineHeight:"49px"},h2:{fontSize:14,fontWeight:400,lineHeight:"49px",margin:0}};function ei(){return er.default.createElement(er.default.Fragment,null,er.default.createElement("title",null,"404: This page could not be found."),er.default.createElement("div",{style:en.error},er.default.createElement("div",null,er.default.createElement("style",{dangerouslySetInnerHTML:{__html:"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}),er.default.createElement("h1",{className:"next-error-h1",style:en.h1},"404"),er.default.createElement("div",{style:en.desc},er.default.createElement("h2",{style:en.h2},"This page could not be found.")))))}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},571:($,ee,et)=>{let{createProxy:er}=et(6843);$.exports=er("/Users/marina/Documents/GitHub/fox_dental/node_modules/next/dist/client/components/render-from-template-context.js")},8650:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"createSearchParamsBailoutProxy",{enumerable:!0,get:function(){return en}});let er=et(2973);function en(){return new Proxy({},{get($,ee){"string"==typeof ee&&(0,er.staticGenerationBailout)("searchParams."+ee)}})}("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},2973:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"staticGenerationBailout",{enumerable:!0,get:function(){return eo}});let er=et(8096),en=et(5869);class ei extends Error{constructor(...$){super(...$),this.code="NEXT_STATIC_GEN_BAILOUT"}}function es($,ee){let{dynamic:et,link:er}=ee||{};return"Page"+(et?' with `dynamic = "'+et+'"`':"")+" couldn't be rendered statically because it used `"+$+"`."+(er?" See more info here: "+er:"")}let eo=($,ee)=>{let{dynamic:et,link:eo}=void 0===ee?{}:ee,eu=en.staticGenerationAsyncStorage.getStore();if(!eu)return!1;if(eu.forceStatic)return!0;if(eu.dynamicShouldError)throw new ei(es($,{link:eo,dynamic:null!=et?et:"error"}));let eh=es($,{dynamic:et,link:"https://nextjs.org/docs/messages/dynamic-server-error"});if(null==eu.postpone||eu.postpone.call(eu,$),eu.revalidate=0,eu.isStaticGeneration){let ee=new er.DynamicServerError(eh);throw eu.dynamicUsageDescription=$,eu.dynamicUsageStack=ee.stack,ee}return!1};("function"==typeof ee.default||"object"==typeof ee.default&&null!==ee.default)&&void 0===ee.default.__esModule&&(Object.defineProperty(ee.default,"__esModule",{value:!0}),Object.assign(ee.default,ee),$.exports=ee.default)},2336:($,ee,et)=>{let{createProxy:er}=et(6843);$.exports=er("/Users/marina/Documents/GitHub/fox_dental/node_modules/next/dist/client/components/static-generation-searchparams-bailout-provider.js")},6987:($,ee,et)=>{let{createProxy:er}=et(6843);$.exports=er("/Users/marina/Documents/GitHub/fox_dental/node_modules/next/dist/client/image-component.js")},8026:($,ee,et)=>{let{createProxy:er}=et(6843);$.exports=er("/Users/marina/Documents/GitHub/fox_dental/node_modules/next/dist/client/link.js")},5407:$=>{(()=>{"use strict";var ee={491:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.ContextAPI=void 0;let er=et(223),en=et(172),ei=et(930),es="context",eo=new er.NoopContextManager;class eu{constructor(){}static getInstance(){return this._instance||(this._instance=new eu),this._instance}setGlobalContextManager($){return(0,en.registerGlobal)(es,$,ei.DiagAPI.instance())}active(){return this._getContextManager().active()}with($,ee,et,...er){return this._getContextManager().with($,ee,et,...er)}bind($,ee){return this._getContextManager().bind($,ee)}_getContextManager(){return(0,en.getGlobal)(es)||eo}disable(){this._getContextManager().disable(),(0,en.unregisterGlobal)(es,ei.DiagAPI.instance())}}ee.ContextAPI=eu},930:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.DiagAPI=void 0;let er=et(56),en=et(912),ei=et(957),es=et(172),eo="diag";class eu{constructor(){function $($){return function(...ee){let et=(0,es.getGlobal)("diag");if(et)return et[$](...ee)}}let ee=this,et=($,et={logLevel:ei.DiagLogLevel.INFO})=>{var er,eo,eu;if($===ee){let $=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return ee.error(null!==(er=$.stack)&&void 0!==er?er:$.message),!1}"number"==typeof et&&(et={logLevel:et});let eh=(0,es.getGlobal)("diag"),ef=(0,en.createLogLevelDiagLogger)(null!==(eo=et.logLevel)&&void 0!==eo?eo:ei.DiagLogLevel.INFO,$);if(eh&&!et.suppressOverrideMessage){let $=null!==(eu=Error().stack)&&void 0!==eu?eu:"<failed to generate stacktrace>";eh.warn(`Current logger will be overwritten from ${$}`),ef.warn(`Current logger will overwrite one already registered from ${$}`)}return(0,es.registerGlobal)("diag",ef,ee,!0)};ee.setLogger=et,ee.disable=()=>{(0,es.unregisterGlobal)(eo,ee)},ee.createComponentLogger=$=>new er.DiagComponentLogger($),ee.verbose=$("verbose"),ee.debug=$("debug"),ee.info=$("info"),ee.warn=$("warn"),ee.error=$("error")}static instance(){return this._instance||(this._instance=new eu),this._instance}}ee.DiagAPI=eu},653:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.MetricsAPI=void 0;let er=et(660),en=et(172),ei=et(930),es="metrics";class eo{constructor(){}static getInstance(){return this._instance||(this._instance=new eo),this._instance}setGlobalMeterProvider($){return(0,en.registerGlobal)(es,$,ei.DiagAPI.instance())}getMeterProvider(){return(0,en.getGlobal)(es)||er.NOOP_METER_PROVIDER}getMeter($,ee,et){return this.getMeterProvider().getMeter($,ee,et)}disable(){(0,en.unregisterGlobal)(es,ei.DiagAPI.instance())}}ee.MetricsAPI=eo},181:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.PropagationAPI=void 0;let er=et(172),en=et(874),ei=et(194),es=et(277),eo=et(369),eu=et(930),eh="propagation",ef=new en.NoopTextMapPropagator;class ep{constructor(){this.createBaggage=eo.createBaggage,this.getBaggage=es.getBaggage,this.getActiveBaggage=es.getActiveBaggage,this.setBaggage=es.setBaggage,this.deleteBaggage=es.deleteBaggage}static getInstance(){return this._instance||(this._instance=new ep),this._instance}setGlobalPropagator($){return(0,er.registerGlobal)(eh,$,eu.DiagAPI.instance())}inject($,ee,et=ei.defaultTextMapSetter){return this._getGlobalPropagator().inject($,ee,et)}extract($,ee,et=ei.defaultTextMapGetter){return this._getGlobalPropagator().extract($,ee,et)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,er.unregisterGlobal)(eh,eu.DiagAPI.instance())}_getGlobalPropagator(){return(0,er.getGlobal)(eh)||ef}}ee.PropagationAPI=ep},997:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.TraceAPI=void 0;let er=et(172),en=et(846),ei=et(139),es=et(607),eo=et(930),eu="trace";class eh{constructor(){this._proxyTracerProvider=new en.ProxyTracerProvider,this.wrapSpanContext=ei.wrapSpanContext,this.isSpanContextValid=ei.isSpanContextValid,this.deleteSpan=es.deleteSpan,this.getSpan=es.getSpan,this.getActiveSpan=es.getActiveSpan,this.getSpanContext=es.getSpanContext,this.setSpan=es.setSpan,this.setSpanContext=es.setSpanContext}static getInstance(){return this._instance||(this._instance=new eh),this._instance}setGlobalTracerProvider($){let ee=(0,er.registerGlobal)(eu,this._proxyTracerProvider,eo.DiagAPI.instance());return ee&&this._proxyTracerProvider.setDelegate($),ee}getTracerProvider(){return(0,er.getGlobal)(eu)||this._proxyTracerProvider}getTracer($,ee){return this.getTracerProvider().getTracer($,ee)}disable(){(0,er.unregisterGlobal)(eu,eo.DiagAPI.instance()),this._proxyTracerProvider=new en.ProxyTracerProvider}}ee.TraceAPI=eh},277:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.deleteBaggage=ee.setBaggage=ee.getActiveBaggage=ee.getBaggage=void 0;let er=et(491),en=(0,et(780).createContextKey)("OpenTelemetry Baggage Key");function ei($){return $.getValue(en)||void 0}function es(){return ei(er.ContextAPI.getInstance().active())}function eo($,ee){return $.setValue(en,ee)}function eu($){return $.deleteValue(en)}ee.getBaggage=ei,ee.getActiveBaggage=es,ee.setBaggage=eo,ee.deleteBaggage=eu},993:($,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.BaggageImpl=void 0;class et{constructor($){this._entries=$?new Map($):new Map}getEntry($){let ee=this._entries.get($);if(ee)return Object.assign({},ee)}getAllEntries(){return Array.from(this._entries.entries()).map(([$,ee])=>[$,ee])}setEntry($,ee){let er=new et(this._entries);return er._entries.set($,ee),er}removeEntry($){let ee=new et(this._entries);return ee._entries.delete($),ee}removeEntries(...$){let ee=new et(this._entries);for(let et of $)ee._entries.delete(et);return ee}clear(){return new et}}ee.BaggageImpl=et},830:($,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.baggageEntryMetadataSymbol=void 0,ee.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.baggageEntryMetadataFromString=ee.createBaggage=void 0;let er=et(930),en=et(993),ei=et(830),es=er.DiagAPI.instance();function eo($={}){return new en.BaggageImpl(new Map(Object.entries($)))}function eu($){return"string"!=typeof $&&(es.error(`Cannot create baggage metadata from unknown type: ${typeof $}`),$=""),{__TYPE__:ei.baggageEntryMetadataSymbol,toString:()=>$}}ee.createBaggage=eo,ee.baggageEntryMetadataFromString=eu},67:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.context=void 0;let er=et(491);ee.context=er.ContextAPI.getInstance()},223:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.NoopContextManager=void 0;let er=et(780);class en{active(){return er.ROOT_CONTEXT}with($,ee,et,...er){return ee.call(et,...er)}bind($,ee){return ee}enable(){return this}disable(){return this}}ee.NoopContextManager=en},780:($,ee)=>{function et($){return Symbol.for($)}Object.defineProperty(ee,"__esModule",{value:!0}),ee.ROOT_CONTEXT=ee.createContextKey=void 0,ee.createContextKey=et;class er{constructor($){let ee=this;ee._currentContext=$?new Map($):new Map,ee.getValue=$=>ee._currentContext.get($),ee.setValue=($,et)=>{let en=new er(ee._currentContext);return en._currentContext.set($,et),en},ee.deleteValue=$=>{let et=new er(ee._currentContext);return et._currentContext.delete($),et}}}ee.ROOT_CONTEXT=new er},506:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.diag=void 0;let er=et(930);ee.diag=er.DiagAPI.instance()},56:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.DiagComponentLogger=void 0;let er=et(172);class en{constructor($){this._namespace=$.namespace||"DiagComponentLogger"}debug(...$){return ei("debug",this._namespace,$)}error(...$){return ei("error",this._namespace,$)}info(...$){return ei("info",this._namespace,$)}warn(...$){return ei("warn",this._namespace,$)}verbose(...$){return ei("verbose",this._namespace,$)}}function ei($,ee,et){let en=(0,er.getGlobal)("diag");if(en)return et.unshift(ee),en[$](...et)}ee.DiagComponentLogger=en},972:($,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.DiagConsoleLogger=void 0;let et=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class er{constructor(){function $($){return function(...ee){if(console){let et=console[$];if("function"!=typeof et&&(et=console.log),"function"==typeof et)return et.apply(console,ee)}}}for(let ee=0;ee<et.length;ee++)this[et[ee].n]=$(et[ee].c)}}ee.DiagConsoleLogger=er},912:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.createLogLevelDiagLogger=void 0;let er=et(957);function en($,ee){function et(et,er){let en=ee[et];return"function"==typeof en&&$>=er?en.bind(ee):function(){}}return $<er.DiagLogLevel.NONE?$=er.DiagLogLevel.NONE:$>er.DiagLogLevel.ALL&&($=er.DiagLogLevel.ALL),ee=ee||{},{error:et("error",er.DiagLogLevel.ERROR),warn:et("warn",er.DiagLogLevel.WARN),info:et("info",er.DiagLogLevel.INFO),debug:et("debug",er.DiagLogLevel.DEBUG),verbose:et("verbose",er.DiagLogLevel.VERBOSE)}}ee.createLogLevelDiagLogger=en},957:($,ee)=>{var et;Object.defineProperty(ee,"__esModule",{value:!0}),ee.DiagLogLevel=void 0,function($){$[$.NONE=0]="NONE",$[$.ERROR=30]="ERROR",$[$.WARN=50]="WARN",$[$.INFO=60]="INFO",$[$.DEBUG=70]="DEBUG",$[$.VERBOSE=80]="VERBOSE",$[$.ALL=9999]="ALL"}(et=ee.DiagLogLevel||(ee.DiagLogLevel={}))},172:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.unregisterGlobal=ee.getGlobal=ee.registerGlobal=void 0;let er=et(200),en=et(521),ei=et(130),es=en.VERSION.split(".")[0],eo=Symbol.for(`opentelemetry.js.api.${es}`),eu=er._globalThis;function eh($,ee,et,er=!1){var ei;let es=eu[eo]=null!==(ei=eu[eo])&&void 0!==ei?ei:{version:en.VERSION};if(!er&&es[$]){let ee=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${$}`);return et.error(ee.stack||ee.message),!1}if(es.version!==en.VERSION){let ee=Error(`@opentelemetry/api: Registration of version v${es.version} for ${$} does not match previously registered API v${en.VERSION}`);return et.error(ee.stack||ee.message),!1}return es[$]=ee,et.debug(`@opentelemetry/api: Registered a global for ${$} v${en.VERSION}.`),!0}function ef($){var ee,et;let er=null===(ee=eu[eo])||void 0===ee?void 0:ee.version;if(er&&(0,ei.isCompatible)(er))return null===(et=eu[eo])||void 0===et?void 0:et[$]}function ep($,ee){ee.debug(`@opentelemetry/api: Unregistering a global for ${$} v${en.VERSION}.`);let et=eu[eo];et&&delete et[$]}ee.registerGlobal=eh,ee.getGlobal=ef,ee.unregisterGlobal=ep},130:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.isCompatible=ee._makeCompatibilityCheck=void 0;let er=et(521),en=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function ei($){let ee=new Set([$]),et=new Set,er=$.match(en);if(!er)return()=>!1;let ei={major:+er[1],minor:+er[2],patch:+er[3],prerelease:er[4]};if(null!=ei.prerelease)return function(ee){return ee===$};function es($){return et.add($),!1}function eo($){return ee.add($),!0}return function($){if(ee.has($))return!0;if(et.has($))return!1;let er=$.match(en);if(!er)return es($);let eu={major:+er[1],minor:+er[2],patch:+er[3],prerelease:er[4]};return null!=eu.prerelease||ei.major!==eu.major?es($):0===ei.major?ei.minor===eu.minor&&ei.patch<=eu.patch?eo($):es($):ei.minor<=eu.minor?eo($):es($)}}ee._makeCompatibilityCheck=ei,ee.isCompatible=ei(er.VERSION)},886:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.metrics=void 0;let er=et(653);ee.metrics=er.MetricsAPI.getInstance()},901:($,ee)=>{var et;Object.defineProperty(ee,"__esModule",{value:!0}),ee.ValueType=void 0,function($){$[$.INT=0]="INT",$[$.DOUBLE=1]="DOUBLE"}(et=ee.ValueType||(ee.ValueType={}))},102:($,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.createNoopMeter=ee.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=ee.NOOP_OBSERVABLE_GAUGE_METRIC=ee.NOOP_OBSERVABLE_COUNTER_METRIC=ee.NOOP_UP_DOWN_COUNTER_METRIC=ee.NOOP_HISTOGRAM_METRIC=ee.NOOP_COUNTER_METRIC=ee.NOOP_METER=ee.NoopObservableUpDownCounterMetric=ee.NoopObservableGaugeMetric=ee.NoopObservableCounterMetric=ee.NoopObservableMetric=ee.NoopHistogramMetric=ee.NoopUpDownCounterMetric=ee.NoopCounterMetric=ee.NoopMetric=ee.NoopMeter=void 0;class et{constructor(){}createHistogram($,et){return ee.NOOP_HISTOGRAM_METRIC}createCounter($,et){return ee.NOOP_COUNTER_METRIC}createUpDownCounter($,et){return ee.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge($,et){return ee.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter($,et){return ee.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter($,et){return ee.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback($,ee){}removeBatchObservableCallback($){}}ee.NoopMeter=et;class er{}ee.NoopMetric=er;class en extends er{add($,ee){}}ee.NoopCounterMetric=en;class ei extends er{add($,ee){}}ee.NoopUpDownCounterMetric=ei;class es extends er{record($,ee){}}ee.NoopHistogramMetric=es;class eo{addCallback($){}removeCallback($){}}ee.NoopObservableMetric=eo;class eu extends eo{}ee.NoopObservableCounterMetric=eu;class eh extends eo{}ee.NoopObservableGaugeMetric=eh;class ef extends eo{}function ep(){return ee.NOOP_METER}ee.NoopObservableUpDownCounterMetric=ef,ee.NOOP_METER=new et,ee.NOOP_COUNTER_METRIC=new en,ee.NOOP_HISTOGRAM_METRIC=new es,ee.NOOP_UP_DOWN_COUNTER_METRIC=new ei,ee.NOOP_OBSERVABLE_COUNTER_METRIC=new eu,ee.NOOP_OBSERVABLE_GAUGE_METRIC=new eh,ee.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new ef,ee.createNoopMeter=ep},660:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.NOOP_METER_PROVIDER=ee.NoopMeterProvider=void 0;let er=et(102);class en{getMeter($,ee,et){return er.NOOP_METER}}ee.NoopMeterProvider=en,ee.NOOP_METER_PROVIDER=new en},200:function($,ee,et){var er=this&&this.__createBinding||(Object.create?function($,ee,et,er){void 0===er&&(er=et),Object.defineProperty($,er,{enumerable:!0,get:function(){return ee[et]}})}:function($,ee,et,er){void 0===er&&(er=et),$[er]=ee[et]}),en=this&&this.__exportStar||function($,ee){for(var et in $)"default"===et||Object.prototype.hasOwnProperty.call(ee,et)||er(ee,$,et)};Object.defineProperty(ee,"__esModule",{value:!0}),en(et(46),ee)},651:($,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee._globalThis=void 0,ee._globalThis="object"==typeof globalThis?globalThis:global},46:function($,ee,et){var er=this&&this.__createBinding||(Object.create?function($,ee,et,er){void 0===er&&(er=et),Object.defineProperty($,er,{enumerable:!0,get:function(){return ee[et]}})}:function($,ee,et,er){void 0===er&&(er=et),$[er]=ee[et]}),en=this&&this.__exportStar||function($,ee){for(var et in $)"default"===et||Object.prototype.hasOwnProperty.call(ee,et)||er(ee,$,et)};Object.defineProperty(ee,"__esModule",{value:!0}),en(et(651),ee)},939:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.propagation=void 0;let er=et(181);ee.propagation=er.PropagationAPI.getInstance()},874:($,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.NoopTextMapPropagator=void 0;class et{inject($,ee){}extract($,ee){return $}fields(){return[]}}ee.NoopTextMapPropagator=et},194:($,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.defaultTextMapSetter=ee.defaultTextMapGetter=void 0,ee.defaultTextMapGetter={get($,ee){if(null!=$)return $[ee]},keys:$=>null==$?[]:Object.keys($)},ee.defaultTextMapSetter={set($,ee,et){null!=$&&($[ee]=et)}}},845:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.trace=void 0;let er=et(997);ee.trace=er.TraceAPI.getInstance()},403:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.NonRecordingSpan=void 0;let er=et(476);class en{constructor($=er.INVALID_SPAN_CONTEXT){this._spanContext=$}spanContext(){return this._spanContext}setAttribute($,ee){return this}setAttributes($){return this}addEvent($,ee){return this}setStatus($){return this}updateName($){return this}end($){}isRecording(){return!1}recordException($,ee){}}ee.NonRecordingSpan=en},614:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.NoopTracer=void 0;let er=et(491),en=et(607),ei=et(403),es=et(139),eo=er.ContextAPI.getInstance();class eu{startSpan($,ee,et=eo.active()){if(null==ee?void 0:ee.root)return new ei.NonRecordingSpan;let er=et&&(0,en.getSpanContext)(et);return eh(er)&&(0,es.isSpanContextValid)(er)?new ei.NonRecordingSpan(er):new ei.NonRecordingSpan}startActiveSpan($,ee,et,er){let ei,es,eu;if(arguments.length<2)return;2==arguments.length?eu=ee:3==arguments.length?(ei=ee,eu=et):(ei=ee,es=et,eu=er);let eh=null!=es?es:eo.active(),ef=this.startSpan($,ei,eh),ep=(0,en.setSpan)(eh,ef);return eo.with(ep,eu,void 0,ef)}}function eh($){return"object"==typeof $&&"string"==typeof $.spanId&&"string"==typeof $.traceId&&"number"==typeof $.traceFlags}ee.NoopTracer=eu},124:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.NoopTracerProvider=void 0;let er=et(614);class en{getTracer($,ee,et){return new er.NoopTracer}}ee.NoopTracerProvider=en},125:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.ProxyTracer=void 0;let er=new(et(614)).NoopTracer;class en{constructor($,ee,et,er){this._provider=$,this.name=ee,this.version=et,this.options=er}startSpan($,ee,et){return this._getTracer().startSpan($,ee,et)}startActiveSpan($,ee,et,er){let en=this._getTracer();return Reflect.apply(en.startActiveSpan,en,arguments)}_getTracer(){if(this._delegate)return this._delegate;let $=this._provider.getDelegateTracer(this.name,this.version,this.options);return $?(this._delegate=$,this._delegate):er}}ee.ProxyTracer=en},846:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.ProxyTracerProvider=void 0;let er=et(125),en=new(et(124)).NoopTracerProvider;class ei{getTracer($,ee,et){var en;return null!==(en=this.getDelegateTracer($,ee,et))&&void 0!==en?en:new er.ProxyTracer(this,$,ee,et)}getDelegate(){var $;return null!==($=this._delegate)&&void 0!==$?$:en}setDelegate($){this._delegate=$}getDelegateTracer($,ee,et){var er;return null===(er=this._delegate)||void 0===er?void 0:er.getTracer($,ee,et)}}ee.ProxyTracerProvider=ei},996:($,ee)=>{var et;Object.defineProperty(ee,"__esModule",{value:!0}),ee.SamplingDecision=void 0,function($){$[$.NOT_RECORD=0]="NOT_RECORD",$[$.RECORD=1]="RECORD",$[$.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(et=ee.SamplingDecision||(ee.SamplingDecision={}))},607:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.getSpanContext=ee.setSpanContext=ee.deleteSpan=ee.setSpan=ee.getActiveSpan=ee.getSpan=void 0;let er=et(780),en=et(403),ei=et(491),es=(0,er.createContextKey)("OpenTelemetry Context Key SPAN");function eo($){return $.getValue(es)||void 0}function eu(){return eo(ei.ContextAPI.getInstance().active())}function eh($,ee){return $.setValue(es,ee)}function ef($){return $.deleteValue(es)}function ep($,ee){return eh($,new en.NonRecordingSpan(ee))}function eg($){var ee;return null===(ee=eo($))||void 0===ee?void 0:ee.spanContext()}ee.getSpan=eo,ee.getActiveSpan=eu,ee.setSpan=eh,ee.deleteSpan=ef,ee.setSpanContext=ep,ee.getSpanContext=eg},325:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.TraceStateImpl=void 0;let er=et(564),en=32,ei=512,es=",",eo="=";class eu{constructor($){this._internalState=new Map,$&&this._parse($)}set($,ee){let et=this._clone();return et._internalState.has($)&&et._internalState.delete($),et._internalState.set($,ee),et}unset($){let ee=this._clone();return ee._internalState.delete($),ee}get($){return this._internalState.get($)}serialize(){return this._keys().reduce(($,ee)=>($.push(ee+eo+this.get(ee)),$),[]).join(es)}_parse($){!($.length>ei)&&(this._internalState=$.split(es).reverse().reduce(($,ee)=>{let et=ee.trim(),en=et.indexOf(eo);if(-1!==en){let ei=et.slice(0,en),es=et.slice(en+1,ee.length);(0,er.validateKey)(ei)&&(0,er.validateValue)(es)&&$.set(ei,es)}return $},new Map),this._internalState.size>en&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,en))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let $=new eu;return $._internalState=new Map(this._internalState),$}}ee.TraceStateImpl=eu},564:($,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.validateValue=ee.validateKey=void 0;let et="[_0-9a-z-*/]",er=`[a-z]${et}{0,255}`,en=`[a-z0-9]${et}{0,240}@[a-z]${et}{0,13}`,ei=RegExp(`^(?:${er}|${en})$`),es=/^[ -~]{0,255}[!-~]$/,eo=/,|=/;function eu($){return ei.test($)}function eh($){return es.test($)&&!eo.test($)}ee.validateKey=eu,ee.validateValue=eh},98:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.createTraceState=void 0;let er=et(325);function en($){return new er.TraceStateImpl($)}ee.createTraceState=en},476:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.INVALID_SPAN_CONTEXT=ee.INVALID_TRACEID=ee.INVALID_SPANID=void 0;let er=et(475);ee.INVALID_SPANID="0000000000000000",ee.INVALID_TRACEID="00000000000000000000000000000000",ee.INVALID_SPAN_CONTEXT={traceId:ee.INVALID_TRACEID,spanId:ee.INVALID_SPANID,traceFlags:er.TraceFlags.NONE}},357:($,ee)=>{var et;Object.defineProperty(ee,"__esModule",{value:!0}),ee.SpanKind=void 0,function($){$[$.INTERNAL=0]="INTERNAL",$[$.SERVER=1]="SERVER",$[$.CLIENT=2]="CLIENT",$[$.PRODUCER=3]="PRODUCER",$[$.CONSUMER=4]="CONSUMER"}(et=ee.SpanKind||(ee.SpanKind={}))},139:($,ee,et)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.wrapSpanContext=ee.isSpanContextValid=ee.isValidSpanId=ee.isValidTraceId=void 0;let er=et(476),en=et(403),ei=/^([0-9a-f]{32})$/i,es=/^[0-9a-f]{16}$/i;function eo($){return ei.test($)&&$!==er.INVALID_TRACEID}function eu($){return es.test($)&&$!==er.INVALID_SPANID}function eh($){return eo($.traceId)&&eu($.spanId)}function ef($){return new en.NonRecordingSpan($)}ee.isValidTraceId=eo,ee.isValidSpanId=eu,ee.isSpanContextValid=eh,ee.wrapSpanContext=ef},847:($,ee)=>{var et;Object.defineProperty(ee,"__esModule",{value:!0}),ee.SpanStatusCode=void 0,function($){$[$.UNSET=0]="UNSET",$[$.OK=1]="OK",$[$.ERROR=2]="ERROR"}(et=ee.SpanStatusCode||(ee.SpanStatusCode={}))},475:($,ee)=>{var et;Object.defineProperty(ee,"__esModule",{value:!0}),ee.TraceFlags=void 0,function($){$[$.NONE=0]="NONE",$[$.SAMPLED=1]="SAMPLED"}(et=ee.TraceFlags||(ee.TraceFlags={}))},521:($,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.VERSION=void 0,ee.VERSION="1.6.0"}},et={};function er($){var en=et[$];if(void 0!==en)return en.exports;var ei=et[$]={exports:{}},es=!0;try{ee[$].call(ei.exports,ei,ei.exports,er),es=!1}finally{es&&delete et[$]}return ei.exports}er.ab=__dirname+"/";var en={};(()=>{var $=en;Object.defineProperty($,"__esModule",{value:!0}),$.trace=$.propagation=$.metrics=$.diag=$.context=$.INVALID_SPAN_CONTEXT=$.INVALID_TRACEID=$.INVALID_SPANID=$.isValidSpanId=$.isValidTraceId=$.isSpanContextValid=$.createTraceState=$.TraceFlags=$.SpanStatusCode=$.SpanKind=$.SamplingDecision=$.ProxyTracerProvider=$.ProxyTracer=$.defaultTextMapSetter=$.defaultTextMapGetter=$.ValueType=$.createNoopMeter=$.DiagLogLevel=$.DiagConsoleLogger=$.ROOT_CONTEXT=$.createContextKey=$.baggageEntryMetadataFromString=void 0;var ee=er(369);Object.defineProperty($,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return ee.baggageEntryMetadataFromString}});var et=er(780);Object.defineProperty($,"createContextKey",{enumerable:!0,get:function(){return et.createContextKey}}),Object.defineProperty($,"ROOT_CONTEXT",{enumerable:!0,get:function(){return et.ROOT_CONTEXT}});var ei=er(972);Object.defineProperty($,"DiagConsoleLogger",{enumerable:!0,get:function(){return ei.DiagConsoleLogger}});var es=er(957);Object.defineProperty($,"DiagLogLevel",{enumerable:!0,get:function(){return es.DiagLogLevel}});var eo=er(102);Object.defineProperty($,"createNoopMeter",{enumerable:!0,get:function(){return eo.createNoopMeter}});var eu=er(901);Object.defineProperty($,"ValueType",{enumerable:!0,get:function(){return eu.ValueType}});var eh=er(194);Object.defineProperty($,"defaultTextMapGetter",{enumerable:!0,get:function(){return eh.defaultTextMapGetter}}),Object.defineProperty($,"defaultTextMapSetter",{enumerable:!0,get:function(){return eh.defaultTextMapSetter}});var ef=er(125);Object.defineProperty($,"ProxyTracer",{enumerable:!0,get:function(){return ef.ProxyTracer}});var ep=er(846);Object.defineProperty($,"ProxyTracerProvider",{enumerable:!0,get:function(){return ep.ProxyTracerProvider}});var eg=er(996);Object.defineProperty($,"SamplingDecision",{enumerable:!0,get:function(){return eg.SamplingDecision}});var em=er(357);Object.defineProperty($,"SpanKind",{enumerable:!0,get:function(){return em.SpanKind}});var ey=er(847);Object.defineProperty($,"SpanStatusCode",{enumerable:!0,get:function(){return ey.SpanStatusCode}});var ev=er(475);Object.defineProperty($,"TraceFlags",{enumerable:!0,get:function(){return ev.TraceFlags}});var eS=er(98);Object.defineProperty($,"createTraceState",{enumerable:!0,get:function(){return eS.createTraceState}});var eT=er(139);Object.defineProperty($,"isSpanContextValid",{enumerable:!0,get:function(){return eT.isSpanContextValid}}),Object.defineProperty($,"isValidTraceId",{enumerable:!0,get:function(){return eT.isValidTraceId}}),Object.defineProperty($,"isValidSpanId",{enumerable:!0,get:function(){return eT.isValidSpanId}});var ew=er(476);Object.defineProperty($,"INVALID_SPANID",{enumerable:!0,get:function(){return ew.INVALID_SPANID}}),Object.defineProperty($,"INVALID_TRACEID",{enumerable:!0,get:function(){return ew.INVALID_TRACEID}}),Object.defineProperty($,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return ew.INVALID_SPAN_CONTEXT}});let eE=er(67);Object.defineProperty($,"context",{enumerable:!0,get:function(){return eE.context}});let eC=er(506);Object.defineProperty($,"diag",{enumerable:!0,get:function(){return eC.diag}});let e_=er(886);Object.defineProperty($,"metrics",{enumerable:!0,get:function(){return e_.metrics}});let eR=er(939);Object.defineProperty($,"propagation",{enumerable:!0,get:function(){return eR.propagation}});let ex=er(845);Object.defineProperty($,"trace",{enumerable:!0,get:function(){return ex.trace}}),$.default={context:eE.context,diag:eC.diag,metrics:e_.metrics,propagation:eR.propagation,trace:ex.trace}})(),$.exports=en})()},2740:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{NEXT_QUERY_PARAM_PREFIX:function(){return et},PRERENDER_REVALIDATE_HEADER:function(){return er},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return en},RSC_PREFETCH_SUFFIX:function(){return ei},RSC_SUFFIX:function(){return es},NEXT_DATA_SUFFIX:function(){return eo},NEXT_META_SUFFIX:function(){return eu},NEXT_BODY_SUFFIX:function(){return eh},NEXT_CACHE_TAGS_HEADER:function(){return ef},NEXT_CACHE_SOFT_TAGS_HEADER:function(){return ep},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return eg},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return em},NEXT_CACHE_TAG_MAX_LENGTH:function(){return ey},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return ev},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return eS},CACHE_ONE_YEAR:function(){return eT},MIDDLEWARE_FILENAME:function(){return ew},MIDDLEWARE_LOCATION_REGEXP:function(){return eE},INSTRUMENTATION_HOOK_FILENAME:function(){return eC},PAGES_DIR_ALIAS:function(){return e_},DOT_NEXT_ALIAS:function(){return eR},ROOT_DIR_ALIAS:function(){return ex},APP_DIR_ALIAS:function(){return eI},RSC_MOD_REF_PROXY_ALIAS:function(){return eP},RSC_ACTION_VALIDATE_ALIAS:function(){return eA},RSC_ACTION_PROXY_ALIAS:function(){return eO},RSC_ACTION_ENCRYPTION_ALIAS:function(){return eD},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return eN},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return ek},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return eM},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return eL},SERVER_PROPS_SSG_CONFLICT:function(){return ej},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return eB},SERVER_PROPS_EXPORT_ERROR:function(){return eF},GSP_NO_RETURNED_VALUE:function(){return eV},GSSP_NO_RETURNED_VALUE:function(){return eU},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return ez},GSSP_COMPONENT_MEMBER_ERROR:function(){return eq},NON_STANDARD_NODE_ENV:function(){return eH},SSG_FALLBACK_EXPORT_ERROR:function(){return e$},ESLINT_DEFAULT_DIRS:function(){return eG},ESLINT_PROMPT_VALUES:function(){return eW},SERVER_RUNTIME:function(){return eK},WEBPACK_LAYERS:function(){return eY},WEBPACK_RESOURCE_QUERIES:function(){return eX}});let et="nxtP",er="x-prerender-revalidate",en="x-prerender-revalidate-if-generated",ei=".prefetch.rsc",es=".rsc",eo=".json",eu=".meta",eh=".body",ef="x-next-cache-tags",ep="x-next-cache-soft-tags",eg="x-next-revalidated-tags",em="x-next-revalidate-tag-token",ey=256,ev=1024,eS="_N_T_",eT=31536e3,ew="middleware",eE=`(?:src/)?${ew}`,eC="instrumentation",e_="private-next-pages",eR="private-dot-next",ex="private-next-root-dir",eI="private-next-app-dir",eP="next/dist/build/webpack/loaders/next-flight-loader/module-proxy",eA="private-next-rsc-action-validate",eO="private-next-rsc-action-proxy",eD="private-next-rsc-action-encryption",eN="private-next-rsc-action-client-wrapper",ek="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",eM="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",eL="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",ej="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",eB="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",eF="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",eV="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",eU="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",ez="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",eq="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",eH='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',e$="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",eG=["app","pages","components","lib","src"],eW=[{title:"Strict",recommended:!0,config:{extends:"next/core-web-vitals"}},{title:"Base",config:{extends:"next"}},{title:"Cancel",config:null}],eK={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},eQ={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",appMetadataRoute:"app-metadata-route",appRouteHandler:"app-route-handler"},eY={...eQ,GROUP:{server:[eQ.reactServerComponents,eQ.actionBrowser,eQ.appMetadataRoute,eQ.appRouteHandler],nonClientServerTarget:[eQ.middleware,eQ.api],app:[eQ.reactServerComponents,eQ.actionBrowser,eQ.appMetadataRoute,eQ.appRouteHandler,eQ.serverSideRendering,eQ.appPagesBrowser]}},eX={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}},1191:($,ee)=>{"use strict";var et;Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{reset:function(){return eu},bold:function(){return eh},dim:function(){return ef},italic:function(){return ep},underline:function(){return eg},inverse:function(){return em},hidden:function(){return ey},strikethrough:function(){return ev},black:function(){return eS},red:function(){return eT},green:function(){return ew},yellow:function(){return eE},blue:function(){return eC},magenta:function(){return e_},purple:function(){return eR},cyan:function(){return ex},white:function(){return eI},gray:function(){return eP},bgBlack:function(){return eA},bgRed:function(){return eO},bgGreen:function(){return eD},bgYellow:function(){return eN},bgBlue:function(){return ek},bgMagenta:function(){return eM},bgCyan:function(){return eL},bgWhite:function(){return ej}});let{env:er,stdout:en}=(null==(et=globalThis)?void 0:et.process)??{},ei=er&&!er.NO_COLOR&&(er.FORCE_COLOR||(null==en?void 0:en.isTTY)&&!er.CI&&"dumb"!==er.TERM),es=($,ee,et,er)=>{let en=$.substring(0,er)+et,ei=$.substring(er+ee.length),eo=ei.indexOf(ee);return~eo?en+es(ei,ee,et,eo):en+ei},eo=($,ee,et=$)=>er=>{let en=""+er,ei=en.indexOf(ee,$.length);return~ei?$+es(en,ee,et,ei)+ee:$+en+ee},eu=ei?$=>`\x1b[0m${$}\x1b[0m`:String,eh=ei?eo("\x1b[1m","\x1b[22m","\x1b[22m\x1b[1m"):String,ef=ei?eo("\x1b[2m","\x1b[22m","\x1b[22m\x1b[2m"):String,ep=ei?eo("\x1b[3m","\x1b[23m"):String,eg=ei?eo("\x1b[4m","\x1b[24m"):String,em=ei?eo("\x1b[7m","\x1b[27m"):String,ey=ei?eo("\x1b[8m","\x1b[28m"):String,ev=ei?eo("\x1b[9m","\x1b[29m"):String,eS=ei?eo("\x1b[30m","\x1b[39m"):String,eT=ei?eo("\x1b[31m","\x1b[39m"):String,ew=ei?eo("\x1b[32m","\x1b[39m"):String,eE=ei?eo("\x1b[33m","\x1b[39m"):String,eC=ei?eo("\x1b[34m","\x1b[39m"):String,e_=ei?eo("\x1b[35m","\x1b[39m"):String,eR=ei?eo("\x1b[38;2;173;127;168m","\x1b[39m"):String,ex=ei?eo("\x1b[36m","\x1b[39m"):String,eI=ei?eo("\x1b[37m","\x1b[39m"):String,eP=ei?eo("\x1b[90m","\x1b[39m"):String,eA=ei?eo("\x1b[40m","\x1b[49m"):String,eO=ei?eo("\x1b[41m","\x1b[49m"):String,eD=ei?eo("\x1b[42m","\x1b[49m"):String,eN=ei?eo("\x1b[43m","\x1b[49m"):String,ek=ei?eo("\x1b[44m","\x1b[49m"):String,eM=ei?eo("\x1b[45m","\x1b[49m"):String,eL=ei?eo("\x1b[46m","\x1b[49m"):String,ej=ei?eo("\x1b[47m","\x1b[49m"):String},8300:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{renderToReadableStream:function(){return er.renderToReadableStream},decodeReply:function(){return er.decodeReply},decodeAction:function(){return er.decodeAction},decodeFormState:function(){return er.decodeFormState},AppRouter:function(){return en.default},LayoutRouter:function(){return ei.default},RenderFromTemplateContext:function(){return es.default},staticGenerationAsyncStorage:function(){return eo.staticGenerationAsyncStorage},requestAsyncStorage:function(){return eu.requestAsyncStorage},actionAsyncStorage:function(){return eh.actionAsyncStorage},staticGenerationBailout:function(){return ef.staticGenerationBailout},createSearchParamsBailoutProxy:function(){return eg.createSearchParamsBailoutProxy},serverHooks:function(){return em},preloadStyle:function(){return eS.preloadStyle},preloadFont:function(){return eS.preloadFont},preconnect:function(){return eS.preconnect},taintObjectReference:function(){return eT.taintObjectReference},StaticGenerationSearchParamsBailoutProvider:function(){return ep.default},NotFoundBoundary:function(){return ey.NotFoundBoundary},patchFetch:function(){return e_}});let er=et(8195),en=ew(et(7519)),ei=ew(et(2517)),es=ew(et(571)),eo=et(5869),eu=et(4580),eh=et(2934),ef=et(2973),ep=ew(et(2336)),eg=et(8650),em=eC(et(8096)),ey=et(1150),ev=et(9678);et(2563);let eS=et(1806),eT=et(2730);function ew($){return $&&$.__esModule?$:{default:$}}function eE($){if("function"!=typeof WeakMap)return null;var ee=new WeakMap,et=new WeakMap;return(eE=function($){return $?et:ee})($)}function eC($,ee){if(!ee&&$&&$.__esModule)return $;if(null===$||"object"!=typeof $&&"function"!=typeof $)return{default:$};var et=eE(ee);if(et&&et.has($))return et.get($);var er={},en=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ei in $)if("default"!==ei&&Object.prototype.hasOwnProperty.call($,ei)){var es=en?Object.getOwnPropertyDescriptor($,ei):null;es&&(es.get||es.set)?Object.defineProperty(er,ei,es):er[ei]=$[ei]}return er.default=$,et&&et.set($,er),er}function e_(){return(0,ev.patchFetch)({serverHooks:em,staticGenerationAsyncStorage:eo.staticGenerationAsyncStorage})}},1806:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{preloadStyle:function(){return ei},preloadFont:function(){return es},preconnect:function(){return eo}});let er=en(et(5091));function en($){return $&&$.__esModule?$:{default:$}}function ei($,ee){let et={as:"style"};"string"==typeof ee&&(et.crossOrigin=ee),er.default.preload($,et)}function es($,ee,et){let en={as:"font",type:ee};"string"==typeof et&&(en.crossOrigin=et),er.default.preload($,en)}function eo($,ee){er.default.preconnect($,"string"==typeof ee?{crossOrigin:ee}:void 0)}},2730:($,ee,et)=>{"use strict";function er(){throw Error("Taint can only be used with the taint flag.")}Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{taintObjectReference:function(){return en},taintUniqueValue:function(){return ei}}),et(2);let en=er,ei=er},9108:($,ee)=>{"use strict";var et,er;et={value:!0},Object.defineProperty(ee,"x",{enumerable:!0,get:function(){return er}}),function($){$.PAGES="PAGES",$.PAGES_API="PAGES_API",$.APP_PAGE="APP_PAGE",$.APP_ROUTE="APP_ROUTE"}(er||(er={}))},482:($,ee,et)=>{"use strict";$.exports=et(399)},5091:($,ee,et)=>{"use strict";$.exports=et(482).vendored["react-rsc"].ReactDOM},5036:($,ee,et)=>{"use strict";$.exports=et(482).vendored["react-rsc"].ReactJsxRuntime},8195:($,ee,et)=>{"use strict";$.exports=et(482).vendored["react-rsc"].ReactServerDOMWebpackServerEdge},2:($,ee,et)=>{"use strict";$.exports=et(482).vendored["react-rsc"].React},9678:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{validateTags:function(){return ef},addImplicitTags:function(){return eg},patchFetch:function(){return ey}});let er=et(5237),en=et(7636),ei=et(2740),es=eu(et(1359));function eo($){if("function"!=typeof WeakMap)return null;var ee=new WeakMap,et=new WeakMap;return(eo=function($){return $?et:ee})($)}function eu($,ee){if(!ee&&$&&$.__esModule)return $;if(null===$||"object"!=typeof $&&"function"!=typeof $)return{default:$};var et=eo(ee);if(et&&et.has($))return et.get($);var er={},en=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ei in $)if("default"!==ei&&Object.prototype.hasOwnProperty.call($,ei)){var es=en?Object.getOwnPropertyDescriptor($,ei):null;es&&(es.get||es.set)?Object.defineProperty(er,ei,es):er[ei]=$[ei]}return er.default=$,et&&et.set($,er),er}let eh=!1;function ef($,ee){let et=[],er=[];for(let ee of $)"string"!=typeof ee?er.push({tag:ee,reason:"invalid type, must be a string"}):ee.length>ei.NEXT_CACHE_TAG_MAX_LENGTH?er.push({tag:ee,reason:`exceeded max length of ${ei.NEXT_CACHE_TAG_MAX_LENGTH}`}):et.push(ee);if(er.length>0)for(let{tag:$,reason:et}of(console.warn(`Warning: invalid tags passed to ${ee}: `),er))console.log(`tag: "${$}" ${et}`);return et}let ep=$=>{let ee=["/layout"];if($.startsWith("/")){let et=$.split("/");for(let $=1;$<et.length+1;$++){let er=et.slice(0,$).join("/");er&&(er.endsWith("/page")||er.endsWith("/route")||(er=`${er}${er.endsWith("/")?"":"/"}layout`),ee.push(er))}}return ee};function eg($){var ee,et;let er=[],{pagePath:en,urlPathname:es}=$;if(Array.isArray($.tags)||($.tags=[]),en)for(let et of ep(en))et=`${ei.NEXT_CACHE_IMPLICIT_TAG_ID}${et}`,(null==(ee=$.tags)?void 0:ee.includes(et))||$.tags.push(et),er.push(et);if(es){let ee=new URL(es,"http://n").pathname,en=`${ei.NEXT_CACHE_IMPLICIT_TAG_ID}${ee}`;(null==(et=$.tags)?void 0:et.includes(en))||$.tags.push(en),er.push(en)}return er}function em($,ee){if(!$)return;$.fetchMetrics||($.fetchMetrics=[]);let et=["url","status","method"];$.fetchMetrics.some($=>et.every(et=>$[et]===ee[et]))||$.fetchMetrics.push({url:ee.url,cacheStatus:ee.cacheStatus,cacheReason:ee.cacheReason,status:ee.status,method:ee.method,start:ee.start,end:Date.now(),idx:$.nextFetchId||0})}function ey({serverHooks:$,staticGenerationAsyncStorage:ee}){if(globalThis._nextOriginalFetch||(globalThis._nextOriginalFetch=globalThis.fetch),globalThis.fetch.__nextPatched)return;let{DynamicServerError:et}=$,eo=globalThis._nextOriginalFetch;globalThis.fetch=async($,eu)=>{var ep,ey;let ev;try{(ev=new URL($ instanceof Request?$.url:$)).username="",ev.password=""}catch{ev=void 0}let eS=(null==ev?void 0:ev.href)??"",eT=Date.now(),ew=(null==eu?void 0:null==(ep=eu.method)?void 0:ep.toUpperCase())||"GET",eE=(null==(ey=null==eu?void 0:eu.next)?void 0:ey.internal)===!0;return await (0,en.getTracer)().trace(eE?er.NextNodeServerSpan.internalFetch:er.AppRenderSpan.fetch,{kind:en.SpanKind.CLIENT,spanName:["fetch",ew,eS].filter(Boolean).join(" "),attributes:{"http.url":eS,"http.method":ew,"net.peer.name":null==ev?void 0:ev.hostname,"net.peer.port":(null==ev?void 0:ev.port)||void 0}},async()=>{var er;let en,ep,ey;let ev=ee.getStore()||(null==fetch.__nextGetStaticStore?void 0:fetch.__nextGetStaticStore.call(fetch)),ew=$&&"object"==typeof $&&"string"==typeof $.method,eC=ee=>(ew?$[ee]:null)||(null==eu?void 0:eu[ee]);if(!ev||eE||ev.isDraftMode)return eo($,eu);let e_=ee=>{var et,er,en;return void 0!==(null==eu?void 0:null==(et=eu.next)?void 0:et[ee])?null==eu?void 0:null==(er=eu.next)?void 0:er[ee]:ew?null==(en=$.next)?void 0:en[ee]:void 0},eR=e_("revalidate"),ex=ef(e_("tags")||[],`fetch ${$.toString()}`);if(Array.isArray(ex))for(let $ of(ev.tags||(ev.tags=[]),ex))ev.tags.includes($)||ev.tags.push($);let eI=eg(ev),eP="only-cache"===ev.fetchCache,eA="force-cache"===ev.fetchCache,eO="default-cache"===ev.fetchCache,eD="default-no-store"===ev.fetchCache,eN="only-no-store"===ev.fetchCache,ek="force-no-store"===ev.fetchCache,eM=eC("cache"),eL="";"string"==typeof eM&&void 0!==eR&&(ew&&"default"===eM||es.warn(`fetch for ${eS} on ${ev.urlPathname} specified "cache: ${eM}" and "revalidate: ${eR}", only one should be specified.`),eM=void 0),"force-cache"===eM?eR=!1:("no-cache"===eM||"no-store"===eM||ek||eN)&&(eR=0),("no-cache"===eM||"no-store"===eM)&&(eL=`cache: ${eM}`),("number"==typeof eR||!1===eR)&&(ey=eR);let ej=eC("headers"),eB="function"==typeof(null==ej?void 0:ej.get)?ej:new Headers(ej||{}),eF=eB.get("authorization")||eB.get("cookie"),eV=!["get","head"].includes((null==(er=eC("method"))?void 0:er.toLowerCase())||"get"),eU=(eF||eV)&&0===ev.revalidate;if(ek&&(eL="fetchCache = force-no-store"),eN){if("force-cache"===eM||void 0!==ey&&(!1===ey||ey>0))throw Error(`cache: 'force-cache' used on fetch for ${eS} with 'export const fetchCache = 'only-no-store'`);eL="fetchCache = only-no-store"}if(eP&&"no-store"===eM)throw Error(`cache: 'no-store' used on fetch for ${eS} with 'export const fetchCache = 'only-cache'`);eA&&(void 0===eR||0===eR)&&(eL="fetchCache = force-cache",ey=!1),void 0===ey?eO?(ey=!1,eL="fetchCache = default-cache"):eU?(ey=0,eL="auto no cache"):eD?(ey=0,eL="fetchCache = default-no-store"):(eL="auto cache",ey="boolean"!=typeof ev.revalidate&&void 0!==ev.revalidate&&ev.revalidate):eL||(eL=`revalidate: ${ey}`),!eU&&(void 0===ev.revalidate||"number"==typeof ey&&(!1===ev.revalidate||"number"==typeof ev.revalidate&&ey<ev.revalidate))&&(0===ey&&(null==ev.postpone||ev.postpone.call(ev,"revalidate: 0")),ev.revalidate=ey);let ez="number"==typeof ey&&ey>0||!1===ey;if(ev.incrementalCache&&ez)try{en=await ev.incrementalCache.fetchCacheKey(eS,ew?$:eu)}catch(ee){console.error("Failed to generate cache key for",$)}let eq=ev.nextFetchId??1;ev.nextFetchId=eq+1;let eH="number"!=typeof ey?ei.CACHE_ONE_YEAR:ey,e$=async(ee,et)=>{let er=["cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","window","duplex",...ee?[]:["signal"]];if(ew){let ee=$,et={body:ee._ogBody||ee.body};for(let $ of er)et[$]=ee[$];$=new Request(ee.url,et)}else if(eu){let $=eu;for(let ee of(eu={body:eu._ogBody||eu.body},er))eu[ee]=$[ee]}let ei={...eu,next:{...null==eu?void 0:eu.next,fetchType:"origin",fetchIdx:eq}};return eo($,ei).then(async er=>{if(ee||em(ev,{start:eT,url:eS,cacheReason:et||eL,cacheStatus:0===ey||et?"skip":"miss",status:er.status,method:ei.method||"GET"}),200===er.status&&ev.incrementalCache&&en&&ez){let ee=Buffer.from(await er.arrayBuffer());try{await ev.incrementalCache.set(en,{kind:"FETCH",data:{headers:Object.fromEntries(er.headers.entries()),body:ee.toString("base64"),status:er.status,url:er.url},revalidate:eH},{fetchCache:!0,revalidate:ey,fetchUrl:eS,fetchIdx:eq,tags:ex})}catch(ee){console.warn("Failed to set fetch cache",$,ee)}let et=new Response(ee,{headers:new Headers(er.headers),status:er.status});return Object.defineProperty(et,"url",{value:er.url}),et}return er})},eG=()=>Promise.resolve();if(en&&ev.incrementalCache){eG=await ev.incrementalCache.lock(en);let $=ev.isOnDemandRevalidate?null:await ev.incrementalCache.get(en,{kindHint:"fetch",revalidate:ey,fetchUrl:eS,fetchIdx:eq,tags:ex,softTags:eI});if($?await eG():ep="cache-control: no-cache (hard refresh)",(null==$?void 0:$.value)&&"FETCH"===$.value.kind&&!(ev.isRevalidate&&$.isStale)){$.isStale&&(ev.pendingRevalidates??={},ev.pendingRevalidates[en]||(ev.pendingRevalidates[en]=e$(!0).catch(console.error)));let ee=$.value.data;em(ev,{start:eT,url:eS,cacheReason:eL,cacheStatus:"hit",status:ee.status||200,method:(null==eu?void 0:eu.method)||"GET"});let et=new Response(Buffer.from(ee.body,"base64"),{headers:ee.headers,status:ee.status});return Object.defineProperty(et,"url",{value:$.value.data.url}),et}}if(ev.isStaticGeneration&&eu&&"object"==typeof eu){let{cache:ee}=eu;if(eh&&delete eu.cache,"no-store"===ee){let ee=`no-store fetch ${$}${ev.urlPathname?` ${ev.urlPathname}`:""}`;null==ev.postpone||ev.postpone.call(ev,ee),ev.revalidate=0;let er=new et(ee);ev.dynamicUsageErr=er,ev.dynamicUsageDescription=ee}let er="next"in eu,{next:en={}}=eu;if("number"==typeof en.revalidate&&(void 0===ev.revalidate||"number"==typeof ev.revalidate&&en.revalidate<ev.revalidate)){let ee=ev.forceDynamic;if(!ee&&0===en.revalidate){let ee=`revalidate: 0 fetch ${$}${ev.urlPathname?` ${ev.urlPathname}`:""}`;null==ev.postpone||ev.postpone.call(ev,ee);let er=new et(ee);ev.dynamicUsageErr=er,ev.dynamicUsageDescription=ee}ee&&0===en.revalidate||(ev.revalidate=en.revalidate)}er&&delete eu.next}return e$(!1,ep).finally(eG)})},globalThis.fetch.__nextGetStaticStore=()=>ee,globalThis.fetch.__nextPatched=!0}},5237:($,ee)=>{"use strict";var et,er,en,ei,es,eo,eu,eh,ef,ep,eg;Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{NextVanillaSpanAllowlist:function(){return em},BaseServerSpan:function(){return et},LoadComponentsSpan:function(){return er},NextServerSpan:function(){return en},NextNodeServerSpan:function(){return ei},StartServerSpan:function(){return es},RenderSpan:function(){return eo},RouterSpan:function(){return eh},AppRenderSpan:function(){return eu},NodeSpan:function(){return ef},AppRouteRouteHandlersSpan:function(){return ep},ResolveMetadataSpan:function(){return eg}}),function($){$.handleRequest="BaseServer.handleRequest",$.run="BaseServer.run",$.pipe="BaseServer.pipe",$.getStaticHTML="BaseServer.getStaticHTML",$.render="BaseServer.render",$.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",$.renderToResponse="BaseServer.renderToResponse",$.renderToHTML="BaseServer.renderToHTML",$.renderError="BaseServer.renderError",$.renderErrorToResponse="BaseServer.renderErrorToResponse",$.renderErrorToHTML="BaseServer.renderErrorToHTML",$.render404="BaseServer.render404"}(et||(et={})),function($){$.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",$.loadComponents="LoadComponents.loadComponents"}(er||(er={})),function($){$.getRequestHandler="NextServer.getRequestHandler",$.getServer="NextServer.getServer",$.getServerRequestHandler="NextServer.getServerRequestHandler",$.createServer="createServer.createServer"}(en||(en={})),function($){$.compression="NextNodeServer.compression",$.getBuildId="NextNodeServer.getBuildId",$.generateStaticRoutes="NextNodeServer.generateStaticRoutes",$.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",$.generatePublicRoutes="NextNodeServer.generatePublicRoutes",$.generateImageRoutes="NextNodeServer.generateImageRoutes.route",$.sendRenderResult="NextNodeServer.sendRenderResult",$.proxyRequest="NextNodeServer.proxyRequest",$.runApi="NextNodeServer.runApi",$.render="NextNodeServer.render",$.renderHTML="NextNodeServer.renderHTML",$.imageOptimizer="NextNodeServer.imageOptimizer",$.getPagePath="NextNodeServer.getPagePath",$.getRoutesManifest="NextNodeServer.getRoutesManifest",$.findPageComponents="NextNodeServer.findPageComponents",$.getFontManifest="NextNodeServer.getFontManifest",$.getServerComponentManifest="NextNodeServer.getServerComponentManifest",$.getRequestHandler="NextNodeServer.getRequestHandler",$.renderToHTML="NextNodeServer.renderToHTML",$.renderError="NextNodeServer.renderError",$.renderErrorToHTML="NextNodeServer.renderErrorToHTML",$.render404="NextNodeServer.render404",$.route="route",$.onProxyReq="onProxyReq",$.apiResolver="apiResolver",$.internalFetch="internalFetch"}(ei||(ei={})),function($){$.startServer="startServer.startServer"}(es||(es={})),function($){$.getServerSideProps="Render.getServerSideProps",$.getStaticProps="Render.getStaticProps",$.renderToString="Render.renderToString",$.renderDocument="Render.renderDocument",$.createBodyResult="Render.createBodyResult"}(eo||(eo={})),function($){$.renderToString="AppRender.renderToString",$.renderToReadableStream="AppRender.renderToReadableStream",$.getBodyResult="AppRender.getBodyResult",$.fetch="AppRender.fetch"}(eu||(eu={})),function($){$.executeRoute="Router.executeRoute"}(eh||(eh={})),function($){$.runHandler="Node.runHandler"}(ef||(ef={})),function($){$.runHandler="AppRouteRouteHandlers.runHandler"}(ep||(ep={})),function($){$.generateMetadata="ResolveMetadata.generateMetadata",$.generateViewport="ResolveMetadata.generateViewport"}(eg||(eg={}));let em=["BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport"]},7636:($,ee,et)=>{"use strict";let er;Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{getTracer:function(){return ew},SpanStatusCode:function(){return eu},SpanKind:function(){return eh}});let en=et(5237);try{er=et(5407)}catch($){er=et(5407)}let{context:ei,propagation:es,trace:eo,SpanStatusCode:eu,SpanKind:eh,ROOT_CONTEXT:ef}=er,ep=$=>null!==$&&"object"==typeof $&&"function"==typeof $.then,eg=($,ee)=>{(null==ee?void 0:ee.bubble)===!0?$.setAttribute("next.bubble",!0):(ee&&$.recordException(ee),$.setStatus({code:eu.ERROR,message:null==ee?void 0:ee.message})),$.end()},em=new Map,ey=er.createContextKey("next.rootSpanId"),ev=0,eS=()=>ev++;class eT{getTracerInstance(){return eo.getTracer("next.js","0.0.1")}getContext(){return ei}getActiveScopeSpan(){return eo.getSpan(null==ei?void 0:ei.active())}withPropagatedContext($,ee,et){let er=ei.active();if(eo.getSpanContext(er))return ee();let en=es.extract(er,$,et);return ei.with(en,ee)}trace(...$){var ee;let[et,er,es]=$,{fn:eu,options:eh}="function"==typeof er?{fn:er,options:{}}:{fn:es,options:{...er}};if(!en.NextVanillaSpanAllowlist.includes(et)&&"1"!==process.env.NEXT_OTEL_VERBOSE||eh.hideSpan)return eu();let ev=eh.spanName??et,eT=this.getSpanContext((null==eh?void 0:eh.parentSpan)??this.getActiveScopeSpan()),ew=!1;eT?(null==(ee=eo.getSpanContext(eT))?void 0:ee.isRemote)&&(ew=!0):(eT=ef,ew=!0);let eE=eS();return eh.attributes={"next.span_name":ev,"next.span_type":et,...eh.attributes},ei.with(eT.setValue(ey,eE),()=>this.getTracerInstance().startActiveSpan(ev,eh,$=>{let ee=()=>{em.delete(eE)};ew&&em.set(eE,new Map(Object.entries(eh.attributes??{})));try{if(eu.length>1)return eu($,ee=>eg($,ee));let et=eu($);return ep(et)?et.then(()=>$.end(),ee=>eg($,ee)).finally(ee):($.end(),ee()),et}catch(et){throw eg($,et),ee(),et}}))}wrap(...$){let ee=this,[et,er,es]=3===$.length?$:[$[0],{},$[1]];return en.NextVanillaSpanAllowlist.includes(et)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let $=er;"function"==typeof $&&"function"==typeof es&&($=$.apply(this,arguments));let en=arguments.length-1,eo=arguments[en];if("function"!=typeof eo)return ee.trace(et,$,()=>es.apply(this,arguments));{let er=ee.getContext().bind(ei.active(),eo);return ee.trace(et,$,($,ee)=>(arguments[en]=function($){return null==ee||ee($),er.apply(this,arguments)},es.apply(this,arguments)))}}:es}startSpan(...$){let[ee,et]=$,er=this.getSpanContext((null==et?void 0:et.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(ee,et,er)}getSpanContext($){return $?eo.setSpan(ei.active(),$):void 0}getRootSpanAttributes(){let $=ei.active().getValue(ey);return em.get($)}}let ew=(()=>{let $=new eT;return()=>$})()},4470:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"getImgProps",{enumerable:!0,get:function(){return ep}}),et(6031);let er=et(6184),en=et(4180);function ei($){return void 0!==$.default}function es($){return void 0!==$.src}function eo($){return"object"==typeof $&&(ei($)||es($))}function eu($){return void 0===$?$:"number"==typeof $?Number.isFinite($)?$:NaN:"string"==typeof $&&/^[0-9]+$/.test($)?parseInt($,10):NaN}function eh($,ee,et){let{deviceSizes:er,allSizes:en}=$;if(et){let $=/(^|\s)(1?\d?\d)vw/g,ee=[];for(let er;er=$.exec(et);er)ee.push(parseInt(er[2]));if(ee.length){let $=.01*Math.min(...ee);return{widths:en.filter(ee=>ee>=er[0]*$),kind:"w"}}return{widths:en,kind:"w"}}return"number"!=typeof ee?{widths:er,kind:"w"}:{widths:[...new Set([ee,2*ee].map($=>en.find(ee=>ee>=$)||en[en.length-1]))],kind:"x"}}function ef($){let{config:ee,src:et,unoptimized:er,width:en,quality:ei,sizes:es,loader:eo}=$;if(er)return{src:et,srcSet:void 0,sizes:void 0};let{widths:eu,kind:ef}=eh(ee,en,es),ep=eu.length-1;return{sizes:es||"w"!==ef?es:"100vw",srcSet:eu.map(($,er)=>eo({config:ee,src:et,quality:ei,width:$})+" "+("w"===ef?$:er+1)+ef).join(", "),src:eo({config:ee,src:et,quality:ei,width:eu[ep]})}}function ep($,ee){let et,es,eh,{src:ep,sizes:eg,unoptimized:em=!1,priority:ey=!1,loading:ev,className:eS,quality:eT,width:ew,height:eE,fill:eC=!1,style:e_,onLoad:eR,onLoadingComplete:ex,placeholder:eI="empty",blurDataURL:eP,fetchPriority:eA,layout:eO,objectFit:eD,objectPosition:eN,lazyBoundary:ek,lazyRoot:eM,...eL}=$,{imgConf:ej,showAltText:eB,blurComplete:eF,defaultLoader:eV}=ee,eU=ej||en.imageConfigDefault;if("allSizes"in eU)et=eU;else{let $=[...eU.deviceSizes,...eU.imageSizes].sort(($,ee)=>$-ee),ee=eU.deviceSizes.sort(($,ee)=>$-ee);et={...eU,allSizes:$,deviceSizes:ee}}let ez=eL.loader||eV;delete eL.loader,delete eL.srcSet;let eq="__next_img_default"in ez;if(eq){if("custom"===et.loader)throw Error('Image with src "'+ep+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let $=ez;ez=ee=>{let{config:et,...er}=ee;return $(er)}}if(eO){"fill"===eO&&(eC=!0);let $={responsive:"100vw",fill:"100vw"},ee={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[eO];ee&&(e_={...e_,...ee});let et=$[eO];et&&!eg&&(eg=et)}let eH="",e$=eu(ew),eG=eu(eE);if(eo(ep)){let $=ei(ep)?ep.default:ep;if(!$.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify($));if(!$.height||!$.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify($));if(es=$.blurWidth,eh=$.blurHeight,eP=eP||$.blurDataURL,eH=$.src,!eC){if(e$||eG){if(e$&&!eG){let ee=e$/$.width;eG=Math.round($.height*ee)}else if(!e$&&eG){let ee=eG/$.height;e$=Math.round($.width*ee)}}else e$=$.width,eG=$.height}}let eW=!ey&&("lazy"===ev||void 0===ev);(!(ep="string"==typeof ep?ep:eH)||ep.startsWith("data:")||ep.startsWith("blob:"))&&(em=!0,eW=!1),et.unoptimized&&(em=!0),eq&&ep.endsWith(".svg")&&!et.dangerouslyAllowSVG&&(em=!0),ey&&(eA="high");let eK=eu(eT),eQ=Object.assign(eC?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:eD,objectPosition:eN}:{},eB?{}:{color:"transparent"},e_),eY=eF||"empty"===eI?null:"blur"===eI?'url("data:image/svg+xml;charset=utf-8,'+(0,er.getImageBlurSvg)({widthInt:e$,heightInt:eG,blurWidth:es,blurHeight:eh,blurDataURL:eP||"",objectFit:eQ.objectFit})+'")':'url("'+eI+'")',eX=eY?{backgroundSize:eQ.objectFit||"cover",backgroundPosition:eQ.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:eY}:{},eJ=ef({config:et,src:ep,unoptimized:em,width:e$,quality:eK,sizes:eg,loader:ez});return{props:{...eL,loading:eW?"lazy":ev,fetchPriority:eA,width:e$,height:eG,decoding:"async",className:eS,style:{...eQ,...eX},sizes:eJ.sizes,srcSet:eJ.srcSet,src:eJ.src},meta:{unoptimized:em,priority:ey,placeholder:eI,fill:eC}}}},6184:($,ee)=>{"use strict";function et($){let{widthInt:ee,heightInt:et,blurWidth:er,blurHeight:en,blurDataURL:ei,objectFit:es}=$,eo=er?40*er:ee,eu=en?40*en:et,eh=eo&&eu?"viewBox='0 0 "+eo+" "+eu+"'":"",ef=eh?"none":"contain"===es?"xMidYMid":"cover"===es?"xMidYMid slice":"none";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+eh+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+ef+"' style='filter: url(%23b);' href='"+ei+"'/%3E%3C/svg%3E"}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"getImageBlurSvg",{enumerable:!0,get:function(){return et}})},4180:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{VALID_LOADERS:function(){return et},imageConfigDefault:function(){return er}});let et=["default","imgix","cloudinary","akamai","custom"],er={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1}},7751:($,ee,et)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),function($,ee){for(var et in ee)Object.defineProperty($,et,{enumerable:!0,get:ee[et]})}(ee,{unstable_getImgProps:function(){return eu},default:function(){return eh}});let er=et(6783),en=et(4470),ei=et(6031),es=et(6987),eo=er._(et(4534)),eu=$=>{(0,ei.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:ee}=(0,en.getImgProps)($,{defaultLoader:eo.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[$,et]of Object.entries(ee))void 0===et&&delete ee[$];return{props:ee}},eh=es.Image},4534:($,ee)=>{"use strict";function et($){let{config:ee,src:et,width:er,quality:en}=$;return ee.path+"?url="+encodeURIComponent(et)+"&w="+er+"&q="+(en||75)}Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"default",{enumerable:!0,get:function(){return er}}),et.__next_img_default=!0;let er=et},6031:($,ee)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"warnOnce",{enumerable:!0,get:function(){return et}});let et=$=>{}},5904:($,ee,et)=>{$.exports=et(7751)},646:($,ee,et)=>{$.exports=et(8026)},7453:()=>{},4132:($,ee)=>{var et;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var er={}.hasOwnProperty;function en(){for(var $="",ee=0;ee<arguments.length;ee++){var et=arguments[ee];et&&($=es($,ei(et)))}return $}function ei($){if("string"==typeof $||"number"==typeof $)return $;if("object"!=typeof $)return"";if(Array.isArray($))return en.apply(null,$);if($.toString!==Object.prototype.toString&&!$.toString.toString().includes("[native code]"))return $.toString();var ee="";for(var et in $)er.call($,et)&&$[et]&&(ee=es(ee,et));return ee}function es($,ee){return ee?$?$+" "+ee:$+ee:$}$.exports?(en.default=en,$.exports=en):void 0!==(et=(function(){return en}).apply(ee,[]))&&($.exports=et)}()},1468:($,ee)=>{var et,er=function($){"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.default=void 0;/**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   */var ee=null;try{ee=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch($){}function et($,ee,et){this.low=0|$,this.high=0|ee,this.unsigned=!!et}function er($){return!0===($&&$.__isLong__)}function en($){var ee=Math.clz32($&-$);return $?31-ee:ee}et.prototype.__isLong__,Object.defineProperty(et.prototype,"__isLong__",{value:!0}),et.isLong=er;var ei={},es={};function eo($,ee){var et,er,en;return ee?($>>>=0,(en=0<=$&&$<256)&&(er=es[$]))?er:(et=eh($,0,!0),en&&(es[$]=et),et):($|=0,(en=-128<=$&&$<128)&&(er=ei[$]))?er:(et=eh($,$<0?-1:0,!1),en&&(ei[$]=et),et)}function eu($,ee){if(isNaN($))return ee?ew:eT;if(ee){if($<0)return ew;if($>=ey)return ex}else{if($<=-ev)return eI;if($+1>=ev)return eR}return $<0?eu(-$,ee).neg():eh($%em|0,$/em|0,ee)}function eh($,ee,er){return new et($,ee,er)}et.fromInt=eo,et.fromNumber=eu,et.fromBits=eh;var ef=Math.pow;function ep($,ee,et){if(0===$.length)throw Error("empty string");if("number"==typeof ee?(et=ee,ee=!1):ee=!!ee,"NaN"===$||"Infinity"===$||"+Infinity"===$||"-Infinity"===$)return ee?ew:eT;if((et=et||10)<2||36<et)throw RangeError("radix");if((er=$.indexOf("-"))>0)throw Error("interior hyphen");if(0===er)return ep($.substring(1),ee,et).neg();for(var er,en=eu(ef(et,8)),ei=eT,es=0;es<$.length;es+=8){var eo=Math.min(8,$.length-es),eh=parseInt($.substring(es,es+eo),et);if(eo<8){var eg=eu(ef(et,eo));ei=ei.mul(eg).add(eu(eh))}else ei=(ei=ei.mul(en)).add(eu(eh))}return ei.unsigned=ee,ei}function eg($,ee){return"number"==typeof $?eu($,ee):"string"==typeof $?ep($,ee):eh($.low,$.high,"boolean"==typeof ee?ee:$.unsigned)}et.fromString=ep,et.fromValue=eg;var em=4294967296,ey=18446744073709552e3,ev=0x7fffffffffffffff,eS=eo(16777216),eT=eo(0);et.ZERO=eT;var ew=eo(0,!0);et.UZERO=ew;var eE=eo(1);et.ONE=eE;var eC=eo(1,!0);et.UONE=eC;var e_=eo(-1);et.NEG_ONE=e_;var eR=eh(-1,2147483647,!1);et.MAX_VALUE=eR;var ex=eh(-1,-1,!0);et.MAX_UNSIGNED_VALUE=ex;var eI=eh(0,-2147483648,!1);et.MIN_VALUE=eI;var eP=et.prototype;eP.toInt=function(){return this.unsigned?this.low>>>0:this.low},eP.toNumber=function(){return this.unsigned?(this.high>>>0)*em+(this.low>>>0):this.high*em+(this.low>>>0)},eP.toString=function($){if(($=$||10)<2||36<$)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(!this.eq(eI))return"-"+this.neg().toString($);var ee=eu($),et=this.div(ee),er=et.mul(ee).sub(this);return et.toString($)+er.toInt().toString($)}for(var en=eu(ef($,6),this.unsigned),ei=this,es="";;){var eo=ei.div(en),eh=(ei.sub(eo.mul(en)).toInt()>>>0).toString($);if((ei=eo).isZero())return eh+es;for(;eh.length<6;)eh="0"+eh;es=""+eh+es}},eP.getHighBits=function(){return this.high},eP.getHighBitsUnsigned=function(){return this.high>>>0},eP.getLowBits=function(){return this.low},eP.getLowBitsUnsigned=function(){return this.low>>>0},eP.getNumBitsAbs=function(){if(this.isNegative())return this.eq(eI)?64:this.neg().getNumBitsAbs();for(var $=0!=this.high?this.high:this.low,ee=31;ee>0&&($&1<<ee)==0;ee--);return 0!=this.high?ee+33:ee+1},eP.isZero=function(){return 0===this.high&&0===this.low},eP.eqz=eP.isZero,eP.isNegative=function(){return!this.unsigned&&this.high<0},eP.isPositive=function(){return this.unsigned||this.high>=0},eP.isOdd=function(){return(1&this.low)==1},eP.isEven=function(){return(1&this.low)==0},eP.equals=function($){return er($)||($=eg($)),(this.unsigned===$.unsigned||this.high>>>31!=1||$.high>>>31!=1)&&this.high===$.high&&this.low===$.low},eP.eq=eP.equals,eP.notEquals=function($){return!this.eq($)},eP.neq=eP.notEquals,eP.ne=eP.notEquals,eP.lessThan=function($){return 0>this.comp($)},eP.lt=eP.lessThan,eP.lessThanOrEqual=function($){return 0>=this.comp($)},eP.lte=eP.lessThanOrEqual,eP.le=eP.lessThanOrEqual,eP.greaterThan=function($){return this.comp($)>0},eP.gt=eP.greaterThan,eP.greaterThanOrEqual=function($){return this.comp($)>=0},eP.gte=eP.greaterThanOrEqual,eP.ge=eP.greaterThanOrEqual,eP.compare=function($){if(er($)||($=eg($)),this.eq($))return 0;var ee=this.isNegative(),et=$.isNegative();return ee&&!et?-1:!ee&&et?1:this.unsigned?$.high>>>0>this.high>>>0||$.high===this.high&&$.low>>>0>this.low>>>0?-1:1:this.sub($).isNegative()?-1:1},eP.comp=eP.compare,eP.negate=function(){return!this.unsigned&&this.eq(eI)?eI:this.not().add(eE)},eP.neg=eP.negate,eP.add=function($){er($)||($=eg($));var ee,et,en=this.high>>>16,ei=65535&this.high,es=this.low>>>16,eo=65535&this.low,eu=$.high>>>16,ef=65535&$.high,ep=$.low>>>16,em=65535&$.low,ey=0,ev=0;return ee=0+((et=0+(eo+em))>>>16),et&=65535,ee+=es+ep,ev+=ee>>>16,ee&=65535,ev+=ei+ef,ey+=ev>>>16,ev&=65535,ey+=en+eu,eh(ee<<16|et,(ey&=65535)<<16|ev,this.unsigned)},eP.subtract=function($){return er($)||($=eg($)),this.add($.neg())},eP.sub=eP.subtract,eP.multiply=function($){if(this.isZero())return this;if(er($)||($=eg($)),ee)return eh(ee.mul(this.low,this.high,$.low,$.high),ee.get_high(),this.unsigned);if($.isZero())return this.unsigned?ew:eT;if(this.eq(eI))return $.isOdd()?eI:eT;if($.eq(eI))return this.isOdd()?eI:eT;if(this.isNegative())return $.isNegative()?this.neg().mul($.neg()):this.neg().mul($).neg();if($.isNegative())return this.mul($.neg()).neg();if(this.lt(eS)&&$.lt(eS))return eu(this.toNumber()*$.toNumber(),this.unsigned);var et,en,ei=this.high>>>16,es=65535&this.high,eo=this.low>>>16,ef=65535&this.low,ep=$.high>>>16,em=65535&$.high,ey=$.low>>>16,ev=65535&$.low,eE=0,eC=0;return et=0+((en=0+ef*ev)>>>16),en&=65535,et+=eo*ev,eC+=et>>>16,et&=65535,et+=ef*ey,eC+=et>>>16,et&=65535,eC+=es*ev,eE+=eC>>>16,eC&=65535,eC+=eo*ey,eE+=eC>>>16,eC&=65535,eC+=ef*em,eE+=eC>>>16,eC&=65535,eE+=ei*ev+es*ey+eo*em+ef*ep,eh(et<<16|en,(eE&=65535)<<16|eC,this.unsigned)},eP.mul=eP.multiply,eP.divide=function($){if(er($)||($=eg($)),$.isZero())throw Error("division by zero");if(ee){var et,en,ei;return this.unsigned||-2147483648!==this.high||-1!==$.low||-1!==$.high?eh((this.unsigned?ee.div_u:ee.div_s)(this.low,this.high,$.low,$.high),ee.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?ew:eT;if(this.unsigned){if($.unsigned||($=$.toUnsigned()),$.gt(this))return ew;if($.gt(this.shru(1)))return eC;ei=ew}else{if(this.eq(eI))return $.eq(eE)||$.eq(e_)?eI:$.eq(eI)?eE:(et=this.shr(1).div($).shl(1)).eq(eT)?$.isNegative()?eE:e_:(en=this.sub($.mul(et)),ei=et.add(en.div($)));if($.eq(eI))return this.unsigned?ew:eT;if(this.isNegative())return $.isNegative()?this.neg().div($.neg()):this.neg().div($).neg();if($.isNegative())return this.div($.neg()).neg();ei=eT}for(en=this;en.gte($);){for(var es=Math.ceil(Math.log(et=Math.max(1,Math.floor(en.toNumber()/$.toNumber())))/Math.LN2),eo=es<=48?1:ef(2,es-48),ep=eu(et),em=ep.mul($);em.isNegative()||em.gt(en);)et-=eo,em=(ep=eu(et,this.unsigned)).mul($);ep.isZero()&&(ep=eE),ei=ei.add(ep),en=en.sub(em)}return ei},eP.div=eP.divide,eP.modulo=function($){return(er($)||($=eg($)),ee)?eh((this.unsigned?ee.rem_u:ee.rem_s)(this.low,this.high,$.low,$.high),ee.get_high(),this.unsigned):this.sub(this.div($).mul($))},eP.mod=eP.modulo,eP.rem=eP.modulo,eP.not=function(){return eh(~this.low,~this.high,this.unsigned)},eP.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},eP.clz=eP.countLeadingZeros,eP.countTrailingZeros=function(){return this.low?en(this.low):en(this.high)+32},eP.ctz=eP.countTrailingZeros,eP.and=function($){return er($)||($=eg($)),eh(this.low&$.low,this.high&$.high,this.unsigned)},eP.or=function($){return er($)||($=eg($)),eh(this.low|$.low,this.high|$.high,this.unsigned)},eP.xor=function($){return er($)||($=eg($)),eh(this.low^$.low,this.high^$.high,this.unsigned)},eP.shiftLeft=function($){return(er($)&&($=$.toInt()),0==($&=63))?this:$<32?eh(this.low<<$,this.high<<$|this.low>>>32-$,this.unsigned):eh(0,this.low<<$-32,this.unsigned)},eP.shl=eP.shiftLeft,eP.shiftRight=function($){return(er($)&&($=$.toInt()),0==($&=63))?this:$<32?eh(this.low>>>$|this.high<<32-$,this.high>>$,this.unsigned):eh(this.high>>$-32,this.high>=0?0:-1,this.unsigned)},eP.shr=eP.shiftRight,eP.shiftRightUnsigned=function($){return(er($)&&($=$.toInt()),0==($&=63))?this:$<32?eh(this.low>>>$|this.high<<32-$,this.high>>>$,this.unsigned):32===$?eh(this.high,0,this.unsigned):eh(this.high>>>$-32,0,this.unsigned)},eP.shru=eP.shiftRightUnsigned,eP.shr_u=eP.shiftRightUnsigned,eP.rotateLeft=function($){var ee;return(er($)&&($=$.toInt()),0==($&=63))?this:32===$?eh(this.high,this.low,this.unsigned):$<32?(ee=32-$,eh(this.low<<$|this.high>>>ee,this.high<<$|this.low>>>ee,this.unsigned)):($-=32,ee=32-$,eh(this.high<<$|this.low>>>ee,this.low<<$|this.high>>>ee,this.unsigned))},eP.rotl=eP.rotateLeft,eP.rotateRight=function($){var ee;return(er($)&&($=$.toInt()),0==($&=63))?this:32===$?eh(this.high,this.low,this.unsigned):$<32?(ee=32-$,eh(this.high<<ee|this.low>>>$,this.low<<ee|this.high>>>$,this.unsigned)):($-=32,ee=32-$,eh(this.low<<ee|this.high>>>$,this.high<<ee|this.low>>>$,this.unsigned))},eP.rotr=eP.rotateRight,eP.toSigned=function(){return this.unsigned?eh(this.low,this.high,!1):this},eP.toUnsigned=function(){return this.unsigned?this:eh(this.low,this.high,!0)},eP.toBytes=function($){return $?this.toBytesLE():this.toBytesBE()},eP.toBytesLE=function(){var $=this.high,ee=this.low;return[255&ee,ee>>>8&255,ee>>>16&255,ee>>>24,255&$,$>>>8&255,$>>>16&255,$>>>24]},eP.toBytesBE=function(){var $=this.high,ee=this.low;return[$>>>24,$>>>16&255,$>>>8&255,255&$,ee>>>24,ee>>>16&255,ee>>>8&255,255&ee]},et.fromBytes=function($,ee,er){return er?et.fromBytesLE($,ee):et.fromBytesBE($,ee)},et.fromBytesLE=function($,ee){return new et($[0]|$[1]<<8|$[2]<<16|$[3]<<24,$[4]|$[5]<<8|$[6]<<16|$[7]<<24,ee)},et.fromBytesBE=function($,ee){return new et($[4]<<24|$[5]<<16|$[6]<<8|$[7],$[0]<<24|$[1]<<16|$[2]<<8|$[3],ee)};var eA=et;return $.default=eA,"default"in $?$.default:$}({});void 0!==(et=(function(){return er}).apply(ee,[]))&&($.exports=et)},5285:($,ee,et)=>{"use strict";let er,en;et.d(ee,{Jn:()=>eQ,qX:()=>e$,Xd:()=>eH,Mq:()=>eX,ZF:()=>eY,KN:()=>eJ});var ei=et(7059),es=et(1954),eo=et(6348);let eu=($,ee)=>ee.some(ee=>$ instanceof ee);function eh(){return er||(er=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ef(){return en||(en=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}let ep=new WeakMap,eg=new WeakMap,em=new WeakMap,ey=new WeakMap,ev=new WeakMap;function eS($){let ee=new Promise((ee,et)=>{let er=()=>{$.removeEventListener("success",en),$.removeEventListener("error",ei)},en=()=>{ee(eR($.result)),er()},ei=()=>{et($.error),er()};$.addEventListener("success",en),$.addEventListener("error",ei)});return ee.then(ee=>{ee instanceof IDBCursor&&ep.set(ee,$)}).catch(()=>{}),ev.set(ee,$),ee}function eT($){if(eg.has($))return;let ee=new Promise((ee,et)=>{let er=()=>{$.removeEventListener("complete",en),$.removeEventListener("error",ei),$.removeEventListener("abort",ei)},en=()=>{ee(),er()},ei=()=>{et($.error||new DOMException("AbortError","AbortError")),er()};$.addEventListener("complete",en),$.addEventListener("error",ei),$.addEventListener("abort",ei)});eg.set($,ee)}let ew={get($,ee,et){if($ instanceof IDBTransaction){if("done"===ee)return eg.get($);if("objectStoreNames"===ee)return $.objectStoreNames||em.get($);if("store"===ee)return et.objectStoreNames[1]?void 0:et.objectStore(et.objectStoreNames[0])}return eR($[ee])},set:($,ee,et)=>($[ee]=et,!0),has:($,ee)=>$ instanceof IDBTransaction&&("done"===ee||"store"===ee)||ee in $};function eE($){ew=$(ew)}function eC($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?ef().includes($)?function(...ee){return $.apply(ex(this),ee),eR(ep.get(this))}:function(...ee){return eR($.apply(ex(this),ee))}:function(ee,...et){let er=$.call(ex(this),ee,...et);return em.set(er,ee.sort?ee.sort():[ee]),eR(er)}}function e_($){return"function"==typeof $?eC($):($ instanceof IDBTransaction&&eT($),eu($,eh()))?new Proxy($,ew):$}function eR($){if($ instanceof IDBRequest)return eS($);if(ey.has($))return ey.get($);let ee=e_($);return ee!==$&&(ey.set($,ee),ev.set(ee,$)),ee}let ex=$=>ev.get($);function eI($,ee,{blocked:et,upgrade:er,blocking:en,terminated:ei}={}){let es=indexedDB.open($,ee),eo=eR(es);return er&&es.addEventListener("upgradeneeded",$=>{er(eR(es.result),$.oldVersion,$.newVersion,eR(es.transaction),$)}),et&&es.addEventListener("blocked",$=>et($.oldVersion,$.newVersion,$)),eo.then($=>{ei&&$.addEventListener("close",()=>ei()),en&&$.addEventListener("versionchange",$=>en($.oldVersion,$.newVersion,$))}).catch(()=>{}),eo}let eP=["get","getKey","getAll","getAllKeys","count"],eA=["put","add","delete","clear"],eO=new Map;function eD($,ee){if(!($ instanceof IDBDatabase&&!(ee in $)&&"string"==typeof ee))return;if(eO.get(ee))return eO.get(ee);let et=ee.replace(/FromIndex$/,""),er=ee!==et,en=eA.includes(et);if(!(et in(er?IDBIndex:IDBObjectStore).prototype)||!(en||eP.includes(et)))return;let ei=async function($,...ee){let ei=this.transaction($,en?"readwrite":"readonly"),es=ei.store;return er&&(es=es.index(ee.shift())),(await Promise.all([es[et](...ee),en&&ei.done]))[0]};return eO.set(ee,ei),ei}eE($=>({...$,get:(ee,et,er)=>eD(ee,et)||$.get(ee,et,er),has:(ee,et)=>!!eD(ee,et)||$.has(ee,et)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map($=>{if(!ek($))return null;{let ee=$.getImmediate();return`${ee.library}/${ee.version}`}}).filter($=>$).join(" ")}}function ek($){let ee=$.getComponent();return(null==ee?void 0:ee.type)==="VERSION"}let eM="@firebase/app",eL="0.9.26",ej=new es.Yd("@firebase/app"),eB="10.7.2",eF="[DEFAULT]",eV={[eM]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},eU=new Map,ez=new Map;function eq($,ee){try{$.container.addComponent(ee)}catch(et){ej.debug(`Component ${ee.name} failed to register with FirebaseApp ${$.name}`,et)}}function eH($){let ee=$.name;if(ez.has(ee))return ej.debug(`There were multiple attempts to register component ${ee}.`),!1;for(let et of(ez.set(ee,$),eU.values()))eq(et,$);return!0}function e$($,ee){let et=$.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),$.container.getProvider(ee)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},eW=new eo.LL("app","Firebase",eG);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor($,ee,et){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},ee),this._name=ee.name,this._automaticDataCollectionEnabled=ee.automaticDataCollectionEnabled,this._container=et,this.container.addComponent(new ei.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw eW.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eQ=eB;function eY($,ee={}){let et=$;"object"!=typeof ee&&(ee={name:ee});let er=Object.assign({name:eF,automaticDataCollectionEnabled:!1},ee),en=er.name;if("string"!=typeof en||!en)throw eW.create("bad-app-name",{appName:String(en)});if(et||(et=(0,eo.aH)()),!et)throw eW.create("no-options");let es=eU.get(en);if(es){if((0,eo.vZ)(et,es.options)&&(0,eo.vZ)(er,es.config))return es;throw eW.create("duplicate-app",{appName:en})}let eu=new ei.H0(en);for(let $ of ez.values())eu.addComponent($);let eh=new eK(et,er,eu);return eU.set(en,eh),eh}function eX($=eF){let ee=eU.get($);if(!ee&&$===eF&&(0,eo.aH)())return eY();if(!ee)throw eW.create("no-app",{appName:$});return ee}function eJ($,ee,et){var er;let en=null!==(er=eV[$])&&void 0!==er?er:$;et&&(en+=`-${et}`);let es=en.match(/\s|\//),eo=ee.match(/\s|\//);if(es||eo){let $=[`Unable to register library "${en}" with version "${ee}":`];es&&$.push(`library name "${en}" contains illegal characters (whitespace or "/")`),es&&eo&&$.push("and"),eo&&$.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),ej.warn($.join(" "));return}eH(new ei.wA(`${en}-version`,()=>({library:en,version:ee}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eZ="firebase-heartbeat-database",e0=1,e1="firebase-heartbeat-store",e2=null;function e4(){return e2||(e2=eI(eZ,e0,{upgrade:($,ee)=>{if(0===ee)try{$.createObjectStore(e1)}catch($){console.warn($)}}}).catch($=>{throw eW.create("idb-open",{originalErrorMessage:$.message})})),e2}async function e3($){try{let ee=await e4();return await ee.transaction(e1).objectStore(e1).get(e5($))}catch($){if($ instanceof eo.ZR)ej.warn($.message);else{let ee=eW.create("idb-get",{originalErrorMessage:null==$?void 0:$.message});ej.warn(ee.message)}}}async function e6($,ee){try{let et=(await e4()).transaction(e1,"readwrite"),er=et.objectStore(e1);await er.put(ee,e5($)),await et.done}catch($){if($ instanceof eo.ZR)ej.warn($.message);else{let ee=eW.create("idb-set",{originalErrorMessage:null==$?void 0:$.message});ej.warn(ee.message)}}}function e5($){return`${$.name}!${$.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e9=1024,e8=2592e6;class e7{constructor($){this.container=$,this._heartbeatsCache=null;let ee=this.container.getProvider("app").getImmediate();this._storage=new tr(ee),this._heartbeatsCachePromise=this._storage.read().then($=>(this._heartbeatsCache=$,$))}async triggerHeartbeat(){var $,ee;let et=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),er=te();return(null===($=this._heartbeatsCache)||void 0===$?void 0:$.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null===(ee=this._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)==null)?void 0:this._heartbeatsCache.lastSentHeartbeatDate===er||this._heartbeatsCache.heartbeats.some($=>$.date===er)?void 0:(this._heartbeatsCache.heartbeats.push({date:er,agent:et}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter($=>{let ee=new Date($.date).valueOf();return Date.now()-ee<=e8}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){var $;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null===($=this._heartbeatsCache)||void 0===$?void 0:$.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let ee=te(),{heartbeatsToSend:et,unsentEntries:er}=tt(this._heartbeatsCache.heartbeats),en=(0,eo.L)(JSON.stringify({version:2,heartbeats:et}));return this._heartbeatsCache.lastSentHeartbeatDate=ee,er.length>0?(this._heartbeatsCache.heartbeats=er,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),en}}function te(){return new Date().toISOString().substring(0,10)}function tt($,ee=e9){let et=[],er=$.slice();for(let en of $){let $=et.find($=>$.agent===en.agent);if($){if($.dates.push(en.date),ti(et)>ee){$.dates.pop();break}}else if(et.push({agent:en.agent,dates:[en.date]}),ti(et)>ee){et.pop();break}er=er.slice(1)}return{heartbeatsToSend:et,unsentEntries:er}}class tr{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,eo.hl)()&&(0,eo.eu)().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let $=await e3(this.app);return(null==$?void 0:$.heartbeats)?$:{heartbeats:[]}}}async overwrite($){var ee;if(await this._canUseIndexedDBPromise){let et=await this.read();return e6(this.app,{lastSentHeartbeatDate:null!==(ee=$.lastSentHeartbeatDate)&&void 0!==ee?ee:et.lastSentHeartbeatDate,heartbeats:$.heartbeats})}}async add($){var ee;if(await this._canUseIndexedDBPromise){let et=await this.read();return e6(this.app,{lastSentHeartbeatDate:null!==(ee=$.lastSentHeartbeatDate)&&void 0!==ee?ee:et.lastSentHeartbeatDate,heartbeats:[...et.heartbeats,...$.heartbeats]})}}}function ti($){return(0,eo.L)(JSON.stringify({version:2,heartbeats:$})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function($){eH(new ei.wA("platform-logger",$=>new eN($),"PRIVATE")),eH(new ei.wA("heartbeat",$=>new e7($),"PRIVATE")),eJ(eM,eL,""),eJ(eM,eL,"esm2017"),eJ("fire-js","")})(0)},7059:($,ee,et)=>{"use strict";et.d(ee,{H0:()=>eh,wA:()=>en});var er=et(6348);class en{constructor($,ee,et){this.name=$,this.instanceFactory=ee,this.type=et,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ei="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor($,ee){this.name=$,this.container=ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){let ee=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(ee)){let $=new er.BH;if(this.instancesDeferred.set(ee,$),this.isInitialized(ee)||this.shouldAutoInitialize())try{let et=this.getOrInitializeService({instanceIdentifier:ee});et&&$.resolve(et)}catch($){}}return this.instancesDeferred.get(ee).promise}getImmediate($){var ee;let et=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),er=null!==(ee=null==$?void 0:$.optional)&&void 0!==ee&&ee;if(this.isInitialized(et)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:et})}catch($){if(er)return null;throw $}else{if(er)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(eu($))try{this.getOrInitializeService({instanceIdentifier:ei})}catch($){}for(let[$,ee]of this.instancesDeferred.entries()){let et=this.normalizeInstanceIdentifier($);try{let $=this.getOrInitializeService({instanceIdentifier:et});ee.resolve($)}catch($){}}}}clearInstance($=ei){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}async delete(){let $=Array.from(this.instances.values());await Promise.all([...$.filter($=>"INTERNAL"in $).map($=>$.INTERNAL.delete()),...$.filter($=>"_delete"in $).map($=>$._delete())])}isComponentSet(){return null!=this.component}isInitialized($=ei){return this.instances.has($)}getOptions($=ei){return this.instancesOptions.get($)||{}}initialize($={}){let{options:ee={}}=$,et=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(et))throw Error(`${this.name}(${et}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let er=this.getOrInitializeService({instanceIdentifier:et,options:ee});for(let[$,ee]of this.instancesDeferred.entries())et===this.normalizeInstanceIdentifier($)&&ee.resolve(er);return er}onInit($,ee){var et;let er=this.normalizeInstanceIdentifier(ee),en=null!==(et=this.onInitCallbacks.get(er))&&void 0!==et?et:new Set;en.add($),this.onInitCallbacks.set(er,en);let ei=this.instances.get(er);return ei&&$(ei,er),()=>{en.delete($)}}invokeOnInitCallbacks($,ee){let et=this.onInitCallbacks.get(ee);if(et)for(let er of et)try{er($,ee)}catch($){}}getOrInitializeService({instanceIdentifier:$,options:ee={}}){let et=this.instances.get($);if(!et&&this.component&&(et=this.component.instanceFactory(this.container,{instanceIdentifier:eo($),options:ee}),this.instances.set($,et),this.instancesOptions.set($,ee),this.invokeOnInitCallbacks(et,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,et)}catch($){}return et||null}normalizeInstanceIdentifier($=ei){return this.component?this.component.multipleInstances?$:ei:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function eo($){return $===ei?void 0:$}function eu($){return"EAGER"===$.instantiationMode}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor($){this.name=$,this.providers=new Map}addComponent($){let ee=this.getProvider($.name);if(ee.isComponentSet())throw Error(`Component ${$.name} has already been registered with ${this.name}`);ee.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);let ee=new es($,this);return this.providers.set($,ee),ee}getProviders(){return Array.from(this.providers.values())}}},1954:($,ee,et)=>{"use strict";var er;et.d(ee,{Yd:()=>eh,in:()=>er});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let en=[];!function($){$[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT"}(er||(er={}));let ei={debug:er.DEBUG,verbose:er.VERBOSE,info:er.INFO,warn:er.WARN,error:er.ERROR,silent:er.SILENT},es=er.INFO,eo={[er.DEBUG]:"log",[er.VERBOSE]:"log",[er.INFO]:"info",[er.WARN]:"warn",[er.ERROR]:"error"},eu=($,ee,...et)=>{if(ee<$.logLevel)return;let er=new Date().toISOString(),en=eo[ee];if(en)console[en](`[${er}]  ${$.name}:`,...et);else throw Error(`Attempted to log a message with an invalid logType (value: ${ee})`)};class eh{constructor($){this.name=$,this._logLevel=es,this._logHandler=eu,this._userLogHandler=null,en.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in er))throw TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?ei[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,er.DEBUG,...$),this._logHandler(this,er.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,er.VERBOSE,...$),this._logHandler(this,er.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,er.INFO,...$),this._logHandler(this,er.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,er.WARN,...$),this._logHandler(this,er.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,er.ERROR,...$),this._logHandler(this,er.ERROR,...$)}}},6348:($,ee,et)=>{"use strict";et.d(ee,{$s:()=>eq,BH:()=>eE,G6:()=>eI,L:()=>eh,LL:()=>ek,P0:()=>eT,Sg:()=>eC,ZR:()=>eN,aH:()=>ew,eu:()=>eA,hl:()=>eP,m9:()=>eH,ru:()=>ex,vZ:()=>ej,z$:()=>e_,zI:()=>eO});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let er={NODE_CLIENT:!1},en=function($){let ee=[],et=0;for(let er=0;er<$.length;er++){let en=$.charCodeAt(er);en<128?ee[et++]=en:(en<2048?ee[et++]=en>>6|192:((64512&en)==55296&&er+1<$.length&&(64512&$.charCodeAt(er+1))==56320?(en=65536+((1023&en)<<10)+(1023&$.charCodeAt(++er)),ee[et++]=en>>18|240,ee[et++]=en>>12&63|128):ee[et++]=en>>12|224,ee[et++]=en>>6&63|128),ee[et++]=63&en|128)}return ee},ei=function($){let ee=[],et=0,er=0;for(;et<$.length;){let en=$[et++];if(en<128)ee[er++]=String.fromCharCode(en);else if(en>191&&en<224){let ei=$[et++];ee[er++]=String.fromCharCode((31&en)<<6|63&ei)}else if(en>239&&en<365){let ei=((7&en)<<18|(63&$[et++])<<12|(63&$[et++])<<6|63&$[et++])-65536;ee[er++]=String.fromCharCode(55296+(ei>>10)),ee[er++]=String.fromCharCode(56320+(1023&ei))}else{let ei=$[et++],es=$[et++];ee[er++]=String.fromCharCode((15&en)<<12|(63&ei)<<6|63&es)}}return ee.join("")},es={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,ee){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();let et=ee?this.byteToCharMapWebSafe_:this.byteToCharMap_,er=[];for(let ee=0;ee<$.length;ee+=3){let en=$[ee],ei=ee+1<$.length,es=ei?$[ee+1]:0,eo=ee+2<$.length,eu=eo?$[ee+2]:0,eh=en>>2,ef=(3&en)<<4|es>>4,ep=(15&es)<<2|eu>>6,eg=63&eu;eo||(eg=64,ei||(ep=64)),er.push(et[eh],et[ef],et[ep],et[eg])}return er.join("")},encodeString($,ee){return this.HAS_NATIVE_SUPPORT&&!ee?btoa($):this.encodeByteArray(en($),ee)},decodeString($,ee){return this.HAS_NATIVE_SUPPORT&&!ee?atob($):ei(this.decodeStringToByteArray($,ee))},decodeStringToByteArray($,ee){this.init_();let et=ee?this.charToByteMapWebSafe_:this.charToByteMap_,er=[];for(let ee=0;ee<$.length;){let en=et[$.charAt(ee++)],ei=ee<$.length?et[$.charAt(ee)]:0,es=++ee<$.length?et[$.charAt(ee)]:64,eu=++ee<$.length?et[$.charAt(ee)]:64;if(++ee,null==en||null==ei||null==es||null==eu)throw new eo;let eh=en<<2|ei>>4;if(er.push(eh),64!==es){let $=ei<<4&240|es>>2;if(er.push($),64!==eu){let $=es<<6&192|eu;er.push($)}}}return er},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class eo extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let eu=function($){let ee=en($);return es.encodeByteArray(ee,!0)},eh=function($){return eu($).replace(/\./g,"")},ef=function($){try{return es.decodeString($,!0)}catch($){console.error("base64Decode failed: ",$)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(){if("undefined"!=typeof self)return self;if("undefined"!=typeof global)return global;throw Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eg=()=>ep().__FIREBASE_DEFAULTS__,em=()=>{if("undefined"==typeof process||void 0===process.env)return;let $=process.env.__FIREBASE_DEFAULTS__;if($)return JSON.parse($)},ey=()=>{let $;if("undefined"==typeof document)return;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch($){return}let ee=$&&ef($[1]);return ee&&JSON.parse(ee)},ev=()=>{try{return eg()||em()||ey()}catch($){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`);return}},eS=$=>{var ee,et;return null===(et=null===(ee=ev())||void 0===ee?void 0:ee.emulatorHosts)||void 0===et?void 0:et[$]},eT=$=>{let ee=eS($);if(!ee)return;let et=ee.lastIndexOf(":");if(et<=0||et+1===ee.length)throw Error(`Invalid host ${ee} with no separate hostname and port!`);let er=parseInt(ee.substring(et+1),10);return"["===ee[0]?[ee.substring(1,et-1),er]:[ee.substring(0,et),er]},ew=()=>{var $;return null===($=ev())||void 0===$?void 0:$.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,ee)=>{this.resolve=$,this.reject=ee})}wrapCallback($){return(ee,et)=>{ee?this.reject(ee):this.resolve(et),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(ee):$(ee,et))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC($,ee){if($.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let et={alg:"none",type:"JWT"},er=ee||"demo-project",en=$.iat||0,ei=$.sub||$.user_id;if(!ei)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let es=Object.assign({iss:`https://securetoken.google.com/${er}`,aud:er,iat:en,exp:en+3600,auth_time:en,sub:ei,user_id:ei,firebase:{sign_in_provider:"custom",identities:{}}},$),eo="";return[eh(JSON.stringify(et)),eh(JSON.stringify(es)),eo].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function eR(){var $;let ee=null===($=ev())||void 0===$?void 0:$.forceEnvironment;if("node"===ee)return!0;if("browser"===ee)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch($){return!1}}function ex(){let $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function eI(){return!eR()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eP(){try{return"object"==typeof indexedDB}catch($){return!1}}function eA(){return new Promise(($,ee)=>{try{let et=!0,er="validate-browser-context-for-indexeddb-analytics-module",en=self.indexedDB.open(er);en.onsuccess=()=>{en.result.close(),et||self.indexedDB.deleteDatabase(er),$(!0)},en.onupgradeneeded=()=>{et=!1},en.onerror=()=>{var $;ee((null===($=en.error)||void 0===$?void 0:$.message)||"")}}catch($){ee($)}})}function eO(){return"undefined"!=typeof navigator&&!!navigator.cookieEnabled}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eD="FirebaseError";class eN extends Error{constructor($,ee,et){super(ee),this.code=$,this.customData=et,this.name=eD,Object.setPrototypeOf(this,eN.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ek.prototype.create)}}class ek{constructor($,ee,et){this.service=$,this.serviceName=ee,this.errors=et}create($,...ee){let et=ee[0]||{},er=`${this.service}/${$}`,en=this.errors[$],ei=en?eM(en,et):"Error",es=`${this.serviceName}: ${ei} (${er}).`;return new eN(er,es,et)}}function eM($,ee){return $.replace(eL,($,et)=>{let er=ee[et];return null!=er?String(er):`<${et}?>`})}let eL=/\{\$([^}]+)}/g;function ej($,ee){if($===ee)return!0;let et=Object.keys($),er=Object.keys(ee);for(let en of et){if(!er.includes(en))return!1;let et=$[en],ei=ee[en];if(eB(et)&&eB(ei)){if(!ej(et,ei))return!1}else if(et!==ei)return!1}for(let $ of er)if(!et.includes($))return!1;return!0}function eB($){return null!==$&&"object"==typeof $}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eF=1e3,eV=2,eU=144e5,ez=.5;function eq($,ee=eF,et=eV){let er=ee*Math.pow(et,$),en=Math.round(ez*er*(Math.random()-.5)*2);return Math.min(eU,er+en)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eH($){return $&&$._delegate?$._delegate:$}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er.NODE_CLIENT=!0},9996:($,ee,et)=>{"use strict";function er($,ee){if(!Object.prototype.hasOwnProperty.call($,ee))throw TypeError("attempted to use private field on non-instance");return $}et.r(ee),et.d(ee,{_:()=>er,_class_private_field_loose_base:()=>er})},7074:($,ee,et)=>{"use strict";et.r(ee),et.d(ee,{_:()=>en,_class_private_field_loose_key:()=>en});var er=0;function en($){return"__private_"+er+++"_"+$}},9694:($,ee,et)=>{"use strict";function er($){return $&&$.__esModule?$:{default:$}}et.r(ee),et.d(ee,{_:()=>er,_interop_require_default:()=>er})},7824:($,ee,et)=>{"use strict";function er($){if("function"!=typeof WeakMap)return null;var ee=new WeakMap,et=new WeakMap;return(er=function($){return $?et:ee})($)}function en($,ee){if(!ee&&$&&$.__esModule)return $;if(null===$||"object"!=typeof $&&"function"!=typeof $)return{default:$};var et=er(ee);if(et&&et.has($))return et.get($);var en={},ei=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var es in $)if("default"!==es&&Object.prototype.hasOwnProperty.call($,es)){var eo=ei?Object.getOwnPropertyDescriptor($,es):null;eo&&(eo.get||eo.set)?Object.defineProperty(en,es,eo):en[es]=$[es]}return en.default=$,et&&et.set($,en),en}et.r(ee),et.d(ee,{_:()=>en,_interop_require_wildcard:()=>en})},14:($,ee,et)=>{"use strict";let er,en,ei,es,eo,eu;et.d(ee,{IH:()=>rj,Gb:()=>rF,Kz:()=>rV});var eh=et(5285),ef=et(1954),ep=et(6348),eg=et(7059);let em=($,ee)=>ee.some(ee=>$ instanceof ee);function ey(){return er||(er=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ev(){return en||(en=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}let eS=new WeakMap,eT=new WeakMap,ew=new WeakMap,eE=new WeakMap,eC=new WeakMap;function e_($){let ee=new Promise((ee,et)=>{let er=()=>{$.removeEventListener("success",en),$.removeEventListener("error",ei)},en=()=>{ee(eO($.result)),er()},ei=()=>{et($.error),er()};$.addEventListener("success",en),$.addEventListener("error",ei)});return ee.then(ee=>{ee instanceof IDBCursor&&eS.set(ee,$)}).catch(()=>{}),eC.set(ee,$),ee}function eR($){if(eT.has($))return;let ee=new Promise((ee,et)=>{let er=()=>{$.removeEventListener("complete",en),$.removeEventListener("error",ei),$.removeEventListener("abort",ei)},en=()=>{ee(),er()},ei=()=>{et($.error||new DOMException("AbortError","AbortError")),er()};$.addEventListener("complete",en),$.addEventListener("error",ei),$.addEventListener("abort",ei)});eT.set($,ee)}let ex={get($,ee,et){if($ instanceof IDBTransaction){if("done"===ee)return eT.get($);if("objectStoreNames"===ee)return $.objectStoreNames||ew.get($);if("store"===ee)return et.objectStoreNames[1]?void 0:et.objectStore(et.objectStoreNames[0])}return eO($[ee])},set:($,ee,et)=>($[ee]=et,!0),has:($,ee)=>$ instanceof IDBTransaction&&("done"===ee||"store"===ee)||ee in $};function eI($){ex=$(ex)}function eP($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?ev().includes($)?function(...ee){return $.apply(eD(this),ee),eO(eS.get(this))}:function(...ee){return eO($.apply(eD(this),ee))}:function(ee,...et){let er=$.call(eD(this),ee,...et);return ew.set(er,ee.sort?ee.sort():[ee]),eO(er)}}function eA($){return"function"==typeof $?eP($):($ instanceof IDBTransaction&&eR($),em($,ey()))?new Proxy($,ex):$}function eO($){if($ instanceof IDBRequest)return e_($);if(eE.has($))return eE.get($);let ee=eA($);return ee!==$&&(eE.set($,ee),eC.set(ee,$)),ee}let eD=$=>eC.get($);function eN($,ee,{blocked:et,upgrade:er,blocking:en,terminated:ei}={}){let es=indexedDB.open($,ee),eo=eO(es);return er&&es.addEventListener("upgradeneeded",$=>{er(eO(es.result),$.oldVersion,$.newVersion,eO(es.transaction))}),et&&es.addEventListener("blocked",()=>et()),eo.then($=>{ei&&$.addEventListener("close",()=>ei()),en&&$.addEventListener("versionchange",()=>en())}).catch(()=>{}),eo}let ek=["get","getKey","getAll","getAllKeys","count"],eM=["put","add","delete","clear"],eL=new Map;function ej($,ee){if(!($ instanceof IDBDatabase&&!(ee in $)&&"string"==typeof ee))return;if(eL.get(ee))return eL.get(ee);let et=ee.replace(/FromIndex$/,""),er=ee!==et,en=eM.includes(et);if(!(et in(er?IDBIndex:IDBObjectStore).prototype)||!(en||ek.includes(et)))return;let ei=async function($,...ee){let ei=this.transaction($,en?"readwrite":"readonly"),es=ei.store;return er&&(es=es.index(ee.shift())),(await Promise.all([es[et](...ee),en&&ei.done]))[0]};return eL.set(ee,ei),ei}eI($=>({...$,get:(ee,et,er)=>ej(ee,et)||$.get(ee,et,er),has:(ee,et)=>!!ej(ee,et)||$.has(ee,et)}));let eB="@firebase/installations",eF="0.6.4",eV=1e4,eU=`w:${eF}`,ez="FIS_v2",eq="https://firebaseinstallations.googleapis.com/v1",eH=36e5,e$="installations",eG="Installations",eW={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},eK=new ep.LL(e$,eG,eW);function eQ($){return $ instanceof ep.ZR&&$.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eY({projectId:$}){return`${eq}/projects/${$}/installations`}function eX($){return{token:$.token,requestStatus:2,expiresIn:e2($.expiresIn),creationTime:Date.now()}}async function eJ($,ee){let et=(await ee.json()).error;return eK.create("request-failed",{requestName:$,serverCode:et.code,serverMessage:et.message,serverStatus:et.status})}function eZ({apiKey:$}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":$})}function e0($,{refreshToken:ee}){let et=eZ($);return et.append("Authorization",e4(ee)),et}async function e1($){let ee=await $();return ee.status>=500&&ee.status<600?$():ee}function e2($){return Number($.replace("s","000"))}function e4($){return`${ez} ${$}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e3({appConfig:$,heartbeatServiceProvider:ee},{fid:et}){let er=eY($),en=eZ($),ei=ee.getImmediate({optional:!0});if(ei){let $=await ei.getHeartbeatsHeader();$&&en.append("x-firebase-client",$)}let es={method:"POST",headers:en,body:JSON.stringify({fid:et,authVersion:ez,appId:$.appId,sdkVersion:eU})},eo=await e1(()=>fetch(er,es));if(eo.ok){let $=await eo.json();return{fid:$.fid||et,registrationStatus:2,refreshToken:$.refreshToken,authToken:eX($.authToken)}}throw await eJ("Create Installation",eo)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6($){return new Promise(ee=>{setTimeout(ee,$)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5($){return btoa(String.fromCharCode(...$)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e9=/^[cdef][\w-]{21}$/,e8="";function e7(){try{let $=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues($),$[0]=112+$[0]%16;let ee=te($);return e9.test(ee)?ee:e8}catch($){return e8}}function te($){return e5($).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt($){return`${$.appName}!${$.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tr=new Map;function ti($,ee){let et=tt($);ts(et,ee),tl(et,ee)}function ts($,ee){let et=tr.get($);if(et)for(let $ of et)$(ee)}function tl($,ee){let et=th();et&&et.postMessage({key:$,fid:ee}),tf()}let tu=null;function th(){return!tu&&"BroadcastChannel"in self&&((tu=new BroadcastChannel("[Firebase] FID Change")).onmessage=$=>{ts($.data.key,$.data.fid)}),tu}function tf(){0===tr.size&&tu&&(tu.close(),tu=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tp="firebase-installations-database",tg=1,tm="firebase-installations-store",ty=null;function tv(){return ty||(ty=eN(tp,tg,{upgrade:($,ee)=>{0===ee&&$.createObjectStore(tm)}})),ty}async function tS($,ee){let et=tt($),er=(await tv()).transaction(tm,"readwrite"),en=er.objectStore(tm),ei=await en.get(et);return await en.put(ee,et),await er.done,ei&&ei.fid===ee.fid||ti($,ee.fid),ee}async function tT($){let ee=tt($),et=(await tv()).transaction(tm,"readwrite");await et.objectStore(tm).delete(ee),await et.done}async function tw($,ee){let et=tt($),er=(await tv()).transaction(tm,"readwrite"),en=er.objectStore(tm),ei=await en.get(et),es=ee(ei);return void 0===es?await en.delete(et):await en.put(es,et),await er.done,es&&(!ei||ei.fid!==es.fid)&&ti($,es.fid),es}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tE($){let ee;let et=await tw($.appConfig,et=>{let er=t_($,tC(et));return ee=er.registrationPromise,er.installationEntry});return et.fid===e8?{installationEntry:await ee}:{installationEntry:et,registrationPromise:ee}}function tC($){return tA($||{fid:e7(),registrationStatus:0})}function t_($,ee){if(0===ee.registrationStatus){if(!navigator.onLine)return{installationEntry:ee,registrationPromise:Promise.reject(eK.create("app-offline"))};let et={fid:ee.fid,registrationStatus:1,registrationTime:Date.now()},er=tR($,et);return{installationEntry:et,registrationPromise:er}}return 1===ee.registrationStatus?{installationEntry:ee,registrationPromise:tI($)}:{installationEntry:ee}}async function tR($,ee){try{let et=await e3($,ee);return tS($.appConfig,et)}catch(et){throw eQ(et)&&409===et.customData.serverCode?await tT($.appConfig):await tS($.appConfig,{fid:ee.fid,registrationStatus:0}),et}}async function tI($){let ee=await tP($.appConfig);for(;1===ee.registrationStatus;)await e6(100),ee=await tP($.appConfig);if(0===ee.registrationStatus){let{installationEntry:ee,registrationPromise:et}=await tE($);return et||ee}return ee}function tP($){return tw($,$=>{if(!$)throw eK.create("installation-not-found");return tA($)})}function tA($){return tO($)?{fid:$.fid,registrationStatus:0}:$}function tO($){return 1===$.registrationStatus&&$.registrationTime+eV<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD({appConfig:$,heartbeatServiceProvider:ee},et){let er=tN($,et),en=e0($,et),ei=ee.getImmediate({optional:!0});if(ei){let $=await ei.getHeartbeatsHeader();$&&en.append("x-firebase-client",$)}let es={method:"POST",headers:en,body:JSON.stringify({installation:{sdkVersion:eU,appId:$.appId}})},eo=await e1(()=>fetch(er,es));if(eo.ok)return eX(await eo.json());throw await eJ("Generate Auth Token",eo)}function tN($,{fid:ee}){return`${eY($)}/${ee}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk($,ee=!1){let et;let er=await tw($.appConfig,er=>{if(!tB(er))throw eK.create("not-registered");let en=er.authToken;if(!ee&&tF(en))return er;if(1===en.requestStatus)return et=tM($,ee),er;{if(!navigator.onLine)throw eK.create("app-offline");let ee=tU(er);return et=tj($,ee),ee}});return et?await et:er.authToken}async function tM($,ee){let et=await tL($.appConfig);for(;1===et.authToken.requestStatus;)await e6(100),et=await tL($.appConfig);let er=et.authToken;return 0===er.requestStatus?tk($,ee):er}function tL($){return tw($,$=>{if(!tB($))throw eK.create("not-registered");return tz($.authToken)?Object.assign(Object.assign({},$),{authToken:{requestStatus:0}}):$})}async function tj($,ee){try{let et=await tD($,ee),er=Object.assign(Object.assign({},ee),{authToken:et});return await tS($.appConfig,er),et}catch(et){if(eQ(et)&&(401===et.customData.serverCode||404===et.customData.serverCode))await tT($.appConfig);else{let et=Object.assign(Object.assign({},ee),{authToken:{requestStatus:0}});await tS($.appConfig,et)}throw et}}function tB($){return void 0!==$&&2===$.registrationStatus}function tF($){return 2===$.requestStatus&&!tV($)}function tV($){let ee=Date.now();return ee<$.creationTime||$.creationTime+$.expiresIn<ee+eH}function tU($){let ee={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},$),{authToken:ee})}function tz($){return 1===$.requestStatus&&$.requestTime+eV<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tq($){let ee=$,{installationEntry:et,registrationPromise:er}=await tE(ee);return er?er.catch(console.error):tk(ee).catch(console.error),et.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tH($,ee=!1){let et=$;return await t$(et),(await tk(et,ee)).token}async function t$($){let{registrationPromise:ee}=await tE($);ee&&await ee}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tG($){if(!$||!$.options)throw tW("App Configuration");if(!$.name)throw tW("App Name");for(let ee of["projectId","apiKey","appId"])if(!$.options[ee])throw tW(ee);return{appName:$.name,projectId:$.options.projectId,apiKey:$.options.apiKey,appId:$.options.appId}}function tW($){return eK.create("missing-app-config-values",{valueName:$})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tK="installations",tQ="installations-internal",tY=$=>{let ee=$.getProvider("app").getImmediate(),et=tG(ee),er=(0,eh.qX)(ee,"heartbeat");return{app:ee,appConfig:et,heartbeatServiceProvider:er,_delete:()=>Promise.resolve()}},tX=$=>{let ee=$.getProvider("app").getImmediate(),et=(0,eh.qX)(ee,tK).getImmediate();return{getId:()=>tq(et),getToken:$=>tH(et,$)}};(function(){(0,eh.Xd)(new eg.wA(tK,tY,"PUBLIC")),(0,eh.Xd)(new eg.wA(tQ,tX,"PRIVATE"))})(),(0,eh.KN)(eB,eF),(0,eh.KN)(eB,eF,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tJ="analytics",tZ="firebase_id",t0="origin",t1=6e4,t2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",t4="https://www.googletagmanager.com/gtag/js",t3=new ef.Yd("@firebase/analytics"),t6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},t5=new ep.LL("analytics","Analytics",t6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t9($){if(!$.startsWith(t4)){let ee=t5.create("invalid-gtag-resource",{gtagURL:$});return t3.warn(ee.message),""}return $}function t8($){return Promise.all($.map($=>$.catch($=>$)))}function t7($,ee){let et;return window.trustedTypes&&(et=window.trustedTypes.createPolicy($,ee)),et}function rt($,ee){let et=t7("firebase-js-sdk-policy",{createScriptURL:t9}),er=document.createElement("script"),en=`${t4}?l=${$}&id=${ee}`;er.src=et?null==et?void 0:et.createScriptURL(en):en,er.async=!0,document.head.appendChild(er)}function rr($){let ee=[];return Array.isArray(window[$])?ee=window[$]:window[$]=ee,ee}async function rn($,ee,et,er,en,ei){let es=er[en];try{if(es)await ee[es];else{let $=(await t8(et)).find($=>$.measurementId===en);$&&await ee[$.appId]}}catch($){t3.error($)}$("config",en,ei)}async function ri($,ee,et,er,en){try{let ei=[];if(en&&en.send_to){let $=en.send_to;Array.isArray($)||($=[$]);let er=await t8(et);for(let et of $){let $=er.find($=>$.measurementId===et),en=$&&ee[$.appId];if(en)ei.push(en);else{ei=[];break}}}0===ei.length&&(ei=Object.values(ee)),await Promise.all(ei),$("event",er,en||{})}catch($){t3.error($)}}function rs($,ee,et,er){return async function(en,...ei){try{if("event"===en){let[er,en]=ei;await ri($,ee,et,er,en)}else if("config"===en){let[en,es]=ei;await rn($,ee,et,er,en,es)}else if("consent"===en){let[ee]=ei;$("consent","update",ee)}else if("get"===en){let[ee,et,er]=ei;$("get",ee,et,er)}else if("set"===en){let[ee]=ei;$("set",ee)}else $(en,...ei)}catch($){t3.error($)}}}function ro($,ee,et,er,en){let ei=function(...$){window[er].push(arguments)};return window[en]&&"function"==typeof window[en]&&(ei=window[en]),window[en]=rs(ei,$,ee,et),{gtagCore:ei,wrappedGtag:window[en]}}function rl($){for(let ee of Object.values(window.document.getElementsByTagName("script")))if(ee.src&&ee.src.includes(t4)&&ee.src.includes($))return ee;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru=30,rh=1e3;class rf{constructor($={},ee=rh){this.throttleMetadata=$,this.intervalMillis=ee}getThrottleMetadata($){return this.throttleMetadata[$]}setThrottleMetadata($,ee){this.throttleMetadata[$]=ee}deleteThrottleMetadata($){delete this.throttleMetadata[$]}}let rp=new rf;function rg($){return new Headers({Accept:"application/json","x-goog-api-key":$})}async function rm($){var ee;let{appId:et,apiKey:er}=$,en={method:"GET",headers:rg(er)},ei=t2.replace("{app-id}",et),es=await fetch(ei,en);if(200!==es.status&&304!==es.status){let $="";try{let et=await es.json();(null===(ee=et.error)||void 0===ee?void 0:ee.message)&&($=et.error.message)}catch($){}throw t5.create("config-fetch-failed",{httpStatus:es.status,responseMessage:$})}return es.json()}async function ry($,ee=rp,et){let{appId:er,apiKey:en,measurementId:ei}=$.options;if(!er)throw t5.create("no-app-id");if(!en){if(ei)return{measurementId:ei,appId:er};throw t5.create("no-api-key")}let es=ee.getThrottleMetadata(er)||{backoffCount:0,throttleEndTimeMillis:Date.now()},eo=new rw;return setTimeout(async()=>{eo.abort()},void 0!==et?et:t1),rv({appId:er,apiKey:en,measurementId:ei},es,eo,ee)}async function rv($,{throttleEndTimeMillis:ee,backoffCount:et},er,en=rp){var ei;let{appId:es,measurementId:eo}=$;try{await rS(er,ee)}catch($){if(eo)return t3.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${eo} provided in the "measurementId" field in the local Firebase config. [${null==$?void 0:$.message}]`),{appId:es,measurementId:eo};throw $}try{let ee=await rm($);return en.deleteThrottleMetadata(es),ee}catch(ef){let ee=ef;if(!rT(ee)){if(en.deleteThrottleMetadata(es),eo)return t3.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${eo} provided in the "measurementId" field in the local Firebase config. [${null==ee?void 0:ee.message}]`),{appId:es,measurementId:eo};throw ef}let eu=503===Number(null===(ei=null==ee?void 0:ee.customData)||void 0===ei?void 0:ei.httpStatus)?(0,ep.$s)(et,en.intervalMillis,ru):(0,ep.$s)(et,en.intervalMillis),eh={throttleEndTimeMillis:Date.now()+eu,backoffCount:et+1};return en.setThrottleMetadata(es,eh),t3.debug(`Calling attemptFetch again in ${eu} millis`),rv($,eh,er,en)}}function rS($,ee){return new Promise((et,er)=>{let en=setTimeout(et,Math.max(ee-Date.now(),0));$.addEventListener(()=>{clearTimeout(en),er(t5.create("fetch-throttle",{throttleEndTimeMillis:ee}))})})}function rT($){if(!($ instanceof ep.ZR)||!$.customData)return!1;let ee=Number($.customData.httpStatus);return 429===ee||500===ee||503===ee||504===ee}class rw{constructor(){this.listeners=[]}addEventListener($){this.listeners.push($)}abort(){this.listeners.forEach($=>$())}}async function rE($,ee,et,er,en){if(en&&en.global){$("event",et,er);return}{let en=await ee;$("event",et,Object.assign(Object.assign({},er),{send_to:en}))}}function rC($){es=$}function r_($){ei=$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(){if(!(0,ep.hl)())return t3.warn(t5.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await (0,ep.eu)()}catch($){return t3.warn(t5.create("indexeddb-unavailable",{errorInfo:null==$?void 0:$.toString()}).message),!1}return!0}async function rx($,ee,et,er,en,eo,eu){var eh;let ef=ry($);ef.then(ee=>{et[ee.measurementId]=ee.appId,$.options.measurementId&&ee.measurementId!==$.options.measurementId&&t3.warn(`The measurement ID in the local Firebase config (${$.options.measurementId}) does not match the measurement ID fetched from the server (${ee.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($=>t3.error($)),ee.push(ef);let ep=rR().then($=>$?er.getId():void 0),[eg,em]=await Promise.all([ef,ep]);rl(eo)||rt(eo,eg.measurementId),es&&(en("consent","default",es),rC(void 0)),en("js",new Date);let ey=null!==(eh=null==eu?void 0:eu.config)&&void 0!==eh?eh:{};return ey[t0]="firebase",ey.update=!0,null!=em&&(ey[tZ]=em),en("config",eg.measurementId,ey),ei&&(en("set",ei),r_(void 0)),eg.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor($){this.app=$}_delete(){return delete rP[this.app.options.appId],Promise.resolve()}}let rP={},rA=[],rO={},rD="dataLayer",rN="gtag",rk=!1;function rM(){let $=[];if((0,ep.ru)()&&$.push("This is a browser extension environment."),(0,ep.zI)()||$.push("Cookies are not available."),$.length>0){let ee=$.map(($,ee)=>`(${ee+1}) ${$}`).join(" "),et=t5.create("invalid-analytics-context",{errorInfo:ee});t3.warn(et.message)}}function rL($,ee,et){rM();let er=$.options.appId;if(!er)throw t5.create("no-app-id");if(!$.options.apiKey){if($.options.measurementId)t3.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${$.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw t5.create("no-api-key")}if(null!=rP[er])throw t5.create("already-exists",{id:er});if(!rk){rr(rD);let{wrappedGtag:$,gtagCore:ee}=ro(rP,rA,rO,rD,rN);eu=$,eo=ee,rk=!0}return rP[er]=rx($,rA,rO,ee,eo,rD,et),new rI($)}function rj($=(0,eh.Mq)()){$=(0,ep.m9)($);let ee=(0,eh.qX)($,tJ);return ee.isInitialized()?ee.getImmediate():rB($)}function rB($,ee={}){let et=(0,eh.qX)($,tJ);if(et.isInitialized()){let $=et.getImmediate();if((0,ep.vZ)(ee,et.getOptions()))return $;throw t5.create("already-initialized")}return et.initialize({options:ee})}async function rF(){if((0,ep.ru)()||!(0,ep.zI)()||!(0,ep.hl)())return!1;try{return await (0,ep.eu)()}catch($){return!1}}function rV($,ee,et,er){$=(0,ep.m9)($),rE(eu,rP[$.app.options.appId],ee,et,er).catch($=>t3.error($))}let rU="@firebase/analytics",rz="0.10.0";(function(){function $($){try{let ee=$.getProvider(tJ).getImmediate();return{logEvent:($,et,er)=>rV(ee,$,et,er)}}catch($){throw t5.create("interop-component-reg-failed",{reason:$})}}(0,eh.Xd)(new eg.wA(tJ,($,{options:ee})=>rL($.getProvider("app").getImmediate(),$.getProvider("installations-internal").getImmediate(),ee),"PUBLIC")),(0,eh.Xd)(new eg.wA("analytics-internal",$,"PRIVATE")),(0,eh.KN)(rU,rz),(0,eh.KN)(rU,rz,"esm2017")})()},6041:($,ee,et)=>{"use strict";et.d(ee,{ZF:()=>er.ZF});var er=et(5285),en="firebase",ei="10.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(0,er.KN)(en,ei,"app")},8414:($,ee,et)=>{"use strict";et.d(ee,{hJ:()=>Sv,PL:()=>TO,ad:()=>SR});var er,en,ei,es,eo,eu=et(5285),eh=et(7059),ef=et(1954),ep=et(3837),eg=et(6348),em=et(6113),ey="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ev={},eS=eS||{},eT=ey||self;function ew($){var ee=typeof $;return"array"==(ee="object"!=ee?ee:$?Array.isArray($)?"array":ee:"null")||"object"==ee&&"number"==typeof $.length}function eE($){var ee=typeof $;return"object"==ee&&null!=$||"function"==ee}function eC($){return Object.prototype.hasOwnProperty.call($,e_)&&$[e_]||($[e_]=++eR)}var e_="closure_uid_"+(1e9*Math.random()>>>0),eR=0;function ex($,ee,et){return $.call.apply($.bind,arguments)}function eI($,ee,et){if(!$)throw Error();if(2<arguments.length){var er=Array.prototype.slice.call(arguments,2);return function(){var et=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(et,er),$.apply(ee,et)}}return function(){return $.apply(ee,arguments)}}function eP($,ee,et){return(eP=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ex:eI).apply(null,arguments)}function eA($,ee){var et=Array.prototype.slice.call(arguments,1);return function(){var ee=et.slice();return ee.push.apply(ee,arguments),$.apply(this,ee)}}function eO($,ee){function et(){}et.prototype=ee.prototype,$.$=ee.prototype,$.prototype=new et,$.prototype.constructor=$,$.ac=function($,et,er){for(var en=Array(arguments.length-2),ei=2;ei<arguments.length;ei++)en[ei-2]=arguments[ei];return ee.prototype[et].apply($,en)}}function eD(){this.s=this.s,this.o=this.o}var eN=0;eD.prototype.s=!1,eD.prototype.sa=function(){this.s||(this.s=!0,this.N(),0==eN)||eC(this)},eD.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};let ek=Array.prototype.indexOf?function($,ee){return Array.prototype.indexOf.call($,ee,void 0)}:function($,ee){if("string"==typeof $)return"string"!=typeof ee||1!=ee.length?-1:$.indexOf(ee,0);for(let et=0;et<$.length;et++)if(et in $&&$[et]===ee)return et;return -1};function eM($){let ee=$.length;if(0<ee){let et=Array(ee);for(let er=0;er<ee;er++)et[er]=$[er];return et}return[]}function eL($,ee){for(let ee=1;ee<arguments.length;ee++){let et=arguments[ee];if(ew(et)){let ee=$.length||0,er=et.length||0;$.length=ee+er;for(let en=0;en<er;en++)$[ee+en]=et[en]}else $.push(et)}}function ej($,ee){this.type=$,this.g=this.target=ee,this.defaultPrevented=!1}ej.prototype.h=function(){this.defaultPrevented=!0};var eB=function(){if(!eT.addEventListener||!Object.defineProperty)return!1;var $=!1,ee=Object.defineProperty({},"passive",{get:function(){$=!0}});try{let $=()=>{};eT.addEventListener("test",$,ee),eT.removeEventListener("test",$,ee)}catch($){}return $}();function eF($){return/^[\s\xa0]*$/.test($)}function eV(){var $=eT.navigator;return $&&($=$.userAgent)?$:""}function eU($){return -1!=eV().indexOf($)}function ez($){return ez[" "]($),$}function eq($,ee){var et=iu;return Object.prototype.hasOwnProperty.call(et,$)?et[$]:et[$]=ee($)}ez[" "]=function(){};var eH=eU("Opera"),e$=eU("Trident")||eU("MSIE"),eG=eU("Edge"),eW=eG||e$,eK=eU("Gecko")&&!(-1!=eV().toLowerCase().indexOf("webkit")&&!eU("Edge"))&&!(eU("Trident")||eU("MSIE"))&&!eU("Edge"),eQ=-1!=eV().toLowerCase().indexOf("webkit")&&!eU("Edge");function eY(){var $=eT.document;return $?$.documentMode:void 0}e:{var eX="",eJ=function(){var $=eV();return eK?/rv:([^\);]+)(\)|;)/.exec($):eG?/Edge\/([\d\.]+)/.exec($):e$?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec($):eQ?/WebKit\/(\S+)/.exec($):eH?/(?:Version)[ \/]?(\S+)/.exec($):void 0}();if(eJ&&(eX=eJ?eJ[1]:""),e$){var eZ=eY();if(null!=eZ&&eZ>parseFloat(eX)){er=String(eZ);break e}}er=eX}var e0=en=eT.document&&e$&&(eY()||parseInt(er,10))||void 0;function e1($,ee){if(ej.call(this,$?$.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,$){var et=this.type=$.type,er=$.changedTouches&&$.changedTouches.length?$.changedTouches[0]:null;if(this.target=$.target||$.srcElement,this.g=ee,ee=$.relatedTarget){if(eK){e:{try{ez(ee.nodeName);var en=!0;break e}catch($){}en=!1}en||(ee=null)}}else"mouseover"==et?ee=$.fromElement:"mouseout"==et&&(ee=$.toElement);this.relatedTarget=ee,er?(this.clientX=void 0!==er.clientX?er.clientX:er.pageX,this.clientY=void 0!==er.clientY?er.clientY:er.pageY,this.screenX=er.screenX||0,this.screenY=er.screenY||0):(this.clientX=void 0!==$.clientX?$.clientX:$.pageX,this.clientY=void 0!==$.clientY?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0),this.button=$.button,this.key=$.key||"",this.ctrlKey=$.ctrlKey,this.altKey=$.altKey,this.shiftKey=$.shiftKey,this.metaKey=$.metaKey,this.pointerId=$.pointerId||0,this.pointerType="string"==typeof $.pointerType?$.pointerType:e2[$.pointerType]||"",this.state=$.state,this.i=$,$.defaultPrevented&&e1.$.h.call(this)}}eO(e1,ej);var e2={2:"touch",3:"pen",4:"mouse"};e1.prototype.h=function(){e1.$.h.call(this);var $=this.i;$.preventDefault?$.preventDefault():$.returnValue=!1};var e4="closure_listenable_"+(1e6*Math.random()|0),e3=0;function e6($,ee,et,er,en){this.listener=$,this.proxy=null,this.src=ee,this.type=et,this.capture=!!er,this.la=en,this.key=++e3,this.fa=this.ia=!1}function e5($){$.fa=!0,$.listener=null,$.proxy=null,$.src=null,$.la=null}function e9($,ee,et){for(let er in $)ee.call(et,$[er],er,$)}function e8($,ee){for(let et in $)ee.call(void 0,$[et],et,$)}function e7($){let ee={};for(let et in $)ee[et]=$[et];return ee}let te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tt($,ee){let et,er;for(let ee=1;ee<arguments.length;ee++){for(et in er=arguments[ee])$[et]=er[et];for(let ee=0;ee<te.length;ee++)et=te[ee],Object.prototype.hasOwnProperty.call(er,et)&&($[et]=er[et])}}function tr($){this.src=$,this.g={},this.h=0}function ti($,ee){var et=ee.type;if(et in $.g){var er,en=$.g[et],ei=ek(en,ee);(er=0<=ei)&&Array.prototype.splice.call(en,ei,1),er&&(e5(ee),0==$.g[et].length&&(delete $.g[et],$.h--))}}function ts($,ee,et,er){for(var en=0;en<$.length;++en){var ei=$[en];if(!ei.fa&&ei.listener==ee&&!!et==ei.capture&&ei.la==er)return en}return -1}tr.prototype.add=function($,ee,et,er,en){var ei=$.toString();($=this.g[ei])||($=this.g[ei]=[],this.h++);var es=ts($,ee,er,en);return -1<es?(ee=$[es],et||(ee.ia=!1)):((ee=new e6(ee,this.src,ei,!!er,en)).ia=et,$.push(ee)),ee};var tl="closure_lm_"+(1e6*Math.random()|0),tu={};function th($,ee,et,er,en){if(er&&er.once)return tg($,ee,et,er,en);if(Array.isArray(ee)){for(var ei=0;ei<ee.length;ei++)th($,ee[ei],et,er,en);return null}return et=tE(et),$&&$[e4]?$.O(ee,et,eE(er)?!!er.capture:!!er,en):tf($,ee,et,!1,er,en)}function tf($,ee,et,er,en,ei){if(!ee)throw Error("Invalid event type");var es=eE(en)?!!en.capture:!!en,eo=tT($);if(eo||($[tl]=eo=new tr($)),(et=eo.add(ee,et,er,es,ei)).proxy)return et;if(er=tp(),et.proxy=er,er.src=$,er.listener=et,$.addEventListener)eB||(en=es),void 0===en&&(en=!1),$.addEventListener(ee.toString(),er,en);else if($.attachEvent)$.attachEvent(tv(ee.toString()),er);else if($.addListener&&$.removeListener)$.addListener(er);else throw Error("addEventListener and attachEvent are unavailable.");return et}function tp(){function $(et){return ee.call($.src,$.listener,et)}let ee=tS;return $}function tg($,ee,et,er,en){if(Array.isArray(ee)){for(var ei=0;ei<ee.length;ei++)tg($,ee[ei],et,er,en);return null}return et=tE(et),$&&$[e4]?$.P(ee,et,eE(er)?!!er.capture:!!er,en):tf($,ee,et,!0,er,en)}function tm($,ee,et,er,en){if(Array.isArray(ee))for(var ei=0;ei<ee.length;ei++)tm($,ee[ei],et,er,en);else(er=eE(er)?!!er.capture:!!er,et=tE(et),$&&$[e4])?($=$.i,(ee=String(ee).toString())in $.g&&-1<(et=ts(ei=$.g[ee],et,er,en))&&(e5(ei[et]),Array.prototype.splice.call(ei,et,1),0==ei.length&&(delete $.g[ee],$.h--))):$&&($=tT($))&&(ee=$.g[ee.toString()],$=-1,ee&&($=ts(ee,et,er,en)),(et=-1<$?ee[$]:null)&&ty(et))}function ty($){if("number"!=typeof $&&$&&!$.fa){var ee=$.src;if(ee&&ee[e4])ti(ee.i,$);else{var et=$.type,er=$.proxy;ee.removeEventListener?ee.removeEventListener(et,er,$.capture):ee.detachEvent?ee.detachEvent(tv(et),er):ee.addListener&&ee.removeListener&&ee.removeListener(er),(et=tT(ee))?(ti(et,$),0==et.h&&(et.src=null,ee[tl]=null)):e5($)}}}function tv($){return $ in tu?tu[$]:tu[$]="on"+$}function tS($,ee){if($.fa)$=!0;else{ee=new e1(ee,this);var et=$.listener,er=$.la||$.src;$.ia&&ty($),$=et.call(er,ee)}return $}function tT($){return($=$[tl])instanceof tr?$:null}var tw="__closure_events_fn_"+(1e9*Math.random()>>>0);function tE($){return"function"==typeof $?$:($[tw]||($[tw]=function(ee){return $.handleEvent(ee)}),$[tw])}function tC(){eD.call(this),this.i=new tr(this),this.S=this,this.J=null}function t_($,ee){var et,er=$.J;if(er)for(et=[];er;er=er.J)et.push(er);if($=$.S,er=ee.type||ee,"string"==typeof ee)ee=new ej(ee,$);else if(ee instanceof ej)ee.target=ee.target||$;else{var en=ee;tt(ee=new ej(er,$),en)}if(en=!0,et)for(var ei=et.length-1;0<=ei;ei--){var es=ee.g=et[ei];en=tR(es,er,!0,ee)&&en}if(en=tR(es=ee.g=$,er,!0,ee)&&en,en=tR(es,er,!1,ee)&&en,et)for(ei=0;ei<et.length;ei++)en=tR(es=ee.g=et[ei],er,!1,ee)&&en}function tR($,ee,et,er){if(!(ee=$.i.g[String(ee)]))return!0;ee=ee.concat();for(var en=!0,ei=0;ei<ee.length;++ei){var es=ee[ei];if(es&&!es.fa&&es.capture==et){var eo=es.listener,eu=es.la||es.src;es.ia&&ti($.i,es),en=!1!==eo.call(eu,er)&&en}}return en&&!er.defaultPrevented}eO(tC,eD),tC.prototype[e4]=!0,tC.prototype.removeEventListener=function($,ee,et,er){tm(this,$,ee,et,er)},tC.prototype.N=function(){if(tC.$.N.call(this),this.i){var $,ee=this.i;for($ in ee.g){for(var et=ee.g[$],er=0;er<et.length;er++)e5(et[er]);delete ee.g[$],ee.h--}}this.J=null},tC.prototype.O=function($,ee,et,er){return this.i.add(String($),ee,!1,et,er)},tC.prototype.P=function($,ee,et,er){return this.i.add(String($),ee,!0,et,er)};var tI=eT.JSON.stringify;class tP{constructor($,ee){this.i=$,this.j=ee,this.h=0,this.g=null}get(){let $;return 0<this.h?(this.h--,$=this.g,this.g=$.next,$.next=null):$=this.i(),$}}function tA(){var $=tB;let ee=null;return $.g&&(ee=$.g,$.g=$.g.next,$.g||($.h=null),ee.next=null),ee}class tO{constructor(){this.h=this.g=null}add($,ee){let et=tD.get();et.set($,ee),this.h?this.h.next=et:this.g=et,this.h=et}}var tD=new tP(()=>new tN,$=>$.reset());class tN{constructor(){this.next=this.g=this.h=null}set($,ee){this.h=$,this.g=ee,this.next=null}reset(){this.next=this.g=this.h=null}}function tk($){var ee=1;$=$.split(":");let et=[];for(;0<ee&&$.length;)et.push($.shift()),ee--;return $.length&&et.push($.join(":")),et}function tM($){eT.setTimeout(()=>{throw $},0)}let tL,tj=!1,tB=new tO,tF=()=>{let $=eT.Promise.resolve(void 0);tL=()=>{$.then(tV)}};var tV=()=>{for(var $;$=tA();){try{$.h.call($.g)}catch($){tM($)}var ee=tD;ee.j($),100>ee.h&&(ee.h++,$.next=ee.g,ee.g=$)}tj=!1};function tU($,ee){tC.call(this),this.h=$||1,this.g=ee||eT,this.j=eP(this.qb,this),this.l=Date.now()}function tz($){$.ga=!1,$.T&&($.g.clearTimeout($.T),$.T=null)}function tq($,ee,et){if("function"==typeof $)et&&($=eP($,et));else if($&&"function"==typeof $.handleEvent)$=eP($.handleEvent,$);else throw Error("Invalid listener argument");return 2147483647<Number(ee)?-1:eT.setTimeout($,ee||0)}function tH($){$.g=tq(()=>{$.g=null,$.i&&($.i=!1,tH($))},$.j);let ee=$.h;$.h=null,$.m.apply(null,ee)}eO(tU,tC),(eo=tU.prototype).ga=!1,eo.T=null,eo.qb=function(){if(this.ga){var $=Date.now()-this.l;0<$&&$<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-$):(this.T&&(this.g.clearTimeout(this.T),this.T=null),t_(this,"tick"),this.ga&&(tz(this),this.start()))}},eo.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},eo.N=function(){tU.$.N.call(this),tz(this),delete this.g};class t$ extends eD{constructor($,ee){super(),this.m=$,this.j=ee,this.h=null,this.i=!1,this.g=null}l($){this.h=arguments,this.g?this.i=!0:tH(this)}N(){super.N(),this.g&&(eT.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tG($){eD.call(this),this.h=$,this.g={}}eO(tG,eD);var tW=[];function tK($,ee,et,er){Array.isArray(et)||(et&&(tW[0]=et.toString()),et=tW);for(var en=0;en<et.length;en++){var ei=th(ee,et[en],er||$.handleEvent,!1,$.h||$);if(!ei)break;$.g[ei.key]=ei}}function tQ($){e9($.g,function($,ee){this.g.hasOwnProperty(ee)&&ty($)},$),$.g={}}function tY(){this.g=!0}function tX($,ee,et,er,en,ei){$.info(function(){if($.g){if(ei)for(var es="",eo=ei.split("&"),eu=0;eu<eo.length;eu++){var eh=eo[eu].split("=");if(1<eh.length){var ef=eh[0];eh=eh[1];var ep=ef.split("_");es=2<=ep.length&&"type"==ep[1]?es+(ef+"=")+eh+"&":es+(ef+"=redacted&")}}else es=null}else es=ei;return"XMLHTTP REQ ("+er+") [attempt "+en+"]: "+ee+"\n"+et+"\n"+es})}function tJ($,ee,et,er,en,ei,es){$.info(function(){return"XMLHTTP RESP ("+er+") [ attempt "+en+"]: "+ee+"\n"+et+"\n"+ei+" "+es})}function tZ($,ee,et,er){$.info(function(){return"XMLHTTP TEXT ("+ee+"): "+t1($,et)+(er?" "+er:"")})}function t0($,ee){$.info(function(){return"TIMEOUT: "+ee})}function t1($,ee){if(!$.g)return ee;if(!ee)return null;try{var et=JSON.parse(ee);if(et){for($=0;$<et.length;$++)if(Array.isArray(et[$])){var er=et[$];if(!(2>er.length)){var en=er[1];if(Array.isArray(en)&&!(1>en.length)){var ei=en[0];if("noop"!=ei&&"stop"!=ei&&"close"!=ei)for(var es=1;es<en.length;es++)en[es]=""}}}}return tI(et)}catch($){return ee}}tG.prototype.N=function(){tG.$.N.call(this),tQ(this)},tG.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tY.prototype.Ea=function(){this.g=!1},tY.prototype.info=function(){};var t2={},t4=null;function t3(){return t4=t4||new tC}function t6($){ej.call(this,t2.Ta,$)}function t5($){let ee=t3();t_(ee,new t6(ee))}function t9($,ee){ej.call(this,t2.STAT_EVENT,$),this.stat=ee}function t8($){let ee=t3();t_(ee,new t9(ee,$))}function t7($,ee){ej.call(this,t2.Ua,$),this.size=ee}function rt($,ee){if("function"!=typeof $)throw Error("Fn must not be null and must be a function");return eT.setTimeout(function(){$()},ee)}t2.Ta="serverreachability",eO(t6,ej),t2.STAT_EVENT="statevent",eO(t9,ej),t2.Ua="timingevent",eO(t7,ej);var rr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},rn={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ri(){}function rs($){return $.h||($.h=$.i())}function ro(){}ri.prototype.h=null;var rl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ru(){ej.call(this,"d")}function rh(){ej.call(this,"c")}function rf(){}function rp($,ee,et,er){this.l=$,this.j=ee,this.m=et,this.W=er||1,this.U=new tG(this),this.P=rm,$=eW?125:void 0,this.V=new tU($),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new rg}function rg(){this.i=null,this.g="",this.h=!1}eO(ru,ej),eO(rh,ej),eO(rf,ri),rf.prototype.g=function(){return new XMLHttpRequest},rf.prototype.i=function(){return{}},ei=new rf;var rm=45e3,ry={},rv={};function rS($,ee,et){$.L=1,$.A=rz(rj(ee)),$.u=et,$.S=!0,rT($,null)}function rT($,ee){$.G=Date.now(),r_($),$.B=rj($.A);var et=$.B,er=$.W;Array.isArray(er)||(er=[String(er)]),r1(et.i,"t",er),$.o=0,et=$.l.J,$.h=new rg,$.g=n6($.l,et?ee:null,!$.u),0<$.O&&($.M=new t$(eP($.Pa,$,$.g),$.O)),tK($.U,$.g,"readystatechange",$.nb),ee=$.I?e7($.I):{},$.u?($.v||($.v="POST"),ee["Content-Type"]="application/x-www-form-urlencoded",$.g.ha($.B,$.v,$.u,ee)):($.v="GET",$.g.ha($.B,$.v,null,ee)),t5(),tX($.j,$.v,$.B,$.m,$.W,$.u)}function rw($){return!!$.g&&"GET"==$.v&&2!=$.L&&$.l.Ha}function rE($,ee,et){let er=!0,en;for(;!$.J&&$.o<et.length;)if((en=rC($,et))==rv){4==ee&&($.s=4,t8(14),er=!1),tZ($.j,$.m,null,"[Incomplete Response]");break}else if(en==ry){$.s=4,t8(15),tZ($.j,$.m,et,"[Invalid Chunk]"),er=!1;break}else tZ($.j,$.m,en,null),rA($,en);rw($)&&0!=$.o&&($.h.g=$.h.g.slice($.o),$.o=0),4!=ee||0!=et.length||$.h.h||($.s=1,t8(16),er=!1),$.i=$.i&&er,er?0<et.length&&!$.ba&&($.ba=!0,(ee=$.l).g==$&&ee.ca&&!ee.M&&(ee.l.info("Great, no buffering proxy detected. Bytes received: "+et.length),nQ(ee),ee.M=!0,t8(11))):(tZ($.j,$.m,et,"[Invalid Chunked Response]"),rP($),rI($))}function rC($,ee){var et=$.o,er=ee.indexOf("\n",et);return -1==er?rv:isNaN(et=Number(ee.substring(et,er)))?ry:(er+=1)+et>ee.length?rv:(ee=ee.slice(er,er+et),$.o=er+et,ee)}function r_($){$.Y=Date.now()+$.P,rR($,$.P)}function rR($,ee){if(null!=$.C)throw Error("WatchDog timer not null");$.C=rt(eP($.lb,$),ee)}function rx($){$.C&&(eT.clearTimeout($.C),$.C=null)}function rI($){0==$.l.H||$.J||nJ($.l,$)}function rP($){rx($);var ee=$.M;ee&&"function"==typeof ee.sa&&ee.sa(),$.M=null,tz($.V),tQ($.U),$.g&&(ee=$.g,$.g=null,ee.abort(),ee.sa())}function rA($,ee){try{var et=$.l;if(0!=et.H&&(et.g==$||r7(et.i,$))){if(!$.K&&r7(et.i,$)&&3==et.H){try{var er=et.Ja.g.parse(ee)}catch($){er=null}if(Array.isArray(er)&&3==er.length){var en=er;if(0==en[0]){e:if(!et.u){if(et.g){if(et.g.G+3e3<$.G)nX(et),nV(et);else break e}nK(et),t8(18)}}else et.Fa=en[1],0<et.Fa-et.V&&37500>en[2]&&et.G&&0==et.A&&!et.v&&(et.v=rt(eP(et.ib,et),6e3));if(1>=r8(et.i)&&et.oa){try{et.oa()}catch($){}et.oa=void 0}}else n0(et,11)}else if(($.K||et.g==$)&&nX(et),!eF(ee))for(en=et.Ja.g.parse(ee),ee=0;ee<en.length;ee++){let eh=en[ee];if(et.V=eh[0],eh=eh[1],2==et.H){if("c"==eh[0]){et.K=eh[1],et.pa=eh[2];let ee=eh[3];null!=ee&&(et.ra=ee,et.l.info("VER="+et.ra));let en=eh[4];null!=en&&(et.Ga=en,et.l.info("SVER="+et.Ga));let ef=eh[5];null!=ef&&"number"==typeof ef&&0<ef&&(er=1.5*ef,et.L=er,et.l.info("backChannelRequestTimeoutMs_="+er)),er=et;let ep=$.g;if(ep){let $=ep.g?ep.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($){var ei=er.i;ei.g||-1==$.indexOf("spdy")&&-1==$.indexOf("quic")&&-1==$.indexOf("h2")||(ei.j=ei.l,ei.g=new Set,ei.h&&(ne(ei,ei.h),ei.h=null))}if(er.F){let $=ep.g?ep.g.getResponseHeader("X-HTTP-Session-Id"):null;$&&(er.Da=$,rU(er.I,er.F,$))}}et.H=3,et.h&&et.h.Ba(),et.ca&&(et.S=Date.now()-$.G,et.l.info("Handshake RTT: "+et.S+"ms")),er=et;var es=$;if(er.wa=n3(er,er.J?er.pa:null,er.Y),es.K){nt(er.i,es);var eo=es,eu=er.L;eu&&eo.setTimeout(eu),eo.C&&(rx(eo),r_(eo)),er.g=es}else nW(er);0<et.j.length&&nz(et)}else"stop"!=eh[0]&&"close"!=eh[0]||n0(et,7)}else 3==et.H&&("stop"==eh[0]||"close"==eh[0]?"stop"==eh[0]?n0(et,7):nF(et):"noop"!=eh[0]&&et.h&&et.h.Aa(eh),et.A=0)}}t5(4)}catch($){}}function rO($){if($.Z&&"function"==typeof $.Z)return $.Z();if("undefined"!=typeof Map&&$ instanceof Map||"undefined"!=typeof Set&&$ instanceof Set)return Array.from($.values());if("string"==typeof $)return $.split("");if(ew($)){for(var ee=[],et=$.length,er=0;er<et;er++)ee.push($[er]);return ee}for(er in ee=[],et=0,$)ee[et++]=$[er];return ee}function rD($){if($.ta&&"function"==typeof $.ta)return $.ta();if(!$.Z||"function"!=typeof $.Z){if("undefined"!=typeof Map&&$ instanceof Map)return Array.from($.keys());if(!("undefined"!=typeof Set&&$ instanceof Set)){if(ew($)||"string"==typeof $){var ee=[];$=$.length;for(var et=0;et<$;et++)ee.push(et);return ee}for(let er in ee=[],et=0,$)ee[et++]=er;return ee}}}function rN($,ee){if($.forEach&&"function"==typeof $.forEach)$.forEach(ee,void 0);else if(ew($)||"string"==typeof $)Array.prototype.forEach.call($,ee,void 0);else for(var et=rD($),er=rO($),en=er.length,ei=0;ei<en;ei++)ee.call(void 0,er[ei],et&&et[ei],$)}(eo=rp.prototype).setTimeout=function($){this.P=$},eo.nb=function($){$=$.target;let ee=this.M;ee&&3==nD($)?ee.l():this.Pa($)},eo.Pa=function($){try{if($==this.g)e:{let ef=nD(this.g);var ee=this.g.Ia();let ep=this.g.da();if(!(3>ef)&&(3!=ef||eW||this.g&&(this.h.h||this.g.ja()||nN(this.g)))){this.J||4!=ef||7==ee||(8==ee||0>=ep?t5(3):t5(2)),rx(this);var et=this.g.da();this.ca=et;t:if(rw(this)){var er=nN(this.g);$="";var en=er.length,ei=4==nD(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){rP(this),rI(this);var es="";break t}this.h.i=new eT.TextDecoder}for(ee=0;ee<en;ee++)this.h.h=!0,$+=this.h.i.decode(er[ee],{stream:ei&&ee==en-1});er.length=0,this.h.g+=$,this.o=0,es=this.h.g}else es=this.g.ja();if(this.i=200==et,tJ(this.j,this.v,this.B,this.m,this.W,ef,et),this.i){if(this.aa&&!this.K){t:{if(this.g){var eo,eu=this.g;if((eo=eu.g?eu.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!eF(eo)){var eh=eo;break t}}eh=null}if(et=eh)tZ(this.j,this.m,et,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rA(this,et);else{this.i=!1,this.s=3,t8(12),rP(this),rI(this);break e}}this.S?(rE(this,ef,es),eW&&this.i&&3==ef&&(tK(this.U,this.V,"tick",this.mb),this.V.start())):(tZ(this.j,this.m,es,null),rA(this,es)),4==ef&&rP(this),this.i&&!this.J&&(4==ef?nJ(this.l,this):(this.i=!1,r_(this)))}else nk(this.g),400==et&&0<es.indexOf("Unknown SID")?(this.s=3,t8(12)):(this.s=0,t8(13)),rP(this),rI(this)}}}catch($){}finally{}},eo.mb=function(){if(this.g){var $=nD(this.g),ee=this.g.ja();this.o<ee.length&&(rx(this),rE(this,$,ee),this.i&&4!=$&&r_(this))}},eo.cancel=function(){this.J=!0,rP(this)},eo.lb=function(){this.C=null;let $=Date.now();0<=$-this.Y?(t0(this.j,this.B),2!=this.L&&(t5(),t8(17)),rP(this),this.s=2,rI(this)):rR(this,this.Y-$)};var rk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rM($,ee){if($){$=$.split("&");for(var et=0;et<$.length;et++){var er=$[et].indexOf("="),en=null;if(0<=er){var ei=$[et].substring(0,er);en=$[et].substring(er+1)}else ei=$[et];ee(ei,en?decodeURIComponent(en.replace(/\+/g," ")):"")}}}function rL($){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,$ instanceof rL){this.h=$.h,rB(this,$.j),this.s=$.s,this.g=$.g,rF(this,$.m),this.l=$.l;var ee=$.i,et=new rX;et.i=ee.i,ee.g&&(et.g=new Map(ee.g),et.h=ee.h),rV(this,et),this.o=$.o}else $&&(ee=String($).match(rk))?(this.h=!1,rB(this,ee[1]||"",!0),this.s=rq(ee[2]||""),this.g=rq(ee[3]||"",!0),rF(this,ee[4]),this.l=rq(ee[5]||"",!0),rV(this,ee[6]||"",!0),this.o=rq(ee[7]||"")):(this.h=!1,this.i=new rX(null,this.h))}function rj($){return new rL($)}function rB($,ee,et){$.j=et?rq(ee,!0):ee,$.j&&($.j=$.j.replace(/:$/,""))}function rF($,ee){if(ee){if(isNaN(ee=Number(ee))||0>ee)throw Error("Bad port number "+ee);$.m=ee}else $.m=null}function rV($,ee,et){ee instanceof rX?($.i=ee,r4($.i,$.h)):(et||(ee=rH(ee,rQ)),$.i=new rX(ee,$.h))}function rU($,ee,et){$.i.set(ee,et)}function rz($){return rU($,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),$}function rq($,ee){return $?ee?decodeURI($.replace(/%25/g,"%2525")):decodeURIComponent($):""}function rH($,ee,et){return"string"==typeof $?($=encodeURI($).replace(ee,r$),et&&($=$.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$):null}function r$($){return"%"+(($=$.charCodeAt(0))>>4&15).toString(16)+(15&$).toString(16)}rL.prototype.toString=function(){var $=[],ee=this.j;ee&&$.push(rH(ee,rG,!0),":");var et=this.g;return(et||"file"==ee)&&($.push("//"),(ee=this.s)&&$.push(rH(ee,rG,!0),"@"),$.push(encodeURIComponent(String(et)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(et=this.m)&&$.push(":",String(et))),(et=this.l)&&(this.g&&"/"!=et.charAt(0)&&$.push("/"),$.push(rH(et,"/"==et.charAt(0)?rK:rW,!0))),(et=this.i.toString())&&$.push("?",et),(et=this.o)&&$.push("#",rH(et,rY)),$.join("")};var rG=/[#\/\?@]/g,rW=/[#\?:]/g,rK=/[#\?]/g,rQ=/[#\?@]/g,rY=/#/g;function rX($,ee){this.h=this.g=null,this.i=$||null,this.j=!!ee}function rJ($){$.g||($.g=new Map,$.h=0,$.i&&rM($.i,function(ee,et){$.add(decodeURIComponent(ee.replace(/\+/g," ")),et)}))}function rZ($,ee){rJ($),ee=r2($,ee),$.g.has(ee)&&($.i=null,$.h-=$.g.get(ee).length,$.g.delete(ee))}function r0($,ee){return rJ($),ee=r2($,ee),$.g.has(ee)}function r1($,ee,et){rZ($,ee),0<et.length&&($.i=null,$.g.set(r2($,ee),eM(et)),$.h+=et.length)}function r2($,ee){return ee=String(ee),$.j&&(ee=ee.toLowerCase()),ee}function r4($,ee){ee&&!$.j&&(rJ($),$.i=null,$.g.forEach(function($,ee){var et=ee.toLowerCase();ee!=et&&(rZ(this,ee),r1(this,et,$))},$)),$.j=ee}(eo=rX.prototype).add=function($,ee){rJ(this),this.i=null,$=r2(this,$);var et=this.g.get($);return et||this.g.set($,et=[]),et.push(ee),this.h+=1,this},eo.forEach=function($,ee){rJ(this),this.g.forEach(function(et,er){et.forEach(function(et){$.call(ee,et,er,this)},this)},this)},eo.ta=function(){rJ(this);let $=Array.from(this.g.values()),ee=Array.from(this.g.keys()),et=[];for(let er=0;er<ee.length;er++){let en=$[er];for(let $=0;$<en.length;$++)et.push(ee[er])}return et},eo.Z=function($){rJ(this);let ee=[];if("string"==typeof $)r0(this,$)&&(ee=ee.concat(this.g.get(r2(this,$))));else{$=Array.from(this.g.values());for(let et=0;et<$.length;et++)ee=ee.concat($[et])}return ee},eo.set=function($,ee){return rJ(this),this.i=null,r0(this,$=r2(this,$))&&(this.h-=this.g.get($).length),this.g.set($,[ee]),this.h+=1,this},eo.get=function($,ee){return $&&0<($=this.Z($)).length?String($[0]):ee},eo.toString=function(){if(this.i)return this.i;if(!this.g)return"";let $=[],ee=Array.from(this.g.keys());for(var et=0;et<ee.length;et++){var er=ee[et];let ei=encodeURIComponent(String(er)),es=this.Z(er);for(er=0;er<es.length;er++){var en=ei;""!==es[er]&&(en+="="+encodeURIComponent(String(es[er]))),$.push(en)}}return this.i=$.join("&")};var r3=class{constructor($,ee){this.g=$,this.map=ee}};function r6($){this.l=$||r5,$=eT.PerformanceNavigationTiming?0<($=eT.performance.getEntriesByType("navigation")).length&&("hq"==$[0].nextHopProtocol||"h2"==$[0].nextHopProtocol):!!(eT.g&&eT.g.Ka&&eT.g.Ka()&&eT.g.Ka().dc),this.j=$?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var r5=10;function r9($){return!!$.h||!!$.g&&$.g.size>=$.j}function r8($){return $.h?1:$.g?$.g.size:0}function r7($,ee){return $.h?$.h==ee:!!$.g&&$.g.has(ee)}function ne($,ee){$.g?$.g.add(ee):$.h=ee}function nt($,ee){$.h&&$.h==ee?$.h=null:$.g&&$.g.has(ee)&&$.g.delete(ee)}function nn($){if(null!=$.h)return $.i.concat($.h.F);if(null!=$.g&&0!==$.g.size){let ee=$.i;for(let et of $.g.values())ee=ee.concat(et.F);return ee}return eM($.i)}r6.prototype.cancel=function(){if(this.i=nn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let $ of this.g.values())$.cancel();this.g.clear()}};var ni=class{stringify($){return eT.JSON.stringify($,void 0)}parse($){return eT.JSON.parse($,void 0)}};function no(){this.g=new ni}function nu($,ee,et){let er=et||"";try{rN($,function($,et){let en=$;eE($)&&(en=tI($)),ee.push(er+et+"="+encodeURIComponent(en))})}catch($){throw ee.push(er+"type="+encodeURIComponent("_badmap")),$}}function nh($,ee){let et=new tY;if(eT.Image){let er=new Image;er.onload=eA(nf,et,er,"TestLoadImage: loaded",!0,ee),er.onerror=eA(nf,et,er,"TestLoadImage: error",!1,ee),er.onabort=eA(nf,et,er,"TestLoadImage: abort",!1,ee),er.ontimeout=eA(nf,et,er,"TestLoadImage: timeout",!1,ee),eT.setTimeout(function(){er.ontimeout&&er.ontimeout()},1e4),er.src=$}else ee(!1)}function nf($,ee,et,er,en){try{ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null,en(er)}catch($){}}function np($){this.l=$.ec||null,this.j=$.ob||!1}function ng($,ee){tC.call(this),this.F=$,this.u=ee,this.m=void 0,this.readyState=nm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}eO(np,ri),np.prototype.g=function(){return new ng(this.l,this.j)},np.prototype.i=function($){return function(){return $}}({}),eO(ng,tC);var nm=0;function ny($){$.j.read().then($.Xa.bind($)).catch($.ka.bind($))}function nv($){$.readyState=4,$.l=null,$.j=null,$.A=null,nS($)}function nS($){$.onreadystatechange&&$.onreadystatechange.call($)}(eo=ng.prototype).open=function($,ee){if(this.readyState!=nm)throw this.abort(),Error("Error reopening a connection");this.C=$,this.B=ee,this.readyState=1,nS(this)},eo.send=function($){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let ee={headers:this.v,method:this.C,credentials:this.m,cache:void 0};$&&(ee.body=$),(this.F||eT).fetch(new Request(this.B,ee)).then(this.$a.bind(this),this.ka.bind(this))},eo.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nv(this)),this.readyState=nm},eo.$a=function($){if(this.g&&(this.l=$,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=$.headers,this.readyState=2,nS(this)),this.g&&(this.readyState=3,nS(this),this.g))){if("arraybuffer"===this.responseType)$.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==eT.ReadableStream&&"body"in $){if(this.j=$.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ny(this)}else $.text().then(this.Za.bind(this),this.ka.bind(this))}},eo.Xa=function($){if(this.g){if(this.u&&$.value)this.response.push($.value);else if(!this.u){var ee=$.value?$.value:new Uint8Array(0);(ee=this.A.decode(ee,{stream:!$.done}))&&(this.response=this.responseText+=ee)}$.done?nv(this):nS(this),3==this.readyState&&ny(this)}},eo.Za=function($){this.g&&(this.response=this.responseText=$,nv(this))},eo.Ya=function($){this.g&&(this.response=$,nv(this))},eo.ka=function(){this.g&&nv(this)},eo.setRequestHeader=function($,ee){this.v.append($,ee)},eo.getResponseHeader=function($){return this.h&&this.h.get($.toLowerCase())||""},eo.getAllResponseHeaders=function(){if(!this.h)return"";let $=[],ee=this.h.entries();for(var et=ee.next();!et.done;)$.push((et=et.value)[0]+": "+et[1]),et=ee.next();return $.join("\r\n")},Object.defineProperty(ng.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function($){this.m=$?"include":"same-origin"}});var nT=eT.JSON.parse;function nw($){tC.call(this),this.headers=new Map,this.u=$||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nE,this.L=this.M=!1}eO(nw,tC);var nE="",nC=/^https?$/i,n_=["POST","PUT"];function nR($){return e$&&"number"==typeof $.timeout&&void 0!==$.ontimeout}function nx($,ee){$.h=!1,$.g&&($.l=!0,$.g.abort(),$.l=!1),$.j=ee,$.m=5,nI($),nA($)}function nI($){$.F||($.F=!0,t_($,"complete"),t_($,"error"))}function nP($){if($.h&&void 0!==eS&&(!$.C[1]||4!=nD($)||2!=$.da())){if($.v&&4==nD($))tq($.La,0,$);else if(t_($,"readystatechange"),4==nD($)){$.h=!1;try{let es=$.da();switch(es){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ee,et,er=!0;break;default:er=!1}if(!(ee=er)){if(et=0===es){var en=String($.I).match(rk)[1]||null;!en&&eT.self&&eT.self.location&&(en=eT.self.location.protocol.slice(0,-1)),et=!nC.test(en?en.toLowerCase():"")}ee=et}if(ee)t_($,"complete"),t_($,"success");else{$.m=6;try{var ei=2<nD($)?$.g.statusText:""}catch($){ei=""}$.j=ei+" ["+$.da()+"]",nI($)}}finally{nA($)}}}}function nA($,ee){if($.g){nO($);let et=$.g,er=$.C[0]?()=>{}:null;$.g=null,$.C=null,ee||t_($,"ready");try{et.onreadystatechange=er}catch($){}}}function nO($){$.g&&$.L&&($.g.ontimeout=null),$.A&&(eT.clearTimeout($.A),$.A=null)}function nD($){return $.g?$.g.readyState:0}function nN($){try{if(!$.g)return null;if("response"in $.g)return $.g.response;switch($.K){case nE:case"text":return $.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in $.g)return $.g.mozResponseArrayBuffer}return null}catch($){return null}}function nk($){let ee={};$=($.g&&2<=nD($)&&$.g.getAllResponseHeaders()||"").split("\r\n");for(let er=0;er<$.length;er++){if(eF($[er]))continue;var et=tk($[er]);let en=et[0];if("string"!=typeof(et=et[1]))continue;et=et.trim();let ei=ee[en]||[];ee[en]=ei,ei.push(et)}e8(ee,function($){return $.join(", ")})}function nM($){let ee="";return e9($,function($,et){ee+=et+":"+$+"\r\n"}),ee}function nL($,ee,et){e:{for(er in et){var er=!1;break e}er=!0}er||(et=nM(et),"string"==typeof $?null!=et&&encodeURIComponent(String(et)):rU($,ee,et))}function nj($,ee,et){return et&&et.internalChannelParams&&et.internalChannelParams[$]||ee}function nB($){this.Ga=0,this.j=[],this.l=new tY,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=nj("failFast",!1,$),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=nj("baseRetryDelayMs",5e3,$),this.hb=nj("retryDelaySeedMs",1e4,$),this.eb=nj("forwardChannelMaxRetries",2,$),this.xa=nj("forwardChannelRequestTimeoutMs",2e4,$),this.va=$&&$.xmlHttpFactory||void 0,this.Ha=$&&$.useFetchStreams||!1,this.L=void 0,this.J=$&&$.supportsCrossDomainXhr||!1,this.K="",this.i=new r6($&&$.concurrentRequestLimit),this.Ja=new no,this.P=$&&$.fastHandshake||!1,this.O=$&&$.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=$&&$.bc||!1,$&&$.Ea&&this.l.Ea(),$&&$.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&$&&$.detectBufferingProxy||!1,this.qa=void 0,$&&$.longPollingTimeout&&0<$.longPollingTimeout&&(this.qa=$.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function nF($){if(nU($),3==$.H){var ee=$.W++,et=rj($.I);if(rU(et,"SID",$.K),rU(et,"RID",ee),rU(et,"TYPE","terminate"),n$($,et),(ee=new rp($,$.l,ee)).L=2,ee.A=rz(rj(et)),et=!1,eT.navigator&&eT.navigator.sendBeacon)try{et=eT.navigator.sendBeacon(ee.A.toString(),"")}catch($){}!et&&eT.Image&&((new Image).src=ee.A,et=!0),et||(ee.g=n6(ee.l,null),ee.g.ha(ee.A)),ee.G=Date.now(),r_(ee)}n4($)}function nV($){$.g&&(nQ($),$.g.cancel(),$.g=null)}function nU($){nV($),$.u&&(eT.clearTimeout($.u),$.u=null),nX($),$.i.cancel(),$.m&&("number"==typeof $.m&&eT.clearTimeout($.m),$.m=null)}function nz($){if(!r9($.i)&&!$.m){$.m=!0;var ee=$.Na;tL||tF(),tj||(tL(),tj=!0),tB.add(ee,$),$.C=0}}function nq($,ee){return!(r8($.i)>=$.i.j-($.m?1:0))&&($.m?($.j=ee.F.concat($.j),!0):1!=$.H&&2!=$.H&&!($.C>=($.cb?0:$.eb))&&($.m=rt(eP($.Na,$,ee),nZ($,$.C)),$.C++,!0))}function nH($,ee){var et;et=ee?ee.m:$.W++;let er=rj($.I);rU(er,"SID",$.K),rU(er,"RID",et),rU(er,"AID",$.V),n$($,er),$.o&&$.s&&nL(er,$.o,$.s),et=new rp($,$.l,et,$.C+1),null===$.o&&(et.I=$.s),ee&&($.j=ee.F.concat($.j)),ee=nG($,et,1e3),et.setTimeout(Math.round(.5*$.xa)+Math.round(.5*$.xa*Math.random())),ne($.i,et),rS(et,er,ee)}function n$($,ee){$.na&&e9($.na,function($,et){rU(ee,et,$)}),$.h&&rN({},function($,et){rU(ee,et,$)})}function nG($,ee,et){et=Math.min($.j.length,et);var er=$.h?eP($.h.Va,$.h,$):null;e:{var en=$.j;let ee=-1;for(;;){let $=["count="+et];-1==ee?0<et?(ee=en[0].g,$.push("ofs="+ee)):ee=0:$.push("ofs="+ee);let ei=!0;for(let es=0;es<et;es++){let et=en[es].g,eo=en[es].map;if(0>(et-=ee))ee=Math.max(0,en[es].g-100),ei=!1;else try{nu(eo,$,"req"+et+"_")}catch($){er&&er(eo)}}if(ei){er=$.join("&");break e}}}return $=$.j.splice(0,et),ee.F=$,er}function nW($){if(!$.g&&!$.u){$.ba=1;var ee=$.Ma;tL||tF(),tj||(tL(),tj=!0),tB.add(ee,$),$.A=0}}function nK($){return!$.g&&!$.u&&!(3<=$.A)&&($.ba++,$.u=rt(eP($.Ma,$),nZ($,$.A)),$.A++,!0)}function nQ($){null!=$.B&&(eT.clearTimeout($.B),$.B=null)}function nY($){$.g=new rp($,$.l,"rpc",$.ba),null===$.o&&($.g.I=$.s),$.g.O=0;var ee=rj($.wa);rU(ee,"RID","rpc"),rU(ee,"SID",$.K),rU(ee,"AID",$.V),rU(ee,"CI",$.G?"0":"1"),!$.G&&$.qa&&rU(ee,"TO",$.qa),rU(ee,"TYPE","xmlhttp"),n$($,ee),$.o&&$.s&&nL(ee,$.o,$.s),$.L&&$.g.setTimeout($.L);var et=$.g;$=$.pa,et.L=1,et.A=rz(rj(ee)),et.u=null,et.S=!0,rT(et,$)}function nX($){null!=$.v&&(eT.clearTimeout($.v),$.v=null)}function nJ($,ee){var et=null;if($.g==ee){nX($),nQ($),$.g=null;var er=2}else{if(!r7($.i,ee))return;et=ee.F,nt($.i,ee),er=1}if(0!=$.H){if(ee.i){if(1==er){et=ee.u?ee.u.length:0,ee=Date.now()-ee.G;var en=$.C;t_(er=t3(),new t7(er,et)),nz($)}else nW($)}else if(3==(en=ee.s)||0==en&&0<ee.ca||!(1==er&&nq($,ee)||2==er&&nK($)))switch(et&&0<et.length&&((ee=$.i).i=ee.i.concat(et)),en){case 1:n0($,5);break;case 4:n0($,10);break;case 3:n0($,6);break;default:n0($,2)}}}function nZ($,ee){let et=$.ab+Math.floor(Math.random()*$.hb);return $.isActive()||(et*=2),et*ee}function n0($,ee){if($.l.info("Error code "+ee),2==ee){var et=null;$.h&&(et=null);var er=eP($.pb,$);et||(et=new rL("//www.google.com/images/cleardot.gif"),eT.location&&"http"==eT.location.protocol||rB(et,"https"),rz(et)),nh(et.toString(),er)}else t8(2);$.H=0,$.h&&$.h.za(ee),n4($),nU($)}function n4($){if($.H=0,$.ma=[],$.h){let ee=nn($.i);(0!=ee.length||0!=$.j.length)&&(eL($.ma,ee),eL($.ma,$.j),$.i.i.length=0,eM($.j),$.j.length=0),$.h.ya()}}function n3($,ee,et){var er=et instanceof rL?rj(et):new rL(et);if(""!=er.g)ee&&(er.g=ee+"."+er.g),rF(er,er.m);else{var en=eT.location;er=en.protocol,ee=ee?ee+"."+en.hostname:en.hostname,en=+en.port;var ei=new rL(null);er&&rB(ei,er),ee&&(ei.g=ee),en&&rF(ei,en),et&&(ei.l=et),er=ei}return et=$.F,ee=$.Da,et&&ee&&rU(er,et,ee),rU(er,"VER",$.ra),n$($,er),er}function n6($,ee,et){if(ee&&!$.J)throw Error("Can't create secondary domain capable XhrIo object.");return(ee=new nw($.Ha&&!$.va?new np({ob:et}):$.va)).Oa($.J),ee}function n5(){}function n9(){if(e$&&!(10<=Number(e0)))throw Error("Environmental error: no available transport.")}function n8($,ee){tC.call(this),this.g=new nB(ee),this.l=$,this.h=ee&&ee.messageUrlParams||null,$=ee&&ee.messageHeaders||null,ee&&ee.clientProtocolHeaderRequired&&($?$["X-Client-Protocol"]="webchannel":$={"X-Client-Protocol":"webchannel"}),this.g.s=$,$=ee&&ee.initMessageHeaders||null,ee&&ee.messageContentType&&($?$["X-WebChannel-Content-Type"]=ee.messageContentType:$={"X-WebChannel-Content-Type":ee.messageContentType}),ee&&ee.Ca&&($?$["X-WebChannel-Client-Profile"]=ee.Ca:$={"X-WebChannel-Client-Profile":ee.Ca}),this.g.U=$,($=ee&&ee.cc)&&!eF($)&&(this.g.o=$),this.A=ee&&ee.supportsCrossDomainXhr||!1,this.v=ee&&ee.sendRawJson||!1,(ee=ee&&ee.httpSessionIdParam)&&!eF(ee)&&(this.g.F=ee,null!==($=this.h)&&ee in $&&ee in($=this.h)&&delete $[ee]),this.j=new ir(this)}function n7($){ru.call(this),$.__headers__&&(this.headers=$.__headers__,this.statusCode=$.__status__,delete $.__headers__,delete $.__status__);var ee=$.__sm__;if(ee){e:{for(let et in ee){$=et;break e}$=void 0}(this.i=$)&&($=this.i,ee=null!==ee&&$ in ee?ee[$]:void 0),this.data=ee}else this.data=$}function ie(){rh.call(this),this.status=1}function ir($){this.g=$}function ii(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function io($,ee,et){et||(et=0);var er=Array(16);if("string"==typeof ee)for(var en=0;16>en;++en)er[en]=ee.charCodeAt(et++)|ee.charCodeAt(et++)<<8|ee.charCodeAt(et++)<<16|ee.charCodeAt(et++)<<24;else for(en=0;16>en;++en)er[en]=ee[et++]|ee[et++]<<8|ee[et++]<<16|ee[et++]<<24;ee=$.g[0],et=$.g[1],en=$.g[2];var ei=$.g[3],es=ee+(ei^et&(en^ei))+er[0]+3614090360&4294967295;es=ei+(en^(ee=et+(es<<7&4294967295|es>>>25))&(et^en))+er[1]+3905402710&4294967295,es=en+(et^(ei=ee+(es<<12&4294967295|es>>>20))&(ee^et))+er[2]+606105819&4294967295,es=et+(ee^(en=ei+(es<<17&4294967295|es>>>15))&(ei^ee))+er[3]+3250441966&4294967295,es=ee+(ei^(et=en+(es<<22&4294967295|es>>>10))&(en^ei))+er[4]+4118548399&4294967295,es=ei+(en^(ee=et+(es<<7&4294967295|es>>>25))&(et^en))+er[5]+1200080426&4294967295,es=en+(et^(ei=ee+(es<<12&4294967295|es>>>20))&(ee^et))+er[6]+2821735955&4294967295,es=et+(ee^(en=ei+(es<<17&4294967295|es>>>15))&(ei^ee))+er[7]+4249261313&4294967295,es=ee+(ei^(et=en+(es<<22&4294967295|es>>>10))&(en^ei))+er[8]+1770035416&4294967295,es=ei+(en^(ee=et+(es<<7&4294967295|es>>>25))&(et^en))+er[9]+2336552879&4294967295,es=en+(et^(ei=ee+(es<<12&4294967295|es>>>20))&(ee^et))+er[10]+4294925233&4294967295,es=et+(ee^(en=ei+(es<<17&4294967295|es>>>15))&(ei^ee))+er[11]+2304563134&4294967295,es=ee+(ei^(et=en+(es<<22&4294967295|es>>>10))&(en^ei))+er[12]+1804603682&4294967295,es=ei+(en^(ee=et+(es<<7&4294967295|es>>>25))&(et^en))+er[13]+4254626195&4294967295,es=en+(et^(ei=ee+(es<<12&4294967295|es>>>20))&(ee^et))+er[14]+2792965006&4294967295,es=et+(ee^(en=ei+(es<<17&4294967295|es>>>15))&(ei^ee))+er[15]+1236535329&4294967295,et=en+(es<<22&4294967295|es>>>10),es=ee+(en^ei&(et^en))+er[1]+4129170786&4294967295,ee=et+(es<<5&4294967295|es>>>27),es=ei+(et^en&(ee^et))+er[6]+3225465664&4294967295,ei=ee+(es<<9&4294967295|es>>>23),es=en+(ee^et&(ei^ee))+er[11]+643717713&4294967295,en=ei+(es<<14&4294967295|es>>>18),es=et+(ei^ee&(en^ei))+er[0]+3921069994&4294967295,et=en+(es<<20&4294967295|es>>>12),es=ee+(en^ei&(et^en))+er[5]+3593408605&4294967295,ee=et+(es<<5&4294967295|es>>>27),es=ei+(et^en&(ee^et))+er[10]+38016083&4294967295,ei=ee+(es<<9&4294967295|es>>>23),es=en+(ee^et&(ei^ee))+er[15]+3634488961&4294967295,en=ei+(es<<14&4294967295|es>>>18),es=et+(ei^ee&(en^ei))+er[4]+3889429448&4294967295,et=en+(es<<20&4294967295|es>>>12),es=ee+(en^ei&(et^en))+er[9]+568446438&4294967295,ee=et+(es<<5&4294967295|es>>>27),es=ei+(et^en&(ee^et))+er[14]+3275163606&4294967295,ei=ee+(es<<9&4294967295|es>>>23),es=en+(ee^et&(ei^ee))+er[3]+4107603335&4294967295,en=ei+(es<<14&4294967295|es>>>18),es=et+(ei^ee&(en^ei))+er[8]+1163531501&4294967295,et=en+(es<<20&4294967295|es>>>12),es=ee+(en^ei&(et^en))+er[13]+2850285829&4294967295,ee=et+(es<<5&4294967295|es>>>27),es=ei+(et^en&(ee^et))+er[2]+4243563512&4294967295,ei=ee+(es<<9&4294967295|es>>>23),es=en+(ee^et&(ei^ee))+er[7]+1735328473&4294967295,en=ei+(es<<14&4294967295|es>>>18),es=et+(ei^ee&(en^ei))+er[12]+2368359562&4294967295,es=ee+((et=en+(es<<20&4294967295|es>>>12))^en^ei)+er[5]+4294588738&4294967295,es=ei+((ee=et+(es<<4&4294967295|es>>>28))^et^en)+er[8]+2272392833&4294967295,es=en+((ei=ee+(es<<11&4294967295|es>>>21))^ee^et)+er[11]+1839030562&4294967295,es=et+((en=ei+(es<<16&4294967295|es>>>16))^ei^ee)+er[14]+4259657740&4294967295,es=ee+((et=en+(es<<23&4294967295|es>>>9))^en^ei)+er[1]+2763975236&4294967295,es=ei+((ee=et+(es<<4&4294967295|es>>>28))^et^en)+er[4]+1272893353&4294967295,es=en+((ei=ee+(es<<11&4294967295|es>>>21))^ee^et)+er[7]+4139469664&4294967295,es=et+((en=ei+(es<<16&4294967295|es>>>16))^ei^ee)+er[10]+3200236656&4294967295,es=ee+((et=en+(es<<23&4294967295|es>>>9))^en^ei)+er[13]+681279174&4294967295,es=ei+((ee=et+(es<<4&4294967295|es>>>28))^et^en)+er[0]+3936430074&4294967295,es=en+((ei=ee+(es<<11&4294967295|es>>>21))^ee^et)+er[3]+3572445317&4294967295,es=et+((en=ei+(es<<16&4294967295|es>>>16))^ei^ee)+er[6]+76029189&4294967295,es=ee+((et=en+(es<<23&4294967295|es>>>9))^en^ei)+er[9]+3654602809&4294967295,es=ei+((ee=et+(es<<4&4294967295|es>>>28))^et^en)+er[12]+3873151461&4294967295,es=en+((ei=ee+(es<<11&4294967295|es>>>21))^ee^et)+er[15]+530742520&4294967295,es=et+((en=ei+(es<<16&4294967295|es>>>16))^ei^ee)+er[2]+3299628645&4294967295,et=en+(es<<23&4294967295|es>>>9),es=ee+(en^(et|~ei))+er[0]+4096336452&4294967295,ee=et+(es<<6&4294967295|es>>>26),es=ei+(et^(ee|~en))+er[7]+1126891415&4294967295,ei=ee+(es<<10&4294967295|es>>>22),es=en+(ee^(ei|~et))+er[14]+2878612391&4294967295,en=ei+(es<<15&4294967295|es>>>17),es=et+(ei^(en|~ee))+er[5]+4237533241&4294967295,et=en+(es<<21&4294967295|es>>>11),es=ee+(en^(et|~ei))+er[12]+1700485571&4294967295,ee=et+(es<<6&4294967295|es>>>26),es=ei+(et^(ee|~en))+er[3]+2399980690&4294967295,ei=ee+(es<<10&4294967295|es>>>22),es=en+(ee^(ei|~et))+er[10]+4293915773&4294967295,en=ei+(es<<15&4294967295|es>>>17),es=et+(ei^(en|~ee))+er[1]+2240044497&4294967295,et=en+(es<<21&4294967295|es>>>11),es=ee+(en^(et|~ei))+er[8]+1873313359&4294967295,ee=et+(es<<6&4294967295|es>>>26),es=ei+(et^(ee|~en))+er[15]+4264355552&4294967295,ei=ee+(es<<10&4294967295|es>>>22),es=en+(ee^(ei|~et))+er[6]+2734768916&4294967295,en=ei+(es<<15&4294967295|es>>>17),es=et+(ei^(en|~ee))+er[13]+1309151649&4294967295,et=en+(es<<21&4294967295|es>>>11),es=ee+(en^(et|~ei))+er[4]+4149444226&4294967295,ee=et+(es<<6&4294967295|es>>>26),es=ei+(et^(ee|~en))+er[11]+3174756917&4294967295,ei=ee+(es<<10&4294967295|es>>>22),es=en+(ee^(ei|~et))+er[2]+718787259&4294967295,en=ei+(es<<15&4294967295|es>>>17),es=et+(ei^(en|~ee))+er[9]+3951481745&4294967295,$.g[0]=$.g[0]+ee&4294967295,$.g[1]=$.g[1]+(en+(es<<21&4294967295|es>>>11))&4294967295,$.g[2]=$.g[2]+en&4294967295,$.g[3]=$.g[3]+ei&4294967295}function il($,ee){this.h=ee;for(var et=[],er=!0,en=$.length-1;0<=en;en--){var ei=0|$[en];er&&ei==ee||(et[en]=ei,er=!1)}this.g=et}(eo=nw.prototype).Oa=function($){this.M=$},eo.ha=function($,ee,et,er){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+$);ee=ee?ee.toUpperCase():"GET",this.I=$,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ei.g(),this.C=this.u?rs(this.u):rs(ei),this.g.onreadystatechange=eP(this.La,this);try{this.G=!0,this.g.open(ee,String($),!0),this.G=!1}catch($){nx(this,$);return}if($=et||"",et=new Map(this.headers),er){if(Object.getPrototypeOf(er)===Object.prototype)for(var en in er)et.set(en,er[en]);else if("function"==typeof er.keys&&"function"==typeof er.get)for(let $ of er.keys())et.set($,er.get($));else throw Error("Unknown input type for opt_headers: "+String(er))}for(let[ei,es]of(er=Array.from(et.keys()).find($=>"content-type"==$.toLowerCase()),en=eT.FormData&&$ instanceof eT.FormData,!(0<=ek(n_,ee))||er||en||et.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),et))this.g.setRequestHeader(ei,es);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{nO(this),0<this.B&&((this.L=nR(this.g))?(this.g.timeout=this.B,this.g.ontimeout=eP(this.ua,this)):this.A=tq(this.ua,this.B,this)),this.v=!0,this.g.send($),this.v=!1}catch($){nx(this,$)}},eo.ua=function(){void 0!==eS&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,t_(this,"timeout"),this.abort(8))},eo.abort=function($){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=$||7,t_(this,"complete"),t_(this,"abort"),nA(this))},eo.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nA(this,!0)),nw.$.N.call(this)},eo.La=function(){this.s||(this.G||this.v||this.l?nP(this):this.kb())},eo.kb=function(){nP(this)},eo.isActive=function(){return!!this.g},eo.da=function(){try{return 2<nD(this)?this.g.status:-1}catch($){return -1}},eo.ja=function(){try{return this.g?this.g.responseText:""}catch($){return""}},eo.Wa=function($){if(this.g){var ee=this.g.responseText;return $&&0==ee.indexOf($)&&(ee=ee.substring($.length)),nT(ee)}},eo.Ia=function(){return this.m},eo.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(eo=nB.prototype).ra=8,eo.H=1,eo.Na=function($){if(this.m){if(this.m=null,1==this.H){if(!$){this.W=Math.floor(1e5*Math.random()),$=this.W++;let en=new rp(this,this.l,$),ei=this.s;if(this.U&&(ei?tt(ei=e7(ei),this.U):ei=this.U),null!==this.o||this.O||(en.I=ei,ei=null),this.P)e:{for(var ee=0,et=0;et<this.j.length;et++){t:{var er=this.j[et];if("__data__"in er.map&&"string"==typeof(er=er.map.__data__)){er=er.length;break t}er=void 0}if(void 0===er)break;if(4096<(ee+=er)){ee=et;break e}if(4096===ee||et===this.j.length-1){ee=et+1;break e}}ee=1e3}else ee=1e3;ee=nG(this,en,ee),rU(et=rj(this.I),"RID",$),rU(et,"CVER",22),this.F&&rU(et,"X-HTTP-Session-Id",this.F),n$(this,et),ei&&(this.O?ee="headers="+encodeURIComponent(String(nM(ei)))+"&"+ee:this.o&&nL(et,this.o,ei)),ne(this.i,en),this.bb&&rU(et,"TYPE","init"),this.P?(rU(et,"$req",ee),rU(et,"SID","null"),en.aa=!0,rS(en,et,null)):rS(en,et,ee),this.H=2}}else 3==this.H&&($?nH(this,$):0==this.j.length||r9(this.i)||nH(this))}},eo.Ma=function(){if(this.u=null,nY(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var $=2*this.S;this.l.info("BP detection timer enabled: "+$),this.B=rt(eP(this.jb,this),$)}},eo.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,t8(10),nV(this),nY(this))},eo.ib=function(){null!=this.v&&(this.v=null,nV(this),nK(this),t8(19))},eo.pb=function($){$?(this.l.info("Successfully pinged google.com"),t8(2)):(this.l.info("Failed to ping google.com"),t8(1))},eo.isActive=function(){return!!this.h&&this.h.isActive(this)},(eo=n5.prototype).Ba=function(){},eo.Aa=function(){},eo.za=function(){},eo.ya=function(){},eo.isActive=function(){return!0},eo.Va=function(){},n9.prototype.g=function($,ee){return new n8($,ee)},eO(n8,tC),n8.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var $=this.g,ee=this.l,et=this.h||void 0;t8(0),$.Y=ee,$.na=et||{},$.G=$.aa,$.I=n3($,null,$.Y),nz($)},n8.prototype.close=function(){nF(this.g)},n8.prototype.u=function($){var ee=this.g;if("string"==typeof $){var et={};et.__data__=$,$=et}else this.v&&((et={}).__data__=tI($),$=et);ee.j.push(new r3(ee.fb++,$)),3==ee.H&&nz(ee)},n8.prototype.N=function(){this.g.h=null,delete this.j,nF(this.g),delete this.g,n8.$.N.call(this)},eO(n7,ru),eO(ie,rh),eO(ir,n5),ir.prototype.Ba=function(){t_(this.g,"a")},ir.prototype.Aa=function($){t_(this.g,new n7($))},ir.prototype.za=function($){t_(this.g,new ie)},ir.prototype.ya=function(){t_(this.g,"b")},eO(ii,function(){this.blockSize=-1}),ii.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ii.prototype.j=function($,ee){void 0===ee&&(ee=$.length);for(var et=ee-this.blockSize,er=this.m,en=this.h,ei=0;ei<ee;){if(0==en)for(;ei<=et;)io(this,$,ei),ei+=this.blockSize;if("string"==typeof $){for(;ei<ee;)if(er[en++]=$.charCodeAt(ei++),en==this.blockSize){io(this,er),en=0;break}}else for(;ei<ee;)if(er[en++]=$[ei++],en==this.blockSize){io(this,er),en=0;break}}this.h=en,this.i+=ee},ii.prototype.l=function(){var $=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);$[0]=128;for(var ee=1;ee<$.length-8;++ee)$[ee]=0;var et=8*this.i;for(ee=$.length-8;ee<$.length;++ee)$[ee]=255&et,et/=256;for(this.j($),$=Array(16),ee=et=0;4>ee;++ee)for(var er=0;32>er;er+=8)$[et++]=this.g[ee]>>>er&255;return $};var iu={};function ih($){return -128<=$&&128>$?eq($,function($){return new il([0|$],0>$?-1:0)}):new il([0|$],0>$?-1:0)}function ip($){if(isNaN($)||!isFinite($))return iy;if(0>$)return iE(ip(-$));for(var ee=[],et=1,er=0;$>=et;er++)ee[er]=$/et|0,et*=im;return new il(ee,0)}function ig($,ee){if(0==$.length)throw Error("number format error: empty string");if(2>(ee=ee||10)||36<ee)throw Error("radix out of range: "+ee);if("-"==$.charAt(0))return iE(ig($.substring(1),ee));if(0<=$.indexOf("-"))throw Error('number format error: interior "-" character');for(var et=ip(Math.pow(ee,8)),er=iy,en=0;en<$.length;en+=8){var ei=Math.min(8,$.length-en),es=parseInt($.substring(en,en+ei),ee);8>ei?(ei=ip(Math.pow(ee,ei)),er=er.R(ei).add(ip(es))):er=(er=er.R(et)).add(ip(es))}return er}var im=4294967296,iy=ih(0),iv=ih(1),iS=ih(16777216);function iT($){if(0!=$.h)return!1;for(var ee=0;ee<$.g.length;ee++)if(0!=$.g[ee])return!1;return!0}function iw($){return -1==$.h}function iE($){for(var ee=$.g.length,et=[],er=0;er<ee;er++)et[er]=~$.g[er];return new il(et,~$.h).add(iv)}function iC($,ee){return $.add(iE(ee))}function i_($,ee){for(;(65535&$[ee])!=$[ee];)$[ee+1]+=$[ee]>>>16,$[ee]&=65535,ee++}function iR($,ee){this.g=$,this.h=ee}function ix($,ee){if(iT(ee))throw Error("division by zero");if(iT($))return new iR(iy,iy);if(iw($))return ee=ix(iE($),ee),new iR(iE(ee.g),iE(ee.h));if(iw(ee))return ee=ix($,iE(ee)),new iR(iE(ee.g),ee.h);if(30<$.g.length){if(iw($)||iw(ee))throw Error("slowDivide_ only works with positive integers.");for(var et=iv,er=ee;0>=er.X($);)et=iI(et),er=iI(er);var en=iP(et,1),ei=iP(er,1);for(er=iP(er,2),et=iP(et,2);!iT(er);){var es=ei.add(er);0>=es.X($)&&(en=en.add(et),ei=es),er=iP(er,1),et=iP(et,1)}return ee=iC($,en.R(ee)),new iR(en,ee)}for(en=iy;0<=$.X(ee);){for(er=48>=(er=Math.ceil(Math.log(et=Math.max(1,Math.floor($.ea()/ee.ea())))/Math.LN2))?1:Math.pow(2,er-48),es=(ei=ip(et)).R(ee);iw(es)||0<es.X($);)et-=er,es=(ei=ip(et)).R(ee);iT(ei)&&(ei=iv),en=en.add(ei),$=iC($,es)}return new iR(en,$)}function iI($){for(var ee=$.g.length+1,et=[],er=0;er<ee;er++)et[er]=$.D(er)<<1|$.D(er-1)>>>31;return new il(et,$.h)}function iP($,ee){var et=ee>>5;ee%=32;for(var er=$.g.length-et,en=[],ei=0;ei<er;ei++)en[ei]=0<ee?$.D(ei+et)>>>ee|$.D(ei+et+1)<<32-ee:$.D(ei+et);return new il(en,$.h)}(eo=il.prototype).ea=function(){if(iw(this))return-iE(this).ea();for(var $=0,ee=1,et=0;et<this.g.length;et++){var er=this.D(et);$+=(0<=er?er:im+er)*ee,ee*=im}return $},eo.toString=function($){if(2>($=$||10)||36<$)throw Error("radix out of range: "+$);if(iT(this))return"0";if(iw(this))return"-"+iE(this).toString($);for(var ee=ip(Math.pow($,6)),et=this,er="";;){var en=ix(et,ee).g,ei=((0<(et=iC(et,en.R(ee))).g.length?et.g[0]:et.h)>>>0).toString($);if(iT(et=en))return ei+er;for(;6>ei.length;)ei="0"+ei;er=ei+er}},eo.D=function($){return 0>$?0:$<this.g.length?this.g[$]:this.h},eo.X=function($){return iw($=iC(this,$))?-1:iT($)?0:1},eo.abs=function(){return iw(this)?iE(this):this},eo.add=function($){for(var ee=Math.max(this.g.length,$.g.length),et=[],er=0,en=0;en<=ee;en++){var ei=er+(65535&this.D(en))+(65535&$.D(en)),es=(ei>>>16)+(this.D(en)>>>16)+($.D(en)>>>16);er=es>>>16,ei&=65535,es&=65535,et[en]=es<<16|ei}return new il(et,-2147483648&et[et.length-1]?-1:0)},eo.R=function($){if(iT(this)||iT($))return iy;if(iw(this))return iw($)?iE(this).R(iE($)):iE(iE(this).R($));if(iw($))return iE(this.R(iE($)));if(0>this.X(iS)&&0>$.X(iS))return ip(this.ea()*$.ea());for(var ee=this.g.length+$.g.length,et=[],er=0;er<2*ee;er++)et[er]=0;for(er=0;er<this.g.length;er++)for(var en=0;en<$.g.length;en++){var ei=this.D(er)>>>16,es=65535&this.D(er),eo=$.D(en)>>>16,eu=65535&$.D(en);et[2*er+2*en]+=es*eu,i_(et,2*er+2*en),et[2*er+2*en+1]+=ei*eu,i_(et,2*er+2*en+1),et[2*er+2*en+1]+=es*eo,i_(et,2*er+2*en+1),et[2*er+2*en+2]+=ei*eo,i_(et,2*er+2*en+2)}for(er=0;er<ee;er++)et[er]=et[2*er+1]<<16|et[2*er];for(er=ee;er<2*ee;er++)et[er]=0;return new il(et,0)},eo.gb=function($){return ix(this,$).h},eo.and=function($){for(var ee=Math.max(this.g.length,$.g.length),et=[],er=0;er<ee;er++)et[er]=this.D(er)&$.D(er);return new il(et,this.h&$.h)},eo.or=function($){for(var ee=Math.max(this.g.length,$.g.length),et=[],er=0;er<ee;er++)et[er]=this.D(er)|$.D(er);return new il(et,this.h|$.h)},eo.xor=function($){for(var ee=Math.max(this.g.length,$.g.length),et=[],er=0;er<ee;er++)et[er]=this.D(er)^$.D(er);return new il(et,this.h^$.h)},n9.prototype.createWebChannel=n9.prototype.g,n8.prototype.send=n8.prototype.u,n8.prototype.open=n8.prototype.m,n8.prototype.close=n8.prototype.close,rr.NO_ERROR=0,rr.TIMEOUT=8,rr.HTTP_ERROR=6,rn.COMPLETE="complete",ro.EventType=rl,rl.OPEN="a",rl.CLOSE="b",rl.ERROR="c",rl.MESSAGE="d",tC.prototype.listen=tC.prototype.O,nw.prototype.listenOnce=nw.prototype.P,nw.prototype.getLastError=nw.prototype.Sa,nw.prototype.getLastErrorCode=nw.prototype.Ia,nw.prototype.getStatus=nw.prototype.da,nw.prototype.getResponseJson=nw.prototype.Wa,nw.prototype.getResponseText=nw.prototype.ja,nw.prototype.send=nw.prototype.ha,nw.prototype.setWithCredentials=nw.prototype.Oa,ii.prototype.digest=ii.prototype.l,ii.prototype.reset=ii.prototype.reset,ii.prototype.update=ii.prototype.j,il.prototype.add=il.prototype.add,il.prototype.multiply=il.prototype.R,il.prototype.modulo=il.prototype.gb,il.prototype.compare=il.prototype.X,il.prototype.toNumber=il.prototype.ea,il.prototype.toString=il.prototype.toString,il.prototype.getBits=il.prototype.D,il.fromNumber=ip,il.fromString=ig,ev.createWebChannelTransport=function(){return new n9},ev.getStatEventTarget=function(){return t3()},ev.ErrorCode=rr,ev.EventType=rn,ev.Event=t2,ev.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ev.FetchXmlHttpFactory=np,ev.WebChannel=ro,ev.XhrIo=nw;var iA=ev.Md5=ii,iO=ev.Integer=il,iD=et(2165),iN=et(8715);let ik="@firebase/firestore",iM="4.4.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor($){this.uid=$}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual($){return $.uid===this.uid}}iL.UNAUTHENTICATED=new iL(null),iL.GOOGLE_CREDENTIALS=new iL("google-credentials-uid"),iL.FIRST_PARTY=new iL("first-party-uid"),iL.MOCK_USER=new iL("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ij="10.7.2";function iB($){ij=$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF($){return(0,ep.inspect)($,{depth:100})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iV=new ef.Yd("@firebase/firestore");function iU(){return iV.logLevel}function iz($,...ee){if(iV.logLevel<=ef.in.DEBUG){let et=ee.map(i$);iV.debug(`Firestore (${ij}): ${$}`,...et)}}function iq($,...ee){if(iV.logLevel<=ef.in.ERROR){let et=ee.map(i$);iV.error(`Firestore (${ij}): ${$}`,...et)}}function iH($,...ee){if(iV.logLevel<=ef.in.WARN){let et=ee.map(i$);iV.warn(`Firestore (${ij}): ${$}`,...et)}}function i$($){if("string"==typeof $)return $;try{return iF($)}catch(ee){return $}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iG($="Unexpected state"){let ee=`FIRESTORE (${ij}) INTERNAL ASSERTION FAILED: `+$;throw iq(ee),Error(ee)}function iW($,ee){$||iG()}function iK($,ee){return $}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iQ={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class iY extends eg.ZR{constructor($,ee){super($,ee),this.code=$,this.message=ee,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iX{constructor(){this.promise=new Promise(($,ee)=>{this.resolve=$,this.reject=ee})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iJ{constructor($,ee){this.user=ee,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${$}`)}}class iZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start($,ee){$.enqueueRetryable(()=>ee(iL.UNAUTHENTICATED))}shutdown(){}}class i0{constructor($){this.token=$,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start($,ee){this.changeListener=ee,$.enqueueRetryable(()=>ee(this.token.user))}shutdown(){this.changeListener=null}}class i1{constructor($){this.authProvider=$,this.currentUser=iL.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start($,ee){let et=this.tokenCounter,er=$=>this.tokenCounter!==et?(et=this.tokenCounter,ee($)):Promise.resolve(),en=new iX;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),en.resolve(),en=new iX,$.enqueueRetryable(()=>er(this.currentUser))};let ei=()=>{let ee=en;$.enqueueRetryable(async()=>{await ee.promise,await er(this.currentUser)})},es=$=>{iz("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=$,this.auth.addAuthTokenListener(this.tokenListener),ei()};this.authProvider.onInit($=>es($)),setTimeout(()=>{if(!this.auth){let $=this.authProvider.getImmediate({optional:!0});$?es($):(iz("FirebaseAuthCredentialsProvider","Auth not yet detected"),en.resolve(),en=new iX)}},0),ei()}getToken(){let $=this.tokenCounter,ee=this.forceRefresh;return(this.forceRefresh=!1,this.auth)?this.auth.getToken(ee).then(ee=>this.tokenCounter!==$?(iz("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):ee?(iW("string"==typeof ee.accessToken),new iJ(ee.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.tokenListener)}getUser(){let $=this.auth&&this.auth.getUid();return iW(null===$||"string"==typeof $),new iL($)}}class i2{constructor($,ee,et){this.sessionIndex=$,this.iamToken=ee,this.authTokenFactory=et,this.type="FirstParty",this.user=iL.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let $=this.getAuthToken();return $&&this._headers.set("Authorization",$),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}}class i4{constructor($,ee,et){this.sessionIndex=$,this.iamToken=ee,this.authTokenFactory=et}getToken(){return Promise.resolve(new i2(this.sessionIndex,this.iamToken,this.authTokenFactory))}start($,ee){$.enqueueRetryable(()=>ee(iL.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class i3{constructor($){this.value=$,this.type="AppCheck",this.headers=new Map,$&&$.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i6{constructor($){this.appCheckProvider=$,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null}start($,ee){let et=$=>{null!=$.error&&iz("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${$.error.message}`);let et=$.token!==this.latestAppCheckToken;return this.latestAppCheckToken=$.token,iz("FirebaseAppCheckTokenProvider",`Received ${et?"new":"existing"} token.`),et?ee($.token):Promise.resolve()};this.tokenListener=ee=>{$.enqueueRetryable(()=>et(ee))};let er=$=>{iz("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=$,this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit($=>er($)),setTimeout(()=>{if(!this.appCheck){let $=this.appCheckProvider.getImmediate({optional:!0});$?er($):iz("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let $=this.forceRefresh;return(this.forceRefresh=!1,this.appCheck)?this.appCheck.getToken($).then($=>$?(iW("string"==typeof $.token),this.latestAppCheckToken=$.token,new i3($.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.tokenListener)}}function i5($){if(!$)return new iZ;switch($.type){case"firstParty":return new i4($.sessionIndex||"0",$.iamToken||null,$.authTokenFactory||null);case"provider":return $.client;default:throw new iY(iQ.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9($){return(0,em.randomBytes)($)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{static newId(){let $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",ee=Math.floor(256/$.length)*$.length,et="",er=20;for(;et.length<er;){let en=i9(40);for(let ei=0;ei<en.length;++ei)et.length<er&&en[ei]<ee&&(et+=$.charAt(en[ei]%$.length))}return et}}function i7($,ee){return $<ee?-1:$>ee?1:0}function se($,ee,et){return $.length===ee.length&&$.every(($,er)=>et($,ee[er]))}function st($){return $+"\x00"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sr=-62135596800,sn=1e6;class si{constructor($,ee){if(this.seconds=$,this.nanoseconds=ee,ee<0||ee>=1e9)throw new iY(iQ.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+ee);if($<sr||$>=253402300800)throw new iY(iQ.INVALID_ARGUMENT,"Timestamp seconds out of range: "+$)}static now(){return si.fromMillis(Date.now())}static fromDate($){return si.fromMillis($.getTime())}static fromMillis($){let ee=Math.floor($/1e3),et=Math.floor(($-1e3*ee)*sn);return new si(ee,et)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sn}_compareTo($){return this.seconds===$.seconds?i7(this.nanoseconds,$.nanoseconds):i7(this.seconds,$.seconds)}isEqual($){return $.seconds===this.seconds&&$.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds-sr).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor($){this.timestamp=$}static fromTimestamp($){return new ss($)}static min(){return new ss(new si(0,0))}static max(){return new ss(new si(253402300799,1e9-1))}compareTo($){return this.timestamp._compareTo($.timestamp)}isEqual($){return this.timestamp.isEqual($.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let so="__name__";class sl{constructor($,ee,et){void 0===ee?ee=0:ee>$.length&&iG(),void 0===et?et=$.length-ee:et>$.length-ee&&iG(),this.segments=$,this.offset=ee,this.len=et}get length(){return this.len}isEqual($){return 0===sl.comparator(this,$)}child($){let ee=this.segments.slice(this.offset,this.limit());return $ instanceof sl?$.forEach($=>{ee.push($)}):ee.push($),this.construct(ee)}limit(){return this.offset+this.length}popFirst($){return $=void 0===$?1:$,this.construct(this.segments,this.offset+$,this.length-$)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get($){return this.segments[this.offset+$]}isEmpty(){return 0===this.length}isPrefixOf($){if($.length<this.length)return!1;for(let ee=0;ee<this.length;ee++)if(this.get(ee)!==$.get(ee))return!1;return!0}isImmediateParentOf($){if(this.length+1!==$.length)return!1;for(let ee=0;ee<this.length;ee++)if(this.get(ee)!==$.get(ee))return!1;return!0}forEach($){for(let ee=this.offset,et=this.limit();ee<et;ee++)$(this.segments[ee])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator($,ee){let et=Math.min($.length,ee.length);for(let er=0;er<et;er++){let et=$.get(er),en=ee.get(er);if(et<en)return -1;if(et>en)return 1}return $.length<ee.length?-1:$.length>ee.length?1:0}}class su extends sl{construct($,ee,et){return new su($,ee,et)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...$){let ee=[];for(let et of $){if(et.indexOf("//")>=0)throw new iY(iQ.INVALID_ARGUMENT,`Invalid segment (${et}). Paths must not contain // in them.`);ee.push(...et.split("/").filter($=>$.length>0))}return new su(ee)}static emptyPath(){return new su([])}}let sh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sf extends sl{construct($,ee,et){return new sf($,ee,et)}static isValidIdentifier($){return sh.test($)}canonicalString(){return this.toArray().map($=>($=$.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sf.isValidIdentifier($)||($="`"+$+"`"),$)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===so}static keyField(){return new sf([so])}static fromServerFormat($){let ee=[],et="",er=0,en=()=>{if(0===et.length)throw new iY(iQ.INVALID_ARGUMENT,`Invalid field path (${$}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);ee.push(et),et=""},ei=!1;for(;er<$.length;){let ee=$[er];if("\\"===ee){if(er+1===$.length)throw new iY(iQ.INVALID_ARGUMENT,"Path has trailing escape character: "+$);let ee=$[er+1];if(!("\\"===ee||"."===ee||"`"===ee))throw new iY(iQ.INVALID_ARGUMENT,"Path has invalid escape sequence: "+$);et+=ee,er+=2}else"`"===ee?ei=!ei:"."!==ee||ei?et+=ee:en(),er++}if(en(),ei)throw new iY(iQ.INVALID_ARGUMENT,"Unterminated ` in path: "+$);return new sf(ee)}static emptyPath(){return new sf([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor($){this.path=$}static fromPath($){return new sp(su.fromString($))}static fromName($){return new sp(su.fromString($).popFirst(5))}static empty(){return new sp(su.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId($){return this.path.length>=2&&this.path.get(this.path.length-2)===$}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual($){return null!==$&&0===su.comparator(this.path,$.path)}toString(){return this.path.toString()}static comparator($,ee){return su.comparator($.path,ee.path)}static isDocumentKey($){return $.length%2==0}static fromSegments($){return new sp(new su($.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg=-1,sm=0;class sy{constructor($,ee,et,er){this.indexId=$,this.collectionGroup=ee,this.fields=et,this.indexState=er}}function sv($){return $.fields.find($=>2===$.kind)}function sS($){return $.fields.filter($=>2!==$.kind)}function sT($){let ee=sS($);return 0===ee.length?0:ee[ee.length-1].kind}function sw($,ee){let et=i7($.collectionGroup,ee.collectionGroup);if(0!==et)return et;for(let er=0;er<Math.min($.fields.length,ee.fields.length);++er)if(0!==(et=s_($.fields[er],ee.fields[er])))return et;return i7($.fields.length,ee.fields.length)}function sE($){return`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map($=>`${$.fieldPath}:${$.kind}`).join(",")}`}sy.UNKNOWN_ID=-1;class sC{constructor($,ee){this.fieldPath=$,this.kind=ee}}function s_($,ee){let et=sf.comparator($.fieldPath,ee.fieldPath);return 0!==et?et:i7($.kind,ee.kind)}class sR{constructor($,ee){this.sequenceNumber=$,this.offset=ee}static empty(){return new sR(sm,sP.min())}}function sx($,ee){let et=$.toTimestamp().seconds,er=$.toTimestamp().nanoseconds+1;return new sP(ss.fromTimestamp(1e9===er?new si(et+1,0):new si(et,er)),sp.empty(),ee)}function sI($){return new sP($.readTime,$.key,sg)}class sP{constructor($,ee,et){this.readTime=$,this.documentKey=ee,this.largestBatchId=et}static min(){return new sP(ss.min(),sp.empty(),sg)}static max(){return new sP(ss.max(),sp.empty(),sg)}}function sA($,ee){let et=$.readTime.compareTo(ee.readTime);return 0!==et||0!==(et=sp.comparator($.documentKey,ee.documentKey))?et:i7($.largestBatchId,ee.largestBatchId)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener($){this.onCommittedListeners.push($)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach($=>$())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN($){if($.code===iQ.FAILED_PRECONDITION&&$.message===sO)iz("LocalStore","Unexpectedly lost primary lease");else throw $}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor($){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,$($=>{this.isDone=!0,this.result=$,this.nextCallback&&this.nextCallback($)},$=>{this.isDone=!0,this.error=$,this.catchCallback&&this.catchCallback($)})}catch($){return this.next(void 0,$)}next($,ee){return(this.callbackAttached&&iG(),this.callbackAttached=!0,this.isDone)?this.error?this.wrapFailure(ee,this.error):this.wrapSuccess($,this.result):new sk((et,er)=>{this.nextCallback=ee=>{this.wrapSuccess($,ee).next(et,er)},this.catchCallback=$=>{this.wrapFailure(ee,$).next(et,er)}})}toPromise(){return new Promise(($,ee)=>{this.next($,ee)})}wrapUserFunction($){try{let ee=$();if(ee instanceof sk)return ee;return sk.resolve(ee)}catch($){return sk.reject($)}}wrapSuccess($,ee){return $?this.wrapUserFunction(()=>$(ee)):sk.resolve(ee)}wrapFailure($,ee){return $?this.wrapUserFunction(()=>$(ee)):sk.reject(ee)}static resolve($){return new sk((ee,et)=>{ee($)})}static reject($){return new sk((ee,et)=>{et($)})}static waitFor($){return new sk((ee,et)=>{let er=0,en=0,ei=!1;$.forEach($=>{++er,$.next(()=>{++en,ei&&en===er&&ee()},$=>et($))}),ei=!0,en===er&&ee()})}static or($){let ee=sk.resolve(!1);for(let et of $)ee=ee.next($=>$?sk.resolve($):et());return ee}static forEach($,ee){let et=[];return $.forEach(($,er)=>{et.push(ee.call(this,$,er))}),this.waitFor(et)}static mapArray($,ee){return new sk((et,er)=>{let en=$.length,ei=Array(en),es=0;for(let eo=0;eo<en;eo++){let eu=eo;ee($[eu]).next($=>{ei[eu]=$,++es===en&&et(ei)},$=>er($))}})}static doWhile($,ee){return new sk((et,er)=>{let en=()=>{!0===$()?ee().next(()=>{en()},er):et()};en()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sM="SimpleDb",sL=3;class sj{constructor($,ee){this.action=$,this.transaction=ee,this.aborted=!1,this.completionDeferred=new iX,this.transaction.oncomplete=()=>{this.completionDeferred.resolve()},this.transaction.onabort=()=>{ee.error?this.completionDeferred.reject(new sV($,ee.error)):this.completionDeferred.resolve()},this.transaction.onerror=ee=>{let et=s$(ee.target.error);this.completionDeferred.reject(new sV($,et))}}static open($,ee,et,er){try{return new sj(ee,$.transaction(er,et))}catch($){throw new sV(ee,$)}}get completionPromise(){return this.completionDeferred.promise}abort($){$&&this.completionDeferred.reject($),this.aborted||(iz(sM,"Aborting transaction:",$?$.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}maybeCommit(){let $=this.transaction;this.aborted||"function"!=typeof $.commit||$.commit()}store($){return new sz(this.transaction.objectStore($))}}class sB{constructor($,ee,et){this.name=$,this.version=ee,this.schemaConverter=et,12.2===sB.getIOSVersion((0,eg.z$)())&&iq("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete($){return iz(sM,"Removing database:",$),sq(window.indexedDB.deleteDatabase($)).toPromise()}static isAvailable(){if(!(0,eg.hl)())return!1;if(sB.isMockPersistence())return!0;let $=(0,eg.z$)(),ee=sB.getIOSVersion($),et=0<ee&&ee<10,er=sB.getAndroidVersion($),en=0<er&&er<4.5;return!($.indexOf("MSIE ")>0||$.indexOf("Trident/")>0||$.indexOf("Edge/")>0)&&!et&&!en}static isMockPersistence(){var $;return"undefined"!=typeof process&&(null===($=process.env)||void 0===$?void 0:$.USE_MOCK_PERSISTENCE)==="YES"}static getStore($,ee){return $.store(ee)}static getIOSVersion($){let ee=$.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(ee?ee[1].split("_").slice(0,2).join("."):"-1")}static getAndroidVersion($){let ee=$.match(/Android ([\d.]+)/i);return Number(ee?ee[1].split(".").slice(0,2).join("."):"-1")}async ensureDb($){return this.db||(iz(sM,"Opening database:",this.name),this.db=await new Promise((ee,et)=>{let er=indexedDB.open(this.name,this.version);er.onsuccess=$=>{ee($.target.result)},er.onblocked=()=>{et(new sV($,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},er.onerror=ee=>{let er=ee.target.error;"VersionError"===er.name?et(new iY(iQ.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===er.name?et(new iY(iQ.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+er)):et(new sV($,er))},er.onupgradeneeded=$=>{iz(sM,'Database "'+this.name+'" requires upgrade from version:',$.oldVersion);let ee=$.target.result;this.schemaConverter.createOrUpgrade(ee,er.transaction,$.oldVersion,this.version).next(()=>{iz(sM,"Database upgrade to version "+this.version+" complete")})}})),this.versionchangelistener&&(this.db.onversionchange=$=>this.versionchangelistener($)),this.db}setVersionChangeListener($){this.versionchangelistener=$,this.db&&(this.db.onversionchange=ee=>$(ee))}async runTransaction($,ee,et,er){let en="readonly"===ee,ei=0;for(;;){++ei;try{this.db=await this.ensureDb($);let ee=sj.open(this.db,$,en?"readonly":"readwrite",et),ei=er(ee).next($=>(ee.maybeCommit(),$)).catch($=>(ee.abort($),sk.reject($))).toPromise();return ei.catch(()=>{}),await ee.completionPromise,ei}catch(et){let $=et,ee="FirebaseError"!==$.name&&ei<sL;if(iz(sM,"Transaction failed with error:",$.message,"Retrying:",ee),this.close(),!ee)return Promise.reject($)}}}close(){this.db&&this.db.close(),this.db=void 0}}class sF{constructor($){this.dbCursor=$,this.shouldStop=!1,this.nextKey=null}get isDone(){return this.shouldStop}get skipToKey(){return this.nextKey}set cursor($){this.dbCursor=$}done(){this.shouldStop=!0}skip($){this.nextKey=$}delete(){return sq(this.dbCursor.delete())}}class sV extends iY{constructor($,ee){super(iQ.UNAVAILABLE,`IndexedDB transaction '${$}' failed: ${ee}`),this.name="IndexedDbTransactionError"}}function sU($){return"IndexedDbTransactionError"===$.name}class sz{constructor($){this.store=$}put($,ee){let et;return void 0!==ee?(iz(sM,"PUT",this.store.name,$,ee),et=this.store.put(ee,$)):(iz(sM,"PUT",this.store.name,"<auto-key>",$),et=this.store.put($)),sq(et)}add($){return iz(sM,"ADD",this.store.name,$,$),sq(this.store.add($))}get($){return sq(this.store.get($)).next(ee=>(void 0===ee&&(ee=null),iz(sM,"GET",this.store.name,$,ee),ee))}delete($){return iz(sM,"DELETE",this.store.name,$),sq(this.store.delete($))}count(){return iz(sM,"COUNT",this.store.name),sq(this.store.count())}loadAll($,ee){let et=this.options($,ee),er=et.index?this.store.index(et.index):this.store;if("function"==typeof er.getAll){let $=er.getAll(et.range);return new sk((ee,et)=>{$.onerror=$=>{et($.target.error)},$.onsuccess=$=>{ee($.target.result)}})}{let $=this.cursor(et),ee=[];return this.iterateCursor($,($,et)=>{ee.push(et)}).next(()=>ee)}}loadFirst($,ee){let et=this.store.getAll($,null===ee?void 0:ee);return new sk(($,ee)=>{et.onerror=$=>{ee($.target.error)},et.onsuccess=ee=>{$(ee.target.result)}})}deleteAll($,ee){iz(sM,"DELETE ALL",this.store.name);let et=this.options($,ee);et.keysOnly=!1;let er=this.cursor(et);return this.iterateCursor(er,($,ee,et)=>et.delete())}iterate($,ee){let et;ee?et=$:(et={},ee=$);let er=this.cursor(et);return this.iterateCursor(er,ee)}iterateSerial($){let ee=this.cursor({});return new sk((et,er)=>{ee.onerror=$=>{er(s$($.target.error))},ee.onsuccess=ee=>{let er=ee.target.result;if(!er){et();return}$(er.primaryKey,er.value).next($=>{$?er.continue():et()})}})}iterateCursor($,ee){let et=[];return new sk((er,en)=>{$.onerror=$=>{en($.target.error)},$.onsuccess=$=>{let en=$.target.result;if(!en){er();return}let ei=new sF(en),es=ee(en.primaryKey,en.value,ei);if(es instanceof sk){let $=es.catch($=>(ei.done(),sk.reject($)));et.push($)}ei.isDone?er():null===ei.skipToKey?en.continue():en.continue(ei.skipToKey)}}).next(()=>sk.waitFor(et))}options($,ee){let et;return void 0!==$&&("string"==typeof $?et=$:ee=$),{index:et,range:ee}}cursor($){let ee="next";if($.reverse&&(ee="prev"),!$.index)return this.store.openCursor($.range,ee);{let et=this.store.index($.index);return $.keysOnly?et.openKeyCursor($.range,ee):et.openCursor($.range,ee)}}}function sq($){return new sk((ee,et)=>{$.onsuccess=$=>{ee($.target.result)},$.onerror=$=>{et(s$($.target.error))}})}let sH=!1;function s$($){let ee=sB.getIOSVersion((0,eg.z$)());if(ee>=12.2&&ee<13){let ee="An internal error was encountered in the Indexed Database server";if($.message.indexOf(ee)>=0){let $=new iY("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${ee}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sH||(sH=!0,setTimeout(()=>{throw $},0)),$}}return $}let sG="IndexBackfiller",sW=null,sK=null,sQ=50;class sY{constructor($,ee){this.asyncQueue=$,this.backfiller=ee,this.task=null}start(){this.schedule(sW)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}schedule($){iz(sG,`Scheduled in ${$}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",$,async()=>{this.task=null;try{let $=await this.backfiller.backfill();iz(sG,`Documents written: ${$}`)}catch($){sU($)?iz(sG,"Ignoring IndexedDB error during index backfill: ",$):await sN($)}await this.schedule(sK)})}}class sX{constructor($,ee){this.localStore=$,this.persistence=ee}async backfill($=sQ){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",ee=>this.writeIndexEntries(ee,$))}writeIndexEntries($,ee){let et=new Set,er=ee,en=!0;return sk.doWhile(()=>!0===en&&er>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate($).next(ee=>{if(!(null===ee||et.has(ee)))return iz(sG,`Processing collection: ${ee}`),this.writeEntriesForCollectionGroup($,ee,er).next($=>{er-=$,et.add(ee)});en=!1})).next(()=>ee-er)}writeEntriesForCollectionGroup($,ee,et){return this.localStore.indexManager.getMinOffsetFromCollectionGroup($,ee).next(er=>this.localStore.localDocuments.getNextDocuments($,ee,er,et).next(et=>{let en=et.changes;return this.localStore.indexManager.updateIndexEntries($,en).next(()=>this.getNewOffset(er,et)).next(et=>(iz(sG,`Updating offset: ${et}`),this.localStore.indexManager.updateCollectionGroup($,ee,et))).next(()=>en.size)}))}getNewOffset($,ee){let et=$;return ee.changes.forEach(($,ee)=>{let er=sI(ee);sA(er,et)>0&&(et=er)}),new sP(et.readTime,et.documentKey,Math.max(ee.batchId,$.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sJ{constructor($,ee){this.previousValue=$,ee&&(ee.sequenceNumberHandler=$=>this.setPreviousValue($),this.writeNewSequenceNumber=$=>ee.writeSequenceNumber($))}setPreviousValue($){return this.previousValue=Math.max($,this.previousValue),this.previousValue}next(){let $=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber($),$}}sJ.INVALID=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sZ="\x01",s0="\x01",s1="\x10",s2="\x11";function s4($){let ee="";for(let et=0;et<$.length;et++)ee.length>0&&(ee=s6(ee)),ee=s3($.get(et),ee);return s6(ee)}function s3($,ee){let et=ee,er=$.length;for(let ee=0;ee<er;ee++){let er=$.charAt(ee);switch(er){case"\x00":et+=sZ+s1;break;case sZ:et+=sZ+s2;break;default:et+=er}}return et}function s6($){return $+sZ+s0}function s5($){let ee=$.length;if(iW(ee>=2),2===ee)return iW($.charAt(0)===sZ&&$.charAt(1)===s0),su.emptyPath();let et=ee-2,er=[],en="";for(let ei=0;ei<ee;){let ee=$.indexOf(sZ,ei);switch((ee<0||ee>et)&&iG(),$.charAt(ee+1)){case s0:let es;let eo=$.substring(ei,ee);0===en.length?es=eo:(en+=eo,es=en,en=""),er.push(es);break;case s1:en+=$.substring(ei,ee)+"\x00";break;case s2:en+=$.substring(ei,ee+1);break;default:iG()}ei=ee+2}return new su(er)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s9="remoteDocuments",s8="owner",s7="owner",at="mutationQueues",ar="userId",an="mutations",ai="batchId",ao="userMutationsIndex",al=null;function au($){return[$]}function ah($,ee){return[$,s4(ee)]}function af($,ee,et){return[$,s4(ee),et]}let ap={},ag="documentMutations",am="remoteDocumentsV14",ay=null,av="documentKeyIndex",aS=null,aT="collectionGroupIndex",aw=null,aE="remoteDocumentGlobal",aC="remoteDocumentGlobalKey",a_="targets",aR="targetId",ax="queryTargetsIndex",aI=null,aP="targetDocuments",aA=null,aO="documentTargetsIndex",aD=null,aN="targetGlobalKey",ak="targetGlobal",aM="collectionParents",aL=null,aj="clientMetadata",aB="clientId",aF="bundles",aV="bundleId",aU="namedQueries",az="name",aq="indexConfiguration",aH="indexId",a$="collectionGroupIndex",aG="collectionGroup",aW="indexState",aK=null,aQ="sequenceNumberIndex",aY=null,aJ="indexEntries",aZ=null,a0="documentKeyIndex",a4=null,a3="documentOverlays",a6=null,a5="collectionPathOverlayIndex",a9=null,a8="collectionGroupOverlayIndex",a7=null,oe=[at,an,ag,s9,a_,s8,ak,aP,aj,aE,aM,aF,aU],ot=[...oe,a3],or=[at,an,ag,am,a_,s8,ak,aP,aj,aE,aM,aF,aU,a3],on=or,oi=[...on,aq,aW,aJ];function oo($){return 15===$?oi:14===$?on:13===$?or:12===$?ot:11===$?oe:void iG()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol extends null{constructor($,ee){super(),this.simpleDbTransaction=$,this.currentSequenceNumber=ee}}function ou($,ee){let et=iK($);return sB.getStore(et.simpleDbTransaction,ee)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh($){let ee=0;for(let et in $)Object.prototype.hasOwnProperty.call($,et)&&ee++;return ee}function of($,ee){for(let et in $)Object.prototype.hasOwnProperty.call($,et)&&ee(et,$[et])}function og($){for(let ee in $)if(Object.prototype.hasOwnProperty.call($,ee))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor($,ee){this.comparator=$,this.root=ee||ov.EMPTY}insert($,ee){return new om(this.comparator,this.root.insert($,ee,this.comparator).copy(null,null,ov.BLACK,null,null))}remove($){return new om(this.comparator,this.root.remove($,this.comparator).copy(null,null,ov.BLACK,null,null))}get($){let ee=this.root;for(;!ee.isEmpty();){let et=this.comparator($,ee.key);if(0===et)return ee.value;et<0?ee=ee.left:et>0&&(ee=ee.right)}return null}indexOf($){let ee=0,et=this.root;for(;!et.isEmpty();){let er=this.comparator($,et.key);if(0===er)return ee+et.left.size;er<0?et=et.left:(ee+=et.left.size+1,et=et.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal($){return this.root.inorderTraversal($)}forEach($){this.inorderTraversal((ee,et)=>($(ee,et),!1))}toString(){let $=[];return this.inorderTraversal((ee,et)=>($.push(`${ee}:${et}`),!1)),`{${$.join(", ")}}`}reverseTraversal($){return this.root.reverseTraversal($)}getIterator(){return new oy(this.root,null,this.comparator,!1)}getIteratorFrom($){return new oy(this.root,$,this.comparator,!1)}getReverseIterator(){return new oy(this.root,null,this.comparator,!0)}getReverseIteratorFrom($){return new oy(this.root,$,this.comparator,!0)}}class oy{constructor($,ee,et,er){this.isReverse=er,this.nodeStack=[];let en=1;for(;!$.isEmpty();)if(en=ee?et($.key,ee):1,ee&&er&&(en*=-1),en<0)$=this.isReverse?$.left:$.right;else if(0===en){this.nodeStack.push($);break}else this.nodeStack.push($),$=this.isReverse?$.right:$.left}getNext(){let $=this.nodeStack.pop(),ee={key:$.key,value:$.value};if(this.isReverse)for($=$.left;!$.isEmpty();)this.nodeStack.push($),$=$.right;else for($=$.right;!$.isEmpty();)this.nodeStack.push($),$=$.left;return ee}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let $=this.nodeStack[this.nodeStack.length-1];return{key:$.key,value:$.value}}}class ov{constructor($,ee,et,er,en){this.key=$,this.value=ee,this.color=null!=et?et:ov.RED,this.left=null!=er?er:ov.EMPTY,this.right=null!=en?en:ov.EMPTY,this.size=this.left.size+1+this.right.size}copy($,ee,et,er,en){return new ov(null!=$?$:this.key,null!=ee?ee:this.value,null!=et?et:this.color,null!=er?er:this.left,null!=en?en:this.right)}isEmpty(){return!1}inorderTraversal($){return this.left.inorderTraversal($)||$(this.key,this.value)||this.right.inorderTraversal($)}reverseTraversal($){return this.right.reverseTraversal($)||$(this.key,this.value)||this.left.reverseTraversal($)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert($,ee,et){let er=this,en=et($,er.key);return(er=en<0?er.copy(null,null,null,er.left.insert($,ee,et),null):0===en?er.copy(null,ee,null,null,null):er.copy(null,null,null,null,er.right.insert($,ee,et))).fixUp()}removeMin(){if(this.left.isEmpty())return ov.EMPTY;let $=this;return $.left.isRed()||$.left.left.isRed()||($=$.moveRedLeft()),($=$.copy(null,null,null,$.left.removeMin(),null)).fixUp()}remove($,ee){let et;let er=this;if(0>ee($,er.key))er.left.isEmpty()||er.left.isRed()||er.left.left.isRed()||(er=er.moveRedLeft()),er=er.copy(null,null,null,er.left.remove($,ee),null);else{if(er.left.isRed()&&(er=er.rotateRight()),er.right.isEmpty()||er.right.isRed()||er.right.left.isRed()||(er=er.moveRedRight()),0===ee($,er.key)){if(er.right.isEmpty())return ov.EMPTY;et=er.right.min(),er=er.copy(et.key,et.value,null,null,er.right.removeMin())}er=er.copy(null,null,null,null,er.right.remove($,ee))}return er.fixUp()}isRed(){return this.color}fixUp(){let $=this;return $.right.isRed()&&!$.left.isRed()&&($=$.rotateLeft()),$.left.isRed()&&$.left.left.isRed()&&($=$.rotateRight()),$.left.isRed()&&$.right.isRed()&&($=$.colorFlip()),$}moveRedLeft(){let $=this.colorFlip();return $.right.left.isRed()&&($=($=($=$.copy(null,null,null,null,$.right.rotateRight())).rotateLeft()).colorFlip()),$}moveRedRight(){let $=this.colorFlip();return $.left.left.isRed()&&($=($=$.rotateRight()).colorFlip()),$}rotateLeft(){let $=this.copy(null,null,ov.RED,null,this.right.left);return this.right.copy(null,null,this.color,$,null)}rotateRight(){let $=this.copy(null,null,ov.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,$)}colorFlip(){let $=this.left.copy(null,null,!this.left.color,null,null),ee=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,$,ee)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw iG();let $=this.left.check();if($===this.right.check())return $+(this.isRed()?0:1);throw iG()}}ov.EMPTY=null,ov.RED=!0,ov.BLACK=!1;class oS{constructor(){this.size=0}get key(){throw iG()}get value(){throw iG()}get color(){throw iG()}get left(){throw iG()}get right(){throw iG()}copy($,ee,et,er,en){return this}insert($,ee,et){return new ov($,ee)}remove($,ee){return this}isEmpty(){return!0}inorderTraversal($){return!1}reverseTraversal($){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}}ov.EMPTY=new oS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor($){this.comparator=$,this.data=new om(this.comparator)}has($){return null!==this.data.get($)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf($){return this.data.indexOf($)}forEach($){this.data.inorderTraversal((ee,et)=>($(ee),!1))}forEachInRange($,ee){let et=this.data.getIteratorFrom($[0]);for(;et.hasNext();){let er=et.getNext();if(this.comparator(er.key,$[1])>=0)return;ee(er.key)}}forEachWhile($,ee){let et;for(et=void 0!==ee?this.data.getIteratorFrom(ee):this.data.getIterator();et.hasNext();)if(!$(et.getNext().key))return}firstAfterOrEqual($){let ee=this.data.getIteratorFrom($);return ee.hasNext()?ee.getNext().key:null}getIterator(){return new ow(this.data.getIterator())}getIteratorFrom($){return new ow(this.data.getIteratorFrom($))}add($){return this.copy(this.data.remove($).insert($,!0))}delete($){return this.has($)?this.copy(this.data.remove($)):this}isEmpty(){return this.data.isEmpty()}unionWith($){let ee=this;return ee.size<$.size&&(ee=$,$=this),$.forEach($=>{ee=ee.add($)}),ee}isEqual($){if(!($ instanceof oT)||this.size!==$.size)return!1;let ee=this.data.getIterator(),et=$.data.getIterator();for(;ee.hasNext();){let $=ee.getNext().key,er=et.getNext().key;if(0!==this.comparator($,er))return!1}return!0}toArray(){let $=[];return this.forEach(ee=>{$.push(ee)}),$}toString(){let $=[];return this.forEach(ee=>$.push(ee)),"SortedSet("+$.toString()+")"}copy($){let ee=new oT(this.comparator);return ee.data=$,ee}}class ow{constructor($){this.iter=$}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function oE($,ee,et,er,en){let ei=$.getIterator(),es=ee.getIterator(),eo=oC(ei),eu=oC(es);for(;eo||eu;){let $=!1,ee=!1;if(eo&&eu){let er=et(eo,eu);er<0?ee=!0:er>0&&($=!0)}else null!=eo?ee=!0:$=!0;$?(er(eu),eu=oC(es)):ee?(en(eo),eo=oC(ei)):(eo=oC(ei),eu=oC(es))}}function oC($){return $.hasNext()?$.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor($){this.fields=$,$.sort(sf.comparator)}static empty(){return new o_([])}unionWith($){let ee=new oT(sf.comparator);for(let $ of this.fields)ee=ee.add($);for(let et of $)ee=ee.add(et);return new o_(ee.toArray())}covers($){for(let ee of this.fields)if(ee.isPrefixOf($))return!0;return!1}isEqual($){return se(this.fields,$.fields,($,ee)=>$.isEqual(ee))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR($){return Buffer.from($,"base64").toString("binary")}function ox($){return Buffer.from($,"binary").toString("base64")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor($){this.binaryString=$}static fromBase64String($){return new oI(oR($))}static fromUint8Array($){return new oI(oP($))}[Symbol.iterator](){let $=0;return{next:()=>$<this.binaryString.length?{value:this.binaryString.charCodeAt($++),done:!1}:{value:void 0,done:!0}}}toBase64(){return ox(this.binaryString)}toUint8Array(){return oA(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo($){return i7(this.binaryString,$.binaryString)}isEqual($){return this.binaryString===$.binaryString}}function oP($){let ee="";for(let et=0;et<$.length;++et)ee+=String.fromCharCode($[et]);return ee}function oA($){let ee=new Uint8Array($.length);for(let et=0;et<$.length;et++)ee[et]=$.charCodeAt(et);return ee}oI.EMPTY_BYTE_STRING=new oI("");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oD($){if(iW(!!$),"string"==typeof $){let ee=0,et=oO.exec($);if(iW(!!et),et[1]){let $=et[1];ee=Number($=($+"000000000").substr(0,9))}return{seconds:Math.floor(new Date($).getTime()/1e3),nanos:ee}}return{seconds:oN($.seconds),nanos:oN($.nanos)}}function oN($){return"number"==typeof $?$:"string"==typeof $?Number($):0}function ok($){return"string"==typeof $?oI.fromBase64String($):oI.fromUint8Array($)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oM="server_timestamp",oL="__type__",oj="__previous_value__",oB="__local_write_time__";function oF($){var ee,et;return(null===(et=((null===(ee=null==$?void 0:$.mapValue)||void 0===ee?void 0:ee.fields)||{})[oL])||void 0===et?void 0:et.stringValue)===oM}function oV($,ee){let et={fields:{[oL]:{stringValue:oM},[oB]:{timestampValue:{seconds:$.seconds,nanos:$.nanoseconds}}}};return ee&&oF(ee)&&(ee=oU(ee)),ee&&(et.fields[oj]=ee),{mapValue:et}}function oU($){let ee=$.mapValue.fields[oj];return oF(ee)?oU(ee):ee}function oz($){let ee=oD($.mapValue.fields[oB].timestampValue);return new si(ee.seconds,ee.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{constructor($,ee,et,er,en,ei,es,eo,eu){this.databaseId=$,this.appId=ee,this.persistenceKey=et,this.host=er,this.ssl=en,this.forceLongPolling=ei,this.autoDetectLongPolling=es,this.longPollingOptions=eo,this.useFetchStreams=eu}}let oH="(default)";class o${constructor($,ee){this.projectId=$,this.database=ee||oH}static empty(){return new o$("","")}get isDefaultDatabase(){return this.database===oH}isEqual($){return $ instanceof o$&&$.projectId===this.projectId&&$.database===this.database}}function oG($,ee){if(!Object.prototype.hasOwnProperty.apply($.options,["projectId"]))throw new iY(iQ.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new o$($.options.projectId,ee)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oW=-1;function oK($){return null==$}function oQ($){return 0===$&&1/$==-1/0}function oY($){return"number"==typeof $&&Number.isInteger($)&&!oQ($)&&$<=Number.MAX_SAFE_INTEGER&&$>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oX="__max__",oJ={mapValue:{fields:{__type__:{stringValue:oX}}}},oZ={nullValue:"NULL_VALUE"};function o0($){if("nullValue"in $)return 0;if("booleanValue"in $)return 1;if("integerValue"in $||"doubleValue"in $)return 2;if("timestampValue"in $)return 3;if("stringValue"in $)return 5;if("bytesValue"in $)return 6;if("referenceValue"in $)return 7;else if("geoPointValue"in $)return 8;else if("arrayValue"in $)return 9;else if(!("mapValue"in $))return iG();else return oF($)?4:lD($)?9007199254740991:10}function o1($,ee){if($===ee)return!0;let et=o0($);if(et!==o0(ee))return!1;switch(et){case 0:case 9007199254740991:return!0;case 1:return $.booleanValue===ee.booleanValue;case 4:return oz($).isEqual(oz(ee));case 3:return o2($,ee);case 5:return $.stringValue===ee.stringValue;case 6:return o3($,ee);case 7:return $.referenceValue===ee.referenceValue;case 8:return o4($,ee);case 2:return o6($,ee);case 9:return se($.arrayValue.values||[],ee.arrayValue.values||[],o1);case 10:return o5($,ee);default:return iG()}}function o2($,ee){if("string"==typeof $.timestampValue&&"string"==typeof ee.timestampValue&&$.timestampValue.length===ee.timestampValue.length)return $.timestampValue===ee.timestampValue;let et=oD($.timestampValue),er=oD(ee.timestampValue);return et.seconds===er.seconds&&et.nanos===er.nanos}function o4($,ee){return oN($.geoPointValue.latitude)===oN(ee.geoPointValue.latitude)&&oN($.geoPointValue.longitude)===oN(ee.geoPointValue.longitude)}function o3($,ee){return ok($.bytesValue).isEqual(ok(ee.bytesValue))}function o6($,ee){if("integerValue"in $&&"integerValue"in ee)return oN($.integerValue)===oN(ee.integerValue);if("doubleValue"in $&&"doubleValue"in ee){let et=oN($.doubleValue),er=oN(ee.doubleValue);return et===er?oQ(et)===oQ(er):isNaN(et)&&isNaN(er)}return!1}function o5($,ee){let et=$.mapValue.fields||{},er=ee.mapValue.fields||{};if(oh(et)!==oh(er))return!1;for(let $ in et)if(et.hasOwnProperty($)&&(void 0===er[$]||!o1(et[$],er[$])))return!1;return!0}function o9($,ee){return void 0!==($.values||[]).find($=>o1($,ee))}function o8($,ee){if($===ee)return 0;let et=o0($),er=o0(ee);if(et!==er)return i7(et,er);switch(et){case 0:case 9007199254740991:return 0;case 1:return i7($.booleanValue,ee.booleanValue);case 2:return o7($,ee);case 3:return lt($.timestampValue,ee.timestampValue);case 4:return lt(oz($),oz(ee));case 5:return i7($.stringValue,ee.stringValue);case 6:return li($.bytesValue,ee.bytesValue);case 7:return lr($.referenceValue,ee.referenceValue);case 8:return ln($.geoPointValue,ee.geoPointValue);case 9:return ls($.arrayValue,ee.arrayValue);case 10:return ll($.mapValue,ee.mapValue);default:throw iG()}}function o7($,ee){let et=oN($.integerValue||$.doubleValue),er=oN(ee.integerValue||ee.doubleValue);return et<er?-1:et>er?1:et===er?0:isNaN(et)?isNaN(er)?0:-1:1}function lt($,ee){if("string"==typeof $&&"string"==typeof ee&&$.length===ee.length)return i7($,ee);let et=oD($),er=oD(ee),en=i7(et.seconds,er.seconds);return 0!==en?en:i7(et.nanos,er.nanos)}function lr($,ee){let et=$.split("/"),er=ee.split("/");for(let $=0;$<et.length&&$<er.length;$++){let ee=i7(et[$],er[$]);if(0!==ee)return ee}return i7(et.length,er.length)}function ln($,ee){let et=i7(oN($.latitude),oN(ee.latitude));return 0!==et?et:i7(oN($.longitude),oN(ee.longitude))}function li($,ee){let et=ok($),er=ok(ee);return et.compareTo(er)}function ls($,ee){let et=$.values||[],er=ee.values||[];for(let $=0;$<et.length&&$<er.length;++$){let ee=o8(et[$],er[$]);if(ee)return ee}return i7(et.length,er.length)}function ll($,ee){if($===oJ.mapValue&&ee===oJ.mapValue)return 0;if($===oJ.mapValue)return 1;if(ee===oJ.mapValue)return -1;let et=$.fields||{},er=Object.keys(et),en=ee.fields||{},ei=Object.keys(en);er.sort(),ei.sort();for(let $=0;$<er.length&&$<ei.length;++$){let ee=i7(er[$],ei[$]);if(0!==ee)return ee;let es=o8(et[er[$]],en[ei[$]]);if(0!==es)return es}return i7(er.length,ei.length)}function lu($){return lh($)}function lh($){if("nullValue"in $)return"null";if("booleanValue"in $)return""+$.booleanValue;if("integerValue"in $)return""+$.integerValue;if("doubleValue"in $)return""+$.doubleValue;if("timestampValue"in $)return lp($.timestampValue);if("stringValue"in $)return $.stringValue;if("bytesValue"in $)return lf($.bytesValue);else if("referenceValue"in $)return lm($.referenceValue);else if("geoPointValue"in $)return lg($.geoPointValue);else if("arrayValue"in $)return lv($.arrayValue);else if("mapValue"in $)return ly($.mapValue);else return iG()}function lf($){return ok($).toBase64()}function lp($){let ee=oD($);return`time(${ee.seconds},${ee.nanos})`}function lg($){return`geo(${$.latitude},${$.longitude})`}function lm($){return sp.fromName($).toString()}function ly($){let ee=Object.keys($.fields||{}).sort(),et="{",er=!0;for(let en of ee)er?er=!1:et+=",",et+=`${en}:${lh($.fields[en])}`;return et+"}"}function lv($){let ee="[",et=!0;for(let er of $.values||[])et?et=!1:ee+=",",ee+=lh(er);return ee+"]"}function lS($){switch(o0($)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let ee=oU($);return ee?16+lS(ee):16;case 5:return 2*$.stringValue.length;case 6:return ok($.bytesValue).approximateByteSize();case 7:return $.referenceValue.length;case 9:return lw($.arrayValue);case 10:return lT($.mapValue);default:throw iG()}}function lT($){let ee=0;return of($.fields,($,et)=>{ee+=$.length+lS(et)}),ee}function lw($){return($.values||[]).reduce(($,ee)=>$+lS(ee),0)}function lE($,ee){return{referenceValue:`projects/${$.projectId}/databases/${$.database}/documents/${ee.path.canonicalString()}`}}function lC($){return!!$&&"integerValue"in $}function l_($){return!!$&&"doubleValue"in $}function lR($){return lC($)||l_($)}function lx($){return!!$&&"arrayValue"in $}function lI($){return!!$&&"nullValue"in $}function lP($){return!!$&&"doubleValue"in $&&isNaN(Number($.doubleValue))}function lA($){return!!$&&"mapValue"in $}function lO($){if($.geoPointValue)return{geoPointValue:Object.assign({},$.geoPointValue)};if($.timestampValue&&"object"==typeof $.timestampValue)return{timestampValue:Object.assign({},$.timestampValue)};if($.mapValue){let ee={mapValue:{fields:{}}};return of($.mapValue.fields,($,et)=>ee.mapValue.fields[$]=lO(et)),ee}{if(!$.arrayValue)return Object.assign({},$);let ee={arrayValue:{values:[]}};for(let et=0;et<($.arrayValue.values||[]).length;++et)ee.arrayValue.values[et]=lO($.arrayValue.values[et]);return ee}}function lD($){return((($.mapValue||{}).fields||{}).__type__||{}).stringValue===oX}function lN($){if("nullValue"in $)return oZ;if("booleanValue"in $)return{booleanValue:!1};if("integerValue"in $||"doubleValue"in $)return{doubleValue:NaN};if("timestampValue"in $)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("stringValue"in $)return{stringValue:""};if("bytesValue"in $)return{bytesValue:""};if("referenceValue"in $)return lE(o$.empty(),sp.empty());else if("geoPointValue"in $)return{geoPointValue:{latitude:-90,longitude:-180}};else if("arrayValue"in $)return{arrayValue:{}};else if("mapValue"in $)return{mapValue:{}};else return iG()}function lk($){if("nullValue"in $)return{booleanValue:!1};if("booleanValue"in $)return{doubleValue:NaN};if("integerValue"in $||"doubleValue"in $)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("timestampValue"in $)return{stringValue:""};if("stringValue"in $)return{bytesValue:""};if("bytesValue"in $)return lE(o$.empty(),sp.empty());if("referenceValue"in $)return{geoPointValue:{latitude:-90,longitude:-180}};else if("geoPointValue"in $)return{arrayValue:{}};else if("arrayValue"in $)return{mapValue:{}};else if("mapValue"in $)return oJ;else return iG()}function lM($,ee){let et=o8($.value,ee.value);return 0!==et?et:$.inclusive&&!ee.inclusive?-1:!$.inclusive&&ee.inclusive?1:0}function lL($,ee){let et=o8($.value,ee.value);return 0!==et?et:$.inclusive&&!ee.inclusive?1:!$.inclusive&&ee.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor($){this.value=$}static empty(){return new lj({mapValue:{}})}field($){if($.isEmpty())return this.value;{let ee=this.value;for(let et=0;et<$.length-1;++et)if(!lA(ee=(ee.mapValue.fields||{})[$.get(et)]))return null;return(ee=(ee.mapValue.fields||{})[$.lastSegment()])||null}}set($,ee){this.getFieldsMap($.popLast())[$.lastSegment()]=lO(ee)}setAll($){let ee=sf.emptyPath(),et={},er=[];$.forEach(($,en)=>{if(!ee.isImmediateParentOf(en)){let $=this.getFieldsMap(ee);this.applyChanges($,et,er),et={},er=[],ee=en.popLast()}$?et[en.lastSegment()]=lO($):er.push(en.lastSegment())});let en=this.getFieldsMap(ee);this.applyChanges(en,et,er)}delete($){let ee=this.field($.popLast());lA(ee)&&ee.mapValue.fields&&delete ee.mapValue.fields[$.lastSegment()]}isEqual($){return o1(this.value,$.value)}getFieldsMap($){let ee=this.value;ee.mapValue.fields||(ee.mapValue={fields:{}});for(let et=0;et<$.length;++et){let er=ee.mapValue.fields[$.get(et)];lA(er)&&er.mapValue.fields||(er={mapValue:{fields:{}}},ee.mapValue.fields[$.get(et)]=er),ee=er}return ee.mapValue.fields}applyChanges($,ee,et){for(let er of(of(ee,(ee,et)=>$[ee]=et),et))delete $[er]}clone(){return new lj(lO(this.value))}}function lB($){let ee=[];return of($.fields,($,et)=>{let er=new sf([$]);if(lA(et)){let $=lB(et.mapValue).fields;if(0===$.length)ee.push(er);else for(let et of $)ee.push(er.child(et))}else ee.push(er)}),new o_(ee)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor($,ee,et,er,en,ei,es){this.key=$,this.documentType=ee,this.version=et,this.readTime=er,this.createTime=en,this.data=ei,this.documentState=es}static newInvalidDocument($){return new lF($,0,ss.min(),ss.min(),ss.min(),lj.empty(),0)}static newFoundDocument($,ee,et,er){return new lF($,1,ee,ss.min(),et,er,0)}static newNoDocument($,ee){return new lF($,2,ee,ss.min(),ss.min(),lj.empty(),0)}static newUnknownDocument($,ee){return new lF($,3,ee,ss.min(),ss.min(),lj.empty(),2)}convertToFoundDocument($,ee){return this.createTime.isEqual(ss.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=$),this.version=$,this.documentType=1,this.data=ee,this.documentState=0,this}convertToNoDocument($){return this.version=$,this.documentType=2,this.data=lj.empty(),this.documentState=0,this}convertToUnknownDocument($){return this.version=$,this.documentType=3,this.data=lj.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ss.min(),this}setReadTime($){return this.readTime=$,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual($){return $ instanceof lF&&this.key.isEqual($.key)&&this.version.isEqual($.version)&&this.documentType===$.documentType&&this.documentState===$.documentState&&this.data.isEqual($.data)}mutableCopy(){return new lF(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function lV($,ee,et){let er=ee.data.field($),en=et.data.field($);return null!==er&&null!==en?o8(er,en):iG()}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor($,ee){this.position=$,this.inclusive=ee}}function lz($,ee,et){let er=0;for(let en=0;en<$.position.length;en++){let ei=ee[en],es=$.position[en];if(er=ei.field.isKeyField()?sp.comparator(sp.fromName(es.referenceValue),et.key):o8(es,et.data.field(ei.field)),"desc"===ei.dir&&(er*=-1),0!==er)break}return er}function lq($,ee,et){let er=lz($,ee,et);return $.inclusive?er>=0:er>0}function lH($,ee,et){let er=lz($,ee,et);return $.inclusive?er<=0:er<0}function l$($,ee){if(null===$)return null===ee;if(null===ee||$.inclusive!==ee.inclusive||$.position.length!==ee.position.length)return!1;for(let et=0;et<$.position.length;et++)if(!o1($.position[et],ee.position[et]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG{constructor($,ee="asc"){this.field=$,this.dir=ee}}function lW($){return $.field.canonicalString()+$.dir}function lK($){return`${$.field.canonicalString()} (${$.dir})`}function lQ($,ee){return $.dir===ee.dir&&$.field.isEqual(ee.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lY{}class lX extends lY{constructor($,ee,et){super(),this.field=$,this.op=ee,this.value=et}static create($,ee,et){return $.isKeyField()?"in"===ee||"not-in"===ee?this.createKeyFieldInFilter($,ee,et):new ut($,ee,et):"array-contains"===ee?new us($,et):"in"===ee?new uo($,et):"not-in"===ee?new ul($,et):"array-contains-any"===ee?new uu($,et):new lX($,ee,et)}static createKeyFieldInFilter($,ee,et){return"in"===ee?new ur($,et):new un($,et)}matches($){let ee=$.data.field(this.field);return"!="===this.op?null!==ee&&this.matchesComparison(o8(ee,this.value)):null!==ee&&o0(this.value)===o0(ee)&&this.matchesComparison(o8(ee,this.value))}matchesComparison($){switch(this.op){case"<":return $<0;case"<=":return $<=0;case"==":return 0===$;case"!=":return 0!==$;case">":return $>0;case">=":return $>=0;default:return iG()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lJ extends lY{constructor($,ee){super(),this.filters=$,this.op=ee,this.memoizedFlattenedFilters=null}static create($,ee){return new lJ($,ee)}matches($){return lZ(this)?void 0===this.filters.find(ee=>!ee.matches($)):void 0!==this.filters.find(ee=>ee.matches($))}getFlattenedFilters(){return null!==this.memoizedFlattenedFilters||(this.memoizedFlattenedFilters=this.filters.reduce(($,ee)=>$.concat(ee.getFlattenedFilters()),[])),this.memoizedFlattenedFilters}getFilters(){return Object.assign([],this.filters)}}function lZ($){return"and"===$.op}function l0($){return"or"===$.op}function l1($){return l2($)&&lZ($)}function l2($){for(let ee of $.filters)if(ee instanceof lJ)return!1;return!0}function l4($){if($ instanceof lX)return $.field.canonicalString()+$.op.toString()+lu($.value);if(l1($))return $.filters.map($=>l4($)).join(",");{let ee=$.filters.map($=>l4($)).join(",");return`${$.op}(${ee})`}}function l3($,ee){return $ instanceof lX?l6($,ee):$ instanceof lJ?l5($,ee):void iG()}function l6($,ee){return ee instanceof lX&&$.op===ee.op&&$.field.isEqual(ee.field)&&o1($.value,ee.value)}function l5($,ee){return ee instanceof lJ&&$.op===ee.op&&$.filters.length===ee.filters.length&&$.filters.reduce(($,et,er)=>$&&l3(et,ee.filters[er]),!0)}function l9($,ee){let et=$.filters.concat(ee);return lJ.create(et,$.op)}function l8($){return $ instanceof lX?ue($):$ instanceof lJ?l7($):"Filter"}function l7($){return $.op.toString()+" {"+$.getFilters().map(l8).join(" ,")+"}"}function ue($){return`${$.field.canonicalString()} ${$.op} ${lu($.value)}`}class ut extends lX{constructor($,ee,et){super($,ee,et),this.key=sp.fromName(et.referenceValue)}matches($){let ee=sp.comparator($.key,this.key);return this.matchesComparison(ee)}}class ur extends lX{constructor($,ee){super($,"in",ee),this.keys=ui("in",ee)}matches($){return this.keys.some(ee=>ee.isEqual($.key))}}class un extends lX{constructor($,ee){super($,"not-in",ee),this.keys=ui("not-in",ee)}matches($){return!this.keys.some(ee=>ee.isEqual($.key))}}function ui($,ee){var et;return((null===(et=ee.arrayValue)||void 0===et?void 0:et.values)||[]).map($=>sp.fromName($.referenceValue))}class us extends lX{constructor($,ee){super($,"array-contains",ee)}matches($){let ee=$.data.field(this.field);return lx(ee)&&o9(ee.arrayValue,this.value)}}class uo extends lX{constructor($,ee){super($,"in",ee)}matches($){let ee=$.data.field(this.field);return null!==ee&&o9(this.value.arrayValue,ee)}}class ul extends lX{constructor($,ee){super($,"not-in",ee)}matches($){if(o9(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let ee=$.data.field(this.field);return null!==ee&&!o9(this.value.arrayValue,ee)}}class uu extends lX{constructor($,ee){super($,"array-contains-any",ee)}matches($){let ee=$.data.field(this.field);return!!lx(ee)&&!!ee.arrayValue.values&&ee.arrayValue.values.some($=>o9(this.value.arrayValue,$))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor($,ee=null,et=[],er=[],en=null,ei=null,es=null){this.path=$,this.collectionGroup=ee,this.orderBy=et,this.filters=er,this.limit=en,this.startAt=ei,this.endAt=es,this.memoizedCanonicalId=null}}function uf($,ee=null,et=[],er=[],en=null,ei=null,es=null){return new uh($,ee,et,er,en,ei,es)}function up($){let ee=iK($);if(null===ee.memoizedCanonicalId){let $=ee.path.canonicalString();null!==ee.collectionGroup&&($+="|cg:"+ee.collectionGroup),$+="|f:"+ee.filters.map($=>l4($)).join(",")+"|ob:"+ee.orderBy.map($=>lW($)).join(","),oK(ee.limit)||($+="|l:"+ee.limit),ee.startAt&&($+="|lb:"+(ee.startAt.inclusive?"b:":"a:")+ee.startAt.position.map($=>lu($)).join(",")),ee.endAt&&($+="|ub:"+(ee.endAt.inclusive?"a:":"b:")+ee.endAt.position.map($=>lu($)).join(",")),ee.memoizedCanonicalId=$}return ee.memoizedCanonicalId}function ug($){let ee=$.path.canonicalString();return null!==$.collectionGroup&&(ee+=" collectionGroup="+$.collectionGroup),$.filters.length>0&&(ee+=`, filters: [${$.filters.map($=>l8($)).join(", ")}]`),oK($.limit)||(ee+=", limit: "+$.limit),$.orderBy.length>0&&(ee+=`, orderBy: [${$.orderBy.map($=>lK($)).join(", ")}]`),$.startAt&&(ee+=", startAt: "+($.startAt.inclusive?"b:":"a:")+$.startAt.position.map($=>lu($)).join(",")),$.endAt&&(ee+=", endAt: "+($.endAt.inclusive?"a:":"b:")+$.endAt.position.map($=>lu($)).join(",")),`Target(${ee})`}function um($,ee){if($.limit!==ee.limit||$.orderBy.length!==ee.orderBy.length)return!1;for(let et=0;et<$.orderBy.length;et++)if(!lQ($.orderBy[et],ee.orderBy[et]))return!1;if($.filters.length!==ee.filters.length)return!1;for(let et=0;et<$.filters.length;et++)if(!l3($.filters[et],ee.filters[et]))return!1;return!!($.collectionGroup===ee.collectionGroup&&$.path.isEqual(ee.path)&&l$($.startAt,ee.startAt))&&l$($.endAt,ee.endAt)}function uy($){return sp.isDocumentKey($.path)&&null===$.collectionGroup&&0===$.filters.length}function uv($,ee){return $.filters.filter($=>$ instanceof lX&&$.field.isEqual(ee))}function uS($,ee){let et=sv(ee);if(void 0===et)return null;for(let ee of uv($,et.fieldPath))switch(ee.op){case"array-contains-any":return ee.value.arrayValue.values||[];case"array-contains":return[ee.value]}return null}function uT($,ee){let et=new Map;for(let er of sS(ee))for(let ee of uv($,er.fieldPath))switch(ee.op){case"==":case"in":et.set(er.fieldPath.canonicalString(),ee.value);break;case"not-in":case"!=":return et.set(er.fieldPath.canonicalString(),ee.value),Array.from(et.values())}return null}function uw($,ee){let et=[],er=!0;for(let en of sS(ee)){let ee=0===en.kind?uC($,en.fieldPath,$.startAt):u_($,en.fieldPath,$.startAt);et.push(ee.value),er&&(er=ee.inclusive)}return new lU(et,er)}function uE($,ee){let et=[],er=!0;for(let en of sS(ee)){let ee=0===en.kind?u_($,en.fieldPath,$.endAt):uC($,en.fieldPath,$.endAt);et.push(ee.value),er&&(er=ee.inclusive)}return new lU(et,er)}function uC($,ee,et){let er=oZ,en=!0;for(let et of uv($,ee)){let $=oZ,ee=!0;switch(et.op){case"<":case"<=":$=lN(et.value);break;case"==":case"in":case">=":$=et.value;break;case">":$=et.value,ee=!1;break;case"!=":case"not-in":$=oZ}0>lM({value:er,inclusive:en},{value:$,inclusive:ee})&&(er=$,en=ee)}if(null!==et){for(let ei=0;ei<$.orderBy.length;++ei)if($.orderBy[ei].field.isEqual(ee)){let $=et.position[ei];0>lM({value:er,inclusive:en},{value:$,inclusive:et.inclusive})&&(er=$,en=et.inclusive);break}}return{value:er,inclusive:en}}function u_($,ee,et){let er=oJ,en=!0;for(let et of uv($,ee)){let $=oJ,ee=!0;switch(et.op){case">=":case">":$=lk(et.value),ee=!1;break;case"==":case"in":case"<=":$=et.value;break;case"<":$=et.value,ee=!1;break;case"!=":case"not-in":$=oJ}lL({value:er,inclusive:en},{value:$,inclusive:ee})>0&&(er=$,en=ee)}if(null!==et){for(let ei=0;ei<$.orderBy.length;++ei)if($.orderBy[ei].field.isEqual(ee)){let $=et.position[ei];lL({value:er,inclusive:en},{value:$,inclusive:et.inclusive})>0&&(er=$,en=et.inclusive);break}}return{value:er,inclusive:en}}function uR($){let ee=new oT(sf.comparator),et=!1;for(let er of $.filters)for(let $ of er.getFlattenedFilters())$.field.isKeyField()||("array-contains"===$.op||"array-contains-any"===$.op?et=!0:ee=ee.add($.field));for(let et of $.orderBy)et.field.isKeyField()||(ee=ee.add(et.field));return ee.size+(et?1:0)}function ux($){return null!==$.limit}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor($,ee=null,et=[],er=[],en=null,ei="F",es=null,eo=null){this.path=$,this.collectionGroup=ee,this.explicitOrderBy=et,this.filters=er,this.limit=en,this.limitType=ei,this.startAt=es,this.endAt=eo,this.memoizedNormalizedOrderBy=null,this.memoizedTarget=null,this.memoizedAggregateTarget=null,this.startAt,this.endAt}}function uP($,ee,et,er,en,ei,es,eo){return new uI($,ee,et,er,en,ei,es,eo)}function uA($){return new uI($)}function uO($,ee){return new uI(ee,null,$.explicitOrderBy.slice(),$.filters.slice(),$.limit,$.limitType,$.startAt,$.endAt)}function uD($){return 0===$.filters.length&&null===$.limit&&null==$.startAt&&null==$.endAt&&(0===$.explicitOrderBy.length||1===$.explicitOrderBy.length&&$.explicitOrderBy[0].field.isKeyField())}function uN($){let ee=new oT(sf.comparator);return $.filters.forEach($=>{$.getFlattenedFilters().forEach($=>{$.isInequality()&&(ee=ee.add($.field))})}),ee}function uk($){return sp.isDocumentKey($.path)&&null===$.collectionGroup&&0===$.filters.length}function uM($){return null!==$.collectionGroup}function uL($){let ee=iK($);if(null===ee.memoizedNormalizedOrderBy){ee.memoizedNormalizedOrderBy=[];let $=new Set;for(let et of ee.explicitOrderBy)ee.memoizedNormalizedOrderBy.push(et),$.add(et.field.canonicalString());let et=ee.explicitOrderBy.length>0?ee.explicitOrderBy[ee.explicitOrderBy.length-1].dir:"asc";uN(ee).forEach(er=>{$.has(er.canonicalString())||er.isKeyField()||ee.memoizedNormalizedOrderBy.push(new lG(er,et))}),$.has(sf.keyField().canonicalString())||ee.memoizedNormalizedOrderBy.push(new lG(sf.keyField(),et))}return ee.memoizedNormalizedOrderBy}function uj($){let ee=iK($);return ee.memoizedTarget||(ee.memoizedTarget=uF(ee,uL($))),ee.memoizedTarget}function uB($){let ee=iK($);return ee.memoizedAggregateTarget||(ee.memoizedAggregateTarget=uF(ee,$.explicitOrderBy)),ee.memoizedAggregateTarget}function uF($,ee){if("F"===$.limitType)return uf($.path,$.collectionGroup,ee,$.filters,$.limit,$.startAt,$.endAt);{ee=ee.map($=>{let ee="desc"===$.dir?"asc":"desc";return new lG($.field,ee)});let et=$.endAt?new lU($.endAt.position,$.endAt.inclusive):null,er=$.startAt?new lU($.startAt.position,$.startAt.inclusive):null;return uf($.path,$.collectionGroup,ee,$.filters,$.limit,et,er)}}function uV($,ee){let et=$.filters.concat([ee]);return new uI($.path,$.collectionGroup,$.explicitOrderBy.slice(),et,$.limit,$.limitType,$.startAt,$.endAt)}function uU($,ee){let et=$.explicitOrderBy.concat([ee]);return new uI($.path,$.collectionGroup,et,$.filters.slice(),$.limit,$.limitType,$.startAt,$.endAt)}function uz($,ee,et){return new uI($.path,$.collectionGroup,$.explicitOrderBy.slice(),$.filters.slice(),ee,et,$.startAt,$.endAt)}function uq($,ee){return new uI($.path,$.collectionGroup,$.explicitOrderBy.slice(),$.filters.slice(),$.limit,$.limitType,ee,$.endAt)}function uH($,ee){return new uI($.path,$.collectionGroup,$.explicitOrderBy.slice(),$.filters.slice(),$.limit,$.limitType,$.startAt,ee)}function u$($,ee){return um(uj($),uj(ee))&&$.limitType===ee.limitType}function uG($){return`${up(uj($))}|lt:${$.limitType}`}function uW($){return`Query(target=${ug(uj($))}; limitType=${$.limitType})`}function uK($,ee){return ee.isFoundDocument()&&uQ($,ee)&&uY($,ee)&&uX($,ee)&&uJ($,ee)}function uQ($,ee){let et=ee.key.path;return null!==$.collectionGroup?ee.key.hasCollectionId($.collectionGroup)&&$.path.isPrefixOf(et):sp.isDocumentKey($.path)?$.path.isEqual(et):$.path.isImmediateParentOf(et)}function uY($,ee){for(let et of uL($))if(!et.field.isKeyField()&&null===ee.data.field(et.field))return!1;return!0}function uX($,ee){for(let et of $.filters)if(!et.matches(ee))return!1;return!0}function uJ($,ee){return(!$.startAt||!!lH($.startAt,uL($),ee))&&(!$.endAt||!!lq($.endAt,uL($),ee))}function uZ($){return $.collectionGroup||($.path.length%2==1?$.path.lastSegment():$.path.get($.path.length-2))}function u0($){return(ee,et)=>{let er=!1;for(let en of uL($)){let $=u1(en,ee,et);if(0!==$)return $;er=er||en.field.isKeyField()}return 0}}function u1($,ee,et){let er=$.field.isKeyField()?sp.comparator(ee.key,et.key):lV($.field,ee,et);switch($.dir){case"asc":return er;case"desc":return -1*er;default:return iG()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor($,ee){this.mapKeyFn=$,this.equalsFn=ee,this.inner={},this.innerSize=0}get($){let ee=this.mapKeyFn($),et=this.inner[ee];if(void 0!==et){for(let[ee,er]of et)if(this.equalsFn(ee,$))return er}}has($){return void 0!==this.get($)}set($,ee){let et=this.mapKeyFn($),er=this.inner[et];if(void 0===er){this.inner[et]=[[$,ee]],this.innerSize++;return}for(let et=0;et<er.length;et++)if(this.equalsFn(er[et][0],$)){er[et]=[$,ee];return}er.push([$,ee]),this.innerSize++}delete($){let ee=this.mapKeyFn($),et=this.inner[ee];if(void 0===et)return!1;for(let er=0;er<et.length;er++)if(this.equalsFn(et[er][0],$))return 1===et.length?delete this.inner[ee]:et.splice(er,1),this.innerSize--,!0;return!1}forEach($){of(this.inner,(ee,et)=>{for(let[ee,er]of et)$(ee,er)})}isEmpty(){return og(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u4=new om(sp.comparator);function u3(){return u4}let u6=new om(sp.comparator);function u5(...$){let ee=u6;for(let et of $)ee=ee.insert(et.key,et);return ee}function u9(){return ct()}function u8($){let ee=u6;return $.forEach(($,et)=>ee=ee.insert($,et.overlayedDocument)),ee}function u7(){return ct()}function ce(){return ct()}function ct(){return new u2($=>$.toString(),($,ee)=>$.isEqual(ee))}let cr=new om(sp.comparator);function cn(){return cr}let ci=new oT(sp.comparator);function cs(...$){let ee=ci;for(let et of $)ee=ee.add(et);return ee}let co=new oT(i7);function cl(){return co}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu($,ee){if($.useProto3Json){if(isNaN(ee))return{doubleValue:"NaN"};if(ee===1/0)return{doubleValue:"Infinity"};if(ee===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oQ(ee)?"-0":ee}}function ch($){return{integerValue:""+$}}function cf($,ee){return oY(ee)?ch(ee):cu($,ee)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this._=void 0}}function cm($,ee,et){return $ instanceof cT?oV(et,ee):$ instanceof cw?cE($,ee):$ instanceof cC?c_($,ee):cx($,ee)}function cy($,ee,et){return $ instanceof cw?cE($,ee):$ instanceof cC?c_($,ee):et}function cv($,ee){return $ instanceof cR?lR(ee)?ee:{integerValue:0}:null}function cS($,ee){return $ instanceof cw&&ee instanceof cw||$ instanceof cC&&ee instanceof cC?se($.elements,ee.elements,o1):$ instanceof cR&&ee instanceof cR?o1($.operand,ee.operand):$ instanceof cT&&ee instanceof cT}class cT extends cp{}class cw extends cp{constructor($){super(),this.elements=$}}function cE($,ee){let et=cP(ee);for(let ee of $.elements)et.some($=>o1($,ee))||et.push(ee);return{arrayValue:{values:et}}}class cC extends cp{constructor($){super(),this.elements=$}}function c_($,ee){let et=cP(ee);for(let ee of $.elements)et=et.filter($=>!o1($,ee));return{arrayValue:{values:et}}}class cR extends cp{constructor($,ee){super(),this.serializer=$,this.operand=ee}}function cx($,ee){let et=cv($,ee),er=cI(et)+cI($.operand);return lC(et)&&lC($.operand)?ch(er):cu($.serializer,er)}function cI($){return oN($.integerValue||$.doubleValue)}function cP($){return lx($)&&$.arrayValue.values?$.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor($,ee){this.field=$,this.transform=ee}}function cO($,ee){return $.field.isEqual(ee.field)&&cS($.transform,ee.transform)}function cD($,ee){return void 0===$&&void 0===ee||!!$&&!!ee&&se($,ee,($,ee)=>cO($,ee))}class cN{constructor($,ee){this.version=$,this.transformResults=ee}}class ck{constructor($,ee){this.updateTime=$,this.exists=ee}static none(){return new ck}static exists($){return new ck(void 0,$)}static updateTime($){return new ck($)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual($){return this.exists===$.exists&&(this.updateTime?!!$.updateTime&&this.updateTime.isEqual($.updateTime):!$.updateTime)}}function cM($,ee){return void 0!==$.updateTime?ee.isFoundDocument()&&ee.version.isEqual($.updateTime):void 0===$.exists||$.exists===ee.isFoundDocument()}class cL{}function cj($,ee){if(!$.hasLocalMutations||ee&&0===ee.fields.length)return null;if(null===ee)return $.isNoDocument()?new cX($.key,ck.none()):new cz($.key,$.data,ck.none());{let et=$.data,er=lj.empty(),en=new oT(sf.comparator);for(let $ of ee.fields)if(!en.has($)){let ee=et.field($);null===ee&&$.length>1&&($=$.popLast(),ee=et.field($)),null===ee?er.delete($):er.set($,ee),en=en.add($)}return new c$($.key,er,new o_(en.toArray()),ck.none())}}function cB($,ee,et){$ instanceof cz?cq($,ee,et):$ instanceof c$?cG($,ee,et):cJ($,ee,et)}function cF($,ee,et,er){return $ instanceof cz?cH($,ee,et,er):$ instanceof c$?cW($,ee,et,er):cZ($,ee,et)}function cV($,ee){let et=null;for(let er of $.fieldTransforms){let $=ee.data.field(er.field),en=cv(er.transform,$||null);null!=en&&(null===et&&(et=lj.empty()),et.set(er.field,en))}return et||null}function cU($,ee){return!!($.type===ee.type&&$.key.isEqual(ee.key)&&$.precondition.isEqual(ee.precondition)&&cD($.fieldTransforms,ee.fieldTransforms))&&(0===$.type?$.value.isEqual(ee.value):1!==$.type||$.data.isEqual(ee.data)&&$.fieldMask.isEqual(ee.fieldMask))}class cz extends cL{constructor($,ee,et,er=[]){super(),this.key=$,this.value=ee,this.precondition=et,this.fieldTransforms=er,this.type=0}getFieldMask(){return null}}function cq($,ee,et){let er=$.value.clone(),en=cQ($.fieldTransforms,ee,et.transformResults);er.setAll(en),ee.convertToFoundDocument(et.version,er).setHasCommittedMutations()}function cH($,ee,et,er){if(!cM($.precondition,ee))return et;let en=$.value.clone(),ei=cY($.fieldTransforms,er,ee);return en.setAll(ei),ee.convertToFoundDocument(ee.version,en).setHasLocalMutations(),null}class c$ extends cL{constructor($,ee,et,er,en=[]){super(),this.key=$,this.data=ee,this.fieldMask=et,this.precondition=er,this.fieldTransforms=en,this.type=1}getFieldMask(){return this.fieldMask}}function cG($,ee,et){if(!cM($.precondition,ee)){ee.convertToUnknownDocument(et.version);return}let er=cQ($.fieldTransforms,ee,et.transformResults),en=ee.data;en.setAll(cK($)),en.setAll(er),ee.convertToFoundDocument(et.version,en).setHasCommittedMutations()}function cW($,ee,et,er){if(!cM($.precondition,ee))return et;let en=cY($.fieldTransforms,er,ee),ei=ee.data;return(ei.setAll(cK($)),ei.setAll(en),ee.convertToFoundDocument(ee.version,ei).setHasLocalMutations(),null===et)?null:et.unionWith($.fieldMask.fields).unionWith($.fieldTransforms.map($=>$.field))}function cK($){let ee=new Map;return $.fieldMask.fields.forEach(et=>{if(!et.isEmpty()){let er=$.data.field(et);ee.set(et,er)}}),ee}function cQ($,ee,et){let er=new Map;iW($.length===et.length);for(let en=0;en<et.length;en++){let ei=$[en],es=ei.transform,eo=ee.data.field(ei.field);er.set(ei.field,cy(es,eo,et[en]))}return er}function cY($,ee,et){let er=new Map;for(let en of $){let $=en.transform,ei=et.data.field(en.field);er.set(en.field,cm($,ei,ee))}return er}class cX extends cL{constructor($,ee){super(),this.key=$,this.precondition=ee,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}function cJ($,ee,et){ee.convertToNoDocument(et.version).setHasCommittedMutations()}function cZ($,ee,et){return cM($.precondition,ee)?(ee.convertToNoDocument(ee.version).setHasLocalMutations(),null):et}class c0 extends null{constructor($,ee){super(),this.key=$,this.precondition=ee,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor($,ee,et,er){this.batchId=$,this.localWriteTime=ee,this.baseMutations=et,this.mutations=er}applyToRemoteDocument($,ee){let et=ee.mutationResults;for(let ee=0;ee<this.mutations.length;ee++){let er=this.mutations[ee];er.key.isEqual($.key)&&cB(er,$,et[ee])}}applyToLocalView($,ee){for(let et of this.baseMutations)et.key.isEqual($.key)&&(ee=cF(et,$,ee,this.localWriteTime));for(let et of this.mutations)et.key.isEqual($.key)&&(ee=cF(et,$,ee,this.localWriteTime));return ee}applyToLocalDocumentSet($,ee){let et=ce();return this.mutations.forEach(er=>{let en=$.get(er.key),ei=en.overlayedDocument,es=this.applyToLocalView(ei,en.mutatedFields),eo=cj(ei,es=ee.has(er.key)?null:es);null!==eo&&et.set(er.key,eo),ei.isValidDocument()||ei.convertToNoDocument(ss.min())}),et}keys(){return this.mutations.reduce(($,ee)=>$.add(ee.key),cs())}isEqual($){return this.batchId===$.batchId&&se(this.mutations,$.mutations,($,ee)=>cU($,ee))&&se(this.baseMutations,$.baseMutations,($,ee)=>cU($,ee))}}class c6{constructor($,ee,et,er){this.batch=$,this.commitVersion=ee,this.mutationResults=et,this.docVersions=er}static from($,ee,et){iW($.mutations.length===et.length);let er=cn(),en=$.mutations;for(let $=0;$<en.length;$++)er=er.insert(en[$].key,et[$].version);return new c6($,ee,et,er)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor($,ee){this.largestBatchId=$,this.mutation=ee}getKey(){return this.mutation.key}isEqual($){return null!==$&&this.mutation===$.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor($,ee){this.count=$,this.unchangedNames=ee}}function c8($){switch($){case iQ.OK:return iG();case iQ.CANCELLED:case iQ.UNKNOWN:case iQ.DEADLINE_EXCEEDED:case iQ.RESOURCE_EXHAUSTED:case iQ.INTERNAL:case iQ.UNAVAILABLE:case iQ.UNAUTHENTICATED:return!1;case iQ.INVALID_ARGUMENT:case iQ.NOT_FOUND:case iQ.ALREADY_EXISTS:case iQ.PERMISSION_DENIED:case iQ.FAILED_PRECONDITION:case iQ.ABORTED:case iQ.OUT_OF_RANGE:case iQ.UNIMPLEMENTED:case iQ.DATA_LOSS:return!0;default:return iG()}}function c7($){return c8($)&&$!==iQ.ABORTED}function de($){if(void 0===$)return iq("GRPC error has no .code"),iQ.UNKNOWN;switch($){case es.OK:return iQ.OK;case es.CANCELLED:return iQ.CANCELLED;case es.UNKNOWN:return iQ.UNKNOWN;case es.DEADLINE_EXCEEDED:return iQ.DEADLINE_EXCEEDED;case es.RESOURCE_EXHAUSTED:return iQ.RESOURCE_EXHAUSTED;case es.INTERNAL:return iQ.INTERNAL;case es.UNAVAILABLE:return iQ.UNAVAILABLE;case es.UNAUTHENTICATED:return iQ.UNAUTHENTICATED;case es.INVALID_ARGUMENT:return iQ.INVALID_ARGUMENT;case es.NOT_FOUND:return iQ.NOT_FOUND;case es.ALREADY_EXISTS:return iQ.ALREADY_EXISTS;case es.PERMISSION_DENIED:return iQ.PERMISSION_DENIED;case es.FAILED_PRECONDITION:return iQ.FAILED_PRECONDITION;case es.ABORTED:return iQ.ABORTED;case es.OUT_OF_RANGE:return iQ.OUT_OF_RANGE;case es.UNIMPLEMENTED:return iQ.UNIMPLEMENTED;case es.DATA_LOSS:return iQ.DATA_LOSS;default:return iG()}}!function($){$[$.OK=0]="OK",$[$.CANCELLED=1]="CANCELLED",$[$.UNKNOWN=2]="UNKNOWN",$[$.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$[$.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$[$.NOT_FOUND=5]="NOT_FOUND",$[$.ALREADY_EXISTS=6]="ALREADY_EXISTS",$[$.PERMISSION_DENIED=7]="PERMISSION_DENIED",$[$.UNAUTHENTICATED=16]="UNAUTHENTICATED",$[$.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$[$.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$[$.ABORTED=10]="ABORTED",$[$.OUT_OF_RANGE=11]="OUT_OF_RANGE",$[$.UNIMPLEMENTED=12]="UNIMPLEMENTED",$[$.INTERNAL=13]="INTERNAL",$[$.UNAVAILABLE=14]="UNAVAILABLE",$[$.DATA_LOSS=15]="DATA_LOSS"}(es||(es={}));/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dr=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return new ep.TextEncoder}function di(){return new TextDecoder("utf-8")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ds=new iO([4294967295,4294967295],0);function dl($){let ee=dn().encode($),et=new iA;return et.update(ee),new Uint8Array(et.digest())}function du($){let ee=new DataView($.buffer),et=ee.getUint32(0,!0),er=ee.getUint32(4,!0),en=ee.getUint32(8,!0),ei=ee.getUint32(12,!0);return[new iO([et,er],0),new iO([en,ei],0)]}class dh{constructor($,ee,et){if(this.bitmap=$,this.padding=ee,this.hashCount=et,ee<0||ee>=8)throw new df(`Invalid padding: ${ee}`);if(et<0||$.length>0&&0===this.hashCount)throw new df(`Invalid hash count: ${et}`);if(0===$.length&&0!==ee)throw new df(`Invalid padding when bitmap length is 0: ${ee}`);this.bitCount=8*$.length-ee,this.bitCountInInteger=iO.fromNumber(this.bitCount)}getBitIndex($,ee,et){let er=$.add(ee.multiply(iO.fromNumber(et)));return 1===er.compare(ds)&&(er=new iO([er.getBits(0),er.getBits(1)],0)),er.modulo(this.bitCountInInteger).toNumber()}isBitSet($){return(this.bitmap[Math.floor($/8)]&1<<$%8)!=0}mightContain($){if(0===this.bitCount)return!1;let[ee,et]=du(dl($));for(let $=0;$<this.hashCount;$++){let er=this.getBitIndex(ee,et,$);if(!this.isBitSet(er))return!1}return!0}static create($,ee,et){let er=$%8==0?0:8-$%8,en=new dh(new Uint8Array(Math.ceil($/8)),er,ee);return et.forEach($=>en.insert($)),en}insert($){if(0===this.bitCount)return;let[ee,et]=du(dl($));for(let $=0;$<this.hashCount;$++){let er=this.getBitIndex(ee,et,$);this.setBit(er)}}setBit($){let ee=Math.floor($/8),et=$%8;this.bitmap[ee]|=1<<et}}class df extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor($,ee,et,er,en){this.snapshotVersion=$,this.targetChanges=ee,this.targetMismatches=et,this.documentUpdates=er,this.resolvedLimboDocuments=en}static createSynthesizedRemoteEventForCurrentChange($,ee,et){let er=new Map;return er.set($,dg.createSynthesizedTargetChangeForCurrentChange($,ee,et)),new dp(ss.min(),er,new om(i7),u3(),cs())}}class dg{constructor($,ee,et,er,en){this.resumeToken=$,this.current=ee,this.addedDocuments=et,this.modifiedDocuments=er,this.removedDocuments=en}static createSynthesizedTargetChangeForCurrentChange($,ee,et){return new dg(et,ee,cs(),cs(),cs())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor($,ee,et,er){this.updatedTargetIds=$,this.removedTargetIds=ee,this.key=et,this.newDoc=er}}class dy{constructor($,ee){this.targetId=$,this.existenceFilter=ee}}class dS{constructor($,ee,et=oI.EMPTY_BYTE_STRING,er=null){this.state=$,this.targetIds=ee,this.resumeToken=et,this.cause=er}}class dT{constructor(){this.pendingResponses=0,this.documentChanges=d_(),this._resumeToken=oI.EMPTY_BYTE_STRING,this._current=!1,this._hasPendingChanges=!0}get current(){return this._current}get resumeToken(){return this._resumeToken}get isPending(){return 0!==this.pendingResponses}get hasPendingChanges(){return this._hasPendingChanges}updateResumeToken($){$.approximateByteSize()>0&&(this._hasPendingChanges=!0,this._resumeToken=$)}toTargetChange(){let $=cs(),ee=cs(),et=cs();return this.documentChanges.forEach((er,en)=>{switch(en){case 0:$=$.add(er);break;case 2:ee=ee.add(er);break;case 1:et=et.add(er);break;default:iG()}}),new dg(this._resumeToken,this._current,$,ee,et)}clearPendingChanges(){this._hasPendingChanges=!1,this.documentChanges=d_()}addDocumentChange($,ee){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert($,ee)}removeDocumentChange($){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove($)}recordPendingTargetRequest(){this.pendingResponses+=1}recordTargetResponse(){this.pendingResponses-=1,iW(this.pendingResponses>=0)}markCurrent(){this._hasPendingChanges=!0,this._current=!0}}let dw="WatchChangeAggregator";class dE{constructor($){this.metadataProvider=$,this.targetStates=new Map,this.pendingDocumentUpdates=u3(),this.pendingDocumentTargetMapping=dC(),this.pendingTargetResets=new om(i7)}handleDocumentChange($){for(let ee of $.updatedTargetIds)$.newDoc&&$.newDoc.isFoundDocument()?this.addDocumentToTarget(ee,$.newDoc):this.removeDocumentFromTarget(ee,$.key,$.newDoc);for(let ee of $.removedTargetIds)this.removeDocumentFromTarget(ee,$.key,$.newDoc)}handleTargetChange($){this.forEachTarget($,ee=>{let et=this.ensureTargetState(ee);switch($.state){case 0:this.isActiveTarget(ee)&&et.updateResumeToken($.resumeToken);break;case 1:et.recordTargetResponse(),et.isPending||et.clearPendingChanges(),et.updateResumeToken($.resumeToken);break;case 2:et.recordTargetResponse(),et.isPending||this.removeTarget(ee);break;case 3:this.isActiveTarget(ee)&&(et.markCurrent(),et.updateResumeToken($.resumeToken));break;case 4:this.isActiveTarget(ee)&&(this.resetTarget(ee),et.updateResumeToken($.resumeToken));break;default:iG()}})}forEachTarget($,ee){$.targetIds.length>0?$.targetIds.forEach(ee):this.targetStates.forEach(($,et)=>{this.isActiveTarget(et)&&ee(et)})}handleExistenceFilter($){let ee=$.targetId,et=$.existenceFilter.count,er=this.targetDataForActiveTarget(ee);if(er){let en=er.target;if(uy(en)){if(0===et){let $=new sp(en.path);this.removeDocumentFromTarget(ee,$,lF.newNoDocument($,ss.min()))}else iW(1===et)}else{let er=this.getCurrentDocumentCountForTarget(ee);if(er!==et){let et=this.parseBloomFilter($),en=et?this.applyBloomFilter(et,$,er):1;if(0!==en){this.resetTarget(ee);let $=2===en?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.pendingTargetResets=this.pendingTargetResets.insert(ee,$)}null==dr||dr.notifyOnExistenceFilterMismatch(dR(er,$.existenceFilter,this.metadataProvider.getDatabaseId(),et,en))}}}}parseBloomFilter($){let ee,et;let er=$.existenceFilter.unchangedNames;if(!er||!er.bits)return null;let{bits:{bitmap:en="",padding:ei=0},hashCount:es=0}=er;try{ee=ok(en).toUint8Array()}catch($){if($ instanceof dt)return iH("Decoding the base64 bloom filter in existence filter failed ("+$.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw $}try{et=new dh(ee,ei,es)}catch($){return $ instanceof df?iH("BloomFilter error: ",$):iH("Applying bloom filter failed: ",$),null}return 0===et.bitCount?null:et}applyBloomFilter($,ee,et){return ee.existenceFilter.count===et-this.filterRemovedDocuments($,ee.targetId)?0:2}filterRemovedDocuments($,ee){let et=this.metadataProvider.getRemoteKeysForTarget(ee),er=0;return et.forEach(et=>{let en=this.metadataProvider.getDatabaseId(),ei=`projects/${en.projectId}/databases/${en.database}/documents/${et.path.canonicalString()}`;!$.mightContain(ei)&&(this.removeDocumentFromTarget(ee,et,null),er++)}),er}createRemoteEvent($){let ee=new Map;this.targetStates.forEach((et,er)=>{let en=this.targetDataForActiveTarget(er);if(en){if(et.current&&uy(en.target)){let ee=new sp(en.target.path);null!==this.pendingDocumentUpdates.get(ee)||this.targetContainsDocument(er,ee)||this.removeDocumentFromTarget(er,ee,lF.newNoDocument(ee,$))}et.hasPendingChanges&&(ee.set(er,et.toTargetChange()),et.clearPendingChanges())}});let et=cs();this.pendingDocumentTargetMapping.forEach(($,ee)=>{let er=!0;ee.forEachWhile($=>{let ee=this.targetDataForActiveTarget($);return!ee||"TargetPurposeLimboResolution"===ee.purpose||(er=!1,!1)}),er&&(et=et.add($))}),this.pendingDocumentUpdates.forEach((ee,et)=>et.setReadTime($));let er=new dp($,ee,this.pendingTargetResets,this.pendingDocumentUpdates,et);return this.pendingDocumentUpdates=u3(),this.pendingDocumentTargetMapping=dC(),this.pendingTargetResets=new om(i7),er}addDocumentToTarget($,ee){if(!this.isActiveTarget($))return;let et=this.targetContainsDocument($,ee.key)?2:0;this.ensureTargetState($).addDocumentChange(ee.key,et),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(ee.key,ee),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(ee.key,this.ensureDocumentTargetMapping(ee.key).add($))}removeDocumentFromTarget($,ee,et){if(!this.isActiveTarget($))return;let er=this.ensureTargetState($);this.targetContainsDocument($,ee)?er.addDocumentChange(ee,1):er.removeDocumentChange(ee),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(ee,this.ensureDocumentTargetMapping(ee).delete($)),et&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(ee,et))}removeTarget($){this.targetStates.delete($)}getCurrentDocumentCountForTarget($){let ee=this.ensureTargetState($).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget($).size+ee.addedDocuments.size-ee.removedDocuments.size}recordPendingTargetRequest($){this.ensureTargetState($).recordPendingTargetRequest()}ensureTargetState($){let ee=this.targetStates.get($);return ee||(ee=new dT,this.targetStates.set($,ee)),ee}ensureDocumentTargetMapping($){let ee=this.pendingDocumentTargetMapping.get($);return ee||(ee=new oT(i7),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert($,ee)),ee}isActiveTarget($){let ee=null!==this.targetDataForActiveTarget($);return ee||iz(dw,"Detected inactive target",$),ee}targetDataForActiveTarget($){let ee=this.targetStates.get($);return ee&&ee.isPending?null:this.metadataProvider.getTargetDataForTarget($)}resetTarget($){this.targetStates.set($,new dT),this.metadataProvider.getRemoteKeysForTarget($).forEach(ee=>{this.removeDocumentFromTarget($,ee,null)})}targetContainsDocument($,ee){return this.metadataProvider.getRemoteKeysForTarget($).has(ee)}}function dC(){return new om(sp.comparator)}function d_(){return new om(sp.comparator)}function dR($,ee,et,er,en){var ei,es,eo,eu,eh,ef;let ep={localCacheCount:$,existenceFilterCount:ee.count,databaseId:et.database,projectId:et.projectId},eg=ee.unchangedNames;return eg&&(ep.bloomFilter={applied:0===en,hashCount:null!==(ei=null==eg?void 0:eg.hashCount)&&void 0!==ei?ei:0,bitmapLength:null!==(eu=null===(eo=null===(es=null==eg?void 0:eg.bits)||void 0===es?void 0:es.bitmap)||void 0===eo?void 0:eo.length)&&void 0!==eu?eu:0,padding:null!==(ef=null===(eh=null==eg?void 0:eg.bits)||void 0===eh?void 0:eh.padding)&&void 0!==ef?ef:0,mightContain:$=>{var ee;return null!==(ee=null==er?void 0:er.mightContain($))&&void 0!==ee&&ee}}),ep}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dx=(()=>{let $={};return $.asc="ASCENDING",$.desc="DESCENDING",$})(),dI=(()=>{let $={};return $["<"]="LESS_THAN",$["<="]="LESS_THAN_OR_EQUAL",$[">"]="GREATER_THAN",$[">="]="GREATER_THAN_OR_EQUAL",$["=="]="EQUAL",$["!="]="NOT_EQUAL",$["array-contains"]="ARRAY_CONTAINS",$.in="IN",$["not-in"]="NOT_IN",$["array-contains-any"]="ARRAY_CONTAINS_ANY",$})(),dP=(()=>{let $={};return $.and="AND",$.or="OR",$})();class dA{constructor($,ee){this.databaseId=$,this.useProto3Json=ee}}function dO($){return new iY(void 0===$.code?iQ.UNKNOWN:de($.code),$.message||"")}function dD($,ee){return $.useProto3Json||oK(ee)?ee:{value:ee}}function dN($){let ee;return oK(ee="object"==typeof $?$.value:$)?null:ee}function dk($,ee){if(!$.useProto3Json)return{seconds:""+ee.seconds,nanos:ee.nanoseconds};{let $=new Date(1e3*ee.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),et=("000000000"+ee.nanoseconds).slice(-9);return`${$}.${et}Z`}}function dM($){let ee=oD($);return new si(ee.seconds,ee.nanos)}function dL($,ee){return $.useProto3Json?ee.toBase64():ee.toUint8Array()}function dj($,ee){return $.useProto3Json?(iW(void 0===ee||"string"==typeof ee),oI.fromBase64String(ee||"")):(iW(void 0===ee||ee instanceof Uint8Array),oI.fromUint8Array(ee||new Uint8Array))}function dB($,ee){return dk($,ee.toTimestamp())}function dF($){return iW(!!$),ss.fromTimestamp(dM($))}function dV($,ee){return dU($,ee).canonicalString()}function dU($,ee){let et=dK($).child("documents");return void 0===ee?et:et.child(ee)}function dz($){let ee=su.fromString($);return iW(hG(ee)),ee}function dq($,ee){return dV($.databaseId,ee.path)}function dH($,ee){let et=dz(ee);if(et.get(1)!==$.databaseId.projectId)throw new iY(iQ.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+et.get(1)+" vs "+$.databaseId.projectId);if(et.get(3)!==$.databaseId.database)throw new iY(iQ.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+et.get(3)+" vs "+$.databaseId.database);return new sp(dQ(et))}function d$($,ee){return dV($.databaseId,ee)}function dG($){let ee=dz($);return 4===ee.length?su.emptyPath():dQ(ee)}function dW($){return new su(["projects",$.databaseId.projectId,"databases",$.databaseId.database]).canonicalString()}function dK($){return new su(["projects",$.projectId,"databases",$.database])}function dQ($){return iW($.length>4&&"documents"===$.get(4)),$.popFirst(5)}function dY($,ee,et){return{name:dq($,ee),fields:et.value.mapValue.fields}}function dX($,ee){return{name:dq($,ee.key),fields:ee.data.value.mapValue.fields,updateTime:dk($,ee.version.toTimestamp()),createTime:dk($,ee.createTime.toTimestamp())}}function dJ($,ee,et){let er=dH($,ee.name),en=dF(ee.updateTime),ei=ee.createTime?dF(ee.createTime):ss.min(),es=new lj({mapValue:{fields:ee.fields}}),eo=lF.newFoundDocument(er,en,ei,es);return et&&eo.setHasCommittedMutations(),et?eo.setHasCommittedMutations():eo}function dZ($,ee){iW(!!ee.found),ee.found.name,ee.found.updateTime;let et=dH($,ee.found.name),er=dF(ee.found.updateTime),en=ee.found.createTime?dF(ee.found.createTime):ss.min(),ei=new lj({mapValue:{fields:ee.found.fields}});return lF.newFoundDocument(et,er,en,ei)}function d0($,ee){iW(!!ee.missing),iW(!!ee.readTime);let et=dH($,ee.missing),er=dF(ee.readTime);return lF.newNoDocument(et,er)}function d4($,ee){return"found"in ee?dZ($,ee):"missing"in ee?d0($,ee):iG()}function d3($,ee){let et;if("targetChange"in ee){ee.targetChange;let er=d6(ee.targetChange.targetChangeType||"NO_CHANGE"),en=ee.targetChange.targetIds||[],ei=dj($,ee.targetChange.resumeToken),es=ee.targetChange.cause;et=new dS(er,en,ei,es&&dO(es)||null)}else if("documentChange"in ee){ee.documentChange;let er=ee.documentChange;er.document,er.document.name,er.document.updateTime;let en=dH($,er.document.name),ei=dF(er.document.updateTime),es=er.document.createTime?dF(er.document.createTime):ss.min(),eo=new lj({mapValue:{fields:er.document.fields}}),eu=lF.newFoundDocument(en,ei,es,eo);et=new dm(er.targetIds||[],er.removedTargetIds||[],eu.key,eu)}else if("documentDelete"in ee){ee.documentDelete;let er=ee.documentDelete;er.document;let en=dH($,er.document),ei=er.readTime?dF(er.readTime):ss.min(),es=lF.newNoDocument(en,ei);et=new dm([],er.removedTargetIds||[],es.key,es)}else if("documentRemove"in ee){ee.documentRemove;let er=ee.documentRemove;er.document;let en=dH($,er.document);et=new dm([],er.removedTargetIds||[],en,null)}else{if(!("filter"in ee))return iG();ee.filter;let $=ee.filter;$.targetId;let{count:er=0,unchangedNames:en}=$,ei=new c9(er,en);et=new dy($.targetId,ei)}return et}function d6($){return"NO_CHANGE"===$?0:"ADD"===$?1:"REMOVE"===$?2:"CURRENT"===$?3:"RESET"===$?4:iG()}function d5($){if(!("targetChange"in $))return ss.min();let ee=$.targetChange;return ee.targetIds&&ee.targetIds.length||!ee.readTime?ss.min():dF(ee.readTime)}function d9($,ee){let et;if(ee instanceof cz)et={update:dY($,ee.key,ee.value)};else if(ee instanceof cX)et={delete:dq($,ee.key)};else if(ee instanceof c$)et={update:dY($,ee.key,ee.data),updateMask:hH(ee.fieldMask)};else{if(!(ee instanceof c0))return iG();et={verify:dq($,ee.key)}}return ee.fieldTransforms.length>0&&(et.updateTransforms=ee.fieldTransforms.map(ee=>hn($,ee))),ee.precondition.isNone||(et.currentDocument=d7($,ee.precondition)),et}function d8($,ee){let et=ee.currentDocument?he(ee.currentDocument):ck.none(),er=ee.updateTransforms?ee.updateTransforms.map(ee=>hs($,ee)):[];if(ee.update){ee.update.name;let en=dH($,ee.update.name),ei=new lj({mapValue:{fields:ee.update.fields}});return ee.updateMask?new c$(en,ei,h$(ee.updateMask),et,er):new cz(en,ei,et,er)}return ee.delete?new cX(dH($,ee.delete),et):ee.verify?new c0(dH($,ee.verify),et):iG()}function d7($,ee){return void 0!==ee.updateTime?{updateTime:dB($,ee.updateTime)}:void 0!==ee.exists?{exists:ee.exists}:iG()}function he($){return void 0!==$.updateTime?ck.updateTime(dF($.updateTime)):void 0!==$.exists?ck.exists($.exists):ck.none()}function ht($,ee){let et=$.updateTime?dF($.updateTime):dF(ee);return et.isEqual(ss.min())&&(et=dF(ee)),new cN(et,$.transformResults||[])}function hr($,ee){return $&&$.length>0?(iW(void 0!==ee),$.map($=>ht($,ee))):[]}function hn($,ee){let et=ee.transform;if(et instanceof cT)return{fieldPath:ee.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(et instanceof cw)return{fieldPath:ee.field.canonicalString(),appendMissingElements:{values:et.elements}};if(et instanceof cC)return{fieldPath:ee.field.canonicalString(),removeAllFromArray:{values:et.elements}};if(et instanceof cR)return{fieldPath:ee.field.canonicalString(),increment:et.operand};throw iG()}function hs($,ee){let et=null;return"setToServerValue"in ee?(iW("REQUEST_TIME"===ee.setToServerValue),et=new cT):"appendMissingElements"in ee?et=new cw(ee.appendMissingElements.values||[]):"removeAllFromArray"in ee?et=new cC(ee.removeAllFromArray.values||[]):"increment"in ee?et=new cR($,ee.increment):iG(),new cA(sf.fromServerFormat(ee.fieldPath),et)}function ho($,ee){return{documents:[d$($,ee.path)]}}function hl($){return iW(1===$.documents.length),uj(uA(dG($.documents[0])))}function hu($,ee){let et;let er={structuredQuery:{}},en=ee.path;null!==ee.collectionGroup?(et=en,er.structuredQuery.from=[{collectionId:ee.collectionGroup,allDescendants:!0}]):(et=en.popLast(),er.structuredQuery.from=[{collectionId:en.lastSegment()}]),er.parent=d$($,et);let ei=hv(ee.filters);ei&&(er.structuredQuery.where=ei);let es=hw(ee.orderBy);es&&(er.structuredQuery.orderBy=es);let eo=dD($,ee.limit);return null!==eo&&(er.structuredQuery.limit=eo),ee.startAt&&(er.structuredQuery.startAt=hC(ee.startAt)),ee.endAt&&(er.structuredQuery.endAt=h_(ee.endAt)),{queryTarget:er,parent:et}}function hh($,ee,et){let{queryTarget:er,parent:en}=hu($,ee),ei={},es=[],eo=0;return et.forEach($=>{let ee=`aggregate_${eo++}`;ei[ee]=$.alias,"count"===$.aggregateType?es.push({alias:ee,count:{}}):"avg"===$.aggregateType?es.push({alias:ee,avg:{field:hk($.fieldPath)}}):"sum"===$.aggregateType&&es.push({alias:ee,sum:{field:hk($.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:es,structuredQuery:er.structuredQuery},parent:er.parent},aliasMap:ei,parent:en}}function hf($){let ee=dG($.parent),et=$.structuredQuery,er=et.from?et.from.length:0,en=null;if(er>0){iW(1===er);let $=et.from[0];$.allDescendants?en=$.collectionId:ee=ee.child($.collectionId)}let ei=[];et.where&&(ei=hS(et.where));let es=[];et.orderBy&&(es=hE(et.orderBy));let eo=null;et.limit&&(eo=dN(et.limit));let eu=null;et.startAt&&(eu=hR(et.startAt));let eh=null;return et.endAt&&(eh=hx(et.endAt)),uP(ee,en,es,ei,eo,"F",eu,eh)}function hp($){return uj(hf($))}function hg($,ee){let et=hm(ee.purpose);return null==et?null:{"goog-listen-tags":et}}function hm($){switch($){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return iG()}}function hy($,ee){let et;let er=ee.target;if((et=uy(er)?{documents:ho($,er)}:{query:hu($,er).queryTarget}).targetId=ee.targetId,ee.resumeToken.approximateByteSize()>0){et.resumeToken=dL($,ee.resumeToken);let er=dD($,ee.expectedCount);null!==er&&(et.expectedCount=er)}else if(ee.snapshotVersion.compareTo(ss.min())>0){et.readTime=dk($,ee.snapshotVersion.toTimestamp());let er=dD($,ee.expectedCount);null!==er&&(et.expectedCount=er)}return et}function hv($){if(0!==$.length)return hB(lJ.create($,"and"))}function hS($){let ee=hT($);return ee instanceof lJ&&l1(ee)?ee.getFilters():[ee]}function hT($){return void 0!==$.unaryFilter?hU($):void 0!==$.fieldFilter?hz($):void 0!==$.compositeFilter?hq($):iG()}function hw($){if(0!==$.length)return $.map($=>hL($))}function hE($){return $.map($=>hj($))}function hC($){return{before:$.inclusive,values:$.position}}function h_($){return{before:!$.inclusive,values:$.position}}function hR($){let ee=!!$.before;return new lU($.values||[],ee)}function hx($){let ee=!$.before;return new lU($.values||[],ee)}function hI($){return dx[$]}function hP($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}function hA($){return dI[$]}function hO($){return dP[$]}function hD($){switch($){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return iG()}}function hN($){switch($){case"AND":return"and";case"OR":return"or";default:return iG()}}function hk($){return{fieldPath:$.canonicalString()}}function hM($){return sf.fromServerFormat($.fieldPath)}function hL($){return{field:hk($.field),direction:hI($.dir)}}function hj($){return new lG(hM($.field),hP($.direction))}function hB($){return $ instanceof lX?hV($):$ instanceof lJ?hF($):iG()}function hF($){let ee=$.getFilters().map($=>hB($));return 1===ee.length?ee[0]:{compositeFilter:{op:hO($.op),filters:ee}}}function hV($){if("=="===$.op){if(lP($.value))return{unaryFilter:{field:hk($.field),op:"IS_NAN"}};if(lI($.value))return{unaryFilter:{field:hk($.field),op:"IS_NULL"}}}else if("!="===$.op){if(lP($.value))return{unaryFilter:{field:hk($.field),op:"IS_NOT_NAN"}};if(lI($.value))return{unaryFilter:{field:hk($.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hk($.field),op:hA($.op),value:$.value}}}function hU($){switch($.unaryFilter.op){case"IS_NAN":let ee=hM($.unaryFilter.field);return lX.create(ee,"==",{doubleValue:NaN});case"IS_NULL":let et=hM($.unaryFilter.field);return lX.create(et,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let er=hM($.unaryFilter.field);return lX.create(er,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let en=hM($.unaryFilter.field);return lX.create(en,"!=",{nullValue:"NULL_VALUE"});default:return iG()}}function hz($){return lX.create(hM($.fieldFilter.field),hD($.fieldFilter.op),$.fieldFilter.value)}function hq($){return lJ.create($.compositeFilter.filters.map($=>hT($)),hN($.compositeFilter.op))}function hH($){let ee=[];return $.fields.forEach($=>ee.push($.canonicalString())),{fieldPaths:ee}}function h$($){return new o_(($.fieldPaths||[]).map($=>sf.fromServerFormat($)))}function hG($){return $.length>=4&&"projects"===$.get(0)&&"databases"===$.get(2)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{constructor($,ee,et,er,en=ss.min(),ei=ss.min(),es=oI.EMPTY_BYTE_STRING,eo=null){this.target=$,this.targetId=ee,this.purpose=et,this.sequenceNumber=er,this.snapshotVersion=en,this.lastLimboFreeSnapshotVersion=ei,this.resumeToken=es,this.expectedCount=eo}withSequenceNumber($){return new hW(this.target,this.targetId,this.purpose,$,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken($,ee){return new hW(this.target,this.targetId,this.purpose,this.sequenceNumber,ee,this.lastLimboFreeSnapshotVersion,$,null)}withExpectedCount($){return new hW(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,$)}withLastLimboFreeSnapshotVersion($){return new hW(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,$,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hK{constructor($){this.remoteSerializer=$}}function hQ($,ee){let et;if(ee.document)et=dJ($.remoteSerializer,ee.document,!!ee.hasCommittedMutations);else if(ee.noDocument){let $=sp.fromSegments(ee.noDocument.path),er=h0(ee.noDocument.readTime);et=lF.newNoDocument($,er),ee.hasCommittedMutations&&et.setHasCommittedMutations()}else{if(!ee.unknownDocument)return iG();let $=sp.fromSegments(ee.unknownDocument.path),er=h0(ee.unknownDocument.version);et=lF.newUnknownDocument($,er)}return ee.readTime&&et.setReadTime(hJ(ee.readTime)),et}function hY($,ee){let et=ee.key,er={prefixPath:et.getCollectionPath().popLast().toArray(),collectionGroup:et.collectionGroup,documentId:et.path.lastSegment(),readTime:hX(ee.readTime),hasCommittedMutations:ee.hasCommittedMutations};if(ee.isFoundDocument())er.document=dX($.remoteSerializer,ee);else if(ee.isNoDocument())er.noDocument={path:et.path.toArray(),readTime:hZ(ee.version)};else{if(!ee.isUnknownDocument())return iG();er.unknownDocument={path:et.path.toArray(),version:hZ(ee.version)}}return er}function hX($){let ee=$.toTimestamp();return[ee.seconds,ee.nanoseconds]}function hJ($){let ee=new si($[0],$[1]);return ss.fromTimestamp(ee)}function hZ($){let ee=$.toTimestamp();return{seconds:ee.seconds,nanoseconds:ee.nanoseconds}}function h0($){let ee=new si($.seconds,$.nanoseconds);return ss.fromTimestamp(ee)}function h1($,ee,et){let er=et.baseMutations.map(ee=>d9($.remoteSerializer,ee)),en=et.mutations.map(ee=>d9($.remoteSerializer,ee));return{userId:ee,batchId:et.batchId,localWriteTimeMs:et.localWriteTime.toMillis(),baseMutations:er,mutations:en}}function h2($,ee){let et=(ee.baseMutations||[]).map(ee=>d8($.remoteSerializer,ee));for(let $=0;$<ee.mutations.length-1;++$){let et=ee.mutations[$];if($+1<ee.mutations.length&&void 0!==ee.mutations[$+1].transform){let er=ee.mutations[$+1];et.updateTransforms=er.transform.fieldTransforms,ee.mutations.splice($+1,1),++$}}let er=ee.mutations.map(ee=>d8($.remoteSerializer,ee)),en=si.fromMillis(ee.localWriteTimeMs);return new c4(ee.batchId,en,et,er)}function h4($){let ee;let et=h0($.readTime),er=void 0!==$.lastLimboFreeSnapshotVersion?h0($.lastLimboFreeSnapshotVersion):ss.min();return new hW(ee=h6($.query)?hl($.query):hp($.query),$.targetId,"TargetPurposeListen",$.lastListenSequenceNumber,et,er,oI.fromBase64String($.resumeToken))}function h3($,ee){let et;let er=hZ(ee.snapshotVersion),en=hZ(ee.lastLimboFreeSnapshotVersion);et=uy(ee.target)?ho($.remoteSerializer,ee.target):hu($.remoteSerializer,ee.target).queryTarget;let ei=ee.resumeToken.toBase64();return{targetId:ee.targetId,canonicalId:up(ee.target),readTime:er,resumeToken:ei,lastListenSequenceNumber:ee.sequenceNumber,lastLimboFreeSnapshotVersion:en,query:et}}function h6($){return void 0!==$.documents}function h5($){return{id:$.bundleId,createTime:h0($.createTime),version:$.version}}function h9($){return{bundleId:$.id,createTime:hZ(dF($.createTime)),version:$.version}}function h8($){return{name:$.name,query:fe($.bundledQuery),readTime:h0($.readTime)}}function h7($){return{name:$.name,readTime:hZ(dF($.readTime)),bundledQuery:$.bundledQuery}}function fe($){let ee=hf({parent:$.parent,structuredQuery:$.structuredQuery});return"LAST"===$.limitType?uz(ee,ee.limit,"L"):ee}function ft($){return{name:$.name,query:fe($.bundledQuery),readTime:dF($.readTime)}}function fr($){return{id:$.id,version:$.version,createTime:dF($.createTime)}}function fi($,ee){return new c5(ee.largestBatchId,d8($.remoteSerializer,ee.overlayMutation))}function fo($,ee,et){let[er,en,ei]=fl(ee,et.mutation.key);return{userId:ee,collectionPath:en,documentId:ei,collectionGroup:et.mutation.key.getCollectionGroup(),largestBatchId:et.largestBatchId,overlayMutation:d9($.remoteSerializer,et.mutation)}}function fl($,ee){let et=ee.path.lastSegment();return[$,s4(ee.path.popLast()),et]}function fu($){return{indexId:$.indexId,collectionGroup:$.collectionGroup,fields:$.fields.map($=>[$.fieldPath.canonicalString(),$.kind])}}function fh($,ee){let et=ee?new sR(ee.sequenceNumber,new sP(h0(ee.readTime),new sp(s5(ee.documentKey)),ee.largestBatchId)):sR.empty(),er=$.fields.map(([$,ee])=>new sC(sf.fromServerFormat($),ee));return new sy($.indexId,$.collectionGroup,er,et)}function ff($,ee,et,er){return{indexId:$,uid:ee,sequenceNumber:et,readTime:hZ(er.readTime),documentKey:s4(er.documentKey.path),largestBatchId:er.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{getBundleMetadata($,ee){return fg($).get(ee).next($=>{if($)return h5($)})}saveBundleMetadata($,ee){return fg($).put(h9(ee))}getNamedQuery($,ee){return fm($).get(ee).next($=>{if($)return h8($)})}saveNamedQuery($,ee){return fm($).put(h7(ee))}}function fg($){return ou($,aF)}function fm($){return ou($,aU)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor($,ee){this.serializer=$,this.userId=ee}static forUser($,ee){return new fy($,ee.uid||"")}getOverlay($,ee){return fv($).get(fl(this.userId,ee)).next($=>$?fi(this.serializer,$):null)}getOverlays($,ee){let et=u7();return sk.forEach(ee,ee=>this.getOverlay($,ee).next($=>{null!==$&&et.set(ee,$)})).next(()=>et)}saveOverlays($,ee,et){let er=[];return et.forEach((et,en)=>{let ei=new c5(ee,en);er.push(this.saveOverlay($,ei))}),sk.waitFor(er)}removeOverlaysForBatchId($,ee,et){let er=new Set;ee.forEach($=>er.add(s4($.getCollectionPath())));let en=[];return er.forEach(ee=>{let er=IDBKeyRange.bound([this.userId,ee,et],[this.userId,ee,et+1],!1,!0);en.push(fv($).deleteAll(a5,er))}),sk.waitFor(en)}getOverlaysForCollection($,ee,et){let er=u7(),en=s4(ee),ei=IDBKeyRange.bound([this.userId,en,et],[this.userId,en,Number.POSITIVE_INFINITY],!0);return fv($).loadAll(a5,ei).next($=>{for(let ee of $){let $=fi(this.serializer,ee);er.set($.getKey(),$)}return er})}getOverlaysForCollectionGroup($,ee,et,er){let en;let ei=u7(),es=IDBKeyRange.bound([this.userId,ee,et],[this.userId,ee,Number.POSITIVE_INFINITY],!0);return fv($).iterate({index:a8,range:es},($,ee,et)=>{let es=fi(this.serializer,ee);ei.size()<er||es.largestBatchId===en?(ei.set(es.getKey(),es),en=es.largestBatchId):et.done()}).next(()=>ei)}saveOverlay($,ee){return fv($).put(fo(this.serializer,this.userId,ee))}}function fv($){return ou($,a3)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fS=5,fT=10,fw=13,fE=15,fC=20,f_=25,fR=30,fx=37,fI=45,fP=50,fA=55,fO=60,fD=2;class fN{constructor(){}writeIndexValue($,ee){this.writeIndexValueAux($,ee),ee.writeInfinity()}writeIndexValueAux($,ee){if("nullValue"in $)this.writeValueTypeLabel(ee,fS);else if("booleanValue"in $)this.writeValueTypeLabel(ee,fT),ee.writeNumber($.booleanValue?1:0);else if("integerValue"in $)this.writeValueTypeLabel(ee,fE),ee.writeNumber(oN($.integerValue));else if("doubleValue"in $){let et=oN($.doubleValue);isNaN(et)?this.writeValueTypeLabel(ee,fw):(this.writeValueTypeLabel(ee,fE),oQ(et)?ee.writeNumber(0):ee.writeNumber(et))}else if("timestampValue"in $){let et=$.timestampValue;this.writeValueTypeLabel(ee,fC),"string"==typeof et?ee.writeString(et):(ee.writeString(`${et.seconds||""}`),ee.writeNumber(et.nanos||0))}else if("stringValue"in $)this.writeIndexString($.stringValue,ee),this.writeTruncationMarker(ee);else if("bytesValue"in $)this.writeValueTypeLabel(ee,fR),ee.writeBytes(ok($.bytesValue)),this.writeTruncationMarker(ee);else if("referenceValue"in $)this.writeIndexEntityRef($.referenceValue,ee);else if("geoPointValue"in $){let et=$.geoPointValue;this.writeValueTypeLabel(ee,fI),ee.writeNumber(et.latitude||0),ee.writeNumber(et.longitude||0)}else"mapValue"in $?lD($)?this.writeValueTypeLabel(ee,Number.MAX_SAFE_INTEGER):(this.writeIndexMap($.mapValue,ee),this.writeTruncationMarker(ee)):"arrayValue"in $?(this.writeIndexArray($.arrayValue,ee),this.writeTruncationMarker(ee)):iG()}writeIndexString($,ee){this.writeValueTypeLabel(ee,f_),this.writeUnlabeledIndexString($,ee)}writeUnlabeledIndexString($,ee){ee.writeString($)}writeIndexMap($,ee){let et=$.fields||{};for(let $ of(this.writeValueTypeLabel(ee,fA),Object.keys(et)))this.writeIndexString($,ee),this.writeIndexValueAux(et[$],ee)}writeIndexArray($,ee){let et=$.values||[];for(let $ of(this.writeValueTypeLabel(ee,fP),et))this.writeIndexValueAux($,ee)}writeIndexEntityRef($,ee){this.writeValueTypeLabel(ee,fx),sp.fromName($).path.forEach($=>{this.writeValueTypeLabel(ee,fO),this.writeUnlabeledIndexString($,ee)})}writeValueTypeLabel($,ee){$.writeNumber(ee)}writeTruncationMarker($){$.writeNumber(fD)}}fN.INSTANCE=new fN;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fk="\uD800",fM="\uDBFF",fL=0,fj=255,fB=1,fF=255,fV=255,fU=0,fz=64,fq=8,fH=1024;function f$($){let ee=new DataView(new ArrayBuffer(8));return ee.setFloat64(0,$,!1),new Uint8Array(ee.buffer)}function fG($){if(0===$)return 8;let ee=0;return $>>4==0&&(ee+=4,$<<=4),$>>6==0&&(ee+=2,$<<=2),$>>7==0&&(ee+=1),ee}function fW($){let ee=0;for(let et=0;et<8;++et){let er=fG(255&$[et]);if(ee+=er,8!==er)break}return ee}function fK($){return Math.ceil((fz-fW($))/fq)}class fQ{constructor(){this.buffer=new Uint8Array(fH),this.position=0}writeBytesAscending($){let ee=$[Symbol.iterator](),et=ee.next();for(;!et.done;)this.writeByteAscending(et.value),et=ee.next();this.writeSeparatorAscending()}writeBytesDescending($){let ee=$[Symbol.iterator](),et=ee.next();for(;!et.done;)this.writeByteDescending(et.value),et=ee.next();this.writeSeparatorDescending()}writeUtf8Ascending($){for(let ee of $){let $=ee.charCodeAt(0);if($<128)this.writeByteAscending($);else if($<2048)this.writeByteAscending(960|$>>>6),this.writeByteAscending(128|63&$);else if(ee<fk||fM<ee)this.writeByteAscending(480|$>>>12),this.writeByteAscending(128|63&$>>>6),this.writeByteAscending(128|63&$);else{let $=ee.codePointAt(0);this.writeByteAscending(240|$>>>18),this.writeByteAscending(128|63&$>>>12),this.writeByteAscending(128|63&$>>>6),this.writeByteAscending(128|63&$)}}this.writeSeparatorAscending()}writeUtf8Descending($){for(let ee of $){let $=ee.charCodeAt(0);if($<128)this.writeByteDescending($);else if($<2048)this.writeByteDescending(960|$>>>6),this.writeByteDescending(128|63&$);else if(ee<fk||fM<ee)this.writeByteDescending(480|$>>>12),this.writeByteDescending(128|63&$>>>6),this.writeByteDescending(128|63&$);else{let $=ee.codePointAt(0);this.writeByteDescending(240|$>>>18),this.writeByteDescending(128|63&$>>>12),this.writeByteDescending(128|63&$>>>6),this.writeByteDescending(128|63&$)}}this.writeSeparatorDescending()}writeNumberAscending($){let ee=this.toOrderedBits($),et=fK(ee);this.ensureAvailable(1+et),this.buffer[this.position++]=255&et;for(let $=ee.length-et;$<ee.length;++$)this.buffer[this.position++]=255&ee[$]}writeNumberDescending($){let ee=this.toOrderedBits($),et=fK(ee);this.ensureAvailable(1+et),this.buffer[this.position++]=~(255&et);for(let $=ee.length-et;$<ee.length;++$)this.buffer[this.position++]=~(255&ee[$])}writeInfinityAscending(){this.writeEscapedByteAscending(fF),this.writeEscapedByteAscending(fV)}writeInfinityDescending(){this.writeEscapedByteDescending(fF),this.writeEscapedByteDescending(fV)}reset(){this.position=0}seed($){this.ensureAvailable($.length),this.buffer.set($,this.position),this.position+=$.length}encodedBytes(){return this.buffer.slice(0,this.position)}toOrderedBits($){let ee=f$($),et=(128&ee[0])!=0;ee[0]^=et?255:128;for(let $=1;$<ee.length;++$)ee[$]^=et?255:0;return ee}writeByteAscending($){let ee=255&$;ee===fL?(this.writeEscapedByteAscending(fL),this.writeEscapedByteAscending(fj)):ee===fF?(this.writeEscapedByteAscending(fF),this.writeEscapedByteAscending(fU)):this.writeEscapedByteAscending(ee)}writeByteDescending($){let ee=255&$;ee===fL?(this.writeEscapedByteDescending(fL),this.writeEscapedByteDescending(fj)):ee===fF?(this.writeEscapedByteDescending(fF),this.writeEscapedByteDescending(fU)):this.writeEscapedByteDescending($)}writeSeparatorAscending(){this.writeEscapedByteAscending(fL),this.writeEscapedByteAscending(fB)}writeSeparatorDescending(){this.writeEscapedByteDescending(fL),this.writeEscapedByteDescending(fB)}writeEscapedByteAscending($){this.ensureAvailable(1),this.buffer[this.position++]=$}writeEscapedByteDescending($){this.ensureAvailable(1),this.buffer[this.position++]=~$}ensureAvailable($){let ee=$+this.position;if(ee<=this.buffer.length)return;let et=2*this.buffer.length;et<ee&&(et=ee);let er=new Uint8Array(et);er.set(this.buffer),this.buffer=er}}class fY{constructor($){this.orderedCode=$}writeBytes($){this.orderedCode.writeBytesAscending($)}writeString($){this.orderedCode.writeUtf8Ascending($)}writeNumber($){this.orderedCode.writeNumberAscending($)}writeInfinity(){this.orderedCode.writeInfinityAscending()}}class fX{constructor($){this.orderedCode=$}writeBytes($){this.orderedCode.writeBytesDescending($)}writeString($){this.orderedCode.writeUtf8Descending($)}writeNumber($){this.orderedCode.writeNumberDescending($)}writeInfinity(){this.orderedCode.writeInfinityDescending()}}class fJ{constructor(){this.orderedCode=new fQ,this.ascending=new fY(this.orderedCode),this.descending=new fX(this.orderedCode)}seed($){this.orderedCode.seed($)}forKind($){return 0===$?this.ascending:this.descending}encodedBytes(){return this.orderedCode.encodedBytes()}reset(){this.orderedCode.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{constructor($,ee,et,er){this.indexId=$,this.documentKey=ee,this.arrayValue=et,this.directionalValue=er}successor(){let $=this.directionalValue.length,ee=0===$||255===this.directionalValue[$-1]?$+1:$,et=new Uint8Array(ee);return et.set(this.directionalValue,0),ee!==$?et.set([0],this.directionalValue.length):++et[et.length-1],new fZ(this.indexId,this.documentKey,this.arrayValue,et)}}function f0($,ee){let et=$.indexId-ee.indexId;return 0!==et||0!==(et=f4($.arrayValue,ee.arrayValue))||0!==(et=f4($.directionalValue,ee.directionalValue))?et:sp.comparator($.documentKey,ee.documentKey)}function f4($,ee){for(let et=0;et<$.length&&et<ee.length;++et){let er=$[et]-ee[et];if(0!==er)return er}return $.length-ee.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor($){for(let ee of(this.inequalityFilters=new oT(($,ee)=>sf.comparator($.field,ee.field)),this.collectionId=null!=$.collectionGroup?$.collectionGroup:$.path.lastSegment(),this.orderBys=$.orderBy,this.equalityFilters=[],$.filters)){let $=ee;$.isInequality()?this.inequalityFilters=this.inequalityFilters.add($):this.equalityFilters.push($)}}get hasMultipleInequality(){return this.inequalityFilters.size>1}servedByIndex($){if(iW($.collectionGroup===this.collectionId),this.hasMultipleInequality)return!1;let ee=sv($);if(void 0!==ee&&!this.hasMatchingEqualityFilter(ee))return!1;let et=sS($),er=new Set,en=0,ei=0;for(;en<et.length;++en)if(this.hasMatchingEqualityFilter(et[en]))er=er.add(et[en].fieldPath.canonicalString());else break;if(en===et.length)return!0;if(this.inequalityFilters.size>0){let $=this.inequalityFilters.getIterator().getNext();if(!er.has($.field.canonicalString())){let ee=et[en];if(!this.matchesFilter($,ee)||!this.matchesOrderBy(this.orderBys[ei++],ee))return!1}++en}for(;en<et.length;++en){let $=et[en];if(ei>=this.orderBys.length||!this.matchesOrderBy(this.orderBys[ei++],$))return!1}return!0}buildTargetIndex(){if(this.hasMultipleInequality)return null;let $=new oT(sf.comparator),ee=[];for(let et of this.equalityFilters)if(!et.field.isKeyField()){if("array-contains"===et.op||"array-contains-any"===et.op)ee.push(new sC(et.field,2));else{if($.has(et.field))continue;$=$.add(et.field),ee.push(new sC(et.field,0))}}for(let et of this.orderBys)et.field.isKeyField()||$.has(et.field)||($=$.add(et.field),ee.push(new sC(et.field,"asc"===et.dir?0:1)));return new sy(sy.UNKNOWN_ID,this.collectionId,ee,sR.empty())}hasMatchingEqualityFilter($){for(let ee of this.equalityFilters)if(this.matchesFilter(ee,$))return!0;return!1}matchesFilter($,ee){if(void 0===$||!$.field.isEqual(ee.fieldPath))return!1;let et="array-contains"===$.op||"array-contains-any"===$.op;return 2===ee.kind===et}matchesOrderBy($,ee){return!!$.field.isEqual(ee.fieldPath)&&(0===ee.kind&&"asc"===$.dir||1===ee.kind&&"desc"===$.dir)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f6($){var ee,et;if(iW($ instanceof lX||$ instanceof lJ),$ instanceof lX){if(!($ instanceof uo))return $;{let er=(null===(et=null===(ee=$.value.arrayValue)||void 0===ee?void 0:ee.values)||void 0===et?void 0:et.map(ee=>lX.create($.field,"==",ee)))||[];return lJ.create(er,"or")}}let er=$.filters.map($=>f6($));return lJ.create(er,$.op)}function f5($){if(0===$.getFilters().length)return[];let ee=pt(f6($));return(iW(f7(ee)),f9(ee)||f8(ee))?[ee]:ee.getFilters()}function f9($){return $ instanceof lX}function f8($){return $ instanceof lJ&&l1($)}function f7($){return f9($)||f8($)||pe($)}function pe($){if($ instanceof lJ&&l0($)){for(let ee of $.getFilters())if(!f9(ee)&&!f8(ee))return!1;return!0}return!1}function pt($){if(iW($ instanceof lX||$ instanceof lJ),$ instanceof lX)return $;if(1===$.filters.length)return pt($.filters[0]);let ee=$.filters.map($=>pt($)),et=lJ.create(ee,$.op);return f7(et=po(et))?et:(iW(et instanceof lJ),iW(lZ(et)),iW(et.filters.length>1),et.filters.reduce(($,ee)=>pr($,ee)))}function pr($,ee){let et;return iW($ instanceof lX||$ instanceof lJ),iW(ee instanceof lX||ee instanceof lJ),po(et=$ instanceof lX?ee instanceof lX?pn($,ee):ps($,ee):ee instanceof lX?ps(ee,$):pi($,ee))}function pn($,ee){return lJ.create([$,ee],"and")}function pi($,ee){if(iW($.filters.length>0&&ee.filters.length>0),lZ($)&&lZ(ee))return l9($,ee.getFilters());let et=l0($)?$:ee,er=l0($)?ee:$,en=et.filters.map($=>pr($,er));return lJ.create(en,"or")}function ps($,ee){if(lZ(ee))return l9(ee,$.getFilters());{let et=ee.filters.map(ee=>pr($,ee));return lJ.create(et,"or")}}function po($){if(iW($ instanceof lX||$ instanceof lJ),$ instanceof lX)return $;let ee=$.getFilters();if(1===ee.length)return po(ee[0]);if(l2($))return $;let et=ee.map($=>po($)),er=[];return(et.forEach(ee=>{ee instanceof lX?er.push(ee):ee instanceof lJ&&(ee.op===$.op?er.push(...ee.filters):er.push(ee))}),1===er.length)?er[0]:lJ.create(er,$.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(){this.collectionParentIndex=new pu}addToCollectionParentIndex($,ee){return this.collectionParentIndex.add(ee),sk.resolve()}getCollectionParents($,ee){return sk.resolve(this.collectionParentIndex.getEntries(ee))}addFieldIndex($,ee){return sk.resolve()}deleteFieldIndex($,ee){return sk.resolve()}deleteAllFieldIndexes($){return sk.resolve()}createTargetIndexes($,ee){return sk.resolve()}getDocumentsMatchingTarget($,ee){return sk.resolve(null)}getIndexType($,ee){return sk.resolve(0)}getFieldIndexes($,ee){return sk.resolve([])}getNextCollectionGroupToUpdate($){return sk.resolve(null)}getMinOffset($,ee){return sk.resolve(sP.min())}getMinOffsetFromCollectionGroup($,ee){return sk.resolve(sP.min())}updateCollectionGroup($,ee,et){return sk.resolve()}updateIndexEntries($,ee){return sk.resolve()}}class pu{constructor(){this.index={}}add($){let ee=$.lastSegment(),et=$.popLast(),er=this.index[ee]||new oT(su.comparator),en=!er.has(et);return this.index[ee]=er.add(et),en}has($){let ee=$.lastSegment(),et=$.popLast(),er=this.index[ee];return er&&er.has(et)}getEntries($){return(this.index[$]||new oT(su.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph="IndexedDbIndexManager",pf=new Uint8Array(0);class pp{constructor($,ee){this.databaseId=ee,this.collectionParentsCache=new pu,this.targetToDnfSubTargets=new u2($=>up($),($,ee)=>um($,ee)),this.uid=$.uid||""}addToCollectionParentIndex($,ee){if(!this.collectionParentsCache.has(ee)){let et=ee.lastSegment(),er=ee.popLast();$.addOnCommittedListener(()=>{this.collectionParentsCache.add(ee)});let en={collectionId:et,parent:s4(er)};return pg($).put(en)}return sk.resolve()}getCollectionParents($,ee){let et=[],er=IDBKeyRange.bound([ee,""],[st(ee),""],!1,!0);return pg($).loadAll(er).next($=>{for(let er of $){if(er.collectionId!==ee)break;et.push(s5(er.parent))}return et})}addFieldIndex($,ee){let et=py($),er=fu(ee);delete er.indexId;let en=et.add(er);if(!ee.indexState)return en.next();{let et=pv($);return en.next($=>{et.put(ff($,this.uid,ee.indexState.sequenceNumber,ee.indexState.offset))})}}deleteFieldIndex($,ee){let et=py($),er=pv($),en=pm($);return et.delete(ee.indexId).next(()=>er.delete(IDBKeyRange.bound([ee.indexId],[ee.indexId+1],!1,!0))).next(()=>en.delete(IDBKeyRange.bound([ee.indexId],[ee.indexId+1],!1,!0)))}deleteAllFieldIndexes($){let ee=py($),et=pm($),er=pv($);return ee.deleteAll().next(()=>et.deleteAll()).next(()=>er.deleteAll())}createTargetIndexes($,ee){return sk.forEach(this.getSubTargets(ee),ee=>this.getIndexType($,ee).next(et=>{if(0===et||1===et){let et=new f3(ee).buildTargetIndex();if(null!=et)return this.addFieldIndex($,et)}}))}getDocumentsMatchingTarget($,ee){let et=pm($),er=!0,en=new Map;return sk.forEach(this.getSubTargets(ee),ee=>this.getFieldIndex($,ee).next($=>{er&&(er=!!$),en.set(ee,$)})).next(()=>{if(!er)return sk.resolve(null);{let $=cs(),er=[];return sk.forEach(en,(en,ei)=>{iz(ph,`Using index ${sE(en)} to execute ${up(ee)}`);let es=uS(ei,en),eo=uT(ei,en),eu=uw(ei,en),eh=uE(ei,en),ef=this.encodeBound(en,ei,eu),ep=this.encodeBound(en,ei,eh),eg=this.encodeValues(en,ei,eo),em=this.generateIndexRanges(en.indexId,es,ef,eu.inclusive,ep,eh.inclusive,eg);return sk.forEach(em,en=>et.loadFirst(en,ee.limit).next(ee=>{ee.forEach(ee=>{let et=sp.fromSegments(ee.documentKey);$.has(et)||($=$.add(et),er.push(et))})}))}).next(()=>er)}})}getSubTargets($){let ee=this.targetToDnfSubTargets.get($);return ee||(ee=0===$.filters.length?[$]:f5(lJ.create($.filters,"and")).map(ee=>uf($.path,$.collectionGroup,$.orderBy,ee.getFilters(),$.limit,$.startAt,$.endAt)),this.targetToDnfSubTargets.set($,ee)),ee}generateIndexRanges($,ee,et,er,en,ei,es){let eo=(null!=ee?ee.length:1)*Math.max(et.length,en.length),eu=eo/(null!=ee?ee.length:1),eh=[];for(let ef=0;ef<eo;++ef){let eo=ee?this.encodeSingleElement(ee[ef/eu]):pf,ep=this.generateLowerBound($,eo,et[ef%eu],er),eg=this.generateUpperBound($,eo,en[ef%eu],ei),em=es.map(ee=>this.generateLowerBound($,eo,ee,!0));eh.push(...this.createRange(ep,eg,em))}return eh}generateLowerBound($,ee,et,er){let en=new fZ($,sp.empty(),ee,et);return er?en:en.successor()}generateUpperBound($,ee,et,er){let en=new fZ($,sp.empty(),ee,et);return er?en.successor():en}getFieldIndex($,ee){let et=new f3(ee),er=null!=ee.collectionGroup?ee.collectionGroup:ee.path.lastSegment();return this.getFieldIndexes($,er).next($=>{let ee=null;for(let er of $)et.servedByIndex(er)&&(!ee||er.fields.length>ee.fields.length)&&(ee=er);return ee})}getIndexType($,ee){let et=2,er=this.getSubTargets(ee);return sk.forEach(er,ee=>this.getFieldIndex($,ee).next($=>{$?0!==et&&$.fields.length<uR(ee)&&(et=1):et=0})).next(()=>ux(ee)&&er.length>1&&2===et?1:et)}encodeDirectionalElements($,ee){let et=new fJ;for(let er of sS($)){let $=ee.data.field(er.fieldPath);if(null==$)return null;let en=et.forKind(er.kind);fN.INSTANCE.writeIndexValue($,en)}return et.encodedBytes()}encodeSingleElement($){let ee=new fJ;return fN.INSTANCE.writeIndexValue($,ee.forKind(0)),ee.encodedBytes()}encodeDirectionalKey($,ee){let et=new fJ;return fN.INSTANCE.writeIndexValue(lE(this.databaseId,ee),et.forKind(sT($))),et.encodedBytes()}encodeValues($,ee,et){if(null===et)return[];let er=[];er.push(new fJ);let en=0;for(let ei of sS($)){let $=et[en++];for(let et of er)if(this.isInFilter(ee,ei.fieldPath)&&lx($))er=this.expandIndexValues(er,ei,$);else{let ee=et.forKind(ei.kind);fN.INSTANCE.writeIndexValue($,ee)}}return this.getEncodedBytes(er)}encodeBound($,ee,et){return this.encodeValues($,ee,et.position)}getEncodedBytes($){let ee=[];for(let et=0;et<$.length;++et)ee[et]=$[et].encodedBytes();return ee}expandIndexValues($,ee,et){let er=[...$],en=[];for(let $ of et.arrayValue.values||[])for(let et of er){let er=new fJ;er.seed(et.encodedBytes()),fN.INSTANCE.writeIndexValue($,er.forKind(ee.kind)),en.push(er)}return en}isInFilter($,ee){return!!$.filters.find($=>$ instanceof lX&&$.field.isEqual(ee)&&("in"===$.op||"not-in"===$.op))}getFieldIndexes($,ee){let et=py($),er=pv($);return(ee?et.loadAll(a$,IDBKeyRange.bound(ee,ee)):et.loadAll()).next($=>{let ee=[];return sk.forEach($,$=>er.get([$.indexId,this.uid]).next(et=>{ee.push(fh($,et))})).next(()=>ee)})}getNextCollectionGroupToUpdate($){return this.getFieldIndexes($).next($=>0===$.length?null:($.sort(($,ee)=>{let et=$.indexState.sequenceNumber-ee.indexState.sequenceNumber;return 0!==et?et:i7($.collectionGroup,ee.collectionGroup)}),$[0].collectionGroup))}updateCollectionGroup($,ee,et){let er=py($),en=pv($);return this.getNextSequenceNumber($).next($=>er.loadAll(a$,IDBKeyRange.bound(ee,ee)).next(ee=>sk.forEach(ee,ee=>en.put(ff(ee.indexId,this.uid,$,et)))))}updateIndexEntries($,ee){let et=new Map;return sk.forEach(ee,(ee,er)=>{let en=et.get(ee.collectionGroup);return(en?sk.resolve(en):this.getFieldIndexes($,ee.collectionGroup)).next(en=>(et.set(ee.collectionGroup,en),sk.forEach(en,et=>this.getExistingIndexEntries($,ee,et).next(ee=>{let en=this.computeIndexEntries(er,et);return ee.isEqual(en)?sk.resolve():this.updateEntries($,er,et,ee,en)}))))})}addIndexEntry($,ee,et,er){return pm($).put({indexId:er.indexId,uid:this.uid,arrayValue:er.arrayValue,directionalValue:er.directionalValue,orderedDocumentKey:this.encodeDirectionalKey(et,ee.key),documentKey:ee.key.path.toArray()})}deleteIndexEntry($,ee,et,er){return pm($).delete([er.indexId,this.uid,er.arrayValue,er.directionalValue,this.encodeDirectionalKey(et,ee.key),ee.key.path.toArray()])}getExistingIndexEntries($,ee,et){let er=pm($),en=new oT(f0);return er.iterate({index:a0,range:IDBKeyRange.only([et.indexId,this.uid,this.encodeDirectionalKey(et,ee)])},($,er)=>{en=en.add(new fZ(et.indexId,ee,er.arrayValue,er.directionalValue))}).next(()=>en)}computeIndexEntries($,ee){let et=new oT(f0),er=this.encodeDirectionalElements(ee,$);if(null==er)return et;let en=sv(ee);if(null!=en){let ei=$.data.field(en.fieldPath);if(lx(ei))for(let en of ei.arrayValue.values||[])et=et.add(new fZ(ee.indexId,$.key,this.encodeSingleElement(en),er))}else et=et.add(new fZ(ee.indexId,$.key,pf,er));return et}updateEntries($,ee,et,er,en){iz(ph,"Updating index entries for document '%s'",ee.key);let ei=[];return oE(er,en,f0,er=>{ei.push(this.addIndexEntry($,ee,et,er))},er=>{ei.push(this.deleteIndexEntry($,ee,et,er))}),sk.waitFor(ei)}getNextSequenceNumber($){let ee=1;return pv($).iterate({index:aQ,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},($,et,er)=>{er.done(),ee=et.sequenceNumber+1}).next(()=>ee)}createRange($,ee,et){et=et.sort(($,ee)=>f0($,ee)).filter(($,ee,et)=>!ee||0!==f0($,et[ee-1]));let er=[];for(let en of(er.push($),et)){let et=f0(en,$),ei=f0(en,ee);if(0===et)er[0]=$.successor();else if(et>0&&ei<0)er.push(en),er.push(en.successor());else if(ei>0)break}er.push(ee);let en=[];for(let $=0;$<er.length;$+=2){if(this.isRangeMatchable(er[$],er[$+1]))return[];let ee=[er[$].indexId,this.uid,er[$].arrayValue,er[$].directionalValue,pf,[]],et=[er[$+1].indexId,this.uid,er[$+1].arrayValue,er[$+1].directionalValue,pf,[]];en.push(IDBKeyRange.bound(ee,et))}return en}isRangeMatchable($,ee){return f0($,ee)>0}getMinOffsetFromCollectionGroup($,ee){return this.getFieldIndexes($,ee).next(pS)}getMinOffset($,ee){return sk.mapArray(this.getSubTargets(ee),ee=>this.getFieldIndex($,ee).next($=>$||iG())).next(pS)}}function pg($){return ou($,aM)}function pm($){return ou($,aJ)}function py($){return ou($,aq)}function pv($){return ou($,aW)}function pS($){iW(0!==$.length);let ee=$[0].indexState.offset,et=ee.largestBatchId;for(let er=1;er<$.length;er++){let en=$[er].indexState.offset;0>sA(en,ee)&&(ee=en),et<en.largestBatchId&&(et=en.largestBatchId)}return new sP(ee.readTime,ee.documentKey,et)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT($,ee,et){let er=$.store(an),en=$.store(ag),ei=[],es=IDBKeyRange.only(et.batchId),eo=0,eu=er.iterate({range:es},($,ee,et)=>(eo++,et.delete()));ei.push(eu.next(()=>{iW(1===eo)}));let eh=[];for(let $ of et.mutations){let er=af(ee,$.key.path,et.batchId);ei.push(en.delete(er)),eh.push($.key)}return sk.waitFor(ei).next(()=>eh)}function pw($){let ee;if(!$)return 0;if($.document)ee=$.document;else if($.unknownDocument)ee=$.unknownDocument;else if($.noDocument)ee=$.noDocument;else throw iG();return JSON.stringify(ee).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor($,ee,et,er){this.userId=$,this.serializer=ee,this.indexManager=et,this.referenceDelegate=er,this.documentKeysByBatchId={}}static forUser($,ee,et,er){return iW(""!==$.uid),new pE($.isAuthenticated()?$.uid:"",ee,et,er)}checkEmpty($){let ee=!0,et=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pR($).iterate({index:ao,range:et},($,et,er)=>{ee=!1,er.done()}).next(()=>ee)}addMutationBatch($,ee,et,er){let en=pI($),ei=pR($);return ei.add({}).next(es=>{iW("number"==typeof es);let eo=new c4(es,ee,et,er),eu=h1(this.serializer,this.userId,eo),eh=[],ef=new oT(($,ee)=>i7($.canonicalString(),ee.canonicalString()));for(let $ of er){let ee=af(this.userId,$.key.path,es);ef=ef.add($.key.path.popLast()),eh.push(ei.put(eu)),eh.push(en.put(ee,ap))}return ef.forEach(ee=>{eh.push(this.indexManager.addToCollectionParentIndex($,ee))}),$.addOnCommittedListener(()=>{this.documentKeysByBatchId[es]=eo.keys()}),sk.waitFor(eh).next(()=>eo)})}lookupMutationBatch($,ee){return pR($).get(ee).next($=>$?(iW($.userId===this.userId),h2(this.serializer,$)):null)}lookupMutationKeys($,ee){return this.documentKeysByBatchId[ee]?sk.resolve(this.documentKeysByBatchId[ee]):this.lookupMutationBatch($,ee).next($=>{if(!$)return null;{let et=$.keys();return this.documentKeysByBatchId[ee]=et,et}})}getNextMutationBatchAfterBatchId($,ee){let et=ee+1,er=IDBKeyRange.lowerBound([this.userId,et]),en=null;return pR($).iterate({index:ao,range:er},($,ee,er)=>{ee.userId===this.userId&&(iW(ee.batchId>=et),en=h2(this.serializer,ee)),er.done()}).next(()=>en)}getHighestUnacknowledgedBatchId($){let ee=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),et=oW;return pR($).iterate({index:ao,range:ee,reverse:!0},($,ee,er)=>{et=ee.batchId,er.done()}).next(()=>et)}getAllMutationBatches($){let ee=IDBKeyRange.bound([this.userId,oW],[this.userId,Number.POSITIVE_INFINITY]);return pR($).loadAll(ao,ee).next($=>$.map($=>h2(this.serializer,$)))}getAllMutationBatchesAffectingDocumentKey($,ee){let et=ah(this.userId,ee.path),er=IDBKeyRange.lowerBound(et),en=[];return pI($).iterate({range:er},(et,er,ei)=>{let[es,eo,eu]=et,eh=s5(eo);if(es!==this.userId||!ee.path.isEqual(eh)){ei.done();return}return pR($).get(eu).next($=>{if(!$)throw iG();iW($.userId===this.userId),en.push(h2(this.serializer,$))})}).next(()=>en)}getAllMutationBatchesAffectingDocumentKeys($,ee){let et=new oT(i7),er=[];return ee.forEach(ee=>{let en=ah(this.userId,ee.path),ei=IDBKeyRange.lowerBound(en),es=pI($).iterate({range:ei},($,er,en)=>{let[ei,es,eo]=$,eu=s5(es);if(ei!==this.userId||!ee.path.isEqual(eu)){en.done();return}et=et.add(eo)});er.push(es)}),sk.waitFor(er).next(()=>this.lookupMutationBatches($,et))}getAllMutationBatchesAffectingQuery($,ee){let et=ee.path,er=et.length+1,en=ah(this.userId,et),ei=IDBKeyRange.lowerBound(en),es=new oT(i7);return pI($).iterate({range:ei},($,ee,en)=>{let[ei,eo,eu]=$,eh=s5(eo);if(ei!==this.userId||!et.isPrefixOf(eh)){en.done();return}eh.length===er&&(es=es.add(eu))}).next(()=>this.lookupMutationBatches($,es))}lookupMutationBatches($,ee){let et=[],er=[];return ee.forEach(ee=>{er.push(pR($).get(ee).next($=>{if(null===$)throw iG();iW($.userId===this.userId),et.push(h2(this.serializer,$))}))}),sk.waitFor(er).next(()=>et)}removeMutationBatch($,ee){return pT($.simpleDbTransaction,this.userId,ee).next(et=>($.addOnCommittedListener(()=>{this.removeCachedMutationKeys(ee.batchId)}),sk.forEach(et,ee=>this.referenceDelegate.markPotentiallyOrphaned($,ee))))}removeCachedMutationKeys($){delete this.documentKeysByBatchId[$]}performConsistencyCheck($){return this.checkEmpty($).next(ee=>{if(!ee)return sk.resolve();let et=IDBKeyRange.lowerBound(au(this.userId)),er=[];return pI($).iterate({range:et},($,ee,et)=>{if($[0]!==this.userId){et.done();return}{let ee=s5($[1]);er.push(ee)}}).next(()=>{iW(0===er.length)})})}containsKey($,ee){return pC($,this.userId,ee)}getMutationQueueMetadata($){return pP($).get(this.userId).next($=>$||{userId:this.userId,lastAcknowledgedBatchId:oW,lastStreamToken:""})}}function pC($,ee,et){let er=ah(ee,et.path),en=er[1],ei=IDBKeyRange.lowerBound(er),es=!1;return pI($).iterate({range:ei,keysOnly:!0},($,et,er)=>{let[ei,eo,eu]=$;ei===ee&&eo===en&&(es=!0),er.done()}).next(()=>es)}function p_($,ee){let et=!1;return pP($).iterateSerial(er=>pC($,er,ee).next($=>($&&(et=!0),sk.resolve(!$)))).next(()=>et)}function pR($){return ou($,an)}function pI($){return ou($,ag)}function pP($){return ou($,at)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pA=2;class pO{constructor($){this.lastId=$}next(){return this.lastId+=pA,this.lastId}static forTargetCache(){return new pO(2-pA)}static forSyncEngine(){return new pO(1-pA)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor($,ee){this.referenceDelegate=$,this.serializer=ee}allocateTargetId($){return this.retrieveMetadata($).next(ee=>{let et=new pO(ee.highestTargetId);return ee.highestTargetId=et.next(),this.saveMetadata($,ee).next(()=>ee.highestTargetId)})}getLastRemoteSnapshotVersion($){return this.retrieveMetadata($).next($=>ss.fromTimestamp(new si($.lastRemoteSnapshotVersion.seconds,$.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber($){return this.retrieveMetadata($).next($=>$.highestListenSequenceNumber)}setTargetsMetadata($,ee,et){return this.retrieveMetadata($).next(er=>(er.highestListenSequenceNumber=ee,et&&(er.lastRemoteSnapshotVersion=et.toTimestamp()),ee>er.highestListenSequenceNumber&&(er.highestListenSequenceNumber=ee),this.saveMetadata($,er)))}addTargetData($,ee){return this.saveTargetData($,ee).next(()=>this.retrieveMetadata($).next(et=>(et.targetCount+=1,this.updateMetadataFromTargetData(ee,et),this.saveMetadata($,et))))}updateTargetData($,ee){return this.saveTargetData($,ee)}removeTargetData($,ee){return this.removeMatchingKeysForTargetId($,ee.targetId).next(()=>pN($).delete(ee.targetId)).next(()=>this.retrieveMetadata($)).next(ee=>(iW(ee.targetCount>0),ee.targetCount-=1,this.saveMetadata($,ee)))}removeTargets($,ee,et){let er=0,en=[];return pN($).iterate((ei,es)=>{let eo=h4(es);eo.sequenceNumber<=ee&&null===et.get(eo.targetId)&&(er++,en.push(this.removeTargetData($,eo)))}).next(()=>sk.waitFor(en)).next(()=>er)}forEachTarget($,ee){return pN($).iterate(($,et)=>{ee(h4(et))})}retrieveMetadata($){return pk($).get(aN).next($=>(iW(null!==$),$))}saveMetadata($,ee){return pk($).put(aN,ee)}saveTargetData($,ee){return pN($).put(h3(this.serializer,ee))}updateMetadataFromTargetData($,ee){let et=!1;return $.targetId>ee.highestTargetId&&(ee.highestTargetId=$.targetId,et=!0),$.sequenceNumber>ee.highestListenSequenceNumber&&(ee.highestListenSequenceNumber=$.sequenceNumber,et=!0),et}getTargetCount($){return this.retrieveMetadata($).next($=>$.targetCount)}getTargetData($,ee){let et=up(ee),er=IDBKeyRange.bound([et,Number.NEGATIVE_INFINITY],[et,Number.POSITIVE_INFINITY]),en=null;return pN($).iterate({range:er,index:ax},($,et,er)=>{let ei=h4(et);um(ee,ei.target)&&(en=ei,er.done())}).next(()=>en)}addMatchingKeys($,ee,et){let er=[],en=pM($);return ee.forEach(ee=>{let ei=s4(ee.path);er.push(en.put({targetId:et,path:ei})),er.push(this.referenceDelegate.addReference($,et,ee))}),sk.waitFor(er)}removeMatchingKeys($,ee,et){let er=pM($);return sk.forEach(ee,ee=>{let en=s4(ee.path);return sk.waitFor([er.delete([et,en]),this.referenceDelegate.removeReference($,et,ee)])})}removeMatchingKeysForTargetId($,ee){let et=pM($),er=IDBKeyRange.bound([ee],[ee+1],!1,!0);return et.delete(er)}getMatchingKeysForTargetId($,ee){let et=IDBKeyRange.bound([ee],[ee+1],!1,!0),er=pM($),en=cs();return er.iterate({range:et,keysOnly:!0},($,ee,et)=>{let er=new sp(s5($[1]));en=en.add(er)}).next(()=>en)}containsKey($,ee){let et=s4(ee.path),er=IDBKeyRange.bound([et],[st(et)],!1,!0),en=0;return pM($).iterate({index:aO,keysOnly:!0,range:er},([$,ee],et,er)=>{0!==$&&(en++,er.done())}).next(()=>en>0)}getTargetDataForTarget($,ee){return pN($).get(ee).next($=>$?h4($):null)}}function pN($){return ou($,a_)}function pk($){return ou($,ak)}function pM($){return ou($,aP)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pj=-1,pB=41943040;class pF{constructor($,ee,et){this.cacheSizeCollectionThreshold=$,this.percentileToCollect=ee,this.maximumSequenceNumbersToCollect=et}static withCacheSize($){return new pF($,pF.DEFAULT_COLLECTION_PERCENTILE,pF.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}pF.DEFAULT_COLLECTION_PERCENTILE=10,pF.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pF.DEFAULT=new pF(pB,pF.DEFAULT_COLLECTION_PERCENTILE,pF.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pF.DISABLED=new pF(pj,0,0);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pV="LruGarbageCollector",pU=1048576,pz=null,pq=null;function pH([$,ee],[et,er]){let en=i7($,et);return 0===en?i7(ee,er):en}class p${constructor($){this.maxElements=$,this.buffer=new oT(pH),this.previousIndex=0}nextIndex(){return++this.previousIndex}addElement($){let ee=[$,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(ee);else{let $=this.buffer.last();0>pH(ee,$)&&(this.buffer=this.buffer.delete($).add(ee))}}get maxValue(){return this.buffer.last()[0]}}class pG{constructor($,ee,et){this.garbageCollector=$,this.asyncQueue=ee,this.localStore=et,this.gcTask=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==pj&&this.scheduleGC(pz)}stop(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)}get started(){return null!==this.gcTask}scheduleGC($){iz(pV,`Garbage collection scheduled in ${$}ms`),this.gcTask=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",$,async()=>{this.gcTask=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch($){sU($)?iz(pV,"Ignoring IndexedDB error during garbage collection: ",$):await sN($)}await this.scheduleGC(pq)})}}class pW{constructor($,ee){this.delegate=$,this.params=ee}calculateTargetCount($,ee){return this.delegate.getSequenceNumberCount($).next($=>Math.floor(ee/100*$))}nthSequenceNumber($,ee){if(0===ee)return sk.resolve(sJ.INVALID);let et=new p$(ee);return this.delegate.forEachTarget($,$=>et.addElement($.sequenceNumber)).next(()=>this.delegate.forEachOrphanedDocumentSequenceNumber($,$=>et.addElement($))).next(()=>et.maxValue)}removeTargets($,ee,et){return this.delegate.removeTargets($,ee,et)}removeOrphanedDocuments($,ee){return this.delegate.removeOrphanedDocuments($,ee)}collect($,ee){return this.params.cacheSizeCollectionThreshold===pj?(iz("LruGarbageCollector","Garbage collection skipped; disabled"),sk.resolve(pL)):this.getCacheSize($).next(et=>et<this.params.cacheSizeCollectionThreshold?(iz("LruGarbageCollector",`Garbage collection skipped; Cache size ${et} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pL):this.runGarbageCollection($,ee))}getCacheSize($){return this.delegate.getCacheSize($)}runGarbageCollection($,ee){let et,er,en,ei,es,eo,eu;let eh=Date.now();return this.calculateTargetCount($,this.params.percentileToCollect).next(ee=>(ee>this.params.maximumSequenceNumbersToCollect?(iz("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ee}`),er=this.params.maximumSequenceNumbersToCollect):er=ee,ei=Date.now(),this.nthSequenceNumber($,er))).next(er=>(et=er,es=Date.now(),this.removeTargets($,et,ee))).next(ee=>(en=ee,eo=Date.now(),this.removeOrphanedDocuments($,et))).next($=>(eu=Date.now(),iU()<=LogLevel.DEBUG&&iz("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${ei-eh}ms
	Determined least recently used ${er} in ${es-ei}ms
	Removed ${en} targets in ${eo-es}ms
	Removed ${$} documents in ${eu-eo}ms
Total Duration: ${eu-eh}ms`),sk.resolve({didRun:!0,sequenceNumbersCollected:er,targetsRemoved:en,documentsRemoved:$})))}}function pK($,ee){return new pW($,ee)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{constructor($,ee){this.db=$,this.garbageCollector=pK(this,ee)}getSequenceNumberCount($){let ee=this.orphanedDocumentCount($);return this.db.getTargetCache().getTargetCount($).next($=>ee.next(ee=>$+ee))}orphanedDocumentCount($){let ee=0;return this.forEachOrphanedDocumentSequenceNumber($,$=>{ee++}).next(()=>ee)}forEachTarget($,ee){return this.db.getTargetCache().forEachTarget($,ee)}forEachOrphanedDocumentSequenceNumber($,ee){return this.forEachOrphanedDocument($,($,et)=>ee(et))}addReference($,ee,et){return pJ($,et)}removeReference($,ee,et){return pJ($,et)}removeTargets($,ee,et){return this.db.getTargetCache().removeTargets($,ee,et)}markPotentiallyOrphaned($,ee){return pJ($,ee)}isPinned($,ee){return p_($,ee)}removeOrphanedDocuments($,ee){let et=this.db.getRemoteDocumentCache().newChangeBuffer(),er=[],en=0;return this.forEachOrphanedDocument($,(ei,es)=>{if(es<=ee){let ee=this.isPinned($,ei).next(ee=>{if(!ee)return en++,et.getEntry($,ei).next(()=>(et.removeEntry(ei,ss.min()),pM($).delete(pY(ei))))});er.push(ee)}}).next(()=>sk.waitFor(er)).next(()=>et.apply($)).next(()=>en)}removeTarget($,ee){let et=ee.withSequenceNumber($.currentSequenceNumber);return this.db.getTargetCache().updateTargetData($,et)}updateLimboDocument($,ee){return pJ($,ee)}forEachOrphanedDocument($,ee){let et;let er=pM($),en=sJ.INVALID;return er.iterate({index:aO},([$,er],{path:ei,sequenceNumber:es})=>{0===$?(en!==sJ.INVALID&&ee(new sp(s5(et)),en),en=es,et=ei):en=sJ.INVALID}).next(()=>{en!==sJ.INVALID&&ee(new sp(s5(et)),en)})}getCacheSize($){return this.db.getRemoteDocumentCache().getSize($)}}function pY($){return[0,s4($.path)]}function pX($,ee){return{targetId:0,path:s4($.path),sequenceNumber:ee}}function pJ($,ee){return pM($).put(pX(ee,$.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pZ{constructor(){this.changes=new u2($=>$.toString(),($,ee)=>$.isEqual(ee)),this.changesApplied=!1}addEntry($){this.assertNotApplied(),this.changes.set($.key,$)}removeEntry($,ee){this.assertNotApplied(),this.changes.set($,lF.newInvalidDocument($).setReadTime(ee))}getEntry($,ee){this.assertNotApplied();let et=this.changes.get(ee);return void 0!==et?sk.resolve(et):this.getFromCache($,ee)}getEntries($,ee){return this.getAllFromCache($,ee)}apply($){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges($)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor($){this.serializer=$}setIndexManager($){this.indexManager=$}addEntry($,ee,et){return p5($).put(et)}removeEntry($,ee,et){return p5($).delete(p8(ee,et))}updateMetadata($,ee){return this.getMetadata($).next(et=>(et.byteSize+=ee,this.setMetadata($,et)))}getEntry($,ee){let et=lF.newInvalidDocument(ee);return p5($).iterate({index:av,range:IDBKeyRange.only(p9(ee))},($,er)=>{et=this.maybeDecodeDocument(ee,er)}).next(()=>et)}getSizedEntry($,ee){let et={size:0,document:lF.newInvalidDocument(ee)};return p5($).iterate({index:av,range:IDBKeyRange.only(p9(ee))},($,er)=>{et={document:this.maybeDecodeDocument(ee,er),size:pw(er)}}).next(()=>et)}getEntries($,ee){let et=u3();return this.forEachDbEntry($,ee,($,ee)=>{let er=this.maybeDecodeDocument($,ee);et=et.insert($,er)}).next(()=>et)}getSizedEntries($,ee){let et=u3(),er=new om(sp.comparator);return this.forEachDbEntry($,ee,($,ee)=>{let en=this.maybeDecodeDocument($,ee);et=et.insert($,en),er=er.insert($,pw(ee))}).next(()=>({documents:et,sizeMap:er}))}forEachDbEntry($,ee,et){if(ee.isEmpty())return sk.resolve();let er=new oT(ge);ee.forEach($=>er=er.add($));let en=IDBKeyRange.bound(p9(er.first()),p9(er.last())),ei=er.getIterator(),es=ei.getNext();return p5($).iterate({index:av,range:en},($,ee,er)=>{let en=sp.fromSegments([...ee.prefixPath,ee.collectionGroup,ee.documentId]);for(;es&&0>ge(es,en);)et(es,null),es=ei.getNext();es&&es.isEqual(en)&&(et(es,ee),es=ei.hasNext()?ei.getNext():null),es?er.skip(p9(es)):er.done()}).next(()=>{for(;es;)et(es,null),es=ei.hasNext()?ei.getNext():null})}getDocumentsMatchingQuery($,ee,et,er,en){let ei=ee.path,es=[ei.popLast().toArray(),ei.lastSegment(),hX(et.readTime),et.documentKey.path.isEmpty()?"":et.documentKey.path.lastSegment()],eo=[ei.popLast().toArray(),ei.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return p5($).loadAll(IDBKeyRange.bound(es,eo,!0)).next($=>{null==en||en.incrementDocumentReadCount($.length);let et=u3();for(let en of $){let $=this.maybeDecodeDocument(sp.fromSegments(en.prefixPath.concat(en.collectionGroup,en.documentId)),en);$.isFoundDocument()&&(uK(ee,$)||er.has($.key))&&(et=et.insert($.key,$))}return et})}getAllFromCollectionGroup($,ee,et,er){let en=u3(),ei=p7(ee,et),es=p7(ee,sP.max());return p5($).iterate({index:aT,range:IDBKeyRange.bound(ei,es,!0)},($,ee,et)=>{let ei=this.maybeDecodeDocument(sp.fromSegments(ee.prefixPath.concat(ee.collectionGroup,ee.documentId)),ee);(en=en.insert(ei.key,ei)).size===er&&et.done()}).next(()=>en)}newChangeBuffer($){return new p3(this,!!$&&$.trackRemovals)}getSize($){return this.getMetadata($).next($=>$.byteSize)}getMetadata($){return p6($).get(aC).next($=>(iW(!!$),$))}setMetadata($,ee){return p6($).put(aC,ee)}maybeDecodeDocument($,ee){if(ee){let $=hQ(this.serializer,ee);if(!($.isNoDocument()&&$.version.isEqual(ss.min())))return $}return lF.newInvalidDocument($)}}function p4($){return new p0($)}class p3 extends null{constructor($,ee){super(),this.documentCache=$,this.trackRemovals=ee,this.documentStates=new u2($=>$.toString(),($,ee)=>$.isEqual(ee))}applyChanges($){let ee=[],et=0,er=new oT(($,ee)=>i7($.canonicalString(),ee.canonicalString()));return this.changes.forEach((en,ei)=>{let es=this.documentStates.get(en);if(ee.push(this.documentCache.removeEntry($,en,es.readTime)),ei.isValidDocument()){let eo=hY(this.documentCache.serializer,ei);er=er.add(en.path.popLast());let eu=pw(eo);et+=eu-es.size,ee.push(this.documentCache.addEntry($,en,eo))}else if(et-=es.size,this.trackRemovals){let et=hY(this.documentCache.serializer,ei.convertToNoDocument(ss.min()));ee.push(this.documentCache.addEntry($,en,et))}}),er.forEach(et=>{ee.push(this.documentCache.indexManager.addToCollectionParentIndex($,et))}),ee.push(this.documentCache.updateMetadata($,et)),sk.waitFor(ee)}getFromCache($,ee){return this.documentCache.getSizedEntry($,ee).next($=>(this.documentStates.set(ee,{size:$.size,readTime:$.document.readTime}),$.document))}getAllFromCache($,ee){return this.documentCache.getSizedEntries($,ee).next(({documents:$,sizeMap:ee})=>(ee.forEach((ee,et)=>{this.documentStates.set(ee,{size:et,readTime:$.get(ee).readTime})}),$))}}function p6($){return ou($,aE)}function p5($){return ou($,am)}function p9($){let ee=$.path.toArray();return[ee.slice(0,ee.length-2),ee[ee.length-2],ee[ee.length-1]]}function p8($,ee){let et=$.path.toArray();return[et.slice(0,et.length-2),et[et.length-2],hX(ee),et[et.length-1]]}function p7($,ee){let et=ee.documentKey.path.toArray();return[$,hX(ee.readTime),et.slice(0,et.length-2),et.length>0?et[et.length-1]:""]}function ge($,ee){let et=$.path.toArray(),er=ee.path.toArray(),en=0;for(let $=0;$<et.length-2&&$<er.length-2;++$)if(en=i7(et[$],er[$]))return en;return(en=i7(et.length,er.length))||(en=i7(et[et.length-2],er[er.length-2]))?en:i7(et[et.length-1],er[er.length-1])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gt=15;/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor($,ee){this.overlayedDocument=$,this.mutatedFields=ee}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor($,ee,et,er){this.remoteDocumentCache=$,this.mutationQueue=ee,this.documentOverlayCache=et,this.indexManager=er}getDocument($,ee){let et=null;return this.documentOverlayCache.getOverlay($,ee).next(er=>(et=er,this.remoteDocumentCache.getEntry($,ee))).next($=>(null!==et&&cF(et.mutation,$,o_.empty(),si.now()),$))}getDocuments($,ee){return this.remoteDocumentCache.getEntries($,ee).next(ee=>this.getLocalViewOfDocuments($,ee,cs()).next(()=>ee))}getLocalViewOfDocuments($,ee,et=cs()){let er=u7();return this.populateOverlays($,er,ee).next(()=>this.computeViews($,ee,er,et).next($=>{let ee=u5();return $.forEach(($,et)=>{ee=ee.insert($,et.overlayedDocument)}),ee}))}getOverlayedDocuments($,ee){let et=u7();return this.populateOverlays($,et,ee).next(()=>this.computeViews($,ee,et,cs()))}populateOverlays($,ee,et){let er=[];return et.forEach($=>{ee.has($)||er.push($)}),this.documentOverlayCache.getOverlays($,er).next($=>{$.forEach(($,et)=>{ee.set($,et)})})}computeViews($,ee,et,er){let en=u3(),ei=ct(),es=u9();return ee.forEach(($,ee)=>{let es=et.get(ee.key);er.has(ee.key)&&(void 0===es||es.mutation instanceof c$)?en=en.insert(ee.key,ee):void 0!==es?(ei.set(ee.key,es.mutation.getFieldMask()),cF(es.mutation,ee,es.mutation.getFieldMask(),si.now())):ei.set(ee.key,o_.empty())}),this.recalculateAndSaveOverlays($,en).next($=>($.forEach(($,ee)=>ei.set($,ee)),ee.forEach(($,ee)=>{var et;return es.set($,new gr(ee,null!==(et=ei.get($))&&void 0!==et?et:null))}),es))}recalculateAndSaveOverlays($,ee){let et=ct(),er=new om(($,ee)=>$-ee),en=cs();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys($,ee).next($=>{for(let en of $)en.keys().forEach($=>{let ei=ee.get($);if(null===ei)return;let es=et.get($)||o_.empty();es=en.applyToLocalView(ei,es),et.set($,es);let eo=(er.get(en.batchId)||cs()).add($);er=er.insert(en.batchId,eo)})}).next(()=>{let ei=[],es=er.getReverseIterator();for(;es.hasNext();){let er=es.getNext(),eo=er.key,eu=er.value,eh=ce();eu.forEach($=>{if(!en.has($)){let er=cj(ee.get($),et.get($));null!==er&&eh.set($,er),en=en.add($)}}),ei.push(this.documentOverlayCache.saveOverlays($,eo,eh))}return sk.waitFor(ei)}).next(()=>et)}recalculateAndSaveOverlaysForDocumentKeys($,ee){return this.remoteDocumentCache.getEntries($,ee).next(ee=>this.recalculateAndSaveOverlays($,ee))}getDocumentsMatchingQuery($,ee,et,er){return uk(ee)?this.getDocumentsMatchingDocumentQuery($,ee.path):uM(ee)?this.getDocumentsMatchingCollectionGroupQuery($,ee,et,er):this.getDocumentsMatchingCollectionQuery($,ee,et,er)}getNextDocuments($,ee,et,er){return this.remoteDocumentCache.getAllFromCollectionGroup($,ee,et,er).next(en=>{let ei=er-en.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup($,ee,et.largestBatchId,er-en.size):sk.resolve(u7()),es=sg,eo=en;return ei.next(ee=>sk.forEach(ee,(ee,et)=>(es<et.largestBatchId&&(es=et.largestBatchId),en.get(ee))?sk.resolve():this.remoteDocumentCache.getEntry($,ee).next($=>{eo=eo.insert(ee,$)})).next(()=>this.populateOverlays($,ee,en)).next(()=>this.computeViews($,eo,ee,cs())).next($=>({batchId:es,changes:u8($)})))})}getDocumentsMatchingDocumentQuery($,ee){return this.getDocument($,new sp(ee)).next($=>{let ee=u5();return $.isFoundDocument()&&(ee=ee.insert($.key,$)),ee})}getDocumentsMatchingCollectionGroupQuery($,ee,et,er){let en=ee.collectionGroup,ei=u5();return this.indexManager.getCollectionParents($,en).next(es=>sk.forEach(es,es=>{let eo=uO(ee,es.child(en));return this.getDocumentsMatchingCollectionQuery($,eo,et,er).next($=>{$.forEach(($,ee)=>{ei=ei.insert($,ee)})})}).next(()=>ei))}getDocumentsMatchingCollectionQuery($,ee,et,er){let en;return this.documentOverlayCache.getOverlaysForCollection($,ee.path,et.largestBatchId).next(ei=>(en=ei,this.remoteDocumentCache.getDocumentsMatchingQuery($,ee,et,en,er))).next($=>{en.forEach((ee,et)=>{let er=et.getKey();null===$.get(er)&&($=$.insert(er,lF.newInvalidDocument(er)))});let et=u5();return $.forEach(($,er)=>{let ei=en.get($);void 0!==ei&&cF(ei.mutation,er,o_.empty(),si.now()),uK(ee,er)&&(et=et.insert($,er))}),et})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor($){this.serializer=$,this.bundles=new Map,this.namedQueries=new Map}getBundleMetadata($,ee){return sk.resolve(this.bundles.get(ee))}saveBundleMetadata($,ee){return this.bundles.set(ee.id,fr(ee)),sk.resolve()}getNamedQuery($,ee){return sk.resolve(this.namedQueries.get(ee))}saveNamedQuery($,ee){return this.namedQueries.set(ee.name,ft(ee)),sk.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(){this.overlays=new om(sp.comparator),this.overlayByBatchId=new Map}getOverlay($,ee){return sk.resolve(this.overlays.get(ee))}getOverlays($,ee){let et=u7();return sk.forEach(ee,ee=>this.getOverlay($,ee).next($=>{null!==$&&et.set(ee,$)})).next(()=>et)}saveOverlays($,ee,et){return et.forEach((et,er)=>{this.saveOverlay($,ee,er)}),sk.resolve()}removeOverlaysForBatchId($,ee,et){let er=this.overlayByBatchId.get(et);return void 0!==er&&(er.forEach($=>this.overlays=this.overlays.remove($)),this.overlayByBatchId.delete(et)),sk.resolve()}getOverlaysForCollection($,ee,et){let er=u7(),en=ee.length+1,ei=new sp(ee.child("")),es=this.overlays.getIteratorFrom(ei);for(;es.hasNext();){let $=es.getNext().value,ei=$.getKey();if(!ee.isPrefixOf(ei.path))break;ei.path.length===en&&$.largestBatchId>et&&er.set($.getKey(),$)}return sk.resolve(er)}getOverlaysForCollectionGroup($,ee,et,er){let en=new om(($,ee)=>$-ee),ei=this.overlays.getIterator();for(;ei.hasNext();){let $=ei.getNext().value;if($.getKey().getCollectionGroup()===ee&&$.largestBatchId>et){let ee=en.get($.largestBatchId);null===ee&&(ee=u7(),en=en.insert($.largestBatchId,ee)),ee.set($.getKey(),$)}}let es=u7(),eo=en.getIterator();for(;eo.hasNext()&&(eo.getNext().value.forEach(($,ee)=>es.set($,ee)),!(es.size()>=er)););return sk.resolve(es)}saveOverlay($,ee,et){let er=this.overlays.get(et.key);if(null!==er){let $=this.overlayByBatchId.get(er.largestBatchId).delete(et.key);this.overlayByBatchId.set(er.largestBatchId,$)}this.overlays=this.overlays.insert(et.key,new c5(ee,et));let en=this.overlayByBatchId.get(ee);void 0===en&&(en=cs(),this.overlayByBatchId.set(ee,en)),this.overlayByBatchId.set(ee,en.add(et.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.refsByKey=new oT(go.compareByKey),this.refsByTarget=new oT(go.compareByTargetId)}isEmpty(){return this.refsByKey.isEmpty()}addReference($,ee){let et=new go($,ee);this.refsByKey=this.refsByKey.add(et),this.refsByTarget=this.refsByTarget.add(et)}addReferences($,ee){$.forEach($=>this.addReference($,ee))}removeReference($,ee){this.removeRef(new go($,ee))}removeReferences($,ee){$.forEach($=>this.removeReference($,ee))}removeReferencesForId($){let ee=new sp(new su([])),et=new go(ee,$),er=new go(ee,$+1),en=[];return this.refsByTarget.forEachInRange([et,er],$=>{this.removeRef($),en.push($.key)}),en}removeAllReferences(){this.refsByKey.forEach($=>this.removeRef($))}removeRef($){this.refsByKey=this.refsByKey.delete($),this.refsByTarget=this.refsByTarget.delete($)}referencesForId($){let ee=new sp(new su([])),et=new go(ee,$),er=new go(ee,$+1),en=cs();return this.refsByTarget.forEachInRange([et,er],$=>{en=en.add($.key)}),en}containsKey($){let ee=new go($,0),et=this.refsByKey.firstAfterOrEqual(ee);return null!==et&&$.isEqual(et.key)}}class go{constructor($,ee){this.key=$,this.targetOrBatchId=ee}static compareByKey($,ee){return sp.comparator($.key,ee.key)||i7($.targetOrBatchId,ee.targetOrBatchId)}static compareByTargetId($,ee){return i7($.targetOrBatchId,ee.targetOrBatchId)||sp.comparator($.key,ee.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor($,ee){this.indexManager=$,this.referenceDelegate=ee,this.mutationQueue=[],this.nextBatchId=1,this.batchesByDocumentKey=new oT(go.compareByKey)}checkEmpty($){return sk.resolve(0===this.mutationQueue.length)}addMutationBatch($,ee,et,er){let en=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let ei=new c4(en,ee,et,er);for(let ee of(this.mutationQueue.push(ei),er))this.batchesByDocumentKey=this.batchesByDocumentKey.add(new go(ee.key,en)),this.indexManager.addToCollectionParentIndex($,ee.key.path.popLast());return sk.resolve(ei)}lookupMutationBatch($,ee){return sk.resolve(this.findMutationBatch(ee))}getNextMutationBatchAfterBatchId($,ee){let et=ee+1,er=this.indexOfBatchId(et),en=er<0?0:er;return sk.resolve(this.mutationQueue.length>en?this.mutationQueue[en]:null)}getHighestUnacknowledgedBatchId(){return sk.resolve(0===this.mutationQueue.length?oW:this.nextBatchId-1)}getAllMutationBatches($){return sk.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey($,ee){let et=new go(ee,0),er=new go(ee,Number.POSITIVE_INFINITY),en=[];return this.batchesByDocumentKey.forEachInRange([et,er],$=>{let ee=this.findMutationBatch($.targetOrBatchId);en.push(ee)}),sk.resolve(en)}getAllMutationBatchesAffectingDocumentKeys($,ee){let et=new oT(i7);return ee.forEach($=>{let ee=new go($,0),er=new go($,Number.POSITIVE_INFINITY);this.batchesByDocumentKey.forEachInRange([ee,er],$=>{et=et.add($.targetOrBatchId)})}),sk.resolve(this.findMutationBatches(et))}getAllMutationBatchesAffectingQuery($,ee){let et=ee.path,er=et.length+1,en=et;sp.isDocumentKey(en)||(en=en.child(""));let ei=new go(new sp(en),0),es=new oT(i7);return this.batchesByDocumentKey.forEachWhile($=>{let ee=$.key.path;return!!et.isPrefixOf(ee)&&(ee.length===er&&(es=es.add($.targetOrBatchId)),!0)},ei),sk.resolve(this.findMutationBatches(es))}findMutationBatches($){let ee=[];return $.forEach($=>{let et=this.findMutationBatch($);null!==et&&ee.push(et)}),ee}removeMutationBatch($,ee){iW(0===this.indexOfExistingBatchId(ee.batchId,"removed")),this.mutationQueue.shift();let et=this.batchesByDocumentKey;return sk.forEach(ee.mutations,er=>{let en=new go(er.key,ee.batchId);return et=et.delete(en),this.referenceDelegate.markPotentiallyOrphaned($,er.key)}).next(()=>{this.batchesByDocumentKey=et})}removeCachedMutationKeys($){}containsKey($,ee){let et=new go(ee,0),er=this.batchesByDocumentKey.firstAfterOrEqual(et);return sk.resolve(ee.isEqual(er&&er.key))}performConsistencyCheck($){return this.mutationQueue.length,sk.resolve()}indexOfExistingBatchId($,ee){return this.indexOfBatchId($)}indexOfBatchId($){return 0===this.mutationQueue.length?0:$-this.mutationQueue[0].batchId}findMutationBatch($){let ee=this.indexOfBatchId($);return ee<0||ee>=this.mutationQueue.length?null:this.mutationQueue[ee]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(){return new om(sp.comparator)}class gh{constructor($){this.sizer=$,this.docs=gu(),this.size=0}setIndexManager($){this.indexManager=$}addEntry($,ee){let et=ee.key,er=this.docs.get(et),en=er?er.size:0,ei=this.sizer(ee);return this.docs=this.docs.insert(et,{document:ee.mutableCopy(),size:ei}),this.size+=ei-en,this.indexManager.addToCollectionParentIndex($,et.path.popLast())}removeEntry($){let ee=this.docs.get($);ee&&(this.docs=this.docs.remove($),this.size-=ee.size)}getEntry($,ee){let et=this.docs.get(ee);return sk.resolve(et?et.document.mutableCopy():lF.newInvalidDocument(ee))}getEntries($,ee){let et=u3();return ee.forEach($=>{let ee=this.docs.get($);et=et.insert($,ee?ee.document.mutableCopy():lF.newInvalidDocument($))}),sk.resolve(et)}getDocumentsMatchingQuery($,ee,et,er){let en=u3(),ei=ee.path,es=new sp(ei.child("")),eo=this.docs.getIteratorFrom(es);for(;eo.hasNext();){let{key:$,value:{document:es}}=eo.getNext();if(!ei.isPrefixOf($.path))break;!($.path.length>ei.length+1||0>=sA(sI(es),et))&&(er.has(es.key)||uK(ee,es))&&(en=en.insert(es.key,es.mutableCopy()))}return sk.resolve(en)}getAllFromCollectionGroup($,ee,et,er){iG()}forEachDocumentKey($,ee){return sk.forEach(this.docs,$=>ee($))}newChangeBuffer($){return new gp(this)}getSize($){return sk.resolve(this.size)}}function gf($){return new gh($)}class gp extends pZ{constructor($){super(),this.documentCache=$}applyChanges($){let ee=[];return this.changes.forEach((et,er)=>{er.isValidDocument()?ee.push(this.documentCache.addEntry($,er)):this.documentCache.removeEntry(et)}),sk.waitFor(ee)}getFromCache($,ee){return this.documentCache.getEntry($,ee)}getAllFromCache($,ee){return this.documentCache.getEntries($,ee)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor($){this.persistence=$,this.targets=new u2($=>up($),um),this.lastRemoteSnapshotVersion=ss.min(),this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new ga,this.targetCount=0,this.targetIdGenerator=pO.forTargetCache()}forEachTarget($,ee){return this.targets.forEach(($,et)=>ee(et)),sk.resolve()}getLastRemoteSnapshotVersion($){return sk.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber($){return sk.resolve(this.highestSequenceNumber)}allocateTargetId($){return this.highestTargetId=this.targetIdGenerator.next(),sk.resolve(this.highestTargetId)}setTargetsMetadata($,ee,et){return et&&(this.lastRemoteSnapshotVersion=et),ee>this.highestSequenceNumber&&(this.highestSequenceNumber=ee),sk.resolve()}saveTargetData($){this.targets.set($.target,$);let ee=$.targetId;ee>this.highestTargetId&&(this.targetIdGenerator=new pO(ee),this.highestTargetId=ee),$.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=$.sequenceNumber)}addTargetData($,ee){return this.saveTargetData(ee),this.targetCount+=1,sk.resolve()}updateTargetData($,ee){return this.saveTargetData(ee),sk.resolve()}removeTargetData($,ee){return this.targets.delete(ee.target),this.references.removeReferencesForId(ee.targetId),this.targetCount-=1,sk.resolve()}removeTargets($,ee,et){let er=0,en=[];return this.targets.forEach((ei,es)=>{es.sequenceNumber<=ee&&null===et.get(es.targetId)&&(this.targets.delete(ei),en.push(this.removeMatchingKeysForTargetId($,es.targetId)),er++)}),sk.waitFor(en).next(()=>er)}getTargetCount($){return sk.resolve(this.targetCount)}getTargetData($,ee){let et=this.targets.get(ee)||null;return sk.resolve(et)}addMatchingKeys($,ee,et){return this.references.addReferences(ee,et),sk.resolve()}removeMatchingKeys($,ee,et){this.references.removeReferences(ee,et);let er=this.persistence.referenceDelegate,en=[];return er&&ee.forEach(ee=>{en.push(er.markPotentiallyOrphaned($,ee))}),sk.waitFor(en)}removeMatchingKeysForTargetId($,ee){return this.references.removeReferencesForId(ee),sk.resolve()}getMatchingKeysForTargetId($,ee){let et=this.references.referencesForId(ee);return sk.resolve(et)}containsKey($,ee){return sk.resolve(this.references.containsKey(ee))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gm="MemoryPersistence";class gy{constructor($,ee){this.mutationQueues={},this.overlays={},this.listenSequence=new sJ(0),this._started=!1,this._started=!0,this.referenceDelegate=$(this),this.targetCache=new gg(this);let et=$=>this.referenceDelegate.documentSize($);this.indexManager=new pl,this.remoteDocumentCache=gf(et),this.serializer=new hK(ee),this.bundleCache=new gi(this.serializer)}start(){return Promise.resolve()}shutdown(){return this._started=!1,Promise.resolve()}get started(){return this._started}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager($){return this.indexManager}getDocumentOverlayCache($){let ee=this.overlays[$.toKey()];return ee||(ee=new gs,this.overlays[$.toKey()]=ee),ee}getMutationQueue($,ee){let et=this.mutationQueues[$.toKey()];return et||(et=new gl(ee,this.referenceDelegate),this.mutationQueues[$.toKey()]=et),et}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.bundleCache}runTransaction($,ee,et){iz(gm,"Starting transaction:",$);let er=new gv(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),et(er).next($=>this.referenceDelegate.onTransactionCommitted(er).next(()=>$)).toPromise().then($=>(er.raiseOnCommittedEvent(),$))}mutationQueuesContainKey($,ee){return sk.or(Object.values(this.mutationQueues).map(et=>()=>et.containsKey($,ee)))}}class gv extends sD{constructor($){super(),this.currentSequenceNumber=$}}class gS{constructor($){this.persistence=$,this.localViewReferences=new ga,this._orphanedDocuments=null}static factory($){return new gS($)}get orphanedDocuments(){if(this._orphanedDocuments)return this._orphanedDocuments;throw iG()}addReference($,ee,et){return this.localViewReferences.addReference(et,ee),this.orphanedDocuments.delete(et.toString()),sk.resolve()}removeReference($,ee,et){return this.localViewReferences.removeReference(et,ee),this.orphanedDocuments.add(et.toString()),sk.resolve()}markPotentiallyOrphaned($,ee){return this.orphanedDocuments.add(ee.toString()),sk.resolve()}removeTarget($,ee){this.localViewReferences.removeReferencesForId(ee.targetId).forEach($=>this.orphanedDocuments.add($.toString()));let et=this.persistence.getTargetCache();return et.getMatchingKeysForTargetId($,ee.targetId).next($=>{$.forEach($=>this.orphanedDocuments.add($.toString()))}).next(()=>et.removeTargetData($,ee))}onTransactionStarted(){this._orphanedDocuments=new Set}onTransactionCommitted($){let ee=this.persistence.getRemoteDocumentCache().newChangeBuffer();return sk.forEach(this.orphanedDocuments,et=>{let er=sp.fromPath(et);return this.isReferenced($,er).next($=>{$||ee.removeEntry(er,ss.min())})}).next(()=>(this._orphanedDocuments=null,ee.apply($)))}updateLimboDocument($,ee){return this.isReferenced($,ee).next($=>{$?this.orphanedDocuments.delete(ee.toString()):this.orphanedDocuments.add(ee.toString())})}documentSize($){return 0}isReferenced($,ee){return sk.or([()=>sk.resolve(this.localViewReferences.containsKey(ee)),()=>this.persistence.getTargetCache().containsKey($,ee),()=>this.persistence.mutationQueuesContainKey($,ee)])}}class gT{constructor($,ee){this.persistence=$,this.orphanedSequenceNumbers=new u2($=>s4($.path),($,ee)=>$.isEqual(ee)),this.garbageCollector=pK(this,ee)}static factory($,ee){return new gT($,ee)}onTransactionStarted(){}onTransactionCommitted($){return sk.resolve()}forEachTarget($,ee){return this.persistence.getTargetCache().forEachTarget($,ee)}getSequenceNumberCount($){let ee=this.orphanedDocumentCount($);return this.persistence.getTargetCache().getTargetCount($).next($=>ee.next(ee=>$+ee))}orphanedDocumentCount($){let ee=0;return this.forEachOrphanedDocumentSequenceNumber($,$=>{ee++}).next(()=>ee)}forEachOrphanedDocumentSequenceNumber($,ee){return sk.forEach(this.orphanedSequenceNumbers,(et,er)=>this.isPinned($,et,er).next($=>$?sk.resolve():ee(er)))}removeTargets($,ee,et){return this.persistence.getTargetCache().removeTargets($,ee,et)}removeOrphanedDocuments($,ee){let et=0,er=this.persistence.getRemoteDocumentCache(),en=er.newChangeBuffer();return er.forEachDocumentKey($,er=>this.isPinned($,er,ee).next($=>{$||(et++,en.removeEntry(er,ss.min()))})).next(()=>en.apply($)).next(()=>et)}markPotentiallyOrphaned($,ee){return this.orphanedSequenceNumbers.set(ee,$.currentSequenceNumber),sk.resolve()}removeTarget($,ee){let et=ee.withSequenceNumber($.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData($,et)}addReference($,ee,et){return this.orphanedSequenceNumbers.set(et,$.currentSequenceNumber),sk.resolve()}removeReference($,ee,et){return this.orphanedSequenceNumbers.set(et,$.currentSequenceNumber),sk.resolve()}updateLimboDocument($,ee){return this.orphanedSequenceNumbers.set(ee,$.currentSequenceNumber),sk.resolve()}documentSize($){let ee=$.key.toString().length;return $.isFoundDocument()&&(ee+=lS($.data.value)),ee}isPinned($,ee,et){return sk.or([()=>this.persistence.mutationQueuesContainKey($,ee),()=>this.persistence.getTargetCache().containsKey($,ee),()=>{let $=this.orphanedSequenceNumbers.get(ee);return sk.resolve(void 0!==$&&$>et)}])}getCacheSize($){return this.persistence.getRemoteDocumentCache().getSize($)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor($){this.serializer=$}createOrUpgrade($,ee,et,er){let en=new sj("createOrUpgrade",ee);et<1&&er>=1&&(gC($),g_($),gA($),gx($));let ei=sk.resolve();return et<3&&er>=3&&(0!==et&&(gO($),gA($)),ei=ei.next(()=>gN(en))),et<4&&er>=4&&(0!==et&&(ei=ei.next(()=>gR($,en))),ei=ei.next(()=>{gk($)})),et<5&&er>=5&&(ei=ei.next(()=>this.removeAcknowledgedMutations(en))),et<6&&er>=6&&(ei=ei.next(()=>(gP($),this.addDocumentGlobal(en)))),et<7&&er>=7&&(ei=ei.next(()=>this.ensureSequenceNumbers(en))),et<8&&er>=8&&(ei=ei.next(()=>this.createCollectionParentIndex($,en))),et<9&&er>=9&&(ei=ei.next(()=>{gD($)})),et<10&&er>=10&&(ei=ei.next(()=>this.rewriteCanonicalIds(en))),et<11&&er>=11&&(ei=ei.next(()=>{gM($),gL($)})),et<12&&er>=12&&(ei=ei.next(()=>{gB($)})),et<13&&er>=13&&(ei=ei.next(()=>gI($)).next(()=>this.rewriteRemoteDocumentCache($,en)).next(()=>$.deleteObjectStore(s9))),et<14&&er>=14&&(ei=ei.next(()=>this.runOverlayMigration($,en))),et<15&&er>=15&&(ei=ei.next(()=>gj($))),ei}addDocumentGlobal($){let ee=0;return $.store(s9).iterate(($,et)=>{ee+=pw(et)}).next(()=>{let et={byteSize:ee};return $.store(aE).put(aC,et)})}removeAcknowledgedMutations($){let ee=$.store(at),et=$.store(an);return ee.loadAll().next(ee=>sk.forEach(ee,ee=>{let er=IDBKeyRange.bound([ee.userId,oW],[ee.userId,ee.lastAcknowledgedBatchId]);return et.loadAll(ao,er).next(et=>sk.forEach(et,et=>{iW(et.userId===ee.userId);let er=h2(this.serializer,et);return pT($,ee.userId,er).next(()=>{})}))}))}ensureSequenceNumbers($){let ee=$.store(aP),et=$.store(s9);return $.store(ak).get(aN).next($=>{let er=et=>ee.put({targetId:0,path:s4(et),sequenceNumber:$.highestListenSequenceNumber}),en=[];return et.iterate(($,et)=>{let ei=new su($),es=gE(ei);en.push(ee.get(es).next($=>$?sk.resolve():er(ei)))}).next(()=>sk.waitFor(en))})}createCollectionParentIndex($,ee){$.createObjectStore(aM,{keyPath:aL});let et=ee.store(aM),er=new pu,en=$=>{if(er.add($)){let ee=$.lastSegment(),er=$.popLast();return et.put({collectionId:ee,parent:s4(er)})}};return ee.store(s9).iterate({keysOnly:!0},($,ee)=>en(new su($).popLast())).next(()=>ee.store(ag).iterate({keysOnly:!0},([$,ee,et],er)=>en(s5(ee).popLast())))}rewriteCanonicalIds($){let ee=$.store(a_);return ee.iterate(($,et)=>{let er=h4(et),en=h3(this.serializer,er);return ee.put(en)})}rewriteRemoteDocumentCache($,ee){let et=ee.store(s9),er=[];return et.iterate(($,et)=>{let en=ee.store(am),ei=gF(et).path.toArray(),es={prefixPath:ei.slice(0,ei.length-2),collectionGroup:ei[ei.length-2],documentId:ei[ei.length-1],readTime:et.readTime||[0,0],unknownDocument:et.unknownDocument,noDocument:et.noDocument,document:et.document,hasCommittedMutations:!!et.hasCommittedMutations};er.push(en.put(es))}).next(()=>sk.waitFor(er))}runOverlayMigration($,ee){let et=ee.store(an),er=p4(this.serializer),en=new gy(gS.factory,this.serializer.remoteSerializer);return et.loadAll().next($=>{let et=new Map;return $.forEach($=>{var ee;let er=null!==(ee=et.get($.userId))&&void 0!==ee?ee:cs();h2(this.serializer,$).keys().forEach($=>er=er.add($)),et.set($.userId,er)}),sk.forEach(et,($,et)=>{let ei=new iL(et),es=fy.forUser(this.serializer,ei),eo=en.getIndexManager(ei);return new gn(er,pE.forUser(ei,this.serializer,eo,en.referenceDelegate),es,eo).recalculateAndSaveOverlaysForDocumentKeys(new ol(ee,sJ.INVALID),$).next()})})}}function gE($){return[0,s4($)]}function gC($){$.createObjectStore(s8)}function g_($){$.createObjectStore(at,{keyPath:ar}),$.createObjectStore(an,{keyPath:ai,autoIncrement:!0}).createIndex(ao,al,{unique:!0}),$.createObjectStore(ag)}function gR($,ee){return ee.store(an).loadAll().next(et=>{$.deleteObjectStore(an),$.createObjectStore(an,{keyPath:ai,autoIncrement:!0}).createIndex(ao,al,{unique:!0});let er=ee.store(an),en=et.map($=>er.put($));return sk.waitFor(en)})}function gx($){$.createObjectStore(s9)}function gI($){let ee=$.createObjectStore(am,{keyPath:ay});ee.createIndex(av,aS),ee.createIndex(aT,aw)}function gP($){$.createObjectStore(aE)}function gA($){$.createObjectStore(aP,{keyPath:aA}).createIndex(aO,aD,{unique:!0}),$.createObjectStore(a_,{keyPath:aR}).createIndex(ax,aI,{unique:!0}),$.createObjectStore(ak)}function gO($){$.deleteObjectStore(aP),$.deleteObjectStore(a_),$.deleteObjectStore(ak)}function gD($){$.objectStoreNames.contains("remoteDocumentChanges")&&$.deleteObjectStore("remoteDocumentChanges")}function gN($){let ee=$.store(ak),et={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ss.min().toTimestamp(),targetCount:0};return ee.put(aN,et)}function gk($){$.createObjectStore(aj,{keyPath:aB})}function gM($){$.createObjectStore(aF,{keyPath:aV})}function gL($){$.createObjectStore(aU,{keyPath:az})}function gj($){$.createObjectStore(aq,{keyPath:aH,autoIncrement:!0}).createIndex(a$,aG,{unique:!1}),$.createObjectStore(aW,{keyPath:aK}).createIndex(aQ,aY,{unique:!1}),$.createObjectStore(aJ,{keyPath:aZ}).createIndex(a0,a4,{unique:!1})}function gB($){let ee=$.createObjectStore(a3,{keyPath:a6});ee.createIndex(a5,a9,{unique:!1}),ee.createIndex(a8,a7,{unique:!1})}function gF($){return $.document?new sp(su.fromString($.document.name).popFirst(5)):$.noDocument?sp.fromSegments($.noDocument.path):$.unknownDocument?sp.fromSegments($.unknownDocument.path):iG()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gV="IndexedDbPersistence",gU=null,gz=5e3,gq=4e3,gH=null,g$=null,gG="firestore_zombie",gW="main";class gK{constructor($,ee,et,er,en,ei,es,eo,eu,eh,ef=gt){if(this.allowTabSynchronization=$,this.persistenceKey=ee,this.clientId=et,this.queue=en,this.window=ei,this.document=es,this.sequenceNumberSyncer=eu,this.forceOwningTab=eh,this.schemaVersion=ef,this.listenSequence=null,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=$=>Promise.resolve(),!gK.isAvailable())throw new iY(iQ.UNIMPLEMENTED,g$);this.referenceDelegate=new pQ(this,er),this.dbName=ee+gW,this.serializer=new hK(eo),this.simpleDb=new sB(this.dbName,this.schemaVersion,new gw(this.serializer)),this.targetCache=new pD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=p4(this.serializer),this.bundleCache=new fp,this.window&&this.window.localStorage?this.webStorage=this.window.localStorage:(this.webStorage=null,!1===eh&&iq(gV,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.updateClientMetadataAndTryBecomePrimary().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new iY(iQ.FAILED_PRECONDITION,gH);return this.attachVisibilityHandler(),this.attachWindowUnloadHook(),this.scheduleClientMetadataAndPrimaryLeaseRefreshes(),this.runTransaction("getHighestListenSequenceNumber","readonly",$=>this.targetCache.getHighestSequenceNumber($))}).then($=>{this.listenSequence=new sJ($,this.sequenceNumberSyncer)}).then(()=>{this._started=!0}).catch($=>(this.simpleDb&&this.simpleDb.close(),Promise.reject($)))}setPrimaryStateListener($){return this.primaryStateListener=async ee=>{if(this.started)return $(ee)},$(this.isPrimary)}setDatabaseDeletedListener($){this.simpleDb.setVersionChangeListener(async ee=>{null===ee.newVersion&&await $()})}setNetworkEnabled($){this.networkEnabled!==$&&(this.networkEnabled=$,this.queue.enqueueAndForget(async()=>{this.started&&await this.updateClientMetadataAndTryBecomePrimary()}))}updateClientMetadataAndTryBecomePrimary(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",$=>gY($).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.verifyPrimaryLease($).next($=>{$||(this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)))})}).next(()=>this.canActAsPrimary($)).next(ee=>this.isPrimary&&!ee?this.releasePrimaryLeaseIfHeld($).next(()=>!1):!!ee&&this.acquireOrExtendPrimaryLease($).next(()=>!0))).catch($=>{if(sU($))return iz(gV,"Failed to extend owner lease: ",$),this.isPrimary;if(!this.allowTabSynchronization)throw $;return iz(gV,"Releasing owner lease after error during lease refresh",$),!1}).then($=>{this.isPrimary!==$&&this.queue.enqueueRetryable(()=>this.primaryStateListener($)),this.isPrimary=$})}verifyPrimaryLease($){return gQ($).get(s7).next($=>sk.resolve(this.isLocalClient($)))}removeClientMetadata($){return gY($).delete(this.clientId)}async maybeGarbageCollectMultiClientState(){if(this.isPrimary&&!this.isWithinAge(this.lastGarbageCollectionTime,gU)){this.lastGarbageCollectionTime=Date.now();let $=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",$=>{let ee=ou($,aj);return ee.loadAll().next($=>{let et=this.filterActiveClients($,gU),er=$.filter($=>-1===et.indexOf($));return sk.forEach(er,$=>ee.delete($.clientId)).next(()=>er)})}).catch(()=>[]);if(this.webStorage)for(let ee of $)this.webStorage.removeItem(this.zombiedClientLocalStorageKey(ee.clientId))}}scheduleClientMetadataAndPrimaryLeaseRefreshes(){this.clientMetadataRefresher=this.queue.enqueueAfterDelay("client_metadata_refresh",gq,()=>this.updateClientMetadataAndTryBecomePrimary().then(()=>this.maybeGarbageCollectMultiClientState()).then(()=>this.scheduleClientMetadataAndPrimaryLeaseRefreshes()))}isLocalClient($){return!!$&&$.ownerId===this.clientId}canActAsPrimary($){return this.forceOwningTab?sk.resolve(!0):gQ($).get(s7).next(ee=>{if(null!==ee&&this.isWithinAge(ee.leaseTimestampMs,gz)&&!this.isClientZombied(ee.ownerId)){if(this.isLocalClient(ee)&&this.networkEnabled)return!0;if(!this.isLocalClient(ee)){if(!ee.allowTabSynchronization)throw new iY(iQ.FAILED_PRECONDITION,gH);return!1}}return!!this.networkEnabled&&!!this.inForeground||gY($).loadAll().next($=>void 0===this.filterActiveClients($,gz).find($=>{if(this.clientId!==$.clientId){let ee=!this.networkEnabled&&$.networkEnabled,et=!this.inForeground&&$.inForeground,er=this.networkEnabled===$.networkEnabled;if(ee||et&&er)return!0}return!1}))}).next($=>(this.isPrimary!==$&&iz(gV,`Client ${$?"is":"is not"} eligible for a primary lease.`),$))}async shutdown(){this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),await this.simpleDb.runTransaction("shutdown","readwrite",[s8,aj],$=>{let ee=new ol($,sJ.INVALID);return this.releasePrimaryLeaseIfHeld(ee).next(()=>this.removeClientMetadata(ee))}),this.simpleDb.close(),this.removeClientZombiedEntry()}filterActiveClients($,ee){return $.filter($=>this.isWithinAge($.updateTimeMs,ee)&&!this.isClientZombied($.clientId))}getActiveClients(){return this.runTransaction("getActiveClients","readonly",$=>gY($).loadAll().next($=>this.filterActiveClients($,gU).map($=>$.clientId)))}get started(){return this._started}getMutationQueue($,ee){return pE.forUser($,this.serializer,ee,this.referenceDelegate)}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager($){return new pp($,this.serializer.remoteSerializer.databaseId)}getDocumentOverlayCache($){return fy.forUser(this.serializer,$)}getBundleCache(){return this.bundleCache}runTransaction($,ee,et){let er;iz(gV,"Starting transaction:",$);let en="readonly"===ee?"readonly":"readwrite",ei=oo(this.schemaVersion);return this.simpleDb.runTransaction($,en,ei,en=>(er=new ol(en,this.listenSequence?this.listenSequence.next():sJ.INVALID),"readwrite-primary"===ee)?this.verifyPrimaryLease(er).next($=>!!$||this.canActAsPrimary(er)).next(ee=>{if(!ee)throw iq(`Failed to obtain primary lease for action '${$}'.`),this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)),new iY(iQ.FAILED_PRECONDITION,sO);return et(er)}).next($=>this.acquireOrExtendPrimaryLease(er).next(()=>$)):this.verifyAllowTabSynchronization(er).next(()=>et(er))).then($=>(er.raiseOnCommittedEvent(),$))}verifyAllowTabSynchronization($){return gQ($).get(s7).next($=>{if(null!==$&&this.isWithinAge($.leaseTimestampMs,gz)&&!this.isClientZombied($.ownerId)&&!this.isLocalClient($)&&!this.forceOwningTab&&(!this.allowTabSynchronization||!$.allowTabSynchronization))throw new iY(iQ.FAILED_PRECONDITION,gH)})}acquireOrExtendPrimaryLease($){let ee={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gQ($).put(s7,ee)}static isAvailable(){return sB.isAvailable()}releasePrimaryLeaseIfHeld($){let ee=gQ($);return ee.get(s7).next($=>this.isLocalClient($)?(iz(gV,"Releasing primary lease."),ee.delete(s7)):sk.resolve())}isWithinAge($,ee){let et=Date.now(),er=et-ee,en=et;return!($<er)&&(!($>en)||(iq(`Detected an update time that is in the future: ${$} > ${en}`),!1))}attachVisibilityHandler(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=()=>{this.queue.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.updateClientMetadataAndTryBecomePrimary()))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)}detachVisibilityHandler(){this.documentVisibilityHandler&&(this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)}attachWindowUnloadHook(){var $;"function"==typeof(null===($=this.window)||void 0===$?void 0:$.addEventListener)&&(this.windowUnloadHandler=()=>{this.markClientZombied();let $=/(?:Version|Mobile)\/1[456]/;isSafari()&&(navigator.appVersion.match($)||navigator.userAgent.match($))&&this.queue.enterRestrictedMode(!0),this.queue.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.windowUnloadHandler))}detachWindowUnloadHook(){this.windowUnloadHandler&&(this.window.removeEventListener("pagehide",this.windowUnloadHandler),this.windowUnloadHandler=null)}isClientZombied($){var ee;try{let et=(null===(ee=this.webStorage)||void 0===ee?void 0:ee.getItem(this.zombiedClientLocalStorageKey($)))!==null;return iz(gV,`Client '${$}' ${et?"is":"is not"} zombied in LocalStorage`),et}catch($){return iq(gV,"Failed to get zombied client id.",$),!1}}markClientZombied(){if(this.webStorage)try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch($){iq("Failed to set zombie client id.",$)}}removeClientZombiedEntry(){if(this.webStorage)try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch($){}}zombiedClientLocalStorageKey($){return`${gG}_${this.persistenceKey}_${$}`}}function gQ($){return ou($,s8)}function gY($){return ou($,aj)}function gX($,ee){let et=$.projectId;return $.isDefaultDatabase||(et+="."+$.database),"firestore/"+ee+"/"+et+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gJ($,ee,et,er,en){ee=[...ee],($=[...$]).sort(et),ee.sort(et);let ei=$.length,es=ee.length,eo=0,eu=0;for(;eo<es&&eu<ei;){let ei=et($[eu],ee[eo]);ei<0?en($[eu++]):ei>0?er(ee[eo++]):(eo++,eu++)}for(;eo<es;)er(ee[eo++]);for(;eu<ei;)en($[eu++])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gZ="LocalStore",g0=3e8;class g1{constructor($,ee,et,er){this.persistence=$,this.queryEngine=ee,this.serializer=er,this.targetDataByTarget=new om(i7),this.targetIdByTarget=new u2($=>up($),um),this.collectionGroupReadTime=new Map,this.remoteDocuments=$.getRemoteDocumentCache(),this.targetCache=$.getTargetCache(),this.bundleCache=$.getBundleCache(),this.initializeUserComponents(et)}initializeUserComponents($){this.documentOverlayCache=this.persistence.getDocumentOverlayCache($),this.indexManager=this.persistence.getIndexManager($),this.mutationQueue=this.persistence.getMutationQueue($,this.indexManager),this.localDocuments=new gn(this.remoteDocuments,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.remoteDocuments.setIndexManager(this.indexManager),this.queryEngine.initialize(this.localDocuments,this.indexManager)}collectGarbage($){return this.persistence.runTransaction("Collect garbage","readwrite-primary",ee=>$.collect(ee,this.targetDataByTarget))}}function g2($,ee,et,er){return new g1($,ee,et,er)}async function g4($,ee){let et=iK($);return await et.persistence.runTransaction("Handle user change","readonly",$=>{let er;return et.mutationQueue.getAllMutationBatches($).next(en=>(er=en,et.initializeUserComponents(ee),et.mutationQueue.getAllMutationBatches($))).next(ee=>{let en=[],ei=[],es=cs();for(let $ of er)for(let ee of(en.push($.batchId),$.mutations))es=es.add(ee.key);for(let $ of ee)for(let ee of(ei.push($.batchId),$.mutations))es=es.add(ee.key);return et.localDocuments.getDocuments($,es).next($=>({affectedDocuments:$,removedBatchIds:en,addedBatchIds:ei}))})})}function g3($,ee){let et,er;let en=iK($),ei=si.now(),es=ee.reduce(($,ee)=>$.add(ee.key),cs());return en.persistence.runTransaction("Locally write mutations","readwrite",$=>{let eo=u3(),eu=cs();return en.remoteDocuments.getEntries($,es).next($=>{(eo=$).forEach(($,ee)=>{ee.isValidDocument()||(eu=eu.add($))})}).next(()=>en.localDocuments.getOverlayedDocuments($,eo)).next(er=>{et=er;let es=[];for(let $ of ee){let ee=cV($,et.get($.key).overlayedDocument);null!=ee&&es.push(new c$($.key,ee,lB(ee.value.mapValue),ck.exists(!0)))}return en.mutationQueue.addMutationBatch($,ei,es,ee)}).next(ee=>{er=ee;let ei=ee.applyToLocalDocumentSet(et,eu);return en.documentOverlayCache.saveOverlays($,ee.batchId,ei)})}).then(()=>({batchId:er.batchId,changes:u8(et)}))}function g6($,ee){let et=iK($);return et.persistence.runTransaction("Acknowledge batch","readwrite-primary",$=>{let er=ee.batch.keys(),en=et.remoteDocuments.newChangeBuffer({trackRemovals:!0});return mp(et,$,ee,en).next(()=>en.apply($)).next(()=>et.mutationQueue.performConsistencyCheck($)).next(()=>et.documentOverlayCache.removeOverlaysForBatchId($,er,ee.batch.batchId)).next(()=>et.localDocuments.recalculateAndSaveOverlaysForDocumentKeys($,g5(ee))).next(()=>et.localDocuments.getDocuments($,er))})}function g5($){let ee=cs();for(let et=0;et<$.mutationResults.length;++et)$.mutationResults[et].transformResults.length>0&&(ee=ee.add($.batch.mutations[et].key));return ee}function g9($,ee){let et=iK($);return et.persistence.runTransaction("Reject batch","readwrite-primary",$=>{let er;return et.mutationQueue.lookupMutationBatch($,ee).next(ee=>(iW(null!==ee),er=ee.keys(),et.mutationQueue.removeMutationBatch($,ee))).next(()=>et.mutationQueue.performConsistencyCheck($)).next(()=>et.documentOverlayCache.removeOverlaysForBatchId($,er,ee)).next(()=>et.localDocuments.recalculateAndSaveOverlaysForDocumentKeys($,er)).next(()=>et.localDocuments.getDocuments($,er))})}function g8($){let ee=iK($);return ee.persistence.runTransaction("Get highest unacknowledged batch id","readonly",$=>ee.mutationQueue.getHighestUnacknowledgedBatchId($))}function g7($){let ee=iK($);return ee.persistence.runTransaction("Get last remote snapshot version","readonly",$=>ee.targetCache.getLastRemoteSnapshotVersion($))}function me($,ee){let et=iK($),er=ee.snapshotVersion,en=et.targetDataByTarget;return et.persistence.runTransaction("Apply remote event","readwrite-primary",$=>{let ei=et.remoteDocuments.newChangeBuffer({trackRemovals:!0});en=et.targetDataByTarget;let es=[];ee.targetChanges.forEach((ei,eo)=>{let eu=en.get(eo);if(!eu)return;es.push(et.targetCache.removeMatchingKeys($,ei.removedDocuments,eo).next(()=>et.targetCache.addMatchingKeys($,ei.addedDocuments,eo)));let eh=eu.withSequenceNumber($.currentSequenceNumber);null!==ee.targetMismatches.get(eo)?eh=eh.withResumeToken(oI.EMPTY_BYTE_STRING,ss.min()).withLastLimboFreeSnapshotVersion(ss.min()):ei.resumeToken.approximateByteSize()>0&&(eh=eh.withResumeToken(ei.resumeToken,er)),en=en.insert(eo,eh),mr(eu,eh,ei)&&es.push(et.targetCache.updateTargetData($,eh))});let eo=u3(),eu=cs();if(ee.documentUpdates.forEach(er=>{ee.resolvedLimboDocuments.has(er)&&es.push(et.persistence.referenceDelegate.updateLimboDocument($,er))}),es.push(mt($,ei,ee.documentUpdates).next($=>{eo=$.changedDocuments,eu=$.existenceChangedKeys})),!er.isEqual(ss.min())){let ee=et.targetCache.getLastRemoteSnapshotVersion($).next(ee=>et.targetCache.setTargetsMetadata($,$.currentSequenceNumber,er));es.push(ee)}return sk.waitFor(es).next(()=>ei.apply($)).next(()=>et.localDocuments.getLocalViewOfDocuments($,eo,eu)).next(()=>eo)}).then($=>(et.targetDataByTarget=en,$))}function mt($,ee,et){let er=cs(),en=cs();return et.forEach($=>er=er.add($)),ee.getEntries($,er).next($=>{let er=u3();return et.forEach((et,ei)=>{let es=$.get(et);ei.isFoundDocument()!==es.isFoundDocument()&&(en=en.add(et)),ei.isNoDocument()&&ei.version.isEqual(ss.min())?(ee.removeEntry(et,ei.readTime),er=er.insert(et,ei)):!es.isValidDocument()||ei.version.compareTo(es.version)>0||0===ei.version.compareTo(es.version)&&es.hasPendingWrites?(ee.addEntry(ei),er=er.insert(et,ei)):iz(gZ,"Ignoring outdated watch update for ",et,". Current version:",es.version," Watch version:",ei.version)}),{changedDocuments:er,existenceChangedKeys:en}})}function mr($,ee,et){return!!(0===$.resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=g0)||et.addedDocuments.size+et.modifiedDocuments.size+et.removedDocuments.size>0}async function mn($,ee){let et=iK($);try{await et.persistence.runTransaction("notifyLocalViewChanges","readwrite",$=>sk.forEach(ee,ee=>sk.forEach(ee.addedKeys,er=>et.persistence.referenceDelegate.addReference($,ee.targetId,er)).next(()=>sk.forEach(ee.removedKeys,er=>et.persistence.referenceDelegate.removeReference($,ee.targetId,er)))))}catch($){if(sU($))iz(gZ,"Failed to update sequence numbers: "+$);else throw $}for(let $ of ee){let ee=$.targetId;if(!$.fromCache){let $=et.targetDataByTarget.get(ee),er=$.snapshotVersion,en=$.withLastLimboFreeSnapshotVersion(er);et.targetDataByTarget=et.targetDataByTarget.insert(ee,en)}}}function mi($,ee){let et=iK($);return et.persistence.runTransaction("Get next mutation batch","readonly",$=>(void 0===ee&&(ee=oW),et.mutationQueue.getNextMutationBatchAfterBatchId($,ee)))}function mo($,ee){let et=iK($);return et.persistence.runTransaction("read document","readonly",$=>et.localDocuments.getDocument($,ee))}function ml($,ee){let et=iK($);return et.persistence.runTransaction("Allocate target","readwrite",$=>{let er;return et.targetCache.getTargetData($,ee).next(en=>en?(er=en,sk.resolve(er)):et.targetCache.allocateTargetId($).next(en=>(er=new hW(ee,en,"TargetPurposeListen",$.currentSequenceNumber),et.targetCache.addTargetData($,er).next(()=>er))))}).then($=>{let er=et.targetDataByTarget.get($.targetId);return(null===er||$.snapshotVersion.compareTo(er.snapshotVersion)>0)&&(et.targetDataByTarget=et.targetDataByTarget.insert($.targetId,$),et.targetIdByTarget.set(ee,$.targetId)),$})}function mu($,ee,et){let er=iK($),en=er.targetIdByTarget.get(et);return void 0!==en?sk.resolve(er.targetDataByTarget.get(en)):er.targetCache.getTargetData(ee,et)}async function mh($,ee,et){let er=iK($),en=er.targetDataByTarget.get(ee),ei=et?"readwrite":"readwrite-primary";try{et||await er.persistence.runTransaction("Release target",ei,$=>er.persistence.referenceDelegate.removeTarget($,en))}catch($){if(sU($))iz(gZ,`Failed to update sequence numbers for target ${ee}: ${$}`);else throw $}er.targetDataByTarget=er.targetDataByTarget.remove(ee),er.targetIdByTarget.delete(en.target)}function mf($,ee,et){let er=iK($),en=ss.min(),ei=cs();return er.persistence.runTransaction("Execute query","readwrite",$=>mu(er,$,uj(ee)).next(ee=>{if(ee)return en=ee.lastLimboFreeSnapshotVersion,er.targetCache.getMatchingKeysForTargetId($,ee.targetId).next($=>{ei=$})}).next(()=>er.queryEngine.getDocumentsMatchingQuery($,ee,et?en:ss.min(),et?ei:cs())).next($=>(mT(er,uZ(ee),$),{documents:$,remoteKeys:ei})))}function mp($,ee,et,er){let en=et.batch,ei=en.keys(),es=sk.resolve();return ei.forEach($=>{es=es.next(()=>er.getEntry(ee,$)).next(ee=>{let ei=et.docVersions.get($);iW(null!==ei),0>ee.version.compareTo(ei)&&(en.applyToRemoteDocument(ee,et),ee.isValidDocument()&&(ee.setReadTime(et.commitVersion),er.addEntry(ee)))})}),es.next(()=>$.mutationQueue.removeMutationBatch(ee,en))}function mg($,ee){let et=iK($),er=iK(et.mutationQueue);return et.persistence.runTransaction("Lookup mutation documents","readonly",$=>er.lookupMutationKeys($,ee).next(ee=>ee?et.localDocuments.getDocuments($,ee):sk.resolve(null)))}function mm($,ee){iK(iK($,g1).mutationQueue).removeCachedMutationKeys(ee)}function my($){return iK(iK($,g1).persistence).getActiveClients()}function mv($,ee){let et=iK($),er=iK(et.targetCache),en=et.targetDataByTarget.get(ee);return en?Promise.resolve(en.target):et.persistence.runTransaction("Get target data","readonly",$=>er.getTargetDataForTarget($,ee).next($=>$?$.target:null))}function mS($,ee){let et=iK($),er=et.collectionGroupReadTime.get(ee)||ss.min();return et.persistence.runTransaction("Get new document changes","readonly",$=>et.remoteDocuments.getAllFromCollectionGroup($,ee,sx(er,sg),Number.MAX_SAFE_INTEGER)).then($=>(mT(et,ee,$),$))}function mT($,ee,et){let er=$.collectionGroupReadTime.get(ee)||ss.min();et.forEach(($,ee)=>{ee.readTime.compareTo(er)>0&&(er=ee.readTime)}),$.collectionGroupReadTime.set(ee,er)}function mw($){return uj(uA(su.fromString(`__bundle__/docs/${$}`)))}async function mE($,ee,et,er){let en=iK($),ei=cs(),es=u3();for(let $ of et){let et=ee.toDocumentKey($.metadata.name);$.document&&(ei=ei.add(et));let er=ee.toMutableDocument($);er.setReadTime(ee.toSnapshotVersion($.metadata.readTime)),es=es.insert(et,er)}let eo=en.remoteDocuments.newChangeBuffer({trackRemovals:!0}),eu=await ml(en,mw(er));return en.persistence.runTransaction("Apply bundle documents","readwrite",$=>mt($,eo,es).next(ee=>(eo.apply($),ee)).next(ee=>en.targetCache.removeMatchingKeysForTargetId($,eu.targetId).next(()=>en.targetCache.addMatchingKeys($,ei,eu.targetId)).next(()=>en.localDocuments.getLocalViewOfDocuments($,ee.changedDocuments,ee.existenceChangedKeys)).next(()=>ee.changedDocuments)))}function mC($,ee){let et=iK($),er=dF(ee.createTime);return et.persistence.runTransaction("hasNewerBundle","readonly",$=>et.bundleCache.getBundleMetadata($,ee.id)).then($=>!!$&&$.createTime.compareTo(er)>=0)}function m_($,ee){let et=iK($);return et.persistence.runTransaction("Save bundle","readwrite",$=>et.bundleCache.saveBundleMetadata($,ee))}async function mR($,ee,et=cs()){let er=await ml($,uj(fe(ee.bundledQuery))),en=iK($);return en.persistence.runTransaction("Save named query","readwrite",$=>{let ei=dF(ee.readTime);if(er.snapshotVersion.compareTo(ei)>=0)return en.bundleCache.saveNamedQuery($,ee);let es=er.withResumeToken(oI.EMPTY_BYTE_STRING,ei);return en.targetDataByTarget=en.targetDataByTarget.insert(es.targetId,es),en.targetCache.updateTargetData($,es).next(()=>en.targetCache.removeMatchingKeysForTargetId($,er.targetId)).next(()=>en.targetCache.addMatchingKeys($,et,er.targetId)).next(()=>en.bundleCache.saveNamedQuery($,ee))})}function mx($,ee){iK($).queryEngine.indexAutoCreationEnabled=ee}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount($){this._documentReadCount+=$}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mP=100;function mA(){return(0,eg.G6)()?8:sB.getAndroidVersion((0,eg.z$)())>0?6:4}class mO{constructor(){this.initialized=!1,this.indexAutoCreationEnabled=!1,this.indexAutoCreationMinCollectionSize=mP,this.relativeIndexReadCostPerDocument=mA()}initialize($,ee){this.localDocumentsView=$,this.indexManager=ee,this.initialized=!0}getDocumentsMatchingQuery($,ee,et,er){let en={result:null};return this.performQueryUsingIndex($,ee).next($=>{en.result=$}).next(()=>{if(!en.result)return this.performQueryUsingRemoteKeys($,ee,er,et).next($=>{en.result=$})}).next(()=>{if(en.result)return;let et=new mI;return this.executeFullCollectionScan($,ee,et).next(er=>{if(en.result=er,this.indexAutoCreationEnabled)return this.createCacheIndexes($,ee,et,er.size)})}).next(()=>en.result)}createCacheIndexes($,ee,et,er){return et.documentReadCount<this.indexAutoCreationMinCollectionSize?(iU()<=ef.in.DEBUG&&iz("QueryEngine","SDK will not create cache indexes for query:",uW(ee),"since it only creates cache indexes for collection contains","more than or equal to",this.indexAutoCreationMinCollectionSize,"documents"),sk.resolve()):(iU()<=ef.in.DEBUG&&iz("QueryEngine","Query:",uW(ee),"scans",et.documentReadCount,"local documents and returns",er,"documents as results."),et.documentReadCount>this.relativeIndexReadCostPerDocument*er)?(iU()<=ef.in.DEBUG&&iz("QueryEngine","The SDK decides to create cache indexes for query:",uW(ee),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes($,uj(ee))):sk.resolve()}performQueryUsingIndex($,ee){if(uD(ee))return sk.resolve(null);let et=uj(ee);return this.indexManager.getIndexType($,et).next(er=>0===er?null:(null!==ee.limit&&1===er&&(et=uj(ee=uz(ee,null,"F"))),this.indexManager.getDocumentsMatchingTarget($,et).next(er=>{let en=cs(...er);return this.localDocumentsView.getDocuments($,en).next(er=>this.indexManager.getMinOffset($,et).next(et=>{let ei=this.applyQuery(ee,er);return this.needsRefill(ee,ei,en,et.readTime)?this.performQueryUsingIndex($,uz(ee,null,"F")):this.appendRemainingResults($,ei,ee,et)}))})))}performQueryUsingRemoteKeys($,ee,et,er){return uD(ee)||er.isEqual(ss.min())?sk.resolve(null):this.localDocumentsView.getDocuments($,et).next(en=>{let ei=this.applyQuery(ee,en);return this.needsRefill(ee,ei,et,er)?sk.resolve(null):(iU()<=ef.in.DEBUG&&iz("QueryEngine","Re-using previous result from %s to execute query: %s",er.toString(),uW(ee)),this.appendRemainingResults($,ei,ee,sx(er,sg)).next($=>$))})}applyQuery($,ee){let et=new oT(u0($));return ee.forEach((ee,er)=>{uK($,er)&&(et=et.add(er))}),et}needsRefill($,ee,et,er){if(null===$.limit)return!1;if(et.size!==ee.size)return!0;let en="F"===$.limitType?ee.last():ee.first();return!!en&&(en.hasPendingWrites||en.version.compareTo(er)>0)}executeFullCollectionScan($,ee,et){return iU()<=ef.in.DEBUG&&iz("QueryEngine","Using full collection scan to execute query:",uW(ee)),this.localDocumentsView.getDocumentsMatchingQuery($,ee,sP.min(),et)}appendRemainingResults($,ee,et,er){return this.localDocumentsView.getDocumentsMatchingQuery($,et,er).next($=>(ee.forEach(ee=>{$=$.insert(ee.key,ee)}),$))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mD="firestore_clients";function mN($,ee){return`${mD}_${$}_${ee}`}let mk="firestore_mutations";function mM($,ee,et){let er=`${mk}_${$}_${et}`;return ee.isAuthenticated()&&(er+=`_${ee.uid}`),er}let mL="firestore_targets";function mj($,ee){return`${mL}_${$}_${ee}`}let mB="firestore_online_state";function mF($){return`${mB}_${$}`}let mV="firestore_bundle_loaded_v2";function mU($){return`${mV}_${$}`}let mz="firestore_sequence_number";function mq($){return`${mz}_${$}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mH="SharedClientState";class m${constructor($,ee,et,er){this.user=$,this.batchId=ee,this.state=et,this.error=er}static fromWebStorageEntry($,ee,et){let er;let en=JSON.parse(et),ei="object"==typeof en&&-1!==["pending","acknowledged","rejected"].indexOf(en.state)&&(void 0===en.error||"object"==typeof en.error);return(ei&&en.error&&(ei="string"==typeof en.error.message&&"string"==typeof en.error.code)&&(er=new iY(en.error.code,en.error.message)),ei)?new m$($,ee,en.state,er):(iq(mH,`Failed to parse mutation state for ID '${ee}': ${et}`),null)}toWebStorageJSON(){let $={state:this.state,updateTimeMs:Date.now()};return this.error&&($.error={code:this.error.code,message:this.error.message}),JSON.stringify($)}}class mG{constructor($,ee,et){this.targetId=$,this.state=ee,this.error=et}static fromWebStorageEntry($,ee){let et;let er=JSON.parse(ee),en="object"==typeof er&&-1!==["not-current","current","rejected"].indexOf(er.state)&&(void 0===er.error||"object"==typeof er.error);return(en&&er.error&&(en="string"==typeof er.error.message&&"string"==typeof er.error.code)&&(et=new iY(er.error.code,er.error.message)),en)?new mG($,er.state,et):(iq(mH,`Failed to parse target state for ID '${$}': ${ee}`),null)}toWebStorageJSON(){let $={state:this.state,updateTimeMs:Date.now()};return this.error&&($.error={code:this.error.code,message:this.error.message}),JSON.stringify($)}}class mW{constructor($,ee){this.clientId=$,this.activeTargetIds=ee}static fromWebStorageEntry($,ee){let et=JSON.parse(ee),er="object"==typeof et&&et.activeTargetIds instanceof Array,en=cl();for(let $=0;er&&$<et.activeTargetIds.length;++$)er=oY(et.activeTargetIds[$]),en=en.add(et.activeTargetIds[$]);return er?new mW($,en):(iq(mH,`Failed to parse client data for instance '${$}': ${ee}`),null)}}class mK{constructor($,ee){this.clientId=$,this.onlineState=ee}static fromWebStorageEntry($){let ee=JSON.parse($);return"object"==typeof ee&&-1!==["Unknown","Online","Offline"].indexOf(ee.onlineState)&&"string"==typeof ee.clientId?new mK(ee.clientId,ee.onlineState):(iq(mH,`Failed to parse online state: ${$}`),null)}}class mQ{constructor(){this.activeTargetIds=cl()}addQueryTarget($){this.activeTargetIds=this.activeTargetIds.add($)}removeQueryTarget($){this.activeTargetIds=this.activeTargetIds.delete($)}toWebStorageJSON(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class mY{constructor($,ee,et,er,en){this.window=$,this.queue=ee,this.persistenceKey=et,this.localClientId=er,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.storageListener=this.handleWebStorageEvent.bind(this),this.activeClients=new om(i7),this.started=!1,this.earlyEvents=[];let ei=et.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=en,this.localClientStorageKey=mN(this.persistenceKey,this.localClientId),this.sequenceNumberKey=mq(this.persistenceKey),this.activeClients=this.activeClients.insert(this.localClientId,new mQ),this.clientStateKeyRe=RegExp(`^${mD}_${ei}_([^_]*)$`),this.mutationBatchKeyRe=RegExp(`^${mk}_${ei}_(\\d+)(?:_(.*))?$`),this.queryTargetKeyRe=RegExp(`^${mL}_${ei}_(\\d+)$`),this.onlineStateKey=mF(this.persistenceKey),this.bundleLoadedKey=mU(this.persistenceKey),this.window.addEventListener("storage",this.storageListener)}static isAvailable($){return!!($&&$.localStorage)}async start(){for(let $ of(await this.syncEngine.getActiveClients())){if($===this.localClientId)continue;let ee=this.getItem(mN(this.persistenceKey,$));if(ee){let et=mW.fromWebStorageEntry($,ee);et&&(this.activeClients=this.activeClients.insert(et.clientId,et))}}this.persistClientState();let $=this.storage.getItem(this.onlineStateKey);if($){let ee=this.fromWebStorageOnlineState($);ee&&this.handleOnlineStateEvent(ee)}for(let $ of this.earlyEvents)this.handleWebStorageEvent($);this.earlyEvents=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber($){this.setItem(this.sequenceNumberKey,JSON.stringify($))}getAllActiveQueryTargets(){return this.extractActiveQueryTargets(this.activeClients)}isActiveQueryTarget($){let ee=!1;return this.activeClients.forEach((et,er)=>{er.activeTargetIds.has($)&&(ee=!0)}),ee}addPendingMutation($){this.persistMutationState($,"pending")}updateMutationState($,ee,et){this.persistMutationState($,ee,et),this.removeMutationState($)}addLocalQueryTarget($){let ee="not-current";if(this.isActiveQueryTarget($)){let et=this.storage.getItem(mj(this.persistenceKey,$));if(et){let er=mG.fromWebStorageEntry($,et);er&&(ee=er.state)}}return this.localClientState.addQueryTarget($),this.persistClientState(),ee}removeLocalQueryTarget($){this.localClientState.removeQueryTarget($),this.persistClientState()}isLocalQueryTarget($){return this.localClientState.activeTargetIds.has($)}clearQueryState($){this.removeItem(mj(this.persistenceKey,$))}updateQueryState($,ee,et){this.persistQueryTargetState($,ee,et)}handleUserChange($,ee,et){ee.forEach($=>{this.removeMutationState($)}),this.currentUser=$,et.forEach($=>{this.addPendingMutation($)})}setOnlineState($){this.persistOnlineState($)}notifyBundleLoaded($){this.persistBundleLoadedState($)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)}getItem($){let ee=this.storage.getItem($);return iz(mH,"READ",$,ee),ee}setItem($,ee){iz(mH,"SET",$,ee),this.storage.setItem($,ee)}removeItem($){iz(mH,"REMOVE",$),this.storage.removeItem($)}handleWebStorageEvent($){let ee=$;if(ee.storageArea===this.storage){if(iz(mH,"EVENT",ee.key,ee.newValue),ee.key===this.localClientStorageKey){iq("Received WebStorage notification for local change. Another client might have garbage-collected our state");return}this.queue.enqueueRetryable(async()=>{if(!this.started){this.earlyEvents.push(ee);return}if(null!==ee.key){if(this.clientStateKeyRe.test(ee.key)){if(null!=ee.newValue){let $=this.fromWebStorageClientState(ee.key,ee.newValue);if($)return this.handleClientStateEvent($.clientId,$)}else{let $=this.fromWebStorageClientStateKey(ee.key);return this.handleClientStateEvent($,null)}}else if(this.mutationBatchKeyRe.test(ee.key)){if(null!==ee.newValue){let $=this.fromWebStorageMutationMetadata(ee.key,ee.newValue);if($)return this.handleMutationBatchEvent($)}}else if(this.queryTargetKeyRe.test(ee.key)){if(null!==ee.newValue){let $=this.fromWebStorageQueryTargetMetadata(ee.key,ee.newValue);if($)return this.handleQueryTargetEvent($)}}else if(ee.key===this.onlineStateKey){if(null!==ee.newValue){let $=this.fromWebStorageOnlineState(ee.newValue);if($)return this.handleOnlineStateEvent($)}}else if(ee.key===this.sequenceNumberKey){let $=mX(ee.newValue);$!==sJ.INVALID&&this.sequenceNumberHandler($)}else if(ee.key===this.bundleLoadedKey){let $=this.fromWebStoreBundleLoadedState(ee.newValue);await Promise.all($.map($=>this.syncEngine.synchronizeWithChangedDocuments($)))}}})}}get localClientState(){return this.activeClients.get(this.localClientId)}persistClientState(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())}persistMutationState($,ee,et){let er=new m$(this.currentUser,$,ee,et),en=mM(this.persistenceKey,this.currentUser,$);this.setItem(en,er.toWebStorageJSON())}removeMutationState($){let ee=mM(this.persistenceKey,this.currentUser,$);this.removeItem(ee)}persistOnlineState($){let ee={clientId:this.localClientId,onlineState:$};this.storage.setItem(this.onlineStateKey,JSON.stringify(ee))}persistQueryTargetState($,ee,et){let er=mj(this.persistenceKey,$),en=new mG($,ee,et);this.setItem(er,en.toWebStorageJSON())}persistBundleLoadedState($){let ee=JSON.stringify(Array.from($));this.setItem(this.bundleLoadedKey,ee)}fromWebStorageClientStateKey($){let ee=this.clientStateKeyRe.exec($);return ee?ee[1]:null}fromWebStorageClientState($,ee){let et=this.fromWebStorageClientStateKey($);return mW.fromWebStorageEntry(et,ee)}fromWebStorageMutationMetadata($,ee){let et=this.mutationBatchKeyRe.exec($),er=Number(et[1]),en=void 0!==et[2]?et[2]:null;return m$.fromWebStorageEntry(new iL(en),er,ee)}fromWebStorageQueryTargetMetadata($,ee){let et=Number(this.queryTargetKeyRe.exec($)[1]);return mG.fromWebStorageEntry(et,ee)}fromWebStorageOnlineState($){return mK.fromWebStorageEntry($)}fromWebStoreBundleLoadedState($){return JSON.parse($)}async handleMutationBatchEvent($){if($.user.uid!==this.currentUser.uid){iz(mH,`Ignoring mutation for non-active user ${$.user.uid}`);return}return this.syncEngine.applyBatchState($.batchId,$.state,$.error)}handleQueryTargetEvent($){return this.syncEngine.applyTargetState($.targetId,$.state,$.error)}handleClientStateEvent($,ee){let et=ee?this.activeClients.insert($,ee):this.activeClients.remove($),er=this.extractActiveQueryTargets(this.activeClients),en=this.extractActiveQueryTargets(et),ei=[],es=[];return en.forEach($=>{er.has($)||ei.push($)}),er.forEach($=>{en.has($)||es.push($)}),this.syncEngine.applyActiveTargetsChange(ei,es).then(()=>{this.activeClients=et})}handleOnlineStateEvent($){this.activeClients.get($.clientId)&&this.onlineStateHandler($.onlineState)}extractActiveQueryTargets($){let ee=cl();return $.forEach(($,et)=>{ee=ee.unionWith(et.activeTargetIds)}),ee}}function mX($){let ee=sJ.INVALID;if(null!=$)try{let et=JSON.parse($);iW("number"==typeof et),ee=et}catch($){iq(mH,"Failed to read sequence number from WebStorage",$)}return ee}class mJ{constructor(){this.localState=new mQ,this.queryState={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation($){}updateMutationState($,ee,et){}addLocalQueryTarget($){return this.localState.addQueryTarget($),this.queryState[$]||"not-current"}updateQueryState($,ee,et){this.queryState[$]=ee}removeLocalQueryTarget($){this.localState.removeQueryTarget($)}isLocalQueryTarget($){return this.localState.activeTargetIds.has($)}clearQueryState($){delete this.queryState[$]}getAllActiveQueryTargets(){return this.localState.activeTargetIds}isActiveQueryTarget($){return this.localState.activeTargetIds.has($)}start(){return this.localState=new mQ,Promise.resolve()}handleUserChange($,ee,et){}setOnlineState($){}shutdown(){}writeSequenceNumber($){}notifyBundleLoaded($){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mZ{addCallback($){}shutdown(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor($){this.sendFn=$.sendFn,this.closeFn=$.closeFn}onOpen($){this.wrappedOnOpen=$}onClose($){this.wrappedOnClose=$}onMessage($){this.wrappedOnMessage=$}close(){this.closeFn()}send($){this.sendFn($)}callOnOpen(){this.wrappedOnOpen()}callOnClose($){this.wrappedOnClose($)}callOnMessage($){this.wrappedOnMessage($)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m1=null;function m2(){return 268435456+Math.round(2147483648*Math.random())}function m4(){return null===m1?m1=m2():m1++,"0x"+m1.toString(16)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3($){return new Promise((ee,et)=>{$(($,er)=>{$?et($):ee(er)})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m6="1.9.1",m5="GrpcConnection",m9=`gl-node/${process.versions.node} fire/${ij} grpc/${m6}`;function m8($,ee,et,er){iW(null===ee||"OAuth"===ee.type);let en=new iD.SF;return ee&&ee.headers.forEach(($,ee)=>en.set(ee,$)),et&&et.headers.forEach(($,ee)=>en.set(ee,$)),er&&en.set("X-Firebase-GMPID",er),en.set("X-Goog-Api-Client",m9),en.set("Google-Cloud-Resource-Prefix",$),en.set("x-goog-request-params",$),en}class m7{constructor($,ee){this.databaseInfo=ee,this.cachedStub=null,this.firestore=$.google.firestore.v1,this.databasePath=`projects/${ee.databaseId.projectId}/databases/${ee.databaseId.database}`}get shouldResourcePathBeIncludedInRequest(){return!0}ensureActiveStub(){if(!this.cachedStub){iz(m5,"Creating Firestore stub.");let $=this.databaseInfo.ssl?iD.K9.createSsl():iD.K9.createInsecure();this.cachedStub=new this.firestore.Firestore(this.databaseInfo.host,$)}return this.cachedStub}invokeRPC($,ee,et,er,en){let ei=m4(),es=this.ensureActiveStub(),eo=m8(this.databasePath,er,en,this.databaseInfo.appId),eu=Object.assign({database:this.databasePath},et);return m3(ee=>(iz(m5,`RPC '${$}' ${ei} invoked with request:`,et),es[$](eu,eo,(et,er)=>{et?(iz(m5,`RPC '${$}' ${ei} failed with error:`,et),ee(new iY(de(et.code),et.message))):(iz(m5,`RPC '${$}' ${ei} completed with response:`,er),ee(void 0,er))})))}invokeStreamingRPC($,ee,et,er,en,ei){let es=m4(),eo=[],eu=new iX;iz(m5,`RPC '${$}' ${es} invoked (streaming) with request:`,et);let eh=this.ensureActiveStub(),ef=m8(this.databasePath,er,en,this.databaseInfo.appId),ep=Object.assign(Object.assign({},et),{database:this.databasePath}),eg=eh[$](ep,ef),em=!1;return eg.on("data",ee=>{iz(m5,`RPC ${$} ${es} received result:`,ee),eo.push(ee),void 0!==ei&&eo.length===ei&&(em=!0,eu.resolve(eo))}),eg.on("end",()=>{iz(m5,`RPC '${$}' ${es} completed.`),em||(em=!0,eu.resolve(eo))}),eg.on("error",ee=>{iz(m5,`RPC '${$}' ${es} failed with error:`,ee);let et=de(ee.code);eu.reject(new iY(et,ee.message))}),eu.promise}openStream($,ee,et){let er=m4(),en=this.ensureActiveStub(),ei=m8(this.databasePath,ee,et,this.databaseInfo.appId),es=en[$](ei),eo=!1,eu=$=>{eo||(eo=!0,eh.callOnClose($),es.end())},eh=new m0({sendFn:ee=>{if(eo)iz(m5,`RPC '${$}' stream ${er} not sending because gRPC stream is closed:`,ee);else{iz(m5,`RPC '${$}' stream ${er} sending:`,ee);try{es.write(ee)}catch($){throw iq("Failure sending:",ee),iq("Error:",$),$}}},closeFn:()=>{iz(m5,`RPC '${$}' stream ${er} closed locally via close().`),eu()}});return es.on("data",ee=>{eo||(iz(m5,`RPC '${$}' stream ${er} received:`,ee),eh.callOnMessage(ee))}),es.on("end",()=>{iz(m5,`RPC '${$}' stream ${er} ended.`),eu()}),es.on("error",ee=>{eo||(iH(m5,`RPC '${$}' stream ${er} error. Code:`,ee.code,"Message:",ee.message),eu(new iY(de(ee.code),ee.message)))}),iz(m5,`Opening RPC '${$}' stream ${er} to ${this.databaseInfo.host}`),setTimeout(()=>{eh.callOnOpen()},0),eh}terminate(){this.cachedStub&&(this.cachedStub.close(),this.cachedStub=void 0)}}let ye={google:{nested:{protobuf:{options:{csharp_namespace:"Google.Protobuf.WellKnownTypes",go_package:"github.com/golang/protobuf/ptypes/wrappers",java_package:"com.google.protobuf",java_outer_classname:"WrappersProto",java_multiple_files:!0,objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{Timestamp:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}},FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}},Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},Empty:{fields:{}},DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}},Any:{fields:{typeUrl:{type:"string",id:1},value:{type:"bytes",id:2}}}}},firestore:{nested:{v1:{options:{csharp_namespace:"Google.Cloud.Firestore.V1",go_package:"google.golang.org/genproto/googleapis/firestore/v1;firestore",java_multiple_files:!0,java_outer_classname:"WriteProto",java_package:"com.google.firestore.v1",objc_class_prefix:"GCFS",php_namespace:"Google\\Cloud\\Firestore\\V1",ruby_package:"Google::Cloud::Firestore::V1"},nested:{AggregationResult:{fields:{aggregateFields:{keyType:"string",type:"Value",id:2}}},BitSequence:{fields:{bitmap:{type:"bytes",id:1},padding:{type:"int32",id:2}}},BloomFilter:{fields:{bits:{type:"BitSequence",id:1},hashCount:{type:"int32",id:2}}},DocumentMask:{fields:{fieldPaths:{rule:"repeated",type:"string",id:1}}},Precondition:{oneofs:{conditionType:{oneof:["exists","updateTime"]}},fields:{exists:{type:"bool",id:1},updateTime:{type:"google.protobuf.Timestamp",id:2}}},TransactionOptions:{oneofs:{mode:{oneof:["readOnly","readWrite"]}},fields:{readOnly:{type:"ReadOnly",id:2},readWrite:{type:"ReadWrite",id:3}},nested:{ReadWrite:{fields:{retryTransaction:{type:"bytes",id:1}}},ReadOnly:{oneofs:{consistencySelector:{oneof:["readTime"]}},fields:{readTime:{type:"google.protobuf.Timestamp",id:2}}}}},Document:{fields:{name:{type:"string",id:1},fields:{keyType:"string",type:"Value",id:2},createTime:{type:"google.protobuf.Timestamp",id:3},updateTime:{type:"google.protobuf.Timestamp",id:4}}},Value:{oneofs:{valueType:{oneof:["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},fields:{nullValue:{type:"google.protobuf.NullValue",id:11},booleanValue:{type:"bool",id:1},integerValue:{type:"int64",id:2},doubleValue:{type:"double",id:3},timestampValue:{type:"google.protobuf.Timestamp",id:10},stringValue:{type:"string",id:17},bytesValue:{type:"bytes",id:18},referenceValue:{type:"string",id:5},geoPointValue:{type:"google.type.LatLng",id:8},arrayValue:{type:"ArrayValue",id:9},mapValue:{type:"MapValue",id:6}}},ArrayValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},MapValue:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Firestore:{options:{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},methods:{GetDocument:{requestType:"GetDocumentRequest",responseType:"Document",options:{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},ListDocuments:{requestType:"ListDocumentsRequest",responseType:"ListDocumentsResponse",options:{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},UpdateDocument:{requestType:"UpdateDocumentRequest",responseType:"Document",options:{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},parsedOptions:[{"(google.api.http)":{patch:"/v1/{document.name=projects/*/databases/*/documents/*/**}",body:"document"}},{"(google.api.method_signature)":"document,update_mask"}]},DeleteDocument:{requestType:"DeleteDocumentRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},parsedOptions:[{"(google.api.http)":{delete:"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},BatchGetDocuments:{requestType:"BatchGetDocumentsRequest",responseType:"BatchGetDocumentsResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchGet",body:"*"}}]},BeginTransaction:{requestType:"BeginTransactionRequest",responseType:"BeginTransactionResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:beginTransaction",body:"*"}},{"(google.api.method_signature)":"database"}]},Commit:{requestType:"CommitRequest",responseType:"CommitResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:commit",body:"*"}},{"(google.api.method_signature)":"database,writes"}]},Rollback:{requestType:"RollbackRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:rollback",body:"*"}},{"(google.api.method_signature)":"database,transaction"}]},RunQuery:{requestType:"RunQueryRequest",responseType:"RunQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery",body:"*"}}}]},RunAggregationQuery:{requestType:"RunAggregationQueryRequest",responseType:"RunAggregationQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery",body:"*"}}}]},PartitionQuery:{requestType:"PartitionQueryRequest",responseType:"PartitionQueryResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:partitionQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery",body:"*"}}}]},Write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:write",body:"*"}}]},Listen:{requestType:"ListenRequest",requestStream:!0,responseType:"ListenResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:listen",body:"*"}}]},ListCollectionIds:{requestType:"ListCollectionIdsRequest",responseType:"ListCollectionIdsResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds",body:"*"}}},{"(google.api.method_signature)":"parent"}]},BatchWrite:{requestType:"BatchWriteRequest",responseType:"BatchWriteResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchWrite",body:"*"}}]},CreateDocument:{requestType:"CreateDocumentRequest",responseType:"Document",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}",body:"document"}}]}}},GetDocumentRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:5}}},ListDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:3},pageToken:{type:"string",id:4},orderBy:{type:"string",id:6},mask:{type:"DocumentMask",id:7},transaction:{type:"bytes",id:8},readTime:{type:"google.protobuf.Timestamp",id:10},showMissing:{type:"bool",id:12}}},ListDocumentsResponse:{fields:{documents:{rule:"repeated",type:"Document",id:1},nextPageToken:{type:"string",id:2}}},CreateDocumentRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},documentId:{type:"string",id:3},document:{type:"Document",id:4,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:5}}},UpdateDocumentRequest:{fields:{document:{type:"Document",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},updateMask:{type:"DocumentMask",id:2},mask:{type:"DocumentMask",id:3},currentDocument:{type:"Precondition",id:4}}},DeleteDocumentRequest:{fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},currentDocument:{type:"Precondition",id:2}}},BatchGetDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},documents:{rule:"repeated",type:"string",id:2},mask:{type:"DocumentMask",id:3},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:7}}},BatchGetDocumentsResponse:{oneofs:{result:{oneof:["found","missing"]}},fields:{found:{type:"Document",id:1},missing:{type:"string",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:4}}},BeginTransactionRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},options:{type:"TransactionOptions",id:2}}},BeginTransactionResponse:{fields:{transaction:{type:"bytes",id:1}}},CommitRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},transaction:{type:"bytes",id:3}}},CommitResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},commitTime:{type:"google.protobuf.Timestamp",id:2}}},RollbackRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},transaction:{type:"bytes",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}}}},RunQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},transaction:{type:"bytes",id:5},newTransaction:{type:"TransactionOptions",id:6},readTime:{type:"google.protobuf.Timestamp",id:7}}},RunQueryResponse:{fields:{transaction:{type:"bytes",id:2},document:{type:"Document",id:1},readTime:{type:"google.protobuf.Timestamp",id:3},skippedResults:{type:"int32",id:4}}},RunAggregationQueryRequest:{oneofs:{queryType:{oneof:["structuredAggregationQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredAggregationQuery:{type:"StructuredAggregationQuery",id:2},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:6}}},RunAggregationQueryResponse:{fields:{result:{type:"AggregationResult",id:1},transaction:{type:"bytes",id:2},readTime:{type:"google.protobuf.Timestamp",id:3}}},PartitionQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},partitionCount:{type:"int64",id:3},pageToken:{type:"string",id:4},pageSize:{type:"int32",id:5}}},PartitionQueryResponse:{fields:{partitions:{rule:"repeated",type:"Cursor",id:1},nextPageToken:{type:"string",id:2}}},WriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},streamId:{type:"string",id:2},writes:{rule:"repeated",type:"Write",id:3},streamToken:{type:"bytes",id:4},labels:{keyType:"string",type:"string",id:5}}},WriteResponse:{fields:{streamId:{type:"string",id:1},streamToken:{type:"bytes",id:2},writeResults:{rule:"repeated",type:"WriteResult",id:3},commitTime:{type:"google.protobuf.Timestamp",id:4}}},ListenRequest:{oneofs:{targetChange:{oneof:["addTarget","removeTarget"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},addTarget:{type:"Target",id:2},removeTarget:{type:"int32",id:3},labels:{keyType:"string",type:"string",id:4}}},ListenResponse:{oneofs:{responseType:{oneof:["targetChange","documentChange","documentDelete","documentRemove","filter"]}},fields:{targetChange:{type:"TargetChange",id:2},documentChange:{type:"DocumentChange",id:3},documentDelete:{type:"DocumentDelete",id:4},documentRemove:{type:"DocumentRemove",id:6},filter:{type:"ExistenceFilter",id:5}}},Target:{oneofs:{targetType:{oneof:["query","documents"]},resumeType:{oneof:["resumeToken","readTime"]}},fields:{query:{type:"QueryTarget",id:2},documents:{type:"DocumentsTarget",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:11},targetId:{type:"int32",id:5},once:{type:"bool",id:6},expectedCount:{type:"google.protobuf.Int32Value",id:12}},nested:{DocumentsTarget:{fields:{documents:{rule:"repeated",type:"string",id:2}}},QueryTarget:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1},structuredQuery:{type:"StructuredQuery",id:2}}}}},TargetChange:{fields:{targetChangeType:{type:"TargetChangeType",id:1},targetIds:{rule:"repeated",type:"int32",id:2},cause:{type:"google.rpc.Status",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:6}},nested:{TargetChangeType:{values:{NO_CHANGE:0,ADD:1,REMOVE:2,CURRENT:3,RESET:4}}}},ListCollectionIdsRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:2},pageToken:{type:"string",id:3}}},ListCollectionIdsResponse:{fields:{collectionIds:{rule:"repeated",type:"string",id:1},nextPageToken:{type:"string",id:2}}},BatchWriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},labels:{keyType:"string",type:"string",id:3}}},BatchWriteResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},status:{rule:"repeated",type:"google.rpc.Status",id:2}}},StructuredQuery:{fields:{select:{type:"Projection",id:1},from:{rule:"repeated",type:"CollectionSelector",id:2},where:{type:"Filter",id:3},orderBy:{rule:"repeated",type:"Order",id:4},startAt:{type:"Cursor",id:7},endAt:{type:"Cursor",id:8},offset:{type:"int32",id:6},limit:{type:"google.protobuf.Int32Value",id:5}},nested:{CollectionSelector:{fields:{collectionId:{type:"string",id:2},allDescendants:{type:"bool",id:3}}},Filter:{oneofs:{filterType:{oneof:["compositeFilter","fieldFilter","unaryFilter"]}},fields:{compositeFilter:{type:"CompositeFilter",id:1},fieldFilter:{type:"FieldFilter",id:2},unaryFilter:{type:"UnaryFilter",id:3}}},CompositeFilter:{fields:{op:{type:"Operator",id:1},filters:{rule:"repeated",type:"Filter",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,AND:1,OR:2}}}},FieldFilter:{fields:{field:{type:"FieldReference",id:1},op:{type:"Operator",id:2},value:{type:"Value",id:3}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,LESS_THAN:1,LESS_THAN_OR_EQUAL:2,GREATER_THAN:3,GREATER_THAN_OR_EQUAL:4,EQUAL:5,NOT_EQUAL:6,ARRAY_CONTAINS:7,IN:8,ARRAY_CONTAINS_ANY:9,NOT_IN:10}}}},UnaryFilter:{oneofs:{operandType:{oneof:["field"]}},fields:{op:{type:"Operator",id:1},field:{type:"FieldReference",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,IS_NAN:2,IS_NULL:3,IS_NOT_NAN:4,IS_NOT_NULL:5}}}},Order:{fields:{field:{type:"FieldReference",id:1},direction:{type:"Direction",id:2}}},FieldReference:{fields:{fieldPath:{type:"string",id:2}}},Projection:{fields:{fields:{rule:"repeated",type:"FieldReference",id:2}}},Direction:{values:{DIRECTION_UNSPECIFIED:0,ASCENDING:1,DESCENDING:2}}}},StructuredAggregationQuery:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{structuredQuery:{type:"StructuredQuery",id:1},aggregations:{rule:"repeated",type:"Aggregation",id:3}},nested:{Aggregation:{oneofs:{operator:{oneof:["count","sum","avg"]}},fields:{count:{type:"Count",id:1},sum:{type:"Sum",id:2},avg:{type:"Avg",id:3},alias:{type:"string",id:7}},nested:{Count:{fields:{upTo:{type:"google.protobuf.Int64Value",id:1}}},Sum:{fields:{field:{type:"FieldReference",id:1}}},Avg:{fields:{field:{type:"FieldReference",id:1}}}}}}},Cursor:{fields:{values:{rule:"repeated",type:"Value",id:1},before:{type:"bool",id:2}}},Write:{oneofs:{operation:{oneof:["update","delete","verify","transform"]}},fields:{update:{type:"Document",id:1},delete:{type:"string",id:2},verify:{type:"string",id:5},transform:{type:"DocumentTransform",id:6},updateMask:{type:"DocumentMask",id:3},updateTransforms:{rule:"repeated",type:"DocumentTransform.FieldTransform",id:7},currentDocument:{type:"Precondition",id:4}}},DocumentTransform:{fields:{document:{type:"string",id:1},fieldTransforms:{rule:"repeated",type:"FieldTransform",id:2}},nested:{FieldTransform:{oneofs:{transformType:{oneof:["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},fields:{fieldPath:{type:"string",id:1},setToServerValue:{type:"ServerValue",id:2},increment:{type:"Value",id:3},maximum:{type:"Value",id:4},minimum:{type:"Value",id:5},appendMissingElements:{type:"ArrayValue",id:6},removeAllFromArray:{type:"ArrayValue",id:7}},nested:{ServerValue:{values:{SERVER_VALUE_UNSPECIFIED:0,REQUEST_TIME:1}}}}}},WriteResult:{fields:{updateTime:{type:"google.protobuf.Timestamp",id:1},transformResults:{rule:"repeated",type:"Value",id:2}}},DocumentChange:{fields:{document:{type:"Document",id:1},targetIds:{rule:"repeated",type:"int32",id:5},removedTargetIds:{rule:"repeated",type:"int32",id:6}}},DocumentDelete:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:6},readTime:{type:"google.protobuf.Timestamp",id:4}}},DocumentRemove:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:2},readTime:{type:"google.protobuf.Timestamp",id:4}}},ExistenceFilter:{fields:{targetId:{type:"int32",id:1},count:{type:"int32",id:2},unchangedNames:{type:"BloomFilter",id:3}}}}}}},api:{options:{go_package:"google.golang.org/genproto/googleapis/api/annotations;annotations",java_multiple_files:!0,java_outer_classname:"HttpProto",java_package:"com.google.api",objc_class_prefix:"GAPI",cc_enable_arenas:!0},nested:{http:{type:"HttpRule",id:72295728,extend:"google.protobuf.MethodOptions"},Http:{fields:{rules:{rule:"repeated",type:"HttpRule",id:1}}},HttpRule:{oneofs:{pattern:{oneof:["get","put","post","delete","patch","custom"]}},fields:{get:{type:"string",id:2},put:{type:"string",id:3},post:{type:"string",id:4},delete:{type:"string",id:5},patch:{type:"string",id:6},custom:{type:"CustomHttpPattern",id:8},selector:{type:"string",id:1},body:{type:"string",id:7},additionalBindings:{rule:"repeated",type:"HttpRule",id:11}}},CustomHttpPattern:{fields:{kind:{type:"string",id:1},path:{type:"string",id:2}}},methodSignature:{rule:"repeated",type:"string",id:1051,extend:"google.protobuf.MethodOptions"},defaultHost:{type:"string",id:1049,extend:"google.protobuf.ServiceOptions"},oauthScopes:{type:"string",id:1050,extend:"google.protobuf.ServiceOptions"},fieldBehavior:{rule:"repeated",type:"google.api.FieldBehavior",id:1052,extend:"google.protobuf.FieldOptions"},FieldBehavior:{values:{FIELD_BEHAVIOR_UNSPECIFIED:0,OPTIONAL:1,REQUIRED:2,OUTPUT_ONLY:3,INPUT_ONLY:4,IMMUTABLE:5,UNORDERED_LIST:6,NON_EMPTY_DEFAULT:7}}}},type:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/type/latlng;latlng",java_multiple_files:!0,java_outer_classname:"LatLngProto",java_package:"com.google.type",objc_class_prefix:"GTP"},nested:{LatLng:{fields:{latitude:{type:"double",id:1},longitude:{type:"double",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/status;status",java_multiple_files:!0,java_outer_classname:"StatusProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}}}}}}};var yt={nested:ye},yr=Object.freeze({__proto__:null,nested:ye,default:yt});/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yn={longs:String,enums:String,defaults:!0,oneofs:!1};function yi(){let $=iN.im(yr,yn);return iD.Rz($)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys($){return new m7(yi(),$)}function yo(){return new mZ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(){return"YES"===process.env.USE_MOCK_PERSISTENCE?window:null}function yu(){return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh($){return new dA($,!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf="ExponentialBackoff",yp=1e3,yg=1.5,ym=6e4;class yy{constructor($,ee,et=yp,er=yg,en=ym){this.queue=$,this.timerId=ee,this.initialDelayMs=et,this.backoffFactor=er,this.maxDelayMs=en,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun($){this.cancel();let ee=Math.floor(this.currentBaseMs+this.jitterDelayMs()),et=Math.max(0,Date.now()-this.lastAttemptTime),er=Math.max(0,ee-et);er>0&&iz(yf,`Backing off for ${er} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${ee} ms, last attempt: ${et} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,er,()=>(this.lastAttemptTime=Date.now(),$())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){null!==this.timerPromise&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yv="PersistentStream",yS=6e4,yT=1e4;class yw{constructor($,ee,et,er,en,ei,es,eo){this.queue=$,this.idleTimerId=et,this.healthTimerId=er,this.connection=en,this.authCredentialsProvider=ei,this.appCheckCredentialsProvider=es,this.listener=eo,this.state=0,this.closeCount=0,this.idleTimer=null,this.healthCheck=null,this.stream=null,this.backoff=new yy($,ee)}isStarted(){return 1===this.state||5===this.state||this.isOpen()}isOpen(){return 2===this.state||3===this.state}start(){if(4===this.state){this.performBackoff();return}this.auth()}async stop(){this.isStarted()&&await this.close(0)}inhibitBackoff(){this.state=0,this.backoff.reset()}markIdle(){this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,yS,()=>this.handleIdleCloseTimer()))}sendRequest($){this.cancelIdleCheck(),this.stream.send($)}async handleIdleCloseTimer(){if(this.isOpen())return this.close(0)}cancelIdleCheck(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)}cancelHealthCheck(){this.healthCheck&&(this.healthCheck.cancel(),this.healthCheck=null)}async close($,ee){this.cancelIdleCheck(),this.cancelHealthCheck(),this.backoff.cancel(),this.closeCount++,4!==$?this.backoff.reset():ee&&ee.code===iQ.RESOURCE_EXHAUSTED?(iq(ee.toString()),iq("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):ee&&ee.code===iQ.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=$,await this.listener.onClose(ee)}tearDown(){}auth(){this.state=1;let $=this.getCloseGuardedDispatcher(this.closeCount),ee=this.closeCount;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([$,et])=>{this.closeCount===ee&&this.startStream($,et)},ee=>{$(()=>{let $=new iY(iQ.UNKNOWN,"Fetching auth token failed: "+ee.message);return this.handleStreamClose($)})})}startStream($,ee){let et=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc($,ee),this.stream.onOpen(()=>{et(()=>(this.state=2,this.healthCheck=this.queue.enqueueAfterDelay(this.healthTimerId,yT,()=>(this.isOpen()&&(this.state=3),Promise.resolve())),this.listener.onOpen()))}),this.stream.onClose($=>{et(()=>this.handleStreamClose($))}),this.stream.onMessage($=>{et(()=>this.onMessage($))})}performBackoff(){this.state=5,this.backoff.backoffAndRun(async()=>{this.state=0,this.start()})}handleStreamClose($){return iz(yv,`close with error: ${$}`),this.stream=null,this.close(4,$)}getCloseGuardedDispatcher($){return ee=>{this.queue.enqueueAndForget(()=>this.closeCount===$?ee():(iz(yv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yE extends yw{constructor($,ee,et,er,en,ei){super($,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",ee,et,er,ei),this.serializer=en}startRpc($,ee){return this.connection.openStream("Listen",$,ee)}onMessage($){this.backoff.reset();let ee=d3(this.serializer,$),et=d5($);return this.listener.onWatchChange(ee,et)}watch($){let ee={};ee.database=dW(this.serializer),ee.addTarget=hy(this.serializer,$);let et=hg(this.serializer,$);et&&(ee.labels=et),this.sendRequest(ee)}unwatch($){let ee={};ee.database=dW(this.serializer),ee.removeTarget=$,this.sendRequest(ee)}}class yC extends null{constructor($,ee,et,er,en,ei){super($,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",ee,et,er,ei),this.serializer=en,this.handshakeComplete_=!1}get handshakeComplete(){return this.handshakeComplete_}start(){this.handshakeComplete_=!1,this.lastStreamToken=void 0,super.start()}tearDown(){this.handshakeComplete_&&this.writeMutations([])}startRpc($,ee){return this.connection.openStream("Write",$,ee)}onMessage($){if(iW(!!$.streamToken),this.lastStreamToken=$.streamToken,!this.handshakeComplete_)return iW(!$.writeResults||0===$.writeResults.length),this.handshakeComplete_=!0,this.listener.onHandshakeComplete();{this.backoff.reset();let ee=hr($.writeResults,$.commitTime),et=dF($.commitTime);return this.listener.onMutationResult(et,ee)}}writeHandshake(){let $={};$.database=dW(this.serializer),this.sendRequest($)}writeMutations($){let ee={streamToken:this.lastStreamToken,writes:$.map($=>d9(this.serializer,$))};this.sendRequest(ee)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{}class yR extends y_{constructor($,ee,et,er){super(),this.authCredentials=$,this.appCheckCredentials=ee,this.connection=et,this.serializer=er,this.terminated=!1}verifyInitialized(){if(this.terminated)throw new iY(iQ.FAILED_PRECONDITION,"The client has already been terminated.")}invokeRPC($,ee,et,er){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([en,ei])=>this.connection.invokeRPC($,dU(ee,et),er,en,ei)).catch($=>{if("FirebaseError"===$.name)throw $.code===iQ.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),$;throw new iY(iQ.UNKNOWN,$.toString())})}invokeStreamingRPC($,ee,et,er,en){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([ei,es])=>this.connection.invokeStreamingRPC($,dU(ee,et),er,ei,es,en)).catch($=>{if("FirebaseError"===$.name)throw $.code===iQ.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),$;throw new iY(iQ.UNKNOWN,$.toString())})}terminate(){this.terminated=!0,this.connection.terminate()}}function yx($,ee,et,er){return new yR($,ee,et,er)}async function yI($,ee){let et=iK($),er={writes:ee.map($=>d9(et.serializer,$))};await et.invokeRPC("Commit",et.serializer.databaseId,su.emptyPath(),er)}async function yP($,ee){let et=iK($),er={documents:ee.map($=>dq(et.serializer,$))},en=await et.invokeStreamingRPC("BatchGetDocuments",et.serializer.databaseId,su.emptyPath(),er,ee.length),ei=new Map;en.forEach($=>{let ee=d4(et.serializer,$);ei.set(ee.key.toString(),ee)});let es=[];return ee.forEach($=>{let ee=ei.get($.toString());iW(!!ee),es.push(ee)}),es}async function yA($,ee,et){var er;let en=iK($),{request:ei,aliasMap:es,parent:eo}=hh(en.serializer,uB(ee),et);en.connection.shouldResourcePathBeIncludedInRequest||delete ei.parent;let eu=(await en.invokeStreamingRPC("RunAggregationQuery",en.serializer.databaseId,eo,ei,1)).filter($=>!!$.result);iW(1===eu.length);let eh=null===(er=eu[0].result)||void 0===er?void 0:er.aggregateFields;return Object.keys(eh).reduce(($,ee)=>($[es[ee]]=eh[ee],$),{})}function yO($,ee,et){let er=iK($);return er.verifyInitialized(),new yC(ee,er.connection,er.authCredentials,er.appCheckCredentials,er.serializer,et)}function yD($,ee,et){let er=iK($);return er.verifyInitialized(),new yE(ee,er.connection,er.authCredentials,er.appCheckCredentials,er.serializer,et)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yN="OnlineStateTracker",yk=1,yM=1e4;class yL{constructor($,ee){this.asyncQueue=$,this.onlineStateHandler=ee,this.state="Unknown",this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}handleWatchStreamStart(){0===this.watchStreamFailures&&(this.setAndBroadcast("Unknown"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay("online_state_timeout",yM,()=>(this.onlineStateTimer=null,this.logClientOfflineWarningIfNecessary(`Backend didn't respond within ${yM/1e3} seconds.`),this.setAndBroadcast("Offline"),Promise.resolve())))}handleWatchStreamFailure($){"Online"===this.state?this.setAndBroadcast("Unknown"):(this.watchStreamFailures++,this.watchStreamFailures>=yk&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(`Connection failed ${yk} times. Most recent error: ${$.toString()}`),this.setAndBroadcast("Offline")))}set($){this.clearOnlineStateTimer(),this.watchStreamFailures=0,"Online"===$&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast($)}setAndBroadcast($){$!==this.state&&(this.state=$,this.onlineStateHandler($))}logClientOfflineWarningIfNecessary($){let ee=`Could not reach Cloud Firestore backend. ${$}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.shouldWarnClientIsOffline?(iq(ee),this.shouldWarnClientIsOffline=!1):iz(yN,ee)}clearOnlineStateTimer(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yj="RemoteStore",yB=10;class yF{constructor($,ee,et,er,en){this.localStore=$,this.datastore=ee,this.asyncQueue=et,this.remoteSyncer={},this.writePipeline=[],this.listenTargets=new Map,this.offlineCauses=new Set,this.onNetworkStatusChange=[],this.connectivityMonitor=en,this.connectivityMonitor.addCallback($=>{et.enqueueAndForget(async()=>{yY(this)&&(iz(yj,"Restarting streams for network reachability change."),await vl(this))})}),this.onlineStateTracker=new yL(et,er)}}function yV($,ee,et,er,en){return new yF($,ee,et,er,en)}async function yU($){if(yY($))for(let ee of $.onNetworkStatusChange)await ee(!0)}async function yz($){for(let ee of $.onNetworkStatusChange)await ee(!1)}async function yq($){let ee=iK($);iz(yj,"RemoteStore shutting down."),ee.offlineCauses.add(5),await yz(ee),ee.connectivityMonitor.shutdown(),ee.onlineStateTracker.set("Unknown")}function yH($,ee){let et=iK($);!et.listenTargets.has(ee.targetId)&&(et.listenTargets.set(ee.targetId,ee),yQ(et)?yK(et):vp(et).isOpen()&&yG(et,ee))}function y$($,ee){let et=iK($),er=vp(et);et.listenTargets.delete(ee),er.isOpen()&&yW(et,ee),0===et.listenTargets.size&&(er.isOpen()?er.markIdle():yY(et)&&et.onlineStateTracker.set("Unknown"))}function yG($,ee){if($.watchChangeAggregator.recordPendingTargetRequest(ee.targetId),ee.resumeToken.approximateByteSize()>0||ee.snapshotVersion.compareTo(ss.min())>0){let et=$.remoteSyncer.getRemoteKeysForTarget(ee.targetId).size;ee=ee.withExpectedCount(et)}vp($).watch(ee)}function yW($,ee){$.watchChangeAggregator.recordPendingTargetRequest(ee),vp($).unwatch(ee)}function yK($){$.watchChangeAggregator=new dE({getRemoteKeysForTarget:ee=>$.remoteSyncer.getRemoteKeysForTarget(ee),getTargetDataForTarget:ee=>$.listenTargets.get(ee)||null,getDatabaseId:()=>$.datastore.serializer.databaseId}),vp($).start(),$.onlineStateTracker.handleWatchStreamStart()}function yQ($){return yY($)&&!vp($).isStarted()&&$.listenTargets.size>0}function yY($){return 0===iK($).offlineCauses.size}function yX($){$.watchChangeAggregator=void 0}async function yJ($){$.listenTargets.forEach((ee,et)=>{yG($,ee)})}async function yZ($,ee){yX($),yQ($)?($.onlineStateTracker.handleWatchStreamFailure(ee),yK($)):$.onlineStateTracker.set("Unknown")}async function y0($,ee,et){if($.onlineStateTracker.set("Online"),ee instanceof dS&&2===ee.state&&ee.cause){try{await y5($,ee)}catch(et){iz(yj,"Failed to remove targets %s: %s ",ee.targetIds.join(","),et),await y4($,et)}return}if(ee instanceof dm?$.watchChangeAggregator.handleDocumentChange(ee):ee instanceof dy?$.watchChangeAggregator.handleExistenceFilter(ee):$.watchChangeAggregator.handleTargetChange(ee),!et.isEqual(ss.min()))try{let ee=await g7($.localStore);et.compareTo(ee)>=0&&await y6($,et)}catch(ee){iz(yj,"Failed to raise snapshot:",ee),await y4($,ee)}}async function y4($,ee,et){if(sU(ee))$.offlineCauses.add(1),await yz($),$.onlineStateTracker.set("Offline"),et||(et=()=>g7($.localStore)),$.asyncQueue.enqueueRetryable(async()=>{iz(yj,"Retrying IndexedDB access"),await et(),$.offlineCauses.delete(1),await yU($)});else throw ee}function y3($,ee){return ee().catch(et=>y4($,et,ee))}function y6($,ee){let et=$.watchChangeAggregator.createRemoteEvent(ee);return et.targetChanges.forEach((et,er)=>{if(et.resumeToken.approximateByteSize()>0){let en=$.listenTargets.get(er);en&&$.listenTargets.set(er,en.withResumeToken(et.resumeToken,ee))}}),et.targetMismatches.forEach((ee,et)=>{let er=$.listenTargets.get(ee);er&&($.listenTargets.set(ee,er.withResumeToken(oI.EMPTY_BYTE_STRING,er.snapshotVersion)),yW($,ee),yG($,new hW(er.target,ee,et,er.sequenceNumber)))}),$.remoteSyncer.applyRemoteEvent(et)}async function y5($,ee){let et=ee.cause;for(let er of ee.targetIds)$.listenTargets.has(er)&&(await $.remoteSyncer.rejectListen(er,et),$.listenTargets.delete(er),$.watchChangeAggregator.removeTarget(er))}async function y9($){let ee=iK($),et=vg(ee),er=ee.writePipeline.length>0?ee.writePipeline[ee.writePipeline.length-1].batchId:oW;for(;y8(ee);)try{let $=await mi(ee.localStore,er);if(null===$){0===ee.writePipeline.length&&et.markIdle();break}er=$.batchId,y7(ee,$)}catch($){await y4(ee,$)}ve(ee)&&vt(ee)}function y8($){return yY($)&&$.writePipeline.length<yB}function y7($,ee){$.writePipeline.push(ee);let et=vg($);et.isOpen()&&et.handshakeComplete&&et.writeMutations(ee.mutations)}function ve($){return yY($)&&!vg($).isStarted()&&$.writePipeline.length>0}function vt($){vg($).start()}async function vr($){vg($).writeHandshake()}async function vn($){let ee=vg($);for(let et of $.writePipeline)ee.writeMutations(et.mutations)}async function vi($,ee,et){let er=$.writePipeline.shift(),en=c6.from(er,ee,et);await y3($,()=>$.remoteSyncer.applySuccessfulWrite(en)),await y9($)}async function vs($,ee){ee&&vg($).handshakeComplete&&await vo($,ee),ve($)&&vt($)}async function vo($,ee){if(c7(ee.code)){let et=$.writePipeline.shift();vg($).inhibitBackoff(),await y3($,()=>$.remoteSyncer.rejectFailedWrite(et.batchId,ee)),await y9($)}}async function vl($){let ee=iK($);ee.offlineCauses.add(4),await yz(ee),ee.onlineStateTracker.set("Unknown"),ee.offlineCauses.delete(4),await yU(ee)}async function vu($,ee){let et=iK($);et.asyncQueue.verifyOperationInProgress(),iz(yj,"RemoteStore received new credentials");let er=yY(et);et.offlineCauses.add(3),await yz(et),er&&et.onlineStateTracker.set("Unknown"),await et.remoteSyncer.handleCredentialChange(ee),et.offlineCauses.delete(3),await yU(et)}async function vf($,ee){let et=iK($);ee?(et.offlineCauses.delete(2),await yU(et)):ee||(et.offlineCauses.add(2),await yz(et),et.onlineStateTracker.set("Unknown"))}function vp($){return $.watchStream||($.watchStream=yD($.datastore,$.asyncQueue,{onOpen:yJ.bind(null,$),onClose:yZ.bind(null,$),onWatchChange:y0.bind(null,$)}),$.onNetworkStatusChange.push(async ee=>{ee?($.watchStream.inhibitBackoff(),yQ($)?yK($):$.onlineStateTracker.set("Unknown")):(await $.watchStream.stop(),yX($))})),$.watchStream}function vg($){return $.writeStream||($.writeStream=yO($.datastore,$.asyncQueue,{onOpen:vr.bind(null,$),onClose:vs.bind(null,$),onHandshakeComplete:vn.bind(null,$),onMutationResult:vi.bind(null,$)}),$.onNetworkStatusChange.push(async ee=>{ee?($.writeStream.inhibitBackoff(),await y9($)):(await $.writeStream.stop(),$.writePipeline.length>0&&(iz(yj,`Stopping write stream with ${$.writePipeline.length} pending writes`),$.writePipeline=[]))})),$.writeStream}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm="AsyncQueue";class vy{constructor($,ee,et,er,en){this.asyncQueue=$,this.timerId=ee,this.targetTimeMs=et,this.op=er,this.removalCallback=en,this.deferred=new iX,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch($=>{})}get promise(){return this.deferred.promise}static createAndSchedule($,ee,et,er,en){let ei=new vy($,ee,Date.now()+et,er,en);return ei.start(et),ei}start($){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),$)}skipDelay(){return this.handleDelayElapsed()}cancel($){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new iY(iQ.CANCELLED,"Operation cancelled"+($?": "+$:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then($=>this.deferred.resolve($))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vv($,ee){if(iq(vm,`${ee}: ${$}`),sU($))return new iY(iQ.UNAVAILABLE,`${ee}: ${$}`);throw $}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor($){$?this.comparator=(ee,et)=>$(ee,et)||sp.comparator(ee.key,et.key):this.comparator=($,ee)=>sp.comparator($.key,ee.key),this.keyedMap=u5(),this.sortedSet=new om(this.comparator)}static emptySet($){return new vS($.comparator)}has($){return null!=this.keyedMap.get($)}get($){return this.keyedMap.get($)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf($){let ee=this.keyedMap.get($);return ee?this.sortedSet.indexOf(ee):-1}get size(){return this.sortedSet.size}forEach($){this.sortedSet.inorderTraversal((ee,et)=>($(ee),!1))}add($){let ee=this.delete($.key);return ee.copy(ee.keyedMap.insert($.key,$),ee.sortedSet.insert($,null))}delete($){let ee=this.get($);return ee?this.copy(this.keyedMap.remove($),this.sortedSet.remove(ee)):this}isEqual($){if(!($ instanceof vS)||this.size!==$.size)return!1;let ee=this.sortedSet.getIterator(),et=$.sortedSet.getIterator();for(;ee.hasNext();){let $=ee.getNext().key,er=et.getNext().key;if(!$.isEqual(er))return!1}return!0}toString(){let $=[];return(this.forEach(ee=>{$.push(ee.toString())}),0===$.length)?"DocumentSet ()":"DocumentSet (\n  "+$.join("  \n")+"\n)"}copy($,ee){let et=new vS;return et.comparator=this.comparator,et.keyedMap=$,et.sortedSet=ee,et}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.changeMap=new om(sp.comparator)}track($){let ee=$.doc.key,et=this.changeMap.get(ee);if(!et){this.changeMap=this.changeMap.insert(ee,$);return}0!==$.type&&3===et.type?this.changeMap=this.changeMap.insert(ee,$):3===$.type&&1!==et.type?this.changeMap=this.changeMap.insert(ee,{type:et.type,doc:$.doc}):2===$.type&&2===et.type?this.changeMap=this.changeMap.insert(ee,{type:2,doc:$.doc}):2===$.type&&0===et.type?this.changeMap=this.changeMap.insert(ee,{type:0,doc:$.doc}):1===$.type&&0===et.type?this.changeMap=this.changeMap.remove(ee):1===$.type&&2===et.type?this.changeMap=this.changeMap.insert(ee,{type:1,doc:et.doc}):0===$.type&&1===et.type?this.changeMap=this.changeMap.insert(ee,{type:2,doc:$.doc}):iG()}getChanges(){let $=[];return this.changeMap.inorderTraversal((ee,et)=>{$.push(et)}),$}}class vE{constructor($,ee,et,er,en,ei,es,eo,eu){this.query=$,this.docs=ee,this.oldDocs=et,this.docChanges=er,this.mutatedKeys=en,this.fromCache=ei,this.syncStateChanged=es,this.excludesMetadataChanges=eo,this.hasCachedResults=eu}static fromInitialDocuments($,ee,et,er,en){let ei=[];return ee.forEach($=>{ei.push({type:0,doc:$})}),new vE($,ee,vS.emptySet(ee),ei,et,er,!0,!1,en)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual($){if(this.fromCache!==$.fromCache||this.hasCachedResults!==$.hasCachedResults||this.syncStateChanged!==$.syncStateChanged||!this.mutatedKeys.isEqual($.mutatedKeys)||!u$(this.query,$.query)||!this.docs.isEqual($.docs)||!this.oldDocs.isEqual($.oldDocs))return!1;let ee=this.docChanges,et=$.docChanges;if(ee.length!==et.length)return!1;for(let $=0;$<ee.length;$++)if(ee[$].type!==et[$].type||!ee[$].doc.isEqual(et[$].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.viewSnap=void 0,this.listeners=[]}}function v_(){return new vR}class vR{constructor(){this.queries=new u2($=>uG($),u$),this.onlineState="Unknown",this.snapshotsInSyncListeners=new Set}}async function vx($,ee){let et=iK($),er=ee.query,en=!1,ei=et.queries.get(er);if(ei||(en=!0,ei=new vC),en)try{ei.viewSnap=await et.onListen(er)}catch(et){let $=vv(et,`Initialization of query '${uW(ee.query)}' failed`);ee.onError($);return}et.queries.set(er,ei),ei.listeners.push(ee),ee.applyOnlineStateChange(et.onlineState),ei.viewSnap&&ee.onViewSnapshot(ei.viewSnap)&&vD(et)}async function vI($,ee){let et=iK($),er=ee.query,en=!1,ei=et.queries.get(er);if(ei){let $=ei.listeners.indexOf(ee);$>=0&&(ei.listeners.splice($,1),en=0===ei.listeners.length)}if(en)return et.queries.delete(er),et.onUnlisten(er)}function vP($,ee){let et=iK($),er=!1;for(let $ of ee){let ee=$.query,en=et.queries.get(ee);if(en){for(let ee of en.listeners)ee.onViewSnapshot($)&&(er=!0);en.viewSnap=$}}er&&vD(et)}function vA($,ee,et){let er=iK($),en=er.queries.get(ee);if(en)for(let $ of en.listeners)$.onError(et);er.queries.delete(ee)}function vO($,ee){let et=iK($);et.onlineState=ee;let er=!1;et.queries.forEach(($,et)=>{for(let $ of et.listeners)$.applyOnlineStateChange(ee)&&(er=!0)}),er&&vD(et)}function vD($){$.snapshotsInSyncListeners.forEach($=>{$.next()})}class vN{constructor($,ee,et){this.query=$,this.queryObserver=ee,this.raisedInitialEvent=!1,this.snap=null,this.onlineState="Unknown",this.options=et||{}}onViewSnapshot($){if(!this.options.includeMetadataChanges){let ee=[];for(let et of $.docChanges)3!==et.type&&ee.push(et);$=new vE($.query,$.docs,$.oldDocs,ee,$.mutatedKeys,$.fromCache,$.syncStateChanged,!0,$.hasCachedResults)}let ee=!1;return this.raisedInitialEvent?this.shouldRaiseEvent($)&&(this.queryObserver.next($),ee=!0):this.shouldRaiseInitialEvent($,this.onlineState)&&(this.raiseInitialEvent($),ee=!0),this.snap=$,ee}onError($){this.queryObserver.error($)}applyOnlineStateChange($){this.onlineState=$;let ee=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,$)&&(this.raiseInitialEvent(this.snap),ee=!0),ee}shouldRaiseInitialEvent($,ee){if(!$.fromCache)return!0;let et="Offline"!==ee;return(!this.options.waitForSyncWhenOnline||!et)&&(!$.docs.isEmpty()||$.hasCachedResults||"Offline"===ee)}shouldRaiseEvent($){if($.docChanges.length>0)return!0;let ee=this.snap&&this.snap.hasPendingWrites!==$.hasPendingWrites;return(!!$.syncStateChanged||!!ee)&&!0===this.options.includeMetadataChanges}raiseInitialEvent($){$=vE.fromInitialDocuments($.query,$.docs,$.mutatedKeys,$.fromCache,$.hasCachedResults),this.raisedInitialEvent=!0,this.queryObserver.next($)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor($,ee,et,er){this.targetId=$,this.fromCache=ee,this.addedKeys=et,this.removedKeys=er}static fromSnapshot($,ee){let et=cs(),er=cs();for(let $ of ee.docChanges)switch($.type){case 0:et=et.add($.doc.key);break;case 1:er=er.add($.doc.key)}return new vk($,ee.fromCache,et,er)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor($){this.serializer=$}toDocumentKey($){return dH(this.serializer,$)}toMutableDocument($){return $.metadata.exists?dJ(this.serializer,$.document,!1):lF.newNoDocument(this.toDocumentKey($.metadata.name),this.toSnapshotVersion($.metadata.readTime))}toSnapshotVersion($){return dF($)}}class vL{constructor($,ee,et){this.bundleMetadata=$,this.localStore=ee,this.serializer=et,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vj($)}addSizedElement($){this.progress.bytesLoaded+=$.byteLength;let ee=this.progress.documentsLoaded;if($.payload.namedQuery)this.queries.push($.payload.namedQuery);else if($.payload.documentMetadata){this.documents.push({metadata:$.payload.documentMetadata}),!$.payload.documentMetadata.exists&&++ee;let et=su.fromString($.payload.documentMetadata.name);this.collectionGroups.add(et.get(et.length-2))}else $.payload.document&&(this.documents[this.documents.length-1].document=$.payload.document,++ee);return ee!==this.progress.documentsLoaded?(this.progress.documentsLoaded=ee,Object.assign({},this.progress)):null}getQueryDocumentMapping($){let ee=new Map,et=new vM(this.serializer);for(let er of $)if(er.metadata.queries){let $=et.toDocumentKey(er.metadata.name);for(let et of er.metadata.queries){let er=(ee.get(et)||cs()).add($);ee.set(et,er)}}return ee}async complete(){let $=await mE(this.localStore,new vM(this.serializer),this.documents,this.bundleMetadata.id),ee=this.getQueryDocumentMapping(this.documents);for(let $ of this.queries)await mR(this.localStore,$,ee.get($.name));return this.progress.taskState="Success",{progress:this.progress,changedCollectionGroups:this.collectionGroups,changedDocs:$}}}function vj($){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}}function vB($){return{taskState:"Success",documentsLoaded:$.totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor($){this.key=$}}class vV{constructor($){this.key=$}}class vU{constructor($,ee){this.query=$,this._syncedDocuments=ee,this.syncState=null,this.hasCachedResults=!1,this.current=!1,this.limboDocuments=cs(),this.mutatedKeys=cs(),this.docComparator=u0($),this.documentSet=new vS(this.docComparator)}get syncedDocuments(){return this._syncedDocuments}computeDocChanges($,ee){let et=ee?ee.changeSet:new vT,er=ee?ee.documentSet:this.documentSet,en=ee?ee.mutatedKeys:this.mutatedKeys,ei=er,es=!1,eo="F"===this.query.limitType&&er.size===this.query.limit?er.last():null,eu="L"===this.query.limitType&&er.size===this.query.limit?er.first():null;if($.inorderTraversal(($,ee)=>{let eh=er.get($),ef=uK(this.query,ee)?ee:null,ep=!!eh&&this.mutatedKeys.has(eh.key),eg=!!ef&&(ef.hasLocalMutations||this.mutatedKeys.has(ef.key)&&ef.hasCommittedMutations),em=!1;eh&&ef?eh.data.isEqual(ef.data)?ep!==eg&&(et.track({type:3,doc:ef}),em=!0):!this.shouldWaitForSyncedDocument(eh,ef)&&(et.track({type:2,doc:ef}),em=!0,(eo&&this.docComparator(ef,eo)>0||eu&&0>this.docComparator(ef,eu))&&(es=!0)):!eh&&ef?(et.track({type:0,doc:ef}),em=!0):eh&&!ef&&(et.track({type:1,doc:eh}),em=!0,(eo||eu)&&(es=!0)),em&&(ef?(ei=ei.add(ef),en=eg?en.add($):en.delete($)):(ei=ei.delete($),en=en.delete($)))}),null!==this.query.limit)for(;ei.size>this.query.limit;){let $="F"===this.query.limitType?ei.last():ei.first();ei=ei.delete($.key),en=en.delete($.key),et.track({type:1,doc:$})}return{documentSet:ei,changeSet:et,needsRefill:es,mutatedKeys:en}}shouldWaitForSyncedDocument($,ee){return $.hasLocalMutations&&ee.hasCommittedMutations&&!ee.hasLocalMutations}applyChanges($,ee,et,er){let en=this.documentSet;this.documentSet=$.documentSet,this.mutatedKeys=$.mutatedKeys;let ei=$.changeSet.getChanges();ei.sort(($,ee)=>vz($.type,ee.type)||this.docComparator($.doc,ee.doc)),this.applyTargetChange(et),er=null!=er&&er;let es=ee&&!er?this.updateLimboDocuments():[],eo=0===this.limboDocuments.size&&this.current&&!er?1:0,eu=eo!==this.syncState;return(this.syncState=eo,0!==ei.length||eu)?{snapshot:new vE(this.query,$.documentSet,en,ei,$.mutatedKeys,0===eo,eu,!1,!!et&&et.resumeToken.approximateByteSize()>0),limboChanges:es}:{limboChanges:es}}applyOnlineStateChange($){return this.current&&"Offline"===$?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new vT,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}}shouldBeInLimbo($){return!this._syncedDocuments.has($)&&!!this.documentSet.has($)&&!this.documentSet.get($).hasLocalMutations}applyTargetChange($){$&&($.addedDocuments.forEach($=>this._syncedDocuments=this._syncedDocuments.add($)),$.modifiedDocuments.forEach($=>{}),$.removedDocuments.forEach($=>this._syncedDocuments=this._syncedDocuments.delete($)),this.current=$.current)}updateLimboDocuments(){if(!this.current)return[];let $=this.limboDocuments;this.limboDocuments=cs(),this.documentSet.forEach($=>{this.shouldBeInLimbo($.key)&&(this.limboDocuments=this.limboDocuments.add($.key))});let ee=[];return $.forEach($=>{this.limboDocuments.has($)||ee.push(new vV($))}),this.limboDocuments.forEach(et=>{$.has(et)||ee.push(new vF(et))}),ee}synchronizeWithPersistedState($){this._syncedDocuments=$.remoteKeys,this.limboDocuments=cs();let ee=this.computeDocChanges($.documents);return this.applyChanges(ee,!0)}computeInitialSnapshot(){return vE.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,0===this.syncState,this.hasCachedResults)}}function vz($,ee){let et=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return iG()}};return et($)-et(ee)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vq="SyncEngine";class vH{constructor($,ee,et){this.query=$,this.targetId=ee,this.view=et}}class v${constructor($){this.key=$,this.receivedDocument=!1}}class vG{constructor($,ee,et,er,en,ei){this.localStore=$,this.remoteStore=ee,this.eventManager=et,this.sharedClientState=er,this.currentUser=en,this.maxConcurrentLimboResolutions=ei,this.syncEngineListener={},this.queryViewsByQuery=new u2($=>uG($),u$),this.queriesByTarget=new Map,this.enqueuedLimboResolutions=new Set,this.activeLimboTargetsByKey=new om(sp.comparator),this.activeLimboResolutionsByTarget=new Map,this.limboDocumentRefs=new ga,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=pO.forSyncEngine(),this.onlineState="Unknown",this._isPrimaryClient=void 0}get isPrimaryClient(){return!0===this._isPrimaryClient}}function vW($,ee,et,er,en,ei,es){let eo=new vG($,ee,et,er,en,ei);return es&&(eo._isPrimaryClient=!0),eo}async function vK($,ee){let et,er;let en=bE($),ei=en.queryViewsByQuery.get(ee);if(ei)et=ei.targetId,en.sharedClientState.addLocalQueryTarget(et),er=ei.view.computeInitialSnapshot();else{let $=await ml(en.localStore,uj(ee)),ei=en.sharedClientState.addLocalQueryTarget($.targetId);et=$.targetId,er=await vQ(en,ee,et,"current"===ei,$.resumeToken),en.isPrimaryClient&&yH(en.remoteStore,$)}return er}async function vQ($,ee,et,er,en){$.applyDocChanges=(ee,et,er)=>bo($,ee,et,er);let ei=await mf($.localStore,ee,!0),es=new vU(ee,ei.remoteKeys),eo=es.computeDocChanges(ei.documents),eu=dg.createSynthesizedTargetChangeForCurrentChange(et,er&&"Offline"!==$.onlineState,en),eh=es.applyChanges(eo,$.isPrimaryClient,eu);br($,et,eh.limboChanges);let ef=new vH(ee,et,es);return $.queryViewsByQuery.set(ee,ef),$.queriesByTarget.has(et)?$.queriesByTarget.get(et).push(ee):$.queriesByTarget.set(et,[ee]),eh.snapshot}async function vY($,ee){let et=iK($),er=et.queryViewsByQuery.get(ee),en=et.queriesByTarget.get(er.targetId);if(en.length>1){et.queriesByTarget.set(er.targetId,en.filter($=>!u$($,ee))),et.queryViewsByQuery.delete(ee);return}et.isPrimaryClient?(et.sharedClientState.removeLocalQueryTarget(er.targetId),et.sharedClientState.isActiveQueryTarget(er.targetId)||await mh(et.localStore,er.targetId,!1).then(()=>{et.sharedClientState.clearQueryState(er.targetId),y$(et.remoteStore,er.targetId),v7(et,er.targetId)}).catch(sN)):(v7(et,er.targetId),await mh(et.localStore,er.targetId,!0))}async function vX($,ee,et){let er=bC($);try{let $=await g3(er.localStore,ee);er.sharedClientState.addPendingMutation($.batchId),v9(er,$.batchId,et),await bs(er,$.changes),await y9(er.remoteStore)}catch(ee){let $=vv(ee,"Failed to persist write");et.reject($)}}async function vJ($,ee){let et=iK($);try{let $=await me(et.localStore,ee);ee.targetChanges.forEach(($,ee)=>{let er=et.activeLimboResolutionsByTarget.get(ee);er&&(iW($.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size<=1),$.addedDocuments.size>0?er.receivedDocument=!0:$.modifiedDocuments.size>0?iW(er.receivedDocument):$.removedDocuments.size>0&&(iW(er.receivedDocument),er.receivedDocument=!1))}),await bs(et,$,ee)}catch($){await sN($)}}function vZ($,ee,et){let er=iK($);if(er.isPrimaryClient&&0===et||!er.isPrimaryClient&&1===et){let $=[];er.queryViewsByQuery.forEach((et,er)=>{let en=er.view.applyOnlineStateChange(ee);en.snapshot&&$.push(en.snapshot)}),vO(er.eventManager,ee),$.length&&er.syncEngineListener.onWatchChange($),er.onlineState=ee,er.isPrimaryClient&&er.sharedClientState.setOnlineState(ee)}}async function v0($,ee,et){let er=iK($);er.sharedClientState.updateQueryState(ee,"rejected",et);let en=er.activeLimboResolutionsByTarget.get(ee),ei=en&&en.key;if(ei){let $=new om(sp.comparator);$=$.insert(ei,lF.newNoDocument(ei,ss.min()));let et=cs().add(ei),en=new dp(ss.min(),new Map,new om(i7),$,et);await vJ(er,en),er.activeLimboTargetsByKey=er.activeLimboTargetsByKey.remove(ei),er.activeLimboResolutionsByTarget.delete(ee),bi(er)}else await mh(er.localStore,ee,!1).then(()=>v7(er,ee,et)).catch(sN)}async function v4($,ee){let et=iK($),er=ee.batch.batchId;try{let $=await g6(et.localStore,ee);v8(et,er,null),v6(et,er),et.sharedClientState.updateMutationState(er,"acknowledged"),await bs(et,$)}catch($){await sN($)}}async function v3($,ee,et){let er=iK($);try{let $=await g9(er.localStore,ee);v8(er,ee,et),v6(er,ee),er.sharedClientState.updateMutationState(ee,"rejected",et),await bs(er,$)}catch($){await sN($)}}function v6($,ee){($.pendingWritesCallbacks.get(ee)||[]).forEach($=>{$.resolve()}),$.pendingWritesCallbacks.delete(ee)}function v5($,ee){$.pendingWritesCallbacks.forEach($=>{$.forEach($=>{$.reject(new iY(iQ.CANCELLED,ee))})}),$.pendingWritesCallbacks.clear()}function v9($,ee,et){let er=$.mutationUserCallbacks[$.currentUser.toKey()];er||(er=new om(i7)),er=er.insert(ee,et),$.mutationUserCallbacks[$.currentUser.toKey()]=er}function v8($,ee,et){let er=iK($),en=er.mutationUserCallbacks[er.currentUser.toKey()];if(en){let $=en.get(ee);$&&(et?$.reject(et):$.resolve(),en=en.remove(ee)),er.mutationUserCallbacks[er.currentUser.toKey()]=en}}function v7($,ee,et=null){for(let er of($.sharedClientState.removeLocalQueryTarget(ee),$.queriesByTarget.get(ee)))$.queryViewsByQuery.delete(er),et&&$.syncEngineListener.onWatchError(er,et);$.queriesByTarget.delete(ee),$.isPrimaryClient&&$.limboDocumentRefs.removeReferencesForId(ee).forEach(ee=>{$.limboDocumentRefs.containsKey(ee)||bt($,ee)})}function bt($,ee){$.enqueuedLimboResolutions.delete(ee.path.canonicalString());let et=$.activeLimboTargetsByKey.get(ee);null!==et&&(y$($.remoteStore,et),$.activeLimboTargetsByKey=$.activeLimboTargetsByKey.remove(ee),$.activeLimboResolutionsByTarget.delete(et),bi($))}function br($,ee,et){for(let er of et)er instanceof vF?($.limboDocumentRefs.addReference(er.key,ee),bn($,er)):er instanceof vV?(iz(vq,"Document no longer in limbo: "+er.key),$.limboDocumentRefs.removeReference(er.key,ee),$.limboDocumentRefs.containsKey(er.key)||bt($,er.key)):iG()}function bn($,ee){let et=ee.key,er=et.path.canonicalString();$.activeLimboTargetsByKey.get(et)||$.enqueuedLimboResolutions.has(er)||(iz(vq,"New document in limbo: "+et),$.enqueuedLimboResolutions.add(er),bi($))}function bi($){for(;$.enqueuedLimboResolutions.size>0&&$.activeLimboTargetsByKey.size<$.maxConcurrentLimboResolutions;){let ee=$.enqueuedLimboResolutions.values().next().value;$.enqueuedLimboResolutions.delete(ee);let et=new sp(su.fromString(ee)),er=$.limboTargetIdGenerator.next();$.activeLimboResolutionsByTarget.set(er,new v$(et)),$.activeLimboTargetsByKey=$.activeLimboTargetsByKey.insert(et,er),yH($.remoteStore,new hW(uj(uA(et.path)),er,"TargetPurposeLimboResolution",sJ.INVALID))}}async function bs($,ee,et){let er=iK($),en=[],ei=[],es=[];er.queryViewsByQuery.isEmpty()||(er.queryViewsByQuery.forEach(($,eo)=>{es.push(er.applyDocChanges(eo,ee,et).then($=>{if(($||et)&&er.isPrimaryClient&&er.sharedClientState.updateQueryState(eo.targetId,(null==$?void 0:$.fromCache)?"not-current":"current"),$){en.push($);let ee=vk.fromSnapshot(eo.targetId,$);ei.push(ee)}}))}),await Promise.all(es),er.syncEngineListener.onWatchChange(en),await mn(er.localStore,ei))}async function bo($,ee,et,er){let en=ee.view.computeDocChanges(et);en.needsRefill&&(en=await mf($.localStore,ee.query,!1).then(({documents:$})=>ee.view.computeDocChanges($,en)));let ei=er&&er.targetChanges.get(ee.targetId),es=er&&null!=er.targetMismatches.get(ee.targetId),eo=ee.view.applyChanges(en,$.isPrimaryClient,ei,es);return br($,ee.targetId,eo.limboChanges),eo.snapshot}async function bl($,ee){let et=iK($);if(!et.currentUser.isEqual(ee)){iz(vq,"User change. New user:",ee.toKey());let $=await g4(et.localStore,ee);et.currentUser=ee,v5(et,"'waitForPendingWrites' promise is rejected due to a user change."),et.sharedClientState.handleUserChange(ee,$.removedBatchIds,$.addedBatchIds),await bs(et,$.affectedDocuments)}}function bu($,ee){let et=iK($),er=et.activeLimboResolutionsByTarget.get(ee);if(er&&er.receivedDocument)return cs().add(er.key);{let $=cs(),er=et.queriesByTarget.get(ee);if(!er)return $;for(let ee of er){let er=et.queryViewsByQuery.get(ee);$=$.unionWith(er.view.syncedDocuments)}return $}}async function bh($,ee){let et=iK($),er=await mf(et.localStore,ee.query,!0),en=ee.view.synchronizeWithPersistedState(er);return et.isPrimaryClient&&br(et,ee.targetId,en.limboChanges),en}async function bf($,ee){let et=iK($);return mS(et.localStore,ee).then($=>bs(et,$))}async function bp($,ee,et,er){let en=iK($),ei=await mg(en.localStore,ee);if(null===ei){iz(vq,"Cannot apply mutation batch with id: "+ee);return}"pending"===et?await y9(en.remoteStore):"acknowledged"===et||"rejected"===et?(v8(en,ee,er||null),v6(en,ee),mm(en.localStore,ee)):iG(),await bs(en,ei)}async function bg($,ee){let et=iK($);if(bE(et),bC(et),!0===ee&&!0!==et._isPrimaryClient){let $=et.sharedClientState.getAllActiveQueryTargets(),ee=await by(et,$.toArray());for(let $ of(et._isPrimaryClient=!0,await vf(et.remoteStore,!0),ee))yH(et.remoteStore,$)}else if(!1===ee&&!1!==et._isPrimaryClient){let $=[],ee=Promise.resolve();et.queriesByTarget.forEach((er,en)=>{et.sharedClientState.isLocalQueryTarget(en)?$.push(en):ee=ee.then(()=>(v7(et,en),mh(et.localStore,en,!0))),y$(et.remoteStore,en)}),await ee,await by(et,$),bm(et),et._isPrimaryClient=!1,await vf(et.remoteStore,!1)}}function bm($){let ee=iK($);ee.activeLimboResolutionsByTarget.forEach(($,et)=>{y$(ee.remoteStore,et)}),ee.limboDocumentRefs.removeAllReferences(),ee.activeLimboResolutionsByTarget=new Map,ee.activeLimboTargetsByKey=new om(sp.comparator)}async function by($,ee,et){let er=iK($),en=[],ei=[];for(let $ of ee){let ee;let et=er.queriesByTarget.get($);if(et&&0!==et.length)for(let $ of(ee=await ml(er.localStore,uj(et[0])),et)){let ee=er.queryViewsByQuery.get($),et=await bh(er,ee);et.snapshot&&ei.push(et.snapshot)}else{let et=await mv(er.localStore,$);ee=await ml(er.localStore,et),await vQ(er,bv(et),$,!1,ee.resumeToken)}en.push(ee)}return er.syncEngineListener.onWatchChange(ei),en}function bv($){return uP($.path,$.collectionGroup,$.orderBy,$.filters,$.limit,"F",$.startAt,$.endAt)}function bS($){return my(iK($).localStore)}async function bT($,ee,et,er){let en=iK($);if(en._isPrimaryClient){iz(vq,"Ignoring unexpected query state notification.");return}let ei=en.queriesByTarget.get(ee);if(ei&&ei.length>0)switch(et){case"current":case"not-current":{let $=await mS(en.localStore,uZ(ei[0])),er=dp.createSynthesizedRemoteEventForCurrentChange(ee,"current"===et,oI.EMPTY_BYTE_STRING);await bs(en,$,er);break}case"rejected":await mh(en.localStore,ee,!0),v7(en,ee,er);break;default:iG()}}async function bw($,ee,et){let er=bE($);if(er._isPrimaryClient){for(let $ of ee){if(er.queriesByTarget.has($)){iz(vq,"Adding an already active target "+$);continue}let ee=await mv(er.localStore,$),et=await ml(er.localStore,ee);await vQ(er,bv(ee),et.targetId,!1,et.resumeToken),yH(er.remoteStore,et)}for(let $ of et)er.queriesByTarget.has($)&&await mh(er.localStore,$,!1).then(()=>{y$(er.remoteStore,$),v7(er,$)}).catch(sN)}}function bE($){let ee=iK($);return ee.remoteStore.remoteSyncer.applyRemoteEvent=vJ.bind(null,ee),ee.remoteStore.remoteSyncer.getRemoteKeysForTarget=bu.bind(null,ee),ee.remoteStore.remoteSyncer.rejectListen=v0.bind(null,ee),ee.syncEngineListener.onWatchChange=vP.bind(null,ee.eventManager),ee.syncEngineListener.onWatchError=vA.bind(null,ee.eventManager),ee}function bC($){let ee=iK($);return ee.remoteStore.remoteSyncer.applySuccessfulWrite=v4.bind(null,ee),ee.remoteStore.remoteSyncer.rejectFailedWrite=v3.bind(null,ee),ee}async function b_($,ee,et){try{let er=await ee.getMetadata();if(await mC($.localStore,er))return await ee.close(),et._completeWith(vB(er)),Promise.resolve(new Set);et._updateProgress(vj(er));let en=new vL(er,$.localStore,ee.serializer),ei=await ee.nextElement();for(;ei;){let $=await en.addSizedElement(ei);$&&et._updateProgress($),ei=await ee.nextElement()}let es=await en.complete();return await bs($,es.changedDocs,void 0),await m_($.localStore,er),et._completeWith(es.progress),Promise.resolve(es.changedCollectionGroups)}catch($){return iH(vq,`Loading bundle failed with ${$}`),et._failWith($),Promise.resolve(new Set)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.synchronizeTabs=!1}async initialize($){this.serializer=yh($.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState($),this.persistence=this.createPersistence($),await this.persistence.start(),this.localStore=this.createLocalStore($),this.gcScheduler=this.createGarbageCollectionScheduler($,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler($,this.localStore)}createGarbageCollectionScheduler($,ee){return null}createIndexBackfillerScheduler($,ee){return null}createLocalStore($){return g2(this.persistence,new mO,$.initialUser,this.serializer)}createPersistence($){return new gy(gS.factory,this.serializer)}createSharedClientState($){return new mJ}async terminate(){var $,ee;null===($=this.gcScheduler)||void 0===$||$.stop(),null===(ee=this.indexBackfillerScheduler)||void 0===ee||ee.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class bx extends null{constructor($,ee,et){super(),this.onlineComponentProvider=$,this.cacheSizeBytes=ee,this.forceOwnership=et,this.synchronizeTabs=!1}async initialize($){await super.initialize($),await this.onlineComponentProvider.initialize(this,$),await bC(this.onlineComponentProvider.syncEngine),await y9(this.onlineComponentProvider.remoteStore),await this.persistence.setPrimaryStateListener(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore($){return g2(this.persistence,new mO,$.initialUser,this.serializer)}createGarbageCollectionScheduler($,ee){return new pG(this.persistence.referenceDelegate.garbageCollector,$.asyncQueue,ee)}createIndexBackfillerScheduler($,ee){let et=new sX(ee,this.persistence);return new sY($.asyncQueue,et)}createPersistence($){let ee=gX($.databaseInfo.databaseId,$.databaseInfo.persistenceKey),et=void 0!==this.cacheSizeBytes?pF.withCacheSize(this.cacheSizeBytes):pF.DEFAULT;return new gK(this.synchronizeTabs,ee,$.clientId,et,$.asyncQueue,yl(),yu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState($){return new mJ}}class bI{async initialize($,ee){this.localStore||(this.localStore=$.localStore,this.sharedClientState=$.sharedClientState,this.datastore=this.createDatastore(ee),this.remoteStore=this.createRemoteStore(ee),this.eventManager=this.createEventManager(ee),this.syncEngine=this.createSyncEngine(ee,!$.synchronizeTabs),this.sharedClientState.onlineStateHandler=$=>vZ(this.syncEngine,$,1),this.remoteStore.remoteSyncer.handleCredentialChange=bl.bind(null,this.syncEngine),await vf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager($){return v_()}createDatastore($){let ee=yh($.databaseInfo.databaseId),et=ys($.databaseInfo);return yx($.authCredentials,$.appCheckCredentials,et,ee)}createRemoteStore($){return yV(this.localStore,this.datastore,$.asyncQueue,$=>vZ(this.syncEngine,$,0),yo())}createSyncEngine($,ee){return vW(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,$.initialUser,$.maxConcurrentLimboResolutions,ee)}async terminate(){var $;await yq(this.remoteStore),null===($=this.datastore)||void 0===$||$.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bP=10240;function bA($,ee=bP){let et=0;return{async read(){if(et<$.byteLength){let er={value:$.slice(et,et+ee),done:!1};return et+=ee,er}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO($,ee,et){if(!et)throw new iY(iQ.INVALID_ARGUMENT,`Function ${$}() cannot be called with an empty ${ee}.`)}function bD($,ee,et,er){if(!0===ee&&!0===er)throw new iY(iQ.INVALID_ARGUMENT,`${$} and ${et} cannot be used together.`)}function bN($){if(sp.isDocumentKey($))throw new iY(iQ.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${$} has ${$.length}.`)}function bk($){return"object"==typeof $&&null!==$&&(Object.getPrototypeOf($)===Object.prototype||null===Object.getPrototypeOf($))}function bM($){if(void 0===$)return"undefined";if(null===$)return"null";if("string"==typeof $)return $.length>20&&($=`${$.substring(0,20)}...`),JSON.stringify($);if("number"==typeof $||"boolean"==typeof $)return""+$;if("object"==typeof $){if($ instanceof Array)return"an array";{let ee=bL($);return ee?`a custom ${ee} object`:"an object"}}if("function"==typeof $)return"a function";return iG()}function bL($){return $.constructor?$.constructor.name:null}function bj($,ee){if("_delegate"in $&&($=$._delegate),!($ instanceof ee)){if(ee.name===$.constructor.name)throw new iY(iQ.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let et=bM($);throw new iY(iQ.INVALID_ARGUMENT,`Expected type '${ee.name}', but it was: ${et}`)}}return $}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB($,ee){if(!($ instanceof Uint8Array))throw new iY(iQ.INVALID_ARGUMENT,`NodePlatform.toByteStreamReader expects source to be Uint8Array, got ${bM($)}`);return bA($,ee)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor($){this.observer=$,this.muted=!1}next($){this.observer.next&&this.scheduleEvent(this.observer.next,$)}error($){this.observer.error?this.scheduleEvent(this.observer.error,$):iq("Uncaught Error in snapshot listener:",$.toString())}mute(){this.muted=!0}scheduleEvent($,ee){this.muted||setTimeout(()=>{this.muted||$(ee)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor($,ee){this.payload=$,this.byteLength=ee}isBundleMetadata(){return"metadata"in this.payload}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor($,ee){this.reader=$,this.serializer=ee,this.metadata=new iX,this.buffer=new Uint8Array,this.textDecoder=di(),this.nextElementImpl().then($=>{$&&$.isBundleMetadata()?this.metadata.resolve($.payload.metadata):this.metadata.reject(Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(null==$?void 0:$.payload)}`))},$=>this.metadata.reject($))}close(){return this.reader.cancel()}async getMetadata(){return this.metadata.promise}async nextElement(){return await this.getMetadata(),this.nextElementImpl()}async nextElementImpl(){let $=await this.readLength();if(null===$)return null;let ee=this.textDecoder.decode($),et=Number(ee);return isNaN(et)&&this.raiseError(`length string (${ee}) is not valid number`),new bV(JSON.parse(await this.readJsonString(et)),$.length+et)}indexOfOpenBracket(){return this.buffer.findIndex($=>123===$)}async readLength(){for(;0>this.indexOfOpenBracket()&&!await this.pullMoreDataToBuffer(););if(0===this.buffer.length)return null;let $=this.indexOfOpenBracket();$<0&&this.raiseError("Reached the end of bundle when a length string is expected.");let ee=this.buffer.slice(0,$);return this.buffer=this.buffer.slice($),ee}async readJsonString($){for(;this.buffer.length<$;)await this.pullMoreDataToBuffer()&&this.raiseError("Reached the end of bundle when more is expected.");let ee=this.textDecoder.decode(this.buffer.slice(0,$));return this.buffer=this.buffer.slice($),ee}raiseError($){throw this.reader.cancel(),Error(`Invalid bundle format: ${$}`)}async pullMoreDataToBuffer(){let $=await this.reader.read();if(!$.done){let ee=new Uint8Array(this.buffer.length+$.value.length);ee.set(this.buffer),ee.set($.value,this.buffer.length),this.buffer=ee}return $.done}}function bz($,ee){return new bU($,ee)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bq{constructor($){this.datastore=$,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup($){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new iY(iQ.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let ee=await yP(this.datastore,$);return ee.forEach($=>this.recordVersion($)),ee}set($,ee){this.write(ee.toMutation($,this.precondition($))),this.writtenDocs.add($.toString())}update($,ee){try{this.write(ee.toMutation($,this.preconditionForUpdate($)))}catch($){this.lastTransactionError=$}this.writtenDocs.add($.toString())}delete($){this.write(new cX($,this.precondition($))),this.writtenDocs.add($.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let $=this.readVersions;this.mutations.forEach(ee=>{$.delete(ee.key.toString())}),$.forEach(($,ee)=>{let et=sp.fromPath(ee);this.mutations.push(new c0(et,this.precondition(et)))}),await yI(this.datastore,this.mutations),this.committed=!0}recordVersion($){let ee;if($.isFoundDocument())ee=$.version;else if($.isNoDocument())ee=ss.min();else throw iG();let et=this.readVersions.get($.key.toString());if(et){if(!ee.isEqual(et))throw new iY(iQ.ABORTED,"Document version changed between two reads.")}else this.readVersions.set($.key.toString(),ee)}precondition($){let ee=this.readVersions.get($.toString());return this.writtenDocs.has($.toString())||!ee?ck.none():ee.isEqual(ss.min())?ck.exists(!1):ck.updateTime(ee)}preconditionForUpdate($){let ee=this.readVersions.get($.toString());if(this.writtenDocs.has($.toString())||!ee)return ck.exists(!0);if(ee.isEqual(ss.min()))throw new iY(iQ.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ck.updateTime(ee)}write($){this.ensureCommitNotCalled(),this.mutations.push($)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bH="FirestoreClient",b$=100,bG=11,bW=20,bK=22;class bQ{constructor($,ee,et,er){this.authCredentials=$,this.appCheckCredentials=ee,this.asyncQueue=et,this.databaseInfo=er,this.user=iL.UNAUTHENTICATED,this.clientId=i8.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(et,async $=>{iz(bH,"Received user=",$.uid),await this.authCredentialListener($),this.user=$}),this.appCheckCredentials.start(et,$=>(iz(bH,"Received new app check token=",$),this.appCheckCredentialListener($,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:b$}}setCredentialChangeListener($){this.authCredentialListener=$}setAppCheckTokenChangeListener($){this.appCheckCredentialListener=$}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new iY(iQ.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let $=new iX;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),$.resolve()}catch(et){let ee=vv(et,"Failed to shutdown persistence");$.reject(ee)}}),$.promise}}async function bY($,ee){$.asyncQueue.verifyOperationInProgress(),iz(bH,"Initializing OfflineComponentProvider");let et=$.configuration;await ee.initialize(et);let er=et.initialUser;$.setCredentialChangeListener(async $=>{er.isEqual($)||(await g4(ee.localStore,$),er=$)}),ee.persistence.setDatabaseDeletedListener(()=>$.terminate()),$._offlineComponents=ee}async function bX($,ee){$.asyncQueue.verifyOperationInProgress();let et=await bZ($);iz(bH,"Initializing OnlineComponentProvider"),await ee.initialize(et,$.configuration),$.setCredentialChangeListener($=>vu(ee.remoteStore,$)),$.setAppCheckTokenChangeListener(($,et)=>vu(ee.remoteStore,et)),$._onlineComponents=ee}function bJ($){return"FirebaseError"===$.name?$.code===iQ.FAILED_PRECONDITION||$.code===iQ.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&$ instanceof DOMException)||$.code===bK||$.code===bW||$.code===bG}async function bZ($){if(!$._offlineComponents){if($._uninitializedComponentsProvider){iz(bH,"Using user provided OfflineComponentProvider");try{await bY($,$._uninitializedComponentsProvider._offline)}catch(et){let ee=et;if(!bJ(ee))throw ee;iH("Error using user provided cache. Falling back to memory cache: "+ee),await bY($,new bR)}}else iz(bH,"Using default OfflineComponentProvider"),await bY($,new bR)}return $._offlineComponents}async function b0($){return $._onlineComponents||($._uninitializedComponentsProvider?(iz(bH,"Using user provided OnlineComponentProvider"),await bX($,$._uninitializedComponentsProvider._online)):(iz(bH,"Using default OnlineComponentProvider"),await bX($,new bI))),$._onlineComponents}function b1($){return bZ($).then($=>$.localStore)}function b2($){return b0($).then($=>$.syncEngine)}function b4($){return b0($).then($=>$.datastore)}async function b3($){let ee=await b0($),et=ee.eventManager;return et.onListen=vK.bind(null,ee.syncEngine),et.onUnlisten=vY.bind(null,ee.syncEngine),et}function b6($,ee,et={}){let er=new iX;return $.asyncQueue.enqueueAndForget(async()=>b5(await b3($),$.asyncQueue,ee,et,er)),er.promise}function b5($,ee,et,er,en){let ei=new vN(et,new bF({next:et=>{ee.enqueueAndForget(()=>vI($,ei)),et.fromCache&&"server"===er.source?en.reject(new iY(iQ.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):en.resolve(et)},error:$=>en.reject($)}),{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return vx($,ei)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9($,ee){return $.timeoutSeconds===ee.timeoutSeconds}function b8($){let ee={};return void 0!==$.timeoutSeconds&&(ee.timeoutSeconds=$.timeoutSeconds),ee}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b7="ComponentProvider",Se=new Map;function St($){let ee=Se.get($);ee&&(iz(b7,"Removing Datastore"),Se.delete($),ee.terminate())}function Sr($,ee,et,er){return new oq($,ee,et,er.host,er.ssl,er.experimentalForceLongPolling,er.experimentalAutoDetectLongPolling,b8(er.experimentalLongPollingOptions),er.useFetchStreams)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sn="firestore.googleapis.com",Si=!0,Ss=5,So=30,Sl=!0;class Su{constructor($){var ee,et;if(void 0===$.host){if(void 0!==$.ssl)throw new iY(iQ.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sn,this.ssl=Si}else this.host=$.host,this.ssl=null!==(ee=$.ssl)&&void 0!==ee?ee:Si;if(this.credentials=$.credentials,this.ignoreUndefinedProperties=!!$.ignoreUndefinedProperties,this.localCache=$.localCache,void 0===$.cacheSizeBytes)this.cacheSizeBytes=pB;else{if($.cacheSizeBytes!==pj&&$.cacheSizeBytes<pU)throw new iY(iQ.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${pU}`);this.cacheSizeBytes=$.cacheSizeBytes}bD("experimentalForceLongPolling",$.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",$.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!$.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===$.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=Sl:this.experimentalAutoDetectLongPolling=!!$.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=b8(null!==(et=$.experimentalLongPollingOptions)&&void 0!==et?et:{}),Sh(this.experimentalLongPollingOptions),this.useFetchStreams=!!$.useFetchStreams}isEqual($){return this.host===$.host&&this.ssl===$.ssl&&this.credentials===$.credentials&&this.cacheSizeBytes===$.cacheSizeBytes&&this.experimentalForceLongPolling===$.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===$.experimentalAutoDetectLongPolling&&b9(this.experimentalLongPollingOptions,$.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===$.ignoreUndefinedProperties&&this.useFetchStreams===$.useFetchStreams}}function Sh($){if(void 0!==$.timeoutSeconds){if(isNaN($.timeoutSeconds))throw new iY(iQ.INVALID_ARGUMENT,`invalid long polling timeout: ${$.timeoutSeconds} (must not be NaN)`);if($.timeoutSeconds<Ss)throw new iY(iQ.INVALID_ARGUMENT,`invalid long polling timeout: ${$.timeoutSeconds} (minimum allowed value is ${Ss})`);if($.timeoutSeconds>So)throw new iY(iQ.INVALID_ARGUMENT,`invalid long polling timeout: ${$.timeoutSeconds} (maximum allowed value is ${So})`)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor($,ee,et,er){this._authCredentials=$,this._appCheckCredentials=ee,this._databaseId=et,this._app=er,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Su({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new iY(iQ.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings($){if(this._settingsFrozen)throw new iY(iQ.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Su($),void 0!==$.credentials&&(this._authCredentials=i5($.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return St(this),Promise.resolve()}}function Sp($,ee,et,er={}){var en;let ei=($=bj($,Sf))._getSettings(),es=`${ee}:${et}`;if(ei.host!==Sn&&ei.host!==es&&iH("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),$._setSettings(Object.assign(Object.assign({},ei),{host:es,ssl:!1})),er.mockUserToken){let ee,et;if("string"==typeof er.mockUserToken)ee=er.mockUserToken,et=iL.MOCK_USER;else{ee=(0,eg.Sg)(er.mockUserToken,null===(en=$._app)||void 0===en?void 0:en.options.projectId);let ei=er.mockUserToken.sub||er.mockUserToken.user_id;if(!ei)throw new iY(iQ.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");et=new iL(ei)}$._authCredentials=new i0(new iJ(ee,et))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor($,ee,et){this.converter=ee,this._query=et,this.type="query",this.firestore=$}withConverter($){return new Sg(this.firestore,$,this._query)}}class Sm{constructor($,ee,et){this.converter=ee,this._key=et,this.type="document",this.firestore=$}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sy(this.firestore,this.converter,this._key.path.popLast())}withConverter($){return new Sm(this.firestore,$,this._key)}}class Sy extends Sg{constructor($,ee,et){super($,ee,uA(et)),this._path=et,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let $=this._path.popLast();return $.isEmpty()?null:new Sm(this.firestore,null,new sp($))}withConverter($){return new Sy(this.firestore,$,this._path)}}function Sv($,ee,...et){if($=(0,eg.m9)($),bO("collection","path",ee),$ instanceof Sf){let er=su.fromString(ee,...et);return bN(er),new Sy($,null,er)}{if(!($ instanceof Sm)&&!($ instanceof Sy))throw new iY(iQ.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let er=$._path.child(su.fromString(ee,...et));return bN(er),new Sy($.firestore,null,er)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SS="AsyncQueue";class Sw{constructor(){this.tail=Promise.resolve(),this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new yy(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()}}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget($){this.enqueue($)}enqueueAndForgetEvenWhileRestricted($){this.verifyNotFailed(),this.enqueueInternal($)}enterRestrictedMode($){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=$||!1)}enqueue($){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let ee=new iX;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():($().then(ee.resolve,ee.reject),ee.promise)).then(()=>ee.promise)}enqueueRetryable($){this.enqueueAndForget(()=>(this.retryableOps.push($),this.retryNextOp()))}async retryNextOp(){if(0!==this.retryableOps.length){try{await this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch($){if(sU($))iz(SS,"Operation failed with retryable error: "+$);else throw $}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}}enqueueInternal($){let ee=this.tail.then(()=>(this.operationInProgress=!0,$().catch($=>{throw this.failure=$,this.operationInProgress=!1,iq("INTERNAL UNHANDLED ERROR: ",SC($)),$}).then($=>(this.operationInProgress=!1,$))));return this.tail=ee,ee}enqueueAfterDelay($,ee,et){this.verifyNotFailed(),this.timerIdsToSkip.indexOf($)>-1&&(ee=0);let er=vy.createAndSchedule(this,$,ee,et,$=>this.removeDelayedOperation($));return this.delayedOperations.push(er),er}verifyNotFailed(){this.failure&&iG()}verifyOperationInProgress(){}async drain(){let $;do $=this.tail,await $;while($!==this.tail)}containsDelayedOperation($){for(let ee of this.delayedOperations)if(ee.timerId===$)return!0;return!1}runAllDelayedOperationsUntil($){return this.drain().then(()=>{for(let ee of(this.delayedOperations.sort(($,ee)=>$.targetTimeMs-ee.targetTimeMs),this.delayedOperations))if(ee.skipDelay(),"all"!==$&&ee.timerId===$)break;return this.drain()})}skipDelaysForTimerId($){this.timerIdsToSkip.push($)}removeDelayedOperation($){let ee=this.delayedOperations.indexOf($);this.delayedOperations.splice(ee,1)}}function SE(){return new Sw}function SC($){let ee=$.message||"";return $.stack&&(ee=$.stack.includes($.message)?$.stack:$.message+"\n"+$.stack),ee}class S_ extends Sf{constructor($,ee,et,er){super($,ee,et,er),this.type="firestore",this._queue=SE(),this._persistenceKey=(null==er?void 0:er.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||SI(this),this._firestoreClient.terminate()}}function SR($,ee){let et="object"==typeof $?$:(0,eu.Mq)(),er="string"==typeof $?$:ee||oH,en=(0,eu.qX)(et,"firestore").getImmediate({identifier:er});if(!en._initialized){let $=(0,eg.P0)("firestore");$&&Sp(en,...$)}return en}function Sx($){return $._firestoreClient||SI($),$._firestoreClient.verifyNotTerminated(),$._firestoreClient}function SI($){var ee,et,er;let en=$._freezeSettings(),ei=Sr($._databaseId,(null===(ee=$._app)||void 0===ee?void 0:ee.options.appId)||"",$._persistenceKey,en);$._firestoreClient=new bQ($._authCredentials,$._appCheckCredentials,$._queue,ei),(null===(et=en.localCache)||void 0===et?void 0:et._offlineComponentProvider)&&(null===(er=en.localCache)||void 0===er?void 0:er._onlineComponentProvider)&&($._firestoreClient._uninitializedComponentsProvider={_offlineKind:en.localCache.kind,_offline:en.localCache._offlineComponentProvider,_online:en.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA($,ee=!0){iB(eu.Jn),(0,eu.Xd)(new eh.wA("firestore",($,{instanceIdentifier:et,options:er})=>{let en=$.getProvider("app").getImmediate(),ei=new S_(new i1($.getProvider("auth-internal")),new i6($.getProvider("app-check-internal")),oG(en,et),en);return er=Object.assign({useFetchStreams:ee},er),ei._setSettings(er),ei},"PUBLIC").setMultipleInstances(!0)),(0,eu.KN)(ik,iM,$),(0,eu.KN)(ik,iM,"esm2017")}class SO{constructor($,ee,et){this._userDataWriter=ee,this._data=et,this.type="AggregateQuerySnapshot",this.query=$}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor($){this._byteString=$}static fromBase64String($){try{return new SD(oI.fromBase64String($))}catch($){throw new iY(iQ.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+$)}}static fromUint8Array($){return new SD(oI.fromUint8Array($))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual($){return this._byteString.isEqual($._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(...$){for(let ee=0;ee<$.length;++ee)if(0===$[ee].length)throw new iY(iQ.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sf($)}isEqual($){return this._internalPath.isEqual($._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor($){this._methodName=$}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor($,ee){if(!isFinite($)||$<-90||$>90)throw new iY(iQ.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+$);if(!isFinite(ee)||ee<-180||ee>180)throw new iY(iQ.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+ee);this._lat=$,this._long=ee}get latitude(){return this._lat}get longitude(){return this._long}isEqual($){return this._lat===$._lat&&this._long===$._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo($){return i7(this._lat,$._lat)||i7(this._long,$._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SL=/^__.*__$/;class Sj{constructor($,ee,et){this.data=$,this.fieldMask=ee,this.fieldTransforms=et}toMutation($,ee){return null!==this.fieldMask?new c$($,this.data,this.fieldMask,ee,this.fieldTransforms):new cz($,this.data,ee,this.fieldTransforms)}}class SB{constructor($,ee,et){this.data=$,this.fieldMask=ee,this.fieldTransforms=et}toMutation($,ee){return new c$($,this.data,this.fieldMask,ee,this.fieldTransforms)}}function SF($){switch($){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw iG()}}class SV{constructor($,ee,et,er,en,ei){this.settings=$,this.databaseId=ee,this.serializer=et,this.ignoreUndefinedProperties=er,void 0===en&&this.validatePath(),this.fieldTransforms=en||[],this.fieldMask=ei||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith($){return new SV(Object.assign(Object.assign({},this.settings),$),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField($){var ee;let et=null===(ee=this.path)||void 0===ee?void 0:ee.child($),er=this.contextWith({path:et,arrayElement:!1});return er.validatePathSegment($),er}childContextForFieldPath($){var ee;let et=null===(ee=this.path)||void 0===ee?void 0:ee.child($),er=this.contextWith({path:et,arrayElement:!1});return er.validatePath(),er}childContextForArray($){return this.contextWith({path:void 0,arrayElement:!0})}createError($){return S5($,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains($){return void 0!==this.fieldMask.find(ee=>$.isPrefixOf(ee))||void 0!==this.fieldTransforms.find(ee=>$.isPrefixOf(ee.field))}validatePath(){if(this.path)for(let $=0;$<this.path.length;$++)this.validatePathSegment(this.path.get($))}validatePathSegment($){if(0===$.length)throw this.createError("Document fields must not be empty");if(SF(this.dataSource)&&SL.test($))throw this.createError('Document fields cannot begin and end with "__"')}}class SU{constructor($,ee,et){this.databaseId=$,this.ignoreUndefinedProperties=ee,this.serializer=et||yh($)}createContext($,ee,et,er=!1){return new SV({dataSource:$,methodName:ee,targetDoc:et,path:sf.emptyPath(),arrayElement:!1,hasConverter:er},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sz($){let ee=$._freezeSettings(),et=yh($._databaseId);return new SU($._databaseId,!!ee.ignoreUndefinedProperties,et)}class Sq extends null{_toFieldTransform($){if(2===$.dataSource)$.fieldMask.push($.path);else if(1===$.dataSource)throw $.createError(`${this._methodName}() can only appear at the top level of your update data`);else throw $.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return null}isEqual($){return $ instanceof Sq}}function SH($,ee,et){return new SV({dataSource:3,targetDoc:ee.settings.targetDoc,methodName:$._methodName,arrayElement:et},ee.databaseId,ee.serializer,ee.ignoreUndefinedProperties)}class S$ extends null{_toFieldTransform($){return new cA($.path,new cT)}isEqual($){return $ instanceof S$}}class SG extends null{constructor($,ee){super($),this._elements=ee}_toFieldTransform($){let ee=SH(this,$,!0),et=new cw(this._elements.map($=>SY($,ee)));return new cA($.path,et)}isEqual($){return $ instanceof SG&&deepEqual(this._elements,$._elements)}}class SW extends null{constructor($,ee){super($),this._elements=ee}_toFieldTransform($){let ee=SH(this,$,!0),et=new cC(this._elements.map($=>SY($,ee)));return new cA($.path,et)}isEqual($){return $ instanceof SW&&deepEqual(this._elements,$._elements)}}class SK extends null{constructor($,ee){super($),this._operand=ee}_toFieldTransform($){let ee=new cR($.serializer,cf($.serializer,this._operand));return new cA($.path,ee)}isEqual($){return $ instanceof SK&&this._operand===$._operand}}function SQ($,ee,et,er=!1){return SY(et,$.createContext(er?4:3,ee))}function SY($,ee){if(S1($=getModularInstance($)))return S2("Unsupported field value:",ee,$),SX($,ee);if($ instanceof Sk)return SZ($,ee),null;if(void 0===$&&ee.ignoreUndefinedProperties)return null;if(ee.path&&ee.fieldMask.push(ee.path),!($ instanceof Array))return S0($,ee);if(ee.settings.arrayElement&&4!==ee.dataSource)throw ee.createError("Nested arrays are not supported");return SJ($,ee)}function SX($,ee){let et={};return og($)?ee.path&&ee.path.length>0&&ee.fieldMask.push(ee.path):of($,($,er)=>{let en=SY(er,ee.childContextForField($));null!=en&&(et[$]=en)}),{mapValue:{fields:et}}}function SJ($,ee){let et=[],er=0;for(let en of $){let $=SY(en,ee.childContextForArray(er));null==$&&($={nullValue:"NULL_VALUE"}),et.push($),er++}return{arrayValue:{values:et}}}function SZ($,ee){if(!SF(ee.dataSource))throw ee.createError(`${$._methodName}() can only be used with update() and set()`);if(!ee.path)throw ee.createError(`${$._methodName}() is not currently supported inside arrays`);let et=$._toFieldTransform(ee);et&&ee.fieldTransforms.push(et)}function S0($,ee){if(null===($=getModularInstance($)))return{nullValue:"NULL_VALUE"};if("number"==typeof $)return cf(ee.serializer,$);if("boolean"==typeof $)return{booleanValue:$};if("string"==typeof $)return{stringValue:$};if($ instanceof Date){let et=si.fromDate($);return{timestampValue:dk(ee.serializer,et)}}if($ instanceof si){let et=new si($.seconds,1e3*Math.floor($.nanoseconds/1e3));return{timestampValue:dk(ee.serializer,et)}}if($ instanceof SM)return{geoPointValue:{latitude:$.latitude,longitude:$.longitude}};else if($ instanceof SD)return{bytesValue:dL(ee.serializer,$._byteString)};else if($ instanceof Sm){let et=ee.databaseId,er=$.firestore._databaseId;if(!er.isEqual(et))throw ee.createError(`Document reference is for database ${er.projectId}/${er.database} but should be for database ${et.projectId}/${et.database}`);return{referenceValue:dV($.firestore._databaseId||ee.databaseId,$._key.path)}}else throw ee.createError(`Unsupported field value: ${bM($)}`)}function S1($){return"object"==typeof $&&null!==$&&!($ instanceof Array)&&!($ instanceof Date)&&!($ instanceof si)&&!($ instanceof SM)&&!($ instanceof SD)&&!($ instanceof Sm)&&!($ instanceof Sk)}function S2($,ee,et){if(!S1(et)||!bk(et)){let er=bM(et);if("an object"===er)throw ee.createError($+" a custom object");throw ee.createError($+" "+er)}}function S4($,ee,et){if((ee=getModularInstance(ee))instanceof SN)return ee._internalPath;if("string"==typeof ee)return S6($,ee);throw S5("Field path arguments must be of type string or ",$,!1,void 0,et)}let S3=RegExp("[~\\*/\\[\\]]");function S6($,ee,et){if(ee.search(S3)>=0)throw S5(`Invalid field path (${ee}). Paths must not contain '~', '*', '/', '[', or ']'`,$,!1,void 0,et);try{return new SN(...ee.split("."))._internalPath}catch(er){throw S5(`Invalid field path (${ee}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,$,!1,void 0,et)}}function S5($,ee,et,er,en){let ei=er&&!er.isEmpty(),es=void 0!==en,eo=`Function ${ee}() called with invalid data`;et&&(eo+=" (via `toFirestore()`)"),eo+=". ";let eu="";return(ei||es)&&(eu+=" (found",ei&&(eu+=` in field ${er}`),es&&(eu+=` in document ${en}`),eu+=")"),new iY(iQ.INVALID_ARGUMENT,eo+$+eu)}function S9($,ee){return $.some($=>$.isEqual(ee))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor($,ee,et,er,en){this._firestore=$,this._userDataWriter=ee,this._key=et,this._document=er,this._converter=en}get id(){return this._key.path.lastSegment()}get ref(){return new Sm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value);{let $=new S7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore($)}}}get($){if(this._document){let ee=this._document.data.field(Te("DocumentSnapshot.get",$));if(null!==ee)return this._userDataWriter.convertValue(ee)}}}class S7 extends S8{data(){return super.data()}}function Te($,ee){return"string"==typeof ee?S6($,ee):ee instanceof SN?ee._internalPath:ee._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt($){if("L"===$.limitType&&0===$.explicitOrderBy.length)throw new iY(iQ.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tr extends null{constructor($,ee,et){super(),this._field=$,this._op=ee,this._value=et,this.type="where"}static _create($,ee,et){return new Tr($,ee,et)}_apply($){let ee=this._parse($);return TS($._query,ee),new Sg($.firestore,$.converter,uV($._query,ee))}_parse($){let ee=Sz($.firestore);return Th($._query,"where",ee,$.firestore._databaseId,this._field,this._op,this._value)}}class Tn extends null{constructor($,ee){super(),this.type=$,this._queryConstraints=ee}static _create($,ee){return new Tn($,ee)}_parse($){let ee=this._queryConstraints.map(ee=>ee._parse($)).filter($=>$.getFilters().length>0);return 1===ee.length?ee[0]:lJ.create(ee,this._getOperator())}_apply($){let ee=this._parse($);return 0===ee.getFilters().length?$:(TT($._query,ee),new Sg($.firestore,$.converter,uV($._query,ee)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ti extends null{constructor($,ee){super(),this._field=$,this._direction=ee,this.type="orderBy"}static _create($,ee){return new Ti($,ee)}_apply($){let ee=Tf($._query,this._field,this._direction);return new Sg($.firestore,$.converter,uU($._query,ee))}}class Ts extends null{constructor($,ee,et){super(),this.type=$,this._limit=ee,this._limitType=et}static _create($,ee,et){return new Ts($,ee,et)}_apply($){return new Sg($.firestore,$.converter,uz($._query,this._limit,this._limitType))}}class To extends null{constructor($,ee,et){super(),this.type=$,this._docOrFields=ee,this._inclusive=et}static _create($,ee,et){return new To($,ee,et)}_apply($){let ee=Tu($,this.type,this._docOrFields,this._inclusive);return new Sg($.firestore,$.converter,uq($._query,ee))}}class Tl extends null{constructor($,ee,et){super(),this.type=$,this._docOrFields=ee,this._inclusive=et}static _create($,ee,et){return new Tl($,ee,et)}_apply($){let ee=Tu($,this.type,this._docOrFields,this._inclusive);return new Sg($.firestore,$.converter,uH($._query,ee))}}function Tu($,ee,et,er){if(et[0]=getModularInstance(et[0]),et[0]instanceof S8)return Tp($._query,$.firestore._databaseId,ee,et[0]._document,er);{let en=Sz($.firestore);return Tg($._query,$.firestore._databaseId,en,ee,et,er)}}function Th($,ee,et,er,en,ei,es){let eo;if(en.isKeyField()){if("array-contains"===ei||"array-contains-any"===ei)throw new iY(iQ.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ei}' queries on documentId().`);if("in"===ei||"not-in"===ei){Ty(es,ei);let ee=[];for(let et of es)ee.push(Tm(er,$,et));eo={arrayValue:{values:ee}}}else eo=Tm(er,$,es)}else("in"===ei||"not-in"===ei||"array-contains-any"===ei)&&Ty(es,ei),eo=SQ(et,ee,es,"in"===ei||"not-in"===ei);return lX.create(en,ei,eo)}function Tf($,ee,et){if(null!==$.startAt)throw new iY(iQ.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==$.endAt)throw new iY(iQ.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lG(ee,et)}function Tp($,ee,et,er,en){if(!er)throw new iY(iQ.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${et}().`);let ei=[];for(let et of uL($))if(et.field.isKeyField())ei.push(lE(ee,er.key));else{let $=er.data.field(et.field);if(oF($))throw new iY(iQ.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+et.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null!==$)ei.push($);else{let $=et.field.canonicalString();throw new iY(iQ.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}}return new lU(ei,en)}function Tg($,ee,et,er,en,ei){let es=$.explicitOrderBy;if(en.length>es.length)throw new iY(iQ.INVALID_ARGUMENT,`Too many arguments provided to ${er}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let eo=[];for(let ei=0;ei<en.length;ei++){let eu=en[ei];if(es[ei].field.isKeyField()){if("string"!=typeof eu)throw new iY(iQ.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${er}(), but got a ${typeof eu}`);if(!uM($)&&-1!==eu.indexOf("/"))throw new iY(iQ.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${er}() must be a plain document ID, but '${eu}' contains a slash.`);let et=$.path.child(su.fromString(eu));if(!sp.isDocumentKey(et))throw new iY(iQ.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${er}() must result in a valid document path, but '${et}' is not because it contains an odd number of segments.`);let en=new sp(et);eo.push(lE(ee,en))}else{let $=SQ(et,er,eu);eo.push($)}}return new lU(eo,ei)}function Tm($,ee,et){if("string"==typeof(et=getModularInstance(et))){if(""===et)throw new iY(iQ.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uM(ee)&&-1!==et.indexOf("/"))throw new iY(iQ.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${et}' contains a '/' character.`);let er=ee.path.child(su.fromString(et));if(!sp.isDocumentKey(er))throw new iY(iQ.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${er}' is not because it has an odd number of segments (${er.length}).`);return lE($,new sp(er))}if(et instanceof Sm)return lE($,et._key);throw new iY(iQ.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bM(et)}.`)}function Ty($,ee){if(!Array.isArray($)||0===$.length)throw new iY(iQ.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${ee.toString()}' filters.`)}function Tv($){switch($){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}function TS($,ee){let et=Tw($.filters,Tv(ee.op));if(null!==et){if(et===ee.op)throw new iY(iQ.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${ee.op.toString()}' filter.`);throw new iY(iQ.INVALID_ARGUMENT,`Invalid query. You cannot use '${ee.op.toString()}' filters with '${et.toString()}' filters.`)}}function TT($,ee){let et=$;for(let $ of ee.getFlattenedFilters())TS(et,$),et=uV(et,$)}function Tw($,ee){for(let et of $)for(let $ of et.getFlattenedFilters())if(ee.indexOf($.op)>=0)return $.op;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{convertValue($,ee="none"){switch(o0($)){case 0:return null;case 1:return $.booleanValue;case 2:return oN($.integerValue||$.doubleValue);case 3:return this.convertTimestamp($.timestampValue);case 4:return this.convertServerTimestamp($,ee);case 5:return $.stringValue;case 6:return this.convertBytes(ok($.bytesValue));case 7:return this.convertReference($.referenceValue);case 8:return this.convertGeoPoint($.geoPointValue);case 9:return this.convertArray($.arrayValue,ee);case 10:return this.convertObject($.mapValue,ee);default:throw iG()}}convertObject($,ee){return this.convertObjectMap($.fields,ee)}convertObjectMap($,ee="none"){let et={};return of($,($,er)=>{et[$]=this.convertValue(er,ee)}),et}convertGeoPoint($){return new SM(oN($.latitude),oN($.longitude))}convertArray($,ee){return($.values||[]).map($=>this.convertValue($,ee))}convertServerTimestamp($,ee){switch(ee){case"previous":let et=oU($);if(null==et)return null;return this.convertValue(et,ee);case"estimate":return this.convertTimestamp(oz($));default:return null}}convertTimestamp($){let ee=oD($);return new si(ee.seconds,ee.nanos)}convertDocumentKey($,ee){let et=su.fromString($);iW(hG(et));let er=new o$(et.get(1),et.get(3)),en=new sp(et.popFirst(5));return er.isEqual(ee)||iq(`Document ${en} contains a document reference within a different database (${er.projectId}/${er.database}) which is not supported. It will be treated as a reference in the current database (${ee.projectId}/${ee.database}) instead.`),en}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor($,ee){this.hasPendingWrites=$,this.fromCache=ee}isEqual($){return this.hasPendingWrites===$.hasPendingWrites&&this.fromCache===$.fromCache}}class T_ extends S8{constructor($,ee,et,er,en,ei){super($,ee,et,er,ei),this._firestore=$,this._firestoreImpl=$,this.metadata=en}exists(){return super.exists()}data($={}){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value,$.serverTimestamps);{let ee=new TR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(ee,$)}}}get($,ee={}){if(this._document){let et=this._document.data.field(Te("DocumentSnapshot.get",$));if(null!==et)return this._userDataWriter.convertValue(et,ee.serverTimestamps)}}}class TR extends T_{data($={}){return super.data($)}}class Tx{constructor($,ee,et,er){this._firestore=$,this._userDataWriter=ee,this._snapshot=er,this.metadata=new TC(er.hasPendingWrites,er.fromCache),this.query=et}get docs(){let $=[];return this.forEach(ee=>$.push(ee)),$}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach($,ee){this._snapshot.docs.forEach(et=>{$.call(ee,new TR(this._firestore,this._userDataWriter,et.key,et,new TC(this._snapshot.mutatedKeys.has(et.key),this._snapshot.fromCache),this.query.converter))})}docChanges($={}){let ee=!!$.includeMetadataChanges;if(ee&&this._snapshot.excludesMetadataChanges)throw new iY(iQ.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===ee||(this._cachedChanges=TI(this,ee),this._cachedChangesIncludeMetadataChanges=ee),this._cachedChanges}}function TI($,ee){if($._snapshot.oldDocs.isEmpty()){let ee=0;return $._snapshot.docChanges.map(et=>{let er=new TR($._firestore,$._userDataWriter,et.doc.key,et.doc,new TC($._snapshot.mutatedKeys.has(et.doc.key),$._snapshot.fromCache),$.query.converter);return et.doc,{type:"added",doc:er,oldIndex:-1,newIndex:ee++}})}{let et=$._snapshot.oldDocs;return $._snapshot.docChanges.filter($=>ee||3!==$.type).map(ee=>{let er=new TR($._firestore,$._userDataWriter,ee.doc.key,ee.doc,new TC($._snapshot.mutatedKeys.has(ee.doc.key),$._snapshot.fromCache),$.query.converter),en=-1,ei=-1;return 0!==ee.type&&(en=et.indexOf(ee.doc.key),et=et.delete(ee.doc.key)),1!==ee.type&&(ei=(et=et.add(ee.doc)).indexOf(ee.doc.key)),{type:TP(ee.type),doc:er,oldIndex:en,newIndex:ei}})}}function TP($){switch($){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return iG()}}class TA extends TE{constructor($){super(),this.firestore=$}convertBytes($){return new SD($)}convertReference($){let ee=this.convertDocumentKey($,this.firestore._databaseId);return new Sm(this.firestore,null,ee)}}function TO($){$=bj($,Sg);let ee=bj($.firestore,S_),et=Sx(ee),er=new TA(ee);return Tt($._query),b6(et,$._query).then(et=>new Tx(ee,er,$,et))}class TD{constructor($){this.forceOwnership=$,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize($){this._onlineComponentProvider=new bI,this._offlineComponentProvider=new bx(this._onlineComponentProvider,null==$?void 0:$.cacheSizeBytes,this.forceOwnership)}}new WeakMap,/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */SA("node")},1987:($,ee,et)=>{"use strict";et.d(ee,{_:()=>ef});var er=et(7222),en=et(2806),ei=et(8781);function es($){$.values.forEach($=>$.stop())}function eo(){let $=!1,ee=new Set,et={subscribe:$=>(ee.add($),()=>void ee.delete($)),start(et,en){(0,er.k)($,"controls.start() should only be called after a component has mounted. Consider calling within a useEffect hook.");let es=[];return ee.forEach($=>{es.push((0,ei.d)($,et,{transitionOverride:en}))}),Promise.all(es)},set:et=>((0,er.k)($,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),ee.forEach($=>{(0,en.gg)($,et)})),stop(){ee.forEach($=>{es($)})},mount:()=>($=!0,()=>{$=!1,et.stop()})};return et}var eu=et(207),eh=et(9038);let ef=function(){let $=(0,eu.h)(eo);return(0,eh.L)($.mount,[]),$}},7743:($,ee,et)=>{"use strict";et.d(ee,{v:()=>tZ});var er=et(7222),en=et(8825);let ei={current:!1},es=$=>Array.isArray($)&&"number"==typeof $[0];function eo($){return!!(!$||"string"==typeof $&&eh[$]||es($)||Array.isArray($)&&$.every(eo))}let eu=([$,ee,et,er])=>`cubic-bezier(${$}, ${ee}, ${et}, ${er})`,eh={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:eu([0,.65,.55,1]),circOut:eu([.55,0,1,.45]),backIn:eu([.31,.01,.66,-.59]),backOut:eu([.33,1.53,.69,.99])};function ef($){if($)return es($)?eu($):Array.isArray($)?$.map(ef):eh[$]}function ep($,ee,et,{delay:er=0,duration:en,repeat:ei=0,repeatType:es="loop",ease:eo,times:eu}={}){let eh={[ee]:et};eu&&(eh.offset=eu);let ep=ef(eo);return Array.isArray(ep)&&(eh.easing=ep),$.animate(eh,{delay:er,duration:en,easing:Array.isArray(ep)?"linear":ep,fill:"both",iterations:ei+1,direction:"reverse"===es?"alternate":"normal"})}function eg($,{repeat:ee,repeatType:et="loop"}){let er=ee&&"loop"!==et&&ee%2==1?0:$.length-1;return $[er]}var em=et(254);let ey=($,ee,et)=>(((1-3*et+3*ee)*$+(3*et-6*ee))*$+3*ee)*$,ev=1e-7,eS=12;function eT($,ee,et,er,en){let ei,es;let eo=0;do(ei=ey(es=ee+(et-ee)/2,er,en)-$)>0?et=es:ee=es;while(Math.abs(ei)>ev&&++eo<eS);return es}function ew($,ee,et,er){if($===ee&&et===er)return em.Z;let en=ee=>eT(ee,0,1,$,et);return $=>0===$||1===$?$:ey(en($),ee,er)}let eE=ew(.42,0,1,1),eC=ew(0,0,.58,1),e_=ew(.42,0,.58,1),eR=$=>Array.isArray($)&&"number"!=typeof $[0];var ex=et(221),eI=et(1668),eP=et(1338);let eA=ew(.33,1.53,.69,.99),eO=(0,eP.M)(eA),eD=(0,eI.o)(eO),eN=$=>($*=2)<1?.5*eO($):.5*(2-Math.pow(2,-10*($-1))),ek={linear:em.Z,easeIn:eE,easeInOut:e_,easeOut:eC,circIn:ex.Z7,circInOut:ex.X7,circOut:ex.Bn,backIn:eO,backInOut:eD,backOut:eA,anticipate:eN},eM=$=>{if(Array.isArray($)){(0,er.k)(4===$.length,"Cubic bezier arrays must contain four numerical values.");let[ee,et,en,ei]=$;return ew(ee,et,en,ei)}return"string"==typeof $?((0,er.k)(void 0!==ek[$],`Invalid easing type '${$}'`),ek[$]):$};var eL=et(4244),ej=et(4351),eB=et(8626);function eF($,ee,et){return(et<0&&(et+=1),et>1&&(et-=1),et<1/6)?$+(ee-$)*6*et:et<.5?ee:et<2/3?$+(ee-$)*(2/3-et)*6:$}function eV({hue:$,saturation:ee,lightness:et,alpha:er}){$/=360,et/=100;let en=0,ei=0,es=0;if(ee/=100){let er=et<.5?et*(1+ee):et+ee-et*ee,eo=2*et-er;en=eF(eo,er,$+1/3),ei=eF(eo,er,$),es=eF(eo,er,$-1/3)}else en=ei=es=et;return{red:Math.round(255*en),green:Math.round(255*ei),blue:Math.round(255*es),alpha:er}}var eU=et(2550),ez=et(2983),eq=et(5124);let eH=($,ee,et)=>{let er=$*$;return Math.sqrt(Math.max(0,et*(ee*ee-er)+er))},e$=[eU.$,ez.m,eq.J],eG=$=>e$.find(ee=>ee.test($));function eW($){let ee=eG($);(0,er.k)(!!ee,`'${$}' is not an animatable color. Use the equivalent color code instead.`);let et=ee.parse($);return ee===eq.J&&(et=eV(et)),et}let eK=($,ee)=>{let et=eW($),er=eW(ee),en={...et};return $=>(en.red=eH(et.red,er.red,$),en.green=eH(et.green,er.green,$),en.blue=eH(et.blue,er.blue,$),en.alpha=(0,eB.C)(et.alpha,er.alpha,$),ez.m.transform(en))};var eQ=et(5313),eY=et(993);let eX=($,ee)=>et=>`${et>0?ee:$}`;function eJ($,ee){return"number"==typeof $?et=>(0,eB.C)($,ee,et):eL.$.test($)?eK($,ee):$.startsWith("var(")?eX($,ee):e1($,ee)}let eZ=($,ee)=>{let et=[...$],er=et.length,en=$.map(($,et)=>eJ($,ee[et]));return $=>{for(let ee=0;ee<er;ee++)et[ee]=en[ee]($);return et}},e0=($,ee)=>{let et={...$,...ee},er={};for(let en in et)void 0!==$[en]&&void 0!==ee[en]&&(er[en]=eJ($[en],ee[en]));return $=>{for(let ee in er)et[ee]=er[ee]($);return et}},e1=($,ee)=>{let et=eY.P.createTransformer(ee),en=(0,eY.V)($),ei=(0,eY.V)(ee);return en.numVars===ei.numVars&&en.numColors===ei.numColors&&en.numNumbers>=ei.numNumbers?(0,eQ.z)(eZ(en.values,ei.values),et):((0,er.K)(!0,`Complex values '${$}' and '${ee}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),eX($,ee))};var e2=et(4843);let e4=($,ee)=>et=>(0,eB.C)($,ee,et);function e3($){if("number"==typeof $);else if("string"==typeof $)return eL.$.test($)?eK:e1;else if(Array.isArray($))return eZ;else if("object"==typeof $)return e0;return e4}function e6($,ee,et){let er=[],en=et||e3($[0]),ei=$.length-1;for(let et=0;et<ei;et++){let ei=en($[et],$[et+1]);if(ee){let $=Array.isArray(ee)?ee[et]||em.Z:ee;ei=(0,eQ.z)($,ei)}er.push(ei)}return er}function e5($,ee,{clamp:et=!0,ease:en,mixer:ei}={}){let es=$.length;if((0,er.k)(es===ee.length,"Both input and output ranges must be the same length"),1===es)return()=>ee[0];$[0]>$[es-1]&&($=[...$].reverse(),ee=[...ee].reverse());let eo=e6(ee,en,ei),eu=eo.length,eh=ee=>{let et=0;if(eu>1)for(;et<$.length-2&&!(ee<$[et+1]);et++);let er=(0,e2.Y)($[et],$[et+1],ee);return eo[et](er)};return et?ee=>eh((0,ej.u)($[0],$[es-1],ee)):eh}function e9($,ee){let et=$[$.length-1];for(let er=1;er<=ee;er++){let en=(0,e2.Y)(0,ee,er);$.push((0,eB.C)(et,1,en))}}function e8($){let ee=[0];return e9(ee,$.length-1),ee}function e7($,ee){return $.map($=>$*ee)}function te($,ee){return $.map(()=>ee||e_).splice(0,$.length-1)}function tt({duration:$=300,keyframes:ee,times:et,ease:er="easeInOut"}){let en=eR(er)?er.map(eM):eM(er),ei={done:!1,value:ee[0]},es=e5(e7(et&&et.length===ee.length?et:e8(ee),$),ee,{ease:Array.isArray(en)?en:te(ee,en)});return{calculatedDuration:$,next:ee=>(ei.value=es(ee),ei.done=ee>=$,ei)}}var tr=et(1033);let ti=5;function ts($,ee,et){let er=Math.max(ee-ti,0);return(0,tr.R)(et-$(er),ee-er)}let tl=.001,tu=.01,th=10,tf=.05,tp=1;function tg({duration:$=800,bounce:ee=.25,velocity:et=0,mass:ei=1}){let es,eo;(0,er.K)($<=(0,en.w)(th),"Spring duration must be 10 seconds or less");let eu=1-ee;eu=(0,ej.u)(tf,tp,eu),$=(0,ej.u)(tu,th,(0,en.X)($)),eu<1?(es=ee=>{let er=ee*eu,en=er*$;return tl-(er-et)/tv(ee,eu)*Math.exp(-en)},eo=ee=>{let er=ee*eu*$,en=er*et+et,ei=Math.pow(eu,2)*Math.pow(ee,2)*$,eo=Math.exp(-er),eh=tv(Math.pow(ee,2),eu);return(en-ei)*eo*(-es(ee)+tl>0?-1:1)/eh}):(es=ee=>-tl+Math.exp(-ee*$)*((ee-et)*$+1),eo=ee=>$*$*(et-ee)*Math.exp(-ee*$));let eh=ty(es,eo,5/$);if($=(0,en.w)($),isNaN(eh))return{stiffness:100,damping:10,duration:$};{let ee=Math.pow(eh,2)*ei;return{stiffness:ee,damping:2*eu*Math.sqrt(ei*ee),duration:$}}}let tm=12;function ty($,ee,et){let er=et;for(let et=1;et<tm;et++)er-=$(er)/ee(er);return er}function tv($,ee){return $*Math.sqrt(1-ee*ee)}let tS=["duration","bounce"],tT=["stiffness","damping","mass"];function tw($,ee){return ee.some(ee=>void 0!==$[ee])}function tE($){let ee={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...$};if(!tw($,tT)&&tw($,tS)){let et=tg($);(ee={...ee,...et,mass:1}).isResolvedFromDuration=!0}return ee}function tC({keyframes:$,restDelta:ee,restSpeed:et,...er}){let ei;let es=$[0],eo=$[$.length-1],eu={done:!1,value:es},{stiffness:eh,damping:ef,mass:ep,duration:eg,velocity:em,isResolvedFromDuration:ey}=tE({...er,velocity:-(0,en.X)(er.velocity||0)}),ev=em||0,eS=ef/(2*Math.sqrt(eh*ep)),eT=eo-es,ew=(0,en.X)(Math.sqrt(eh/ep)),eE=5>Math.abs(eT);if(et||(et=eE?.01:2),ee||(ee=eE?.005:.5),eS<1){let $=tv(ew,eS);ei=ee=>eo-Math.exp(-eS*ew*ee)*((ev+eS*ew*eT)/$*Math.sin($*ee)+eT*Math.cos($*ee))}else if(1===eS)ei=$=>eo-Math.exp(-ew*$)*(eT+(ev+ew*eT)*$);else{let $=ew*Math.sqrt(eS*eS-1);ei=ee=>{let et=Math.exp(-eS*ew*ee),er=Math.min($*ee,300);return eo-et*((ev+eS*ew*eT)*Math.sinh(er)+$*eT*Math.cosh(er))/$}}return{calculatedDuration:ey&&eg||null,next:$=>{let er=ei($);if(ey)eu.done=$>=eg;else{let en=ev;0!==$&&(en=eS<1?ts(ei,$,er):0);let es=Math.abs(en)<=et,eh=Math.abs(eo-er)<=ee;eu.done=es&&eh}return eu.value=eu.done?eo:er,eu}}}function t_({keyframes:$,velocity:ee=0,power:et=.8,timeConstant:er=325,bounceDamping:en=10,bounceStiffness:ei=500,modifyTarget:es,min:eo,max:eu,restDelta:eh=.5,restSpeed:ef}){let ep,eg;let em=$[0],ey={done:!1,value:em},ev=$=>void 0!==eo&&$<eo||void 0!==eu&&$>eu,eS=$=>void 0===eo?eu:void 0===eu?eo:Math.abs(eo-$)<Math.abs(eu-$)?eo:eu,eT=et*ee,ew=em+eT,eE=void 0===es?ew:es(ew);eE!==ew&&(eT=eE-em);let eC=$=>-eT*Math.exp(-$/er),e_=$=>eE+eC($),eR=$=>{let ee=eC($),et=e_($);ey.done=Math.abs(ee)<=eh,ey.value=ey.done?eE:et},ex=$=>{ev(ey.value)&&(ep=$,eg=tC({keyframes:[ey.value,eS(ey.value)],velocity:ts(e_,$,ey.value),damping:en,stiffness:ei,restDelta:eh,restSpeed:ef}))};return ex(0),{calculatedDuration:null,next:$=>{let ee=!1;return(eg||void 0!==ep||(ee=!0,eR($),ex($)),void 0!==ep&&$>ep)?eg.next($-ep):(ee||eR($),ey)}}}var tR=et(228);let tI=$=>{let ee=({timestamp:ee})=>$(ee);return{start:()=>tR.Wi.update(ee,!0),stop:()=>(0,tR.Pn)(ee),now:()=>tR.frameData.isProcessing?tR.frameData.timestamp:performance.now()}},tP=2e4;function tA($){let ee=0,et=50,er=$.next(ee);for(;!er.done&&ee<tP;)ee+=et,er=$.next(ee);return ee>=tP?1/0:ee}let tO={decay:t_,inertia:t_,tween:tt,keyframes:tt,spring:tC};function tD({autoplay:$=!0,delay:ee=0,driver:et=tI,keyframes:er,type:ei="keyframes",repeat:es=0,repeatDelay:eo=0,repeatType:eu="loop",onPlay:eh,onStop:ef,onComplete:ep,onUpdate:eg,...em}){let ey,ev,eS,eT,ew,eE=1,eC=!1,e_=()=>{ev=new Promise($=>{ey=$})};e_();let eR=tO[ei]||tt;eR!==tt&&"number"!=typeof er[0]&&(eT=e5([0,100],er,{clamp:!1}),er=[0,100]);let ex=eR({...em,keyframes:er});"mirror"===eu&&(ew=eR({...em,keyframes:[...er].reverse(),velocity:-(em.velocity||0)}));let eI="idle",eP=null,eA=null,eO=null;null===ex.calculatedDuration&&es&&(ex.calculatedDuration=tA(ex));let{calculatedDuration:eD}=ex,eN=1/0,ek=1/0;null!==eD&&(ek=(eN=eD+eo)*(es+1)-eo);let eM=0,eL=$=>{if(null===eA)return;eE>0&&(eA=Math.min(eA,$)),eE<0&&(eA=Math.min($-ek/eE,eA));let et=(eM=null!==eP?eP:Math.round($-eA)*eE)-ee*(eE>=0?1:-1),en=eE>=0?et<0:et>ek;eM=Math.max(et,0),"finished"===eI&&null===eP&&(eM=ek);let ei=eM,eh=ex;if(es){let $=Math.min(eM,ek)/eN,ee=Math.floor($),et=$%1;!et&&$>=1&&(et=1),1===et&&ee--,(ee=Math.min(ee,es+1))%2&&("reverse"===eu?(et=1-et,eo&&(et-=eo/eN)):"mirror"===eu&&(eh=ew)),ei=(0,ej.u)(0,1,et)*eN}let ef=en?{done:!1,value:er[0]}:eh.next(ei);eT&&(ef.value=eT(ef.value));let{done:ep}=ef;en||null===eD||(ep=eE>=0?eM>=ek:eM<=0);let em=null===eP&&("finished"===eI||"running"===eI&&ep);return eg&&eg(ef.value),em&&eV(),ef},eB=()=>{eS&&eS.stop(),eS=void 0},eF=()=>{eI="idle",eB(),ey(),e_(),eA=eO=null},eV=()=>{eI="finished",ep&&ep(),eB(),ey()},eU=()=>{if(eC)return;eS||(eS=et(eL));let $=eS.now();eh&&eh(),null!==eP?eA=$-eP:eA&&"finished"!==eI||(eA=$),"finished"===eI&&e_(),eO=eA,eP=null,eI="running",eS.start()};$&&eU();let ez={then:($,ee)=>ev.then($,ee),get time(){return(0,en.X)(eM)},set time(newTime){eM=newTime=(0,en.w)(newTime),null===eP&&eS&&0!==eE?eA=eS.now()-newTime/eE:eP=newTime},get duration(){let $=null===ex.calculatedDuration?tA(ex):ex.calculatedDuration;return(0,en.X)($)},get speed(){return eE},set speed(newSpeed){if(newSpeed===eE||!eS)return;eE=newSpeed,ez.time=(0,en.X)(eM)},get state(){return eI},play:eU,pause:()=>{eI="paused",eP=eM},stop:()=>{eC=!0,"idle"!==eI&&(eI="idle",ef&&ef(),eF())},cancel:()=>{null!==eO&&eL(eO),eF()},complete:()=>{eI="finished"},sample:$=>(eA=0,eL($))};return ez}let tN=function($){let ee;return()=>(void 0===ee&&(ee=$()),ee)}(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),tk=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),tM=10,tL=2e4,tj=($,ee)=>"spring"===ee.type||"backgroundColor"===$||!eo(ee.ease);function tB($,ee,{onUpdate:et,onComplete:er,...ei}){let es,eo;if(!(tN()&&tk.has(ee)&&!ei.repeatDelay&&"mirror"!==ei.repeatType&&0!==ei.damping&&"inertia"!==ei.type))return!1;let eu=!1,eh=!1,ef=()=>{eo=new Promise($=>{es=$})};ef();let{keyframes:ey,duration:ev=300,ease:eS,times:eT}=ei;if(tj(ee,ei)){let $=tD({...ei,repeat:0,delay:0}),ee={done:!1,value:ey[0]},et=[],er=0;for(;!ee.done&&er<tL;)ee=$.sample(er),et.push(ee.value),er+=tM;eT=void 0,ey=et,ev=er-tM,eS="linear"}let ew=ep($.owner.current,ee,ey,{...ei,duration:ev,ease:eS,times:eT}),eE=()=>{eh=!1,ew.cancel()},eC=()=>{eh=!0,tR.Wi.update(eE),es(),ef()};return ew.onfinish=()=>{eh||($.set(eg(ey,ei)),er&&er(),eC())},{then:($,ee)=>eo.then($,ee),attachTimeline:$=>(ew.timeline=$,ew.onfinish=null,em.Z),get time(){return(0,en.X)(ew.currentTime||0)},set time(newTime){ew.currentTime=(0,en.w)(newTime)},get speed(){return ew.playbackRate},set speed(newSpeed){ew.playbackRate=newSpeed},get duration(){return(0,en.X)(ev)},play:()=>{eu||(ew.play(),(0,tR.Pn)(eE))},pause:()=>ew.pause(),stop:()=>{if(eu=!0,"idle"===ew.playState)return;let{currentTime:ee}=ew;if(ee){let et=tD({...ei,autoplay:!1});$.setWithVelocity(et.sample(ee-tM).value,et.sample(ee).value,tM)}eC()},complete:()=>{eh||ew.finish()},cancel:eC}}function tF({keyframes:$,delay:ee,onUpdate:et,onComplete:er}){let en=()=>(et&&et($[$.length-1]),er&&er(),{time:0,speed:1,duration:0,play:em.Z,pause:em.Z,stop:em.Z,then:$=>($(),Promise.resolve()),cancel:em.Z,complete:em.Z});return ee?tD({keyframes:[0,1],duration:0,delay:ee,onComplete:en}):en()}var tV=et(9255);let tU={type:"spring",stiffness:500,damping:25,restSpeed:10},tz=$=>({type:"spring",stiffness:550,damping:0===$?2*Math.sqrt(550):30,restSpeed:10}),tq={type:"keyframes",duration:.8},tH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},t$=($,{keyframes:ee})=>ee.length>2?tq:tV.G.has($)?$.startsWith("scale")?tz(ee[1]):tU:tH,tG=($,ee)=>"zIndex"!==$&&!!("number"==typeof ee||Array.isArray(ee)||"string"==typeof ee&&(eY.P.test(ee)||"0"===ee)&&!ee.startsWith("url("));var tW=et(2858),tK=et(9444);function tQ($){return"number"==typeof $?0===$:null!==$?"none"===$||"0"===$||(0,tK.W)($):void 0}function tY($,ee,et,er){let en,ei;let es=tG(ee,et);en=Array.isArray(et)?[...et]:[null,et];let eo=void 0!==er.from?er.from:$.get(),eu=[];for(let $=0;$<en.length;$++)null===en[$]&&(en[$]=0===$?eo:en[$-1]),tQ(en[$])&&eu.push($),"string"==typeof en[$]&&"none"!==en[$]&&"0"!==en[$]&&(ei=en[$]);if(es&&eu.length&&ei)for(let $=0;$<eu.length;$++)en[eu[$]]=(0,tW.T)(ee,ei);return en}var tX=et(6907);let tJ={skipAnimations:!1},tZ=($,ee,et,es={})=>eo=>{let eu=(0,tX.e)(es,$)||{},eh=eu.delay||es.delay||0,{elapsed:ef=0}=es;ef-=(0,en.w)(eh);let ep=tY(ee,$,et,eu),eg=ep[0],em=ep[ep.length-1],ey=tG($,eg),ev=tG($,em);(0,er.K)(ey===ev,`You are trying to animate ${$} from "${eg}" to "${em}". ${eg} is not an animatable value - to enable this animation set ${eg} to a value animatable to ${em} via the \`style\` property.`);let eS={keyframes:ep,velocity:ee.getVelocity(),ease:"easeOut",...eu,delay:-ef,onUpdate:$=>{ee.set($),eu.onUpdate&&eu.onUpdate($)},onComplete:()=>{eo(),eu.onComplete&&eu.onComplete()}};if((0,tX.r)(eu)||(eS={...eS,...t$($,eS)}),eS.duration&&(eS.duration=(0,en.w)(eS.duration)),eS.repeatDelay&&(eS.repeatDelay=(0,en.w)(eS.repeatDelay)),!ey||!ev||ei.current||!1===eu.type||tJ.skipAnimations)return tF(ei.current?{...eS,delay:0}:eS);if(!es.isHandoff&&ee.owner&&ee.owner.current instanceof HTMLElement&&!ee.owner.getProps().onUpdate){let et=tB(ee,$,eS);if(et)return et}return tD(eS)}},8781:($,ee,et)=>{"use strict";et.d(ee,{d:()=>eT});var er=et(6800),en=et(9255),ei=et(7888),es=et(7743),eo=et(9220),eu=et(2806),eh=et(6907),ef=et(228);function ep({protectedKeys:$,needsAnimating:ee},et){let er=$.hasOwnProperty(et)&&!0!==ee[et];return ee[et]=!1,er}function eg($,ee){let et=$.get();if(!Array.isArray(ee))return et!==ee;for(let $=0;$<ee.length;$++)if(ee[$]!==et)return!0}function em($,ee,{delay:et=0,transitionOverride:er,type:em}={}){let{transition:ey=$.getDefaultTransition(),transitionEnd:ev,...eS}=$.makeTargetAnimatable(ee),eT=$.getValue("willChange");er&&(ey=er);let ew=[],eE=em&&$.animationState&&$.animationState.getState()[em];for(let ee in eS){let er=$.getValue(ee),eu=eS[ee];if(!er||void 0===eu||eE&&ep(eE,ee))continue;let em={delay:et,elapsed:0,...(0,eh.e)(ey||{},ee)};if(window.HandoffAppearAnimations){let et=$.getProps()[ei.M];if(et){let $=window.HandoffAppearAnimations(et,ee,er,ef.Wi);null!==$&&(em.elapsed=$,em.isHandoff=!0)}}let ev=!em.isHandoff&&!eg(er,eu);if("spring"===em.type&&(er.getVelocity()||em.velocity)&&(ev=!1),er.animation&&(ev=!1),ev)continue;er.start((0,es.v)(ee,er,eu,$.shouldReduceMotion&&en.G.has(ee)?{type:!1}:em));let eC=er.animation;(0,eo.L)(eT)&&(eT.add(ee),eC.then(()=>eT.remove(ee))),ew.push(eC)}return ev&&Promise.all(ew).then(()=>{ev&&(0,eu.CD)($,ev)}),ew}function ey($,ee,et={}){let en=(0,er.x)($,ee,et.custom),{transition:ei=$.getDefaultTransition()||{}}=en||{};et.transitionOverride&&(ei=et.transitionOverride);let es=en?()=>Promise.all(em($,en,et)):()=>Promise.resolve(),eo=$.variantChildren&&$.variantChildren.size?(er=0)=>{let{delayChildren:en=0,staggerChildren:es,staggerDirection:eo}=ei;return ev($,ee,en+er,es,eo,et)}:()=>Promise.resolve(),{when:eu}=ei;if(!eu)return Promise.all([es(),eo(et.delay)]);{let[$,ee]="beforeChildren"===eu?[es,eo]:[eo,es];return $().then(()=>ee())}}function ev($,ee,et=0,er=0,en=1,ei){let es=[],eo=($.variantChildren.size-1)*er,eu=1===en?($=0)=>$*er:($=0)=>eo-$*er;return Array.from($.variantChildren).sort(eS).forEach(($,er)=>{$.notify("AnimationStart",ee),es.push(ey($,ee,{...ei,delay:et+eu(er)}).then(()=>$.notify("AnimationComplete",ee)))}),Promise.all(es)}function eS($,ee){return $.sortNodePosition(ee)}function eT($,ee,et={}){let en;if($.notify("AnimationStart",ee),Array.isArray(ee))en=Promise.all(ee.map(ee=>ey($,ee,et)));else if("string"==typeof ee)en=ey($,ee,et);else{let ei="function"==typeof ee?(0,er.x)($,ee,et.custom):ee;en=Promise.all(em($,ei,et))}return en.then(()=>$.notify("AnimationComplete",ee))}},7888:($,ee,et)=>{"use strict";et.d(ee,{M:()=>ei});var er=et(9261);let en="framerAppearId",ei="data-"+(0,er.D)(en)},4034:($,ee,et)=>{"use strict";et.d(ee,{C:()=>er});let er=$=>Array.isArray($)},6907:($,ee,et)=>{"use strict";function er({when:$,delay:ee,delayChildren:et,staggerChildren:er,staggerDirection:en,repeat:ei,repeatType:es,repeatDelay:eo,from:eu,elapsed:eh,...ef}){return!!Object.keys(ef).length}function en($,ee){return $[ee]||$.default||$}et.d(ee,{e:()=>en,r:()=>er})},221:($,ee,et)=>{"use strict";et.d(ee,{Bn:()=>es,X7:()=>eo,Z7:()=>ei});var er=et(1668),en=et(1338);let ei=$=>1-Math.sin(Math.acos($)),es=(0,en.M)(ei),eo=(0,er.o)(ei)},1668:($,ee,et)=>{"use strict";et.d(ee,{o:()=>er});let er=$=>ee=>ee<=.5?$(2*ee)/2:(2-$(2*(1-ee)))/2},1338:($,ee,et)=>{"use strict";et.d(ee,{M:()=>er});let er=$=>ee=>1-$(1-ee)},228:($,ee,et)=>{"use strict";et.d(ee,{Pn:()=>eh,Wi:()=>eu,frameData:()=>ef,S6:()=>ep});var er=et(254);class en{constructor(){this.order=[],this.scheduled=new Set}add($){if(!this.scheduled.has($))return this.scheduled.add($),this.order.push($),!0}remove($){let ee=this.order.indexOf($);-1!==ee&&(this.order.splice(ee,1),this.scheduled.delete($))}clear(){this.order.length=0,this.scheduled.clear()}}function ei($){let ee=new en,et=new en,er=0,ei=!1,es=!1,eo=new WeakSet,eu={schedule:($,en=!1,es=!1)=>{let eu=es&&ei,eh=eu?ee:et;return en&&eo.add($),eh.add($)&&eu&&ei&&(er=ee.order.length),$},cancel:$=>{et.remove($),eo.delete($)},process:en=>{if(ei){es=!0;return}if(ei=!0,[ee,et]=[et,ee],et.clear(),er=ee.order.length)for(let et=0;et<er;et++){let er=ee.order[et];er(en),eo.has(er)&&(eu.schedule(er),$())}ei=!1,es&&(es=!1,eu.process(en))}};return eu}let es=["prepare","read","update","preRender","render","postRender"],eo=40,{schedule:eu,cancel:eh,state:ef,steps:ep}=function($,ee){let et=!1,er=!0,en={delta:0,timestamp:0,isProcessing:!1},eu=es.reduce(($,ee)=>($[ee]=ei(()=>et=!0),$),{}),eh=$=>eu[$].process(en),ef=()=>{let ei=performance.now();et=!1,en.delta=er?1e3/60:Math.max(Math.min(ei-en.timestamp,eo),1),en.timestamp=ei,en.isProcessing=!0,es.forEach(eh),en.isProcessing=!1,et&&ee&&(er=!1,$(ef))},ep=()=>{et=!0,er=!0,en.isProcessing||$(ef)};return{schedule:es.reduce(($,ee)=>{let er=eu[ee];return $[ee]=($,ee=!1,en=!1)=>(et||ep(),er.schedule($,ee,en)),$},{}),cancel:$=>es.forEach(ee=>eu[ee].cancel($)),state:en,steps:eu}}("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:er.Z,!0)},2979:($,ee,et)=>{"use strict";et.d(ee,{E:()=>sD});var er=et(3729);let en=(0,er.createContext)({transformPagePoint:$=>$,isStatic:!1,reducedMotion:"never"}),ei=(0,er.createContext)({}),es=(0,er.createContext)(null);var eo=et(9038);let eu=(0,er.createContext)({strict:!1});var eh=et(7888);function ef($,ee,et,ef){let{visualElement:ep}=(0,er.useContext)(ei),eg=(0,er.useContext)(eu),em=(0,er.useContext)(es),ey=(0,er.useContext)(en).reducedMotion,ev=(0,er.useRef)();ef=ef||eg.renderer,!ev.current&&ef&&(ev.current=ef($,{visualState:ee,parent:ep,props:et,presenceContext:em,blockInitialAnimation:!!em&&!1===em.initial,reducedMotionConfig:ey}));let eS=ev.current;(0,er.useInsertionEffect)(()=>{eS&&eS.update(et,em)});let eT=(0,er.useRef)(!!(et[eh.M]&&!window.HandoffComplete));return(0,eo.L)(()=>{eS&&(eS.render(),eT.current&&eS.animationState&&eS.animationState.animateChanges())}),(0,er.useEffect)(()=>{eS&&(eS.updateFeatures(),!eT.current&&eS.animationState&&eS.animationState.animateChanges(),eT.current&&(eT.current=!1,window.HandoffComplete=!0))}),eS}function ep($){return $&&"object"==typeof $&&Object.prototype.hasOwnProperty.call($,"current")}function eg($,ee,et){return(0,er.useCallback)(er=>{er&&$.mount&&$.mount(er),ee&&(er?ee.mount(er):ee.unmount()),et&&("function"==typeof et?et(er):ep(et)&&(et.current=er))},[ee])}function em($){return"string"==typeof $||Array.isArray($)}function ey($){return null!==$&&"object"==typeof $&&"function"==typeof $.start}let ev=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],eS=["initial",...ev];function eT($){return ey($.animate)||eS.some(ee=>em($[ee]))}function ew($){return!!(eT($)||$.variants)}function eE($,ee){if(eT($)){let{initial:ee,animate:et}=$;return{initial:!1===ee||em(ee)?ee:void 0,animate:em(et)?et:void 0}}return!1!==$.inherit?ee:{}}function eC($){let{initial:ee,animate:et}=eE($,(0,er.useContext)(ei));return(0,er.useMemo)(()=>({initial:ee,animate:et}),[e_(ee),e_(et)])}function e_($){return Array.isArray($)?$.join(" "):$}let eR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ex={};for(let $ in eR)ex[$]={isEnabled:ee=>eR[$].some($=>!!ee[$])};function eI($){for(let ee in $)ex[ee]={...ex[ee],...$[ee]}}var eP=et(9398);let eA=(0,er.createContext)({}),eO=(0,er.createContext)({}),eD=Symbol.for("motionComponentSymbol");function eN({preloadedFeatures:$,createVisualElement:ee,useRender:et,useVisualState:es,Component:eo}){function eh(eh,ep){let em;let ey={...(0,er.useContext)(en),...eh,layoutId:ek(eh)},{isStatic:ev}=ey,eS=eC(eh),eT=es(eh,ev);if(!ev&&eP.j){eS.visualElement=ef(eo,eT,ey,ee);let et=(0,er.useContext)(eO),en=(0,er.useContext)(eu).strict;eS.visualElement&&(em=eS.visualElement.loadFeatures(ey,en,$,et))}return er.createElement(ei.Provider,{value:eS},em&&eS.visualElement?er.createElement(em,{visualElement:eS.visualElement,...ey}):null,et(eo,eh,eg(eT,eS.visualElement,ep),eT,ev,eS.visualElement))}$&&eI($);let ep=(0,er.forwardRef)(eh);return ep[eD]=eo,ep}function ek({layoutId:$}){let ee=(0,er.useContext)(eA).id;return ee&&void 0!==$?ee+"-"+$:$}function eM($){function ee(ee,et={}){return eN($(ee,et))}if("undefined"==typeof Proxy)return ee;let et=new Map;return new Proxy(ee,{get:($,er)=>(et.has(er)||et.set(er,ee(er)),et.get(er))})}let eL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ej($){if("string"!=typeof $||$.includes("-"));else if(eL.indexOf($)>-1||/[A-Z]/.test($))return!0;return!1}let eB={};function eF($){Object.assign(eB,$)}var eV=et(9255);function eU($,{layout:ee,layoutId:et}){return eV.G.has($)||$.startsWith("origin")||(ee||void 0!==et)&&(!!eB[$]||"opacity"===$)}var ez=et(815);let eq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},eH=eV._.length;function e$($,{enableHardwareAcceleration:ee=!0,allowTransformNone:et=!0},er,en){let ei="";for(let ee=0;ee<eH;ee++){let et=eV._[ee];if(void 0!==$[et]){let ee=eq[et]||et;ei+=`${ee}(${$[et]}) `}}return ee&&!$.z&&(ei+="translateZ(0)"),ei=ei.trim(),en?ei=en($,er?"":ei):et&&er&&(ei="none"),ei}var eG=et(9028);let eW=($,ee)=>ee&&"number"==typeof $?ee.transform($):$;var eK=et(3384);function eQ($,ee,et,er){let{style:en,vars:ei,transform:es,transformOrigin:eo}=$,eu=!1,eh=!1,ef=!0;for(let $ in ee){let et=ee[$];if((0,eG.f9)($)){ei[$]=et;continue}let er=eK.j[$],ep=eW(et,er);if(eV.G.has($)){if(eu=!0,es[$]=ep,!ef)continue;et!==(er.default||0)&&(ef=!1)}else $.startsWith("origin")?(eh=!0,eo[$]=ep):en[$]=ep}if(!ee.transform&&(eu||er?en.transform=e$($.transform,et,ef,er):en.transform&&(en.transform="none")),eh){let{originX:$="50%",originY:ee="50%",originZ:et=0}=eo;en.transformOrigin=`${$} ${ee} ${et}`}}let eY=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function eX($,ee,et){for(let er in ee)(0,ez.i)(ee[er])||eU(er,et)||($[er]=ee[er])}function eJ({transformTemplate:$},ee,et){return(0,er.useMemo)(()=>{let er=eY();return eQ(er,ee,{enableHardwareAcceleration:!et},$),Object.assign({},er.vars,er.style)},[ee])}function eZ($,ee,et){let er=$.style||{},en={};return eX(en,er,$),Object.assign(en,eJ($,ee,et)),$.transformValues?$.transformValues(en):en}function e0($,ee,et){let er={},en=eZ($,ee,et);return $.drag&&!1!==$.dragListener&&(er.draggable=!1,en.userSelect=en.WebkitUserSelect=en.WebkitTouchCallout="none",en.touchAction=!0===$.drag?"none":`pan-${"x"===$.drag?"y":"x"}`),void 0===$.tabIndex&&($.onTap||$.onTapStart||$.whileTap)&&(er.tabIndex=0),er.style=en,er}let e1=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function e2($){return $.startsWith("while")||$.startsWith("drag")&&"draggable"!==$||$.startsWith("layout")||$.startsWith("onTap")||$.startsWith("onPan")||$.startsWith("onLayout")||e1.has($)}let e4=$=>!e2($);function e3($){$&&(e4=ee=>ee.startsWith("on")?!e2(ee):$(ee))}try{e3(require("@emotion/is-prop-valid").default)}catch($){}function e6($,ee,et){let er={};for(let en in $)("values"!==en||"object"!=typeof $.values)&&(e4(en)||!0===et&&e2(en)||!ee&&!e2(en)||$.draggable&&en.startsWith("onDrag"))&&(er[en]=$[en]);return er}var e5=et(9574);function e9($,ee,et){return"string"==typeof $?$:e5.px.transform(ee+et*$)}function e8($,ee,et){let er=e9(ee,$.x,$.width),en=e9(et,$.y,$.height);return`${er} ${en}`}let e7={offset:"stroke-dashoffset",array:"stroke-dasharray"},te={offset:"strokeDashoffset",array:"strokeDasharray"};function tt($,ee,et=1,er=0,en=!0){$.pathLength=1;let ei=en?e7:te;$[ei.offset]=e5.px.transform(-er);let es=e5.px.transform(ee),eo=e5.px.transform(et);$[ei.array]=`${es} ${eo}`}function tr($,{attrX:ee,attrY:et,attrScale:er,originX:en,originY:ei,pathLength:es,pathSpacing:eo=1,pathOffset:eu=0,...eh},ef,ep,eg){if(eQ($,eh,ef,eg),ep){$.style.viewBox&&($.attrs.viewBox=$.style.viewBox);return}$.attrs=$.style,$.style={};let{attrs:em,style:ey,dimensions:ev}=$;em.transform&&(ev&&(ey.transform=em.transform),delete em.transform),ev&&(void 0!==en||void 0!==ei||ey.transform)&&(ey.transformOrigin=e8(ev,void 0!==en?en:.5,void 0!==ei?ei:.5)),void 0!==ee&&(em.x=ee),void 0!==et&&(em.y=et),void 0!==er&&(em.scale=er),void 0!==es&&tt(em,es,eo,eu,!1)}let ti=()=>({...eY(),attrs:{}}),ts=$=>"string"==typeof $&&"svg"===$.toLowerCase();function tl($,ee,et,en){let ei=(0,er.useMemo)(()=>{let et=ti();return tr(et,ee,{enableHardwareAcceleration:!1},ts(en),$.transformTemplate),{...et.attrs,style:{...et.style}}},[ee]);if($.style){let ee={};eX(ee,$.style,$),ei.style={...ee,...ei.style}}return ei}function tu($=!1){return(ee,et,en,{latestValues:ei},es)=>{let eo=(ej(ee)?tl:e0)(et,ei,es,ee),eu={...e6(et,"string"==typeof ee,$),...eo,ref:en},{children:eh}=et,ef=(0,er.useMemo)(()=>(0,ez.i)(eh)?eh.get():eh,[eh]);return(0,er.createElement)(ee,{...eu,children:ef})}}var th=et(9261);function tf($,{style:ee,vars:et},er,en){for(let ei in Object.assign($.style,ee,en&&en.getProjectionStyles(er)),et)$.style.setProperty(ei,et[ei])}let tp=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function tg($,ee,et,er){for(let et in tf($,ee,void 0,er),ee.attrs)$.setAttribute(tp.has(et)?et:(0,th.D)(et),ee.attrs[et])}function tm($,ee){let{style:et}=$,er={};for(let en in et)((0,ez.i)(et[en])||ee.style&&(0,ez.i)(ee.style[en])||eU(en,$))&&(er[en]=et[en]);return er}function ty($,ee){let et=tm($,ee);for(let er in $)((0,ez.i)($[er])||(0,ez.i)(ee[er]))&&(et[-1!==eV._.indexOf(er)?"attr"+er.charAt(0).toUpperCase()+er.substring(1):er]=$[er]);return et}var tv=et(941),tS=et(207),tT=et(2882);function tw($){let ee=(0,ez.i)($)?$.get():$;return(0,tT.p)(ee)?ee.toValue():ee}function tE({scrapeMotionValuesFromProps:$,createRenderState:ee,onMount:et},er,en,ei){let es={latestValues:t_(er,en,ei,$),renderState:ee()};return et&&(es.mount=$=>et(er,$,es)),es}let tC=$=>(ee,et)=>{let en=(0,er.useContext)(ei),eo=(0,er.useContext)(es),eu=()=>tE($,ee,en,eo);return et?eu():(0,tS.h)(eu)};function t_($,ee,et,er){let en={},ei=er($,{});for(let $ in ei)en[$]=tw(ei[$]);let{initial:es,animate:eo}=$,eu=eT($),eh=ew($);ee&&eh&&!eu&&!1!==$.inherit&&(void 0===es&&(es=ee.initial),void 0===eo&&(eo=ee.animate));let ef=!!et&&!1===et.initial,ep=(ef=ef||!1===es)?eo:es;return ep&&"boolean"!=typeof ep&&!ey(ep)&&(Array.isArray(ep)?ep:[ep]).forEach(ee=>{let et=(0,tv.o)($,ee);if(!et)return;let{transitionEnd:er,transition:ei,...es}=et;for(let $ in es){let ee=es[$];if(Array.isArray(ee)){let $=ef?ee.length-1:0;ee=ee[$]}null!==ee&&(en[$]=ee)}for(let $ in er)en[$]=er[$]}),en}var tR=et(228);let tI={useVisualState:tC({scrapeMotionValuesFromProps:ty,createRenderState:ti,onMount:($,ee,{renderState:et,latestValues:er})=>{tR.Wi.read(()=>{try{et.dimensions="function"==typeof ee.getBBox?ee.getBBox():ee.getBoundingClientRect()}catch($){et.dimensions={x:0,y:0,width:0,height:0}}}),tR.Wi.render(()=>{tr(et,er,{enableHardwareAcceleration:!1},ts(ee.tagName),$.transformTemplate),tg(ee,et)})}})},tP={useVisualState:tC({scrapeMotionValuesFromProps:tm,createRenderState:eY})};function tA($,{forwardMotionProps:ee=!1},et,er){return{...ej($)?tI:tP,preloadedFeatures:et,useRender:tu(ee),createVisualElement:er,Component:$}}function tO($,ee,et,er={passive:!0}){return $.addEventListener(ee,et,er),()=>$.removeEventListener(ee,et)}let tD=$=>"mouse"===$.pointerType?"number"!=typeof $.button||$.button<=0:!1!==$.isPrimary;function tN($,ee="page"){return{point:{x:$[ee+"X"],y:$[ee+"Y"]}}}let tk=$=>ee=>tD(ee)&&$(ee,tN(ee));function tM($,ee,et,er){return tO($,ee,tk(et),er)}var tL=et(5313);function tj($){let ee=null;return()=>{let et=()=>{ee=null};return null===ee&&(ee=$,et)}}let tB=tj("dragHorizontal"),tF=tj("dragVertical");function tV($){let ee=!1;if("y"===$)ee=tF();else if("x"===$)ee=tB();else{let $=tB(),et=tF();$&&et?ee=()=>{$(),et()}:($&&$(),et&&et())}return ee}function tU(){let $=tV(!0);return!$||($(),!1)}class tz{constructor($){this.isMounted=!1,this.node=$}update(){}}function tq($,ee){let et="pointer"+(ee?"enter":"leave"),er="onHover"+(ee?"Start":"End"),en=(et,en)=>{if("touch"===et.pointerType||tU())return;let ei=$.getProps();$.animationState&&ei.whileHover&&$.animationState.setActive("whileHover",ee),ei[er]&&tR.Wi.update(()=>ei[er](et,en))};return tM($.current,et,en,{passive:!$.getProps()[er]})}class tH extends tz{mount(){this.unmount=(0,tL.z)(tq(this.node,!0),tq(this.node,!1))}unmount(){}}class t$ extends tz{constructor(){super(...arguments),this.isActive=!1}onFocus(){let $=!1;try{$=this.node.current.matches(":focus-visible")}catch(ee){$=!0}$&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=(0,tL.z)(tO(this.node.current,"focus",()=>this.onFocus()),tO(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}let tG=($,ee)=>!!ee&&($===ee||tG($,ee.parentElement));var tW=et(254);function tK($,ee){if(!ee)return;let et=new PointerEvent("pointer"+$);ee(et,tN(et))}class tQ extends tz{constructor(){super(...arguments),this.removeStartListeners=tW.Z,this.removeEndListeners=tW.Z,this.removeAccessibleListeners=tW.Z,this.startPointerPress=($,ee)=>{if(this.isPressing)return;this.removeEndListeners();let et=this.node.getProps(),er=($,ee)=>{if(!this.checkPressEnd())return;let{onTap:et,onTapCancel:er,globalTapTarget:en}=this.node.getProps();tR.Wi.update(()=>{en||tG(this.node.current,$.target)?et&&et($,ee):er&&er($,ee)})},en=tM(window,"pointerup",er,{passive:!(et.onTap||et.onPointerUp)}),ei=tM(window,"pointercancel",($,ee)=>this.cancelPress($,ee),{passive:!(et.onTapCancel||et.onPointerCancel)});this.removeEndListeners=(0,tL.z)(en,ei),this.startPress($,ee)},this.startAccessiblePress=()=>{let $=$=>{if("Enter"!==$.key||this.isPressing)return;let ee=$=>{"Enter"===$.key&&this.checkPressEnd()&&tK("up",($,ee)=>{let{onTap:et}=this.node.getProps();et&&tR.Wi.update(()=>et($,ee))})};this.removeEndListeners(),this.removeEndListeners=tO(this.node.current,"keyup",ee),tK("down",($,ee)=>{this.startPress($,ee)})},ee=tO(this.node.current,"keydown",$),et=()=>{this.isPressing&&tK("cancel",($,ee)=>this.cancelPress($,ee))},er=tO(this.node.current,"blur",et);this.removeAccessibleListeners=(0,tL.z)(ee,er)}}startPress($,ee){this.isPressing=!0;let{onTapStart:et,whileTap:er}=this.node.getProps();er&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),et&&tR.Wi.update(()=>et($,ee))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!tU()}cancelPress($,ee){if(!this.checkPressEnd())return;let{onTapCancel:et}=this.node.getProps();et&&tR.Wi.update(()=>et($,ee))}mount(){let $=this.node.getProps(),ee=tM($.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!($.onTapStart||$.onPointerStart)}),et=tO(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=(0,tL.z)(ee,et)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}let tY=new WeakMap,tX=new WeakMap,tJ=$=>{let ee=tY.get($.target);ee&&ee($)},tZ=$=>{$.forEach(tJ)};function t0({root:$,...ee}){let et=$||document;tX.has(et)||tX.set(et,{});let er=tX.get(et),en=JSON.stringify(ee);return er[en]||(er[en]=new IntersectionObserver(tZ,{root:$,...ee})),er[en]}function t1($,ee,et){let er=t0(ee);return tY.set($,et),er.observe($),()=>{tY.delete($),er.unobserve($)}}let t2={some:0,all:1};class t4 extends tz{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:$={}}=this.node.getProps(),{root:ee,margin:et,amount:er="some",once:en}=$,ei={root:ee?ee.current:void 0,rootMargin:et,threshold:"number"==typeof er?er:t2[er]},es=$=>{let{isIntersecting:ee}=$;if(this.isInView===ee||(this.isInView=ee,en&&!ee&&this.hasEnteredView))return;ee&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",ee);let{onViewportEnter:et,onViewportLeave:er}=this.node.getProps(),ei=ee?et:er;ei&&ei($)};return t1(this.node.current,ei,es)}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:$,prevProps:ee}=this.node;["amount","margin","root"].some(t3($,ee))&&this.startObserver()}unmount(){}}function t3({viewport:$={}},{viewport:ee={}}={}){return et=>$[et]!==ee[et]}let t6={inView:{Feature:t4},tap:{Feature:tQ},focus:{Feature:t$},hover:{Feature:tH}};var t5=et(4034);function t9($,ee){if(!Array.isArray(ee))return!1;let et=ee.length;if(et!==$.length)return!1;for(let er=0;er<et;er++)if(ee[er]!==$[er])return!1;return!0}var t8=et(6800),t7=et(8781);let rt=[...ev].reverse(),rr=ev.length;function rn($){return ee=>Promise.all(ee.map(({animation:ee,options:et})=>(0,t7.d)($,ee,et)))}function ri($){let ee=rn($),et=rl(),er=!0,en=(ee,et)=>{let er=(0,t8.x)($,et);if(er){let{transition:$,transitionEnd:et,...en}=er;ee={...ee,...en,...et}}return ee};function ei(ei,es){let eo=$.getProps(),eu=$.getVariantContext(!0)||{},eh=[],ef=new Set,ep={},eg=1/0;for(let ee=0;ee<rr;ee++){let ev=rt[ee],eS=et[ev],eT=void 0!==eo[ev]?eo[ev]:eu[ev],ew=em(eT),eE=ev===es?eS.isActive:null;!1===eE&&(eg=ee);let eC=eT===eu[ev]&&eT!==eo[ev]&&ew;if(eC&&er&&$.manuallyAnimateOnMount&&(eC=!1),eS.protectedKeys={...ep},!eS.isActive&&null===eE||!eT&&!eS.prevProp||ey(eT)||"boolean"==typeof eT)continue;let e_=rs(eS.prevProp,eT)||ev===es&&eS.isActive&&!eC&&ew||ee>eg&&ew,eR=!1,ex=Array.isArray(eT)?eT:[eT],eI=ex.reduce(en,{});!1===eE&&(eI={});let{prevResolvedValues:eP={}}=eS,eA={...eP,...eI},eO=$=>{e_=!0,ef.has($)&&(eR=!0,ef.delete($)),eS.needsAnimating[$]=!0};for(let $ in eA){let ee=eI[$],et=eP[$];if(ep.hasOwnProperty($))continue;let er=!1;(er=(0,t5.C)(ee)&&(0,t5.C)(et)?!t9(ee,et):ee!==et)?void 0!==ee?eO($):ef.add($):void 0!==ee&&ef.has($)?eO($):eS.protectedKeys[$]=!0}eS.prevProp=eT,eS.prevResolvedValues=eI,eS.isActive&&(ep={...ep,...eI}),er&&$.blockInitialAnimation&&(e_=!1),e_&&(!eC||eR)&&eh.push(...ex.map($=>({animation:$,options:{type:ev,...ei}})))}if(ef.size){let ee={};ef.forEach(et=>{let er=$.getBaseTarget(et);void 0!==er&&(ee[et]=er)}),eh.push({animation:ee})}let ev=!!eh.length;return er&&(!1===eo.initial||eo.initial===eo.animate)&&!$.manuallyAnimateOnMount&&(ev=!1),er=!1,ev?ee(eh):Promise.resolve()}function es(ee,er,en){var es;if(et[ee].isActive===er)return Promise.resolve();null===(es=$.variantChildren)||void 0===es||es.forEach($=>{var et;return null===(et=$.animationState)||void 0===et?void 0:et.setActive(ee,er)}),et[ee].isActive=er;let eo=ei(en,ee);for(let $ in et)et[$].protectedKeys={};return eo}return{animateChanges:ei,setActive:es,setAnimateFunction:function(et){ee=et($)},getState:()=>et}}function rs($,ee){return"string"==typeof ee?ee!==$:!!Array.isArray(ee)&&!t9(ee,$)}function ro($=!1){return{isActive:$,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function rl(){return{animate:ro(!0),whileInView:ro(),whileHover:ro(),whileTap:ro(),whileDrag:ro(),whileFocus:ro(),exit:ro()}}class ru extends tz{constructor($){super($),$.animationState||($.animationState=ri($))}updateAnimationControlsSubscription(){let{animate:$}=this.node.getProps();this.unmount(),ey($)&&(this.unmount=$.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:$}=this.node.getProps(),{animate:ee}=this.node.prevProps||{};$!==ee&&this.updateAnimationControlsSubscription()}unmount(){}}let rh=0;class rf extends tz{constructor(){super(...arguments),this.id=rh++}update(){if(!this.node.presenceContext)return;let{isPresent:$,onExitComplete:ee,custom:et}=this.node.presenceContext,{isPresent:er}=this.node.prevPresenceContext||{};if(!this.node.animationState||$===er)return;let en=this.node.animationState.setActive("exit",!$,{custom:null!=et?et:this.node.getProps().custom});ee&&!$&&en.then(()=>ee(this.id))}mount(){let{register:$}=this.node.presenceContext||{};$&&(this.unmount=$(this.id))}unmount(){}}let rp={animation:{Feature:ru},exit:{Feature:rf}};var rg=et(7222),rm=et(8825);let ry=($,ee)=>Math.abs($-ee);function rv($,ee){return Math.sqrt(ry($.x,ee.x)**2+ry($.y,ee.y)**2)}class rS{constructor($,ee,{transformPagePoint:et,contextWindow:er,dragSnapToOrigin:en=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let $=rE(this.lastMoveEventInfo,this.history),ee=null!==this.startEvent,et=rv($.offset,{x:0,y:0})>=3;if(!ee&&!et)return;let{point:er}=$,{timestamp:en}=tR.frameData;this.history.push({...er,timestamp:en});let{onStart:ei,onMove:es}=this.handlers;ee||(ei&&ei(this.lastMoveEvent,$),this.startEvent=this.lastMoveEvent),es&&es(this.lastMoveEvent,$)},this.handlePointerMove=($,ee)=>{this.lastMoveEvent=$,this.lastMoveEventInfo=rT(ee,this.transformPagePoint),tR.Wi.update(this.updatePoint,!0)},this.handlePointerUp=($,ee)=>{this.end();let{onEnd:et,onSessionEnd:er,resumeAnimation:en}=this.handlers;if(this.dragSnapToOrigin&&en&&en(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let ei=rE("pointercancel"===$.type?this.lastMoveEventInfo:rT(ee,this.transformPagePoint),this.history);this.startEvent&&et&&et($,ei),er&&er($,ei)},!tD($))return;this.dragSnapToOrigin=en,this.handlers=ee,this.transformPagePoint=et,this.contextWindow=er||window;let ei=rT(tN($),this.transformPagePoint),{point:es}=ei,{timestamp:eo}=tR.frameData;this.history=[{...es,timestamp:eo}];let{onSessionStart:eu}=ee;eu&&eu($,rE(ei,this.history)),this.removeListeners=(0,tL.z)(tM(this.contextWindow,"pointermove",this.handlePointerMove),tM(this.contextWindow,"pointerup",this.handlePointerUp),tM(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers($){this.handlers=$}end(){this.removeListeners&&this.removeListeners(),(0,tR.Pn)(this.updatePoint)}}function rT($,ee){return ee?{point:ee($.point)}:$}function rw($,ee){return{x:$.x-ee.x,y:$.y-ee.y}}function rE({point:$},ee){return{point:$,delta:rw($,r_(ee)),offset:rw($,rC(ee)),velocity:rR(ee,.1)}}function rC($){return $[0]}function r_($){return $[$.length-1]}function rR($,ee){if($.length<2)return{x:0,y:0};let et=$.length-1,er=null,en=r_($);for(;et>=0&&(er=$[et],!(en.timestamp-er.timestamp>(0,rm.w)(ee)));)et--;if(!er)return{x:0,y:0};let ei=(0,rm.X)(en.timestamp-er.timestamp);if(0===ei)return{x:0,y:0};let es={x:(en.x-er.x)/ei,y:(en.y-er.y)/ei};return es.x===1/0&&(es.x=0),es.y===1/0&&(es.y=0),es}var rx=et(4843),rI=et(8626);function rP($){return $.max-$.min}function rA($,ee=0,et=.01){return Math.abs($-ee)<=et}function rO($,ee,et,er=.5){$.origin=er,$.originPoint=(0,rI.C)(ee.min,ee.max,$.origin),$.scale=rP(et)/rP(ee),(rA($.scale,1,1e-4)||isNaN($.scale))&&($.scale=1),$.translate=(0,rI.C)(et.min,et.max,$.origin)-$.originPoint,(rA($.translate)||isNaN($.translate))&&($.translate=0)}function rD($,ee,et,er){rO($.x,ee.x,et.x,er?er.originX:void 0),rO($.y,ee.y,et.y,er?er.originY:void 0)}function rN($,ee,et){$.min=et.min+ee.min,$.max=$.min+rP(ee)}function rk($,ee,et){rN($.x,ee.x,et.x),rN($.y,ee.y,et.y)}function rM($,ee,et){$.min=ee.min-et.min,$.max=$.min+rP(ee)}function rL($,ee,et){rM($.x,ee.x,et.x),rM($.y,ee.y,et.y)}var rj=et(4351);function rB($,{min:ee,max:et},er){return void 0!==ee&&$<ee?$=er?(0,rI.C)(ee,$,er.min):Math.max($,ee):void 0!==et&&$>et&&($=er?(0,rI.C)(et,$,er.max):Math.min($,et)),$}function rF($,ee,et){return{min:void 0!==ee?$.min+ee:void 0,max:void 0!==et?$.max+et-($.max-$.min):void 0}}function rV($,{top:ee,left:et,bottom:er,right:en}){return{x:rF($.x,et,en),y:rF($.y,ee,er)}}function rU($,ee){let et=ee.min-$.min,er=ee.max-$.max;return ee.max-ee.min<$.max-$.min&&([et,er]=[er,et]),{min:et,max:er}}function rz($,ee){return{x:rU($.x,ee.x),y:rU($.y,ee.y)}}function rq($,ee){let et=.5,er=rP($),en=rP(ee);return en>er?et=(0,rx.Y)(ee.min,ee.max-er,$.min):er>en&&(et=(0,rx.Y)($.min,$.max-en,ee.min)),(0,rj.u)(0,1,et)}function rH($,ee){let et={};return void 0!==ee.min&&(et.min=ee.min-$.min),void 0!==ee.max&&(et.max=ee.max-$.min),et}let r$=.35;function rG($=r$){return!1===$?$=0:!0===$&&($=r$),{x:rW($,"left","right"),y:rW($,"top","bottom")}}function rW($,ee,et){return{min:rK($,ee),max:rK($,et)}}function rK($,ee){return"number"==typeof $?$:$[ee]||0}let rQ=()=>({translate:0,scale:1,origin:0,originPoint:0}),rY=()=>({x:rQ(),y:rQ()}),rX=()=>({min:0,max:0}),rJ=()=>({x:rX(),y:rX()});function rZ($){return[$("x"),$("y")]}function r0({top:$,left:ee,right:et,bottom:er}){return{x:{min:ee,max:et},y:{min:$,max:er}}}function r1({x:$,y:ee}){return{top:ee.min,right:$.max,bottom:ee.max,left:$.min}}function r2($,ee){if(!ee)return $;let et=ee({x:$.left,y:$.top}),er=ee({x:$.right,y:$.bottom});return{top:et.y,left:et.x,bottom:er.y,right:er.x}}function r4($){return void 0===$||1===$}function r3({scale:$,scaleX:ee,scaleY:et}){return!r4($)||!r4(ee)||!r4(et)}function r6($){return r3($)||r5($)||$.z||$.rotate||$.rotateX||$.rotateY}function r5($){return r9($.x)||r9($.y)}function r9($){return $&&"0%"!==$}function r8($,ee,et){let er=ee*($-et);return et+er}function r7($,ee,et,er,en){return void 0!==en&&($=r8($,en,er)),r8($,et,er)+ee}function ne($,ee=0,et=1,er,en){$.min=r7($.min,ee,et,er,en),$.max=r7($.max,ee,et,er,en)}function nt($,{x:ee,y:et}){ne($.x,ee.translate,ee.scale,ee.originPoint),ne($.y,et.translate,et.scale,et.originPoint)}function nn($,ee,et,er=!1){let en,ei;let es=et.length;if(es){ee.x=ee.y=1;for(let eo=0;eo<es;eo++){ei=(en=et[eo]).projectionDelta;let es=en.instance;(!es||!es.style||"contents"!==es.style.display)&&(er&&en.options.layoutScroll&&en.scroll&&en!==en.root&&np($,{x:-en.scroll.offset.x,y:-en.scroll.offset.y}),ei&&(ee.x*=ei.x.scale,ee.y*=ei.y.scale,nt($,ei)),er&&r6(en.latestValues)&&np($,en.latestValues))}ee.x=ni(ee.x),ee.y=ni(ee.y)}}function ni($){return Number.isInteger($)?$:$>1.0000000000001||$<.999999999999?$:1}function no($,ee){$.min=$.min+ee,$.max=$.max+ee}function nu($,ee,[et,er,en]){let ei=void 0!==ee[en]?ee[en]:.5,es=(0,rI.C)($.min,$.max,ei);ne($,ee[et],ee[er],es,ee.scale)}let nh=["x","scaleX","originX"],nf=["y","scaleY","originY"];function np($,ee){nu($.x,ee,nh),nu($.y,ee,nf)}function ng($,ee){return r0(r2($.getBoundingClientRect(),ee))}function nm($,ee,et){let er=ng($,et),{scroll:en}=ee;return en&&(no(er.x,en.offset.x),no(er.y,en.offset.y)),er}var ny=et(7743);let nv=({current:$})=>$?$.ownerDocument.defaultView:null,nS=new WeakMap;class nT{constructor($){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rJ(),this.visualElement=$}start($,{snapToCursor:ee=!1}={}){let{presenceContext:et}=this.visualElement;if(et&&!1===et.isPresent)return;let er=$=>{let{dragSnapToOrigin:et}=this.getProps();et?this.pauseAnimation():this.stopAnimation(),ee&&this.snapToCursor(tN($,"page").point)},en=($,ee)=>{let{drag:et,dragPropagation:er,onDragStart:en}=this.getProps();if(et&&!er&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=tV(et),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),rZ($=>{let ee=this.getAxisMotionValue($).get()||0;if(e5.aQ.test(ee)){let{projection:et}=this.visualElement;if(et&&et.layout){let er=et.layout.layoutBox[$];if(er){let $=rP(er);ee=parseFloat(ee)/100*$}}}this.originPoint[$]=ee}),en&&tR.Wi.update(()=>en($,ee),!1,!0);let{animationState:ei}=this.visualElement;ei&&ei.setActive("whileDrag",!0)},ei=($,ee)=>{let{dragPropagation:et,dragDirectionLock:er,onDirectionLock:en,onDrag:ei}=this.getProps();if(!et&&!this.openGlobalLock)return;let{offset:es}=ee;if(er&&null===this.currentDirection){this.currentDirection=nE(es),null!==this.currentDirection&&en&&en(this.currentDirection);return}this.updateAxis("x",ee.point,es),this.updateAxis("y",ee.point,es),this.visualElement.render(),ei&&ei($,ee)},es=($,ee)=>this.stop($,ee),eo=()=>rZ($=>{var ee;return"paused"===this.getAnimationState($)&&(null===(ee=this.getAxisMotionValue($).animation)||void 0===ee?void 0:ee.play())}),{dragSnapToOrigin:eu}=this.getProps();this.panSession=new rS($,{onSessionStart:er,onStart:en,onMove:ei,onSessionEnd:es,resumeAnimation:eo},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:eu,contextWindow:nv(this.visualElement)})}stop($,ee){let et=this.isDragging;if(this.cancel(),!et)return;let{velocity:er}=ee;this.startAnimation(er);let{onDragEnd:en}=this.getProps();en&&tR.Wi.update(()=>en($,ee))}cancel(){this.isDragging=!1;let{projection:$,animationState:ee}=this.visualElement;$&&($.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:et}=this.getProps();!et&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),ee&&ee.setActive("whileDrag",!1)}updateAxis($,ee,et){let{drag:er}=this.getProps();if(!et||!nw($,er,this.currentDirection))return;let en=this.getAxisMotionValue($),ei=this.originPoint[$]+et[$];this.constraints&&this.constraints[$]&&(ei=rB(ei,this.constraints[$],this.elastic[$])),en.set(ei)}resolveConstraints(){var $;let{dragConstraints:ee,dragElastic:et}=this.getProps(),er=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===($=this.visualElement.projection)||void 0===$?void 0:$.layout,en=this.constraints;ee&&ep(ee)?this.constraints||(this.constraints=this.resolveRefConstraints()):ee&&er?this.constraints=rV(er.layoutBox,ee):this.constraints=!1,this.elastic=rG(et),en!==this.constraints&&er&&this.constraints&&!this.hasMutatedConstraints&&rZ($=>{this.getAxisMotionValue($)&&(this.constraints[$]=rH(er.layoutBox[$],this.constraints[$]))})}resolveRefConstraints(){let{dragConstraints:$,onMeasureDragConstraints:ee}=this.getProps();if(!$||!ep($))return!1;let et=$.current;(0,rg.k)(null!==et,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");let{projection:er}=this.visualElement;if(!er||!er.layout)return!1;let en=nm(et,er.root,this.visualElement.getTransformPagePoint()),ei=rz(er.layout.layoutBox,en);if(ee){let $=ee(r1(ei));this.hasMutatedConstraints=!!$,$&&(ei=r0($))}return ei}startAnimation($){let{drag:ee,dragMomentum:et,dragElastic:er,dragTransition:en,dragSnapToOrigin:ei,onDragTransitionEnd:es}=this.getProps(),eo=this.constraints||{};return Promise.all(rZ(es=>{if(!nw(es,ee,this.currentDirection))return;let eu=eo&&eo[es]||{};ei&&(eu={min:0,max:0});let eh=er?200:1e6,ef=er?40:1e7,ep={type:"inertia",velocity:et?$[es]:0,bounceStiffness:eh,bounceDamping:ef,timeConstant:750,restDelta:1,restSpeed:10,...en,...eu};return this.startAxisValueAnimation(es,ep)})).then(es)}startAxisValueAnimation($,ee){let et=this.getAxisMotionValue($);return et.start((0,ny.v)($,et,0,ee))}stopAnimation(){rZ($=>this.getAxisMotionValue($).stop())}pauseAnimation(){rZ($=>{var ee;return null===(ee=this.getAxisMotionValue($).animation)||void 0===ee?void 0:ee.pause()})}getAnimationState($){var ee;return null===(ee=this.getAxisMotionValue($).animation)||void 0===ee?void 0:ee.state}getAxisMotionValue($){let ee="_drag"+$.toUpperCase(),et=this.visualElement.getProps();return et[ee]||this.visualElement.getValue($,(et.initial?et.initial[$]:void 0)||0)}snapToCursor($){rZ(ee=>{let{drag:et}=this.getProps();if(!nw(ee,et,this.currentDirection))return;let{projection:er}=this.visualElement,en=this.getAxisMotionValue(ee);if(er&&er.layout){let{min:et,max:ei}=er.layout.layoutBox[ee];en.set($[ee]-(0,rI.C)(et,ei,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:$,dragConstraints:ee}=this.getProps(),{projection:et}=this.visualElement;if(!ep(ee)||!et||!this.constraints)return;this.stopAnimation();let er={x:0,y:0};rZ($=>{let ee=this.getAxisMotionValue($);if(ee){let et=ee.get();er[$]=rq({min:et,max:et},this.constraints[$])}});let{transformTemplate:en}=this.visualElement.getProps();this.visualElement.current.style.transform=en?en({},""):"none",et.root&&et.root.updateScroll(),et.updateLayout(),this.resolveConstraints(),rZ(ee=>{if(!nw(ee,$,null))return;let et=this.getAxisMotionValue(ee),{min:en,max:ei}=this.constraints[ee];et.set((0,rI.C)(en,ei,er[ee]))})}addListeners(){if(!this.visualElement.current)return;nS.set(this.visualElement,this);let $=tM(this.visualElement.current,"pointerdown",$=>{let{drag:ee,dragListener:et=!0}=this.getProps();ee&&et&&this.start($)}),ee=()=>{let{dragConstraints:$}=this.getProps();ep($)&&(this.constraints=this.resolveRefConstraints())},{projection:et}=this.visualElement,er=et.addEventListener("measure",ee);et&&!et.layout&&(et.root&&et.root.updateScroll(),et.updateLayout()),ee();let en=tO(window,"resize",()=>this.scalePositionWithinConstraints()),ei=et.addEventListener("didUpdate",({delta:$,hasLayoutChanged:ee})=>{this.isDragging&&ee&&(rZ(ee=>{let et=this.getAxisMotionValue(ee);et&&(this.originPoint[ee]+=$[ee].translate,et.set(et.get()+$[ee].translate))}),this.visualElement.render())});return()=>{en(),$(),er(),ei&&ei()}}getProps(){let $=this.visualElement.getProps(),{drag:ee=!1,dragDirectionLock:et=!1,dragPropagation:er=!1,dragConstraints:en=!1,dragElastic:ei=r$,dragMomentum:es=!0}=$;return{...$,drag:ee,dragDirectionLock:et,dragPropagation:er,dragConstraints:en,dragElastic:ei,dragMomentum:es}}}function nw($,ee,et){return(!0===ee||ee===$)&&(null===et||et===$)}function nE($,ee=10){let et=null;return Math.abs($.y)>ee?et="y":Math.abs($.x)>ee&&(et="x"),et}class nC extends tz{constructor($){super($),this.removeGroupControls=tW.Z,this.removeListeners=tW.Z,this.controls=new nT($)}mount(){let{dragControls:$}=this.node.getProps();$&&(this.removeGroupControls=$.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tW.Z}unmount(){this.removeGroupControls(),this.removeListeners()}}let n_=$=>(ee,et)=>{$&&tR.Wi.update(()=>$(ee,et))};class nR extends tz{constructor(){super(...arguments),this.removePointerDownListener=tW.Z}onPointerDown($){this.session=new rS($,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nv(this.node)})}createPanHandlers(){let{onPanSessionStart:$,onPanStart:ee,onPan:et,onPanEnd:er}=this.node.getProps();return{onSessionStart:n_($),onStart:n_(ee),onMove:et,onEnd:($,ee)=>{delete this.session,er&&tR.Wi.update(()=>er($,ee))}}}mount(){this.removePointerDownListener=tM(this.node.current,"pointerdown",$=>this.onPointerDown($))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function nx(){let $=(0,er.useContext)(es);if(null===$)return[!0,null];let{isPresent:ee,onExitComplete:et,register:en}=$,ei=(0,er.useId)();(0,er.useEffect)(()=>en(ei),[]);let eo=()=>et&&et(ei);return!ee&&et?[!1,eo]:[!0]}let nI={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nP($,ee){return ee.max===ee.min?0:$/(ee.max-ee.min)*100}let nA={correct:($,ee)=>{if(!ee.target)return $;if("string"==typeof $){if(!e5.px.test($))return $;$=parseFloat($)}let et=nP($,ee.target.x),er=nP($,ee.target.y);return`${et}% ${er}%`}};var nO=et(993);let nD={correct:($,{treeScale:ee,projectionDelta:et})=>{let er=$,en=nO.P.parse($);if(en.length>5)return er;let ei=nO.P.createTransformer($),es="number"!=typeof en[0]?1:0,eo=et.x.scale*ee.x,eu=et.y.scale*ee.y;en[0+es]/=eo,en[1+es]/=eu;let eh=(0,rI.C)(eo,eu,.5);return"number"==typeof en[2+es]&&(en[2+es]/=eh),"number"==typeof en[3+es]&&(en[3+es]/=eh),ei(en)}};class nN extends er.Component{componentDidMount(){let{visualElement:$,layoutGroup:ee,switchLayoutGroup:et,layoutId:er}=this.props,{projection:en}=$;eF(nM),en&&(ee.group&&ee.group.add(en),et&&et.register&&er&&et.register(en),en.root.didUpdate(),en.addEventListener("animationComplete",()=>{this.safeToRemove()}),en.setOptions({...en.options,onExitComplete:()=>this.safeToRemove()})),nI.hasEverUpdated=!0}getSnapshotBeforeUpdate($){let{layoutDependency:ee,visualElement:et,drag:er,isPresent:en}=this.props,ei=et.projection;return ei&&(ei.isPresent=en,er||$.layoutDependency!==ee||void 0===ee?ei.willUpdate():this.safeToRemove(),$.isPresent===en||(en?ei.promote():ei.relegate()||tR.Wi.postRender(()=>{let $=ei.getStack();$&&$.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:$}=this.props.visualElement;$&&($.root.didUpdate(),queueMicrotask(()=>{!$.currentAnimation&&$.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:$,layoutGroup:ee,switchLayoutGroup:et}=this.props,{projection:er}=$;er&&(er.scheduleCheckAfterUnmount(),ee&&ee.group&&ee.group.remove(er),et&&et.deregister&&et.deregister(er))}safeToRemove(){let{safeToRemove:$}=this.props;$&&$()}render(){return null}}function nk($){let[ee,et]=nx(),en=(0,er.useContext)(eA);return er.createElement(nN,{...$,layoutGroup:en,switchLayoutGroup:(0,er.useContext)(eO),isPresent:ee,safeToRemove:et})}let nM={borderRadius:{...nA,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:nA,borderTopRightRadius:nA,borderBottomLeftRadius:nA,borderBottomRightRadius:nA,boxShadow:nD};var nL=et(3562),nj=et(221);let nB=["TopLeft","TopRight","BottomLeft","BottomRight"],nF=nB.length,nV=$=>"string"==typeof $?parseFloat($):$,nU=$=>"number"==typeof $||e5.px.test($);function nz($,ee,et,er,en,ei){en?($.opacity=(0,rI.C)(0,void 0!==et.opacity?et.opacity:1,nH(er)),$.opacityExit=(0,rI.C)(void 0!==ee.opacity?ee.opacity:1,0,n$(er))):ei&&($.opacity=(0,rI.C)(void 0!==ee.opacity?ee.opacity:1,void 0!==et.opacity?et.opacity:1,er));for(let en=0;en<nF;en++){let ei=`border${nB[en]}Radius`,es=nq(ee,ei),eo=nq(et,ei);(void 0!==es||void 0!==eo)&&(es||(es=0),eo||(eo=0),0===es||0===eo||nU(es)===nU(eo)?($[ei]=Math.max((0,rI.C)(nV(es),nV(eo),er),0),(e5.aQ.test(eo)||e5.aQ.test(es))&&($[ei]+="%")):$[ei]=eo)}(ee.rotate||et.rotate)&&($.rotate=(0,rI.C)(ee.rotate||0,et.rotate||0,er))}function nq($,ee){return void 0!==$[ee]?$[ee]:$.borderRadius}let nH=nG(0,.5,nj.Bn),n$=nG(.5,.95,tW.Z);function nG($,ee,et){return er=>er<$?0:er>ee?1:et((0,rx.Y)($,ee,er))}function nW($,ee){$.min=ee.min,$.max=ee.max}function nK($,ee){nW($.x,ee.x),nW($.y,ee.y)}function nQ($,ee,et,er,en){return $-=ee,$=r8($,1/et,er),void 0!==en&&($=r8($,1/en,er)),$}function nY($,ee=0,et=1,er=.5,en,ei=$,es=$){if(e5.aQ.test(ee)&&(ee=parseFloat(ee),ee=(0,rI.C)(es.min,es.max,ee/100)-es.min),"number"!=typeof ee)return;let eo=(0,rI.C)(ei.min,ei.max,er);$===ei&&(eo-=ee),$.min=nQ($.min,ee,et,eo,en),$.max=nQ($.max,ee,et,eo,en)}function nX($,ee,[et,er,en],ei,es){nY($,ee[et],ee[er],ee[en],ee.scale,ei,es)}let nJ=["x","scaleX","originX"],nZ=["y","scaleY","originY"];function n0($,ee,et,er){nX($.x,ee,nJ,et?et.x:void 0,er?er.x:void 0),nX($.y,ee,nZ,et?et.y:void 0,er?er.y:void 0)}var n4=et(6907);function n3($){return 0===$.translate&&1===$.scale}function n6($){return n3($.x)&&n3($.y)}function n5($,ee){return $.x.min===ee.x.min&&$.x.max===ee.x.max&&$.y.min===ee.y.min&&$.y.max===ee.y.max}function n9($,ee){return Math.round($.x.min)===Math.round(ee.x.min)&&Math.round($.x.max)===Math.round(ee.x.max)&&Math.round($.y.min)===Math.round(ee.y.min)&&Math.round($.y.max)===Math.round(ee.y.max)}function n8($){return rP($.x)/rP($.y)}var n7=et(4766);class ie{constructor(){this.members=[]}add($){(0,n7.y4)(this.members,$),$.scheduleRender()}remove($){if((0,n7.cl)(this.members,$),$===this.prevLead&&(this.prevLead=void 0),$===this.lead){let $=this.members[this.members.length-1];$&&this.promote($)}}relegate($){let ee;let et=this.members.findIndex(ee=>$===ee);if(0===et)return!1;for(let $=et;$>=0;$--){let et=this.members[$];if(!1!==et.isPresent){ee=et;break}}return!!ee&&(this.promote(ee),!0)}promote($,ee){let et=this.lead;if($!==et&&(this.prevLead=et,this.lead=$,$.show(),et)){et.instance&&et.scheduleRender(),$.scheduleRender(),$.resumeFrom=et,ee&&($.resumeFrom.preserveOpacity=!0),et.snapshot&&($.snapshot=et.snapshot,$.snapshot.latestValues=et.animationValues||et.latestValues),$.root&&$.root.isUpdating&&($.isLayoutDirty=!0);let{crossfade:er}=$.options;!1===er&&et.hide()}}exitAnimationComplete(){this.members.forEach($=>{let{options:ee,resumingFrom:et}=$;ee.onExitComplete&&ee.onExitComplete(),et&&et.options.onExitComplete&&et.options.onExitComplete()})}scheduleRender(){this.members.forEach($=>{$.instance&&$.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ir($,ee,et){let er="",en=$.x.translate/ee.x,ei=$.y.translate/ee.y;if((en||ei)&&(er=`translate3d(${en}px, ${ei}px, 0) `),(1!==ee.x||1!==ee.y)&&(er+=`scale(${1/ee.x}, ${1/ee.y}) `),et){let{rotate:$,rotateX:ee,rotateY:en}=et;$&&(er+=`rotate(${$}deg) `),ee&&(er+=`rotateX(${ee}deg) `),en&&(er+=`rotateY(${en}deg) `)}let es=$.x.scale*ee.x,eo=$.y.scale*ee.y;return(1!==es||1!==eo)&&(er+=`scale(${es}, ${eo})`),er||"none"}let ii=($,ee)=>$.depth-ee.depth;class io{constructor(){this.children=[],this.isDirty=!1}add($){(0,n7.y4)(this.children,$),this.isDirty=!0}remove($){(0,n7.cl)(this.children,$),this.isDirty=!0}forEach($){this.isDirty&&this.children.sort(ii),this.isDirty=!1,this.children.forEach($)}}function il($,ee){let et=performance.now(),er=({timestamp:en})=>{let ei=en-et;ei>=ee&&((0,tR.Pn)(er),$(ei-ee))};return tR.Wi.read(er,!0),()=>(0,tR.Pn)(er)}function iu($){window.MotionDebug&&window.MotionDebug.record($)}function ih($){return $ instanceof SVGElement&&"svg"!==$.tagName}var ip=et(1345);function ig($,ee,et){let er=(0,ez.i)($)?$:(0,ip.BX)($);return er.start((0,ny.v)("",er,ee,et)),er.animation}let im=["","X","Y","Z"],iy={visibility:"hidden"},iv=1e3,iS=0,iT={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function iw({attachResizeListener:$,defaultParent:ee,measureScroll:et,checkIsScrollRoot:er,resetTransform:en}){return class{constructor($={},et=null==ee?void 0:ee()){this.id=iS++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,iT.totalNodes=iT.resolvedTargetDeltas=iT.recalculatedProjection=0,this.nodes.forEach(i_),this.nodes.forEach(iD),this.nodes.forEach(iN),this.nodes.forEach(iR),iu(iT)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=$,this.root=et?et.root||et:this,this.path=et?[...et.path,et]:[],this.parent=et,this.depth=et?et.depth+1:0;for(let $=0;$<this.path.length;$++)this.path[$].shouldResetTransform=!0;this.root===this&&(this.nodes=new io)}addEventListener($,ee){return this.eventHandlers.has($)||this.eventHandlers.set($,new nL.L),this.eventHandlers.get($).add(ee)}notifyListeners($,...ee){let et=this.eventHandlers.get($);et&&et.notify(...ee)}hasListeners($){return this.eventHandlers.has($)}mount(ee,et=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=ih(ee),this.instance=ee;let{layoutId:er,layout:en,visualElement:ei}=this.options;if(ei&&!ei.current&&ei.mount(ee),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),et&&(en||er)&&(this.isLayoutDirty=!0),$){let et;let er=()=>this.root.updateBlockedByResize=!1;$(ee,()=>{this.root.updateBlockedByResize=!0,et&&et(),et=il(er,250),nI.hasAnimatedSinceResize&&(nI.hasAnimatedSinceResize=!1,this.nodes.forEach(iO))})}er&&this.root.registerSharedNode(er,this),!1!==this.options.animate&&ei&&(er||en)&&this.addEventListener("didUpdate",({delta:$,hasLayoutChanged:ee,hasRelativeTargetChanged:et,layout:er})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let en=this.options.transition||ei.getDefaultTransition()||iV,{onLayoutAnimationStart:es,onLayoutAnimationComplete:eo}=ei.getProps(),eu=!this.targetLayout||!n9(this.targetLayout,er)||et,eh=!ee&&et;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||eh||ee&&(eu||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin($,eh);let ee={...(0,n4.e)(en,"layout"),onPlay:es,onComplete:eo};(ei.shouldReduceMotion||this.options.layoutRoot)&&(ee.delay=0,ee.type=!1),this.startAnimation(ee)}else ee||iO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=er})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let $=this.getStack();$&&$.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,(0,tR.Pn)(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ik),this.animationId++)}getTransformTemplate(){let{visualElement:$}=this.options;return $&&$.getProps().transformTemplate}willUpdate($=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let $=0;$<this.path.length;$++){let ee=this.path[$];ee.shouldResetTransform=!0,ee.updateScroll("snapshot"),ee.options.layoutRoot&&ee.willUpdate(!1)}let{layoutId:ee,layout:et}=this.options;if(void 0===ee&&!et)return;let er=this.getTransformTemplate();this.prevTransformTemplateValue=er?er(this.latestValues,""):void 0,this.updateSnapshot(),$&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(iI);return}this.isUpdating||this.nodes.forEach(iP),this.isUpdating=!1,this.nodes.forEach(iA),this.nodes.forEach(iE),this.nodes.forEach(iC),this.clearAllSnapshots();let $=performance.now();tR.frameData.delta=(0,rj.u)(0,1e3/60,$-tR.frameData.timestamp),tR.frameData.timestamp=$,tR.frameData.isProcessing=!0,tR.S6.update.process(tR.frameData),tR.S6.preRender.process(tR.frameData),tR.S6.render.process(tR.frameData),tR.frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(ix),this.sharedNodes.forEach(iM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tR.Wi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tR.Wi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let $=0;$<this.path.length;$++)this.path[$].updateScroll();let $=this.layout;this.layout=this.measure(!1),this.layoutCorrected=rJ(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:ee}=this.options;ee&&ee.notify("LayoutMeasure",this.layout.layoutBox,$?$.layoutBox:void 0)}updateScroll($="measure"){let ee=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===$&&(ee=!1),ee&&(this.scroll={animationId:this.root.animationId,phase:$,isRoot:er(this.instance),offset:et(this.instance)})}resetTransform(){if(!en)return;let $=this.isLayoutDirty||this.shouldResetTransform,ee=this.projectionDelta&&!n6(this.projectionDelta),et=this.getTransformTemplate(),er=et?et(this.latestValues,""):void 0,ei=er!==this.prevTransformTemplateValue;$&&(ee||r6(this.latestValues)||ei)&&(en(this.instance,er),this.shouldResetTransform=!1,this.scheduleRender())}measure($=!0){let ee=this.measurePageBox(),et=this.removeElementScroll(ee);return $&&(et=this.removeTransform(et)),iH(et),{animationId:this.root.animationId,measuredBox:ee,layoutBox:et,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:$}=this.options;if(!$)return rJ();let ee=$.measureViewportBox(),{scroll:et}=this.root;return et&&(no(ee.x,et.offset.x),no(ee.y,et.offset.y)),ee}removeElementScroll($){let ee=rJ();nK(ee,$);for(let et=0;et<this.path.length;et++){let er=this.path[et],{scroll:en,options:ei}=er;if(er!==this.root&&en&&ei.layoutScroll){if(en.isRoot){nK(ee,$);let{scroll:et}=this.root;et&&(no(ee.x,-et.offset.x),no(ee.y,-et.offset.y))}no(ee.x,en.offset.x),no(ee.y,en.offset.y)}}return ee}applyTransform($,ee=!1){let et=rJ();nK(et,$);for(let $=0;$<this.path.length;$++){let er=this.path[$];!ee&&er.options.layoutScroll&&er.scroll&&er!==er.root&&np(et,{x:-er.scroll.offset.x,y:-er.scroll.offset.y}),r6(er.latestValues)&&np(et,er.latestValues)}return r6(this.latestValues)&&np(et,this.latestValues),et}removeTransform($){let ee=rJ();nK(ee,$);for(let $=0;$<this.path.length;$++){let et=this.path[$];if(!et.instance||!r6(et.latestValues))continue;r3(et.latestValues)&&et.updateSnapshot();let er=rJ();nK(er,et.measurePageBox()),n0(ee,et.latestValues,et.snapshot?et.snapshot.layoutBox:void 0,er)}return r6(this.latestValues)&&n0(ee,this.latestValues),ee}setTargetDelta($){this.targetDelta=$,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions($){this.options={...this.options,...$,crossfade:void 0===$.crossfade||$.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tR.frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta($=!1){var ee;let et=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=et.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=et.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=et.isSharedProjectionDirty);let er=!!this.resumingFrom||this!==et;if(!($||er&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(ee=this.parent)||void 0===ee?void 0:ee.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;let{layout:en,layoutId:ei}=this.options;if(this.layout&&(en||ei)){if(this.resolvedRelativeTargetAt=tR.frameData.timestamp,!this.targetDelta&&!this.relativeTarget){let $=this.getClosestProjectingParent();$&&$.layout&&1!==this.animationProgress?(this.relativeParent=$,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rJ(),this.relativeTargetOrigin=rJ(),rL(this.relativeTargetOrigin,this.layout.layoutBox,$.layout.layoutBox),nK(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if(this.target||(this.target=rJ(),this.targetWithTransforms=rJ()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rk(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):nK(this.target,this.layout.layoutBox),nt(this.target,this.targetDelta)):nK(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let $=this.getClosestProjectingParent();$&&!!$.resumingFrom==!!this.resumingFrom&&!$.options.layoutScroll&&$.target&&1!==this.animationProgress?(this.relativeParent=$,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rJ(),this.relativeTargetOrigin=rJ(),rL(this.relativeTargetOrigin,this.target,$.target),nK(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}iT.resolvedTargetDeltas++}}}getClosestProjectingParent(){return!this.parent||r3(this.parent.latestValues)||r5(this.parent.latestValues)?void 0:this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var $;let ee=this.getLead(),et=!!this.resumingFrom||this!==ee,er=!0;if((this.isProjectionDirty||(null===($=this.parent)||void 0===$?void 0:$.isProjectionDirty))&&(er=!1),et&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(er=!1),this.resolvedRelativeTargetAt===tR.frameData.timestamp&&(er=!1),er)return;let{layout:en,layoutId:ei}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(en||ei))return;nK(this.layoutCorrected,this.layout.layoutBox);let es=this.treeScale.x,eo=this.treeScale.y;nn(this.layoutCorrected,this.treeScale,this.path,et),ee.layout&&!ee.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(ee.target=ee.layout.layoutBox);let{target:eu}=ee;if(!eu){this.projectionTransform&&(this.projectionDelta=rY(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=rY(),this.projectionDeltaWithTransform=rY());let eh=this.projectionTransform;rD(this.projectionDelta,this.layoutCorrected,eu,this.latestValues),this.projectionTransform=ir(this.projectionDelta,this.treeScale),(this.projectionTransform!==eh||this.treeScale.x!==es||this.treeScale.y!==eo)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",eu)),iT.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender($=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),$){let $=this.getStack();$&&$.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin($,ee=!1){let et;let er=this.snapshot,en=er?er.latestValues:{},ei={...this.latestValues},es=rY();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!ee;let eo=rJ(),eu=(er?er.source:void 0)!==(this.layout?this.layout.source:void 0),eh=this.getStack(),ef=!eh||eh.members.length<=1,ep=!!(eu&&!ef&&!0===this.options.crossfade&&!this.path.some(iF));this.animationProgress=0,this.mixTargetDelta=ee=>{let er=ee/1e3;iL(es.x,$.x,er),iL(es.y,$.y,er),this.setTargetDelta(es),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rL(eo,this.layout.layoutBox,this.relativeParent.layout.layoutBox),iB(this.relativeTarget,this.relativeTargetOrigin,eo,er),et&&n5(this.relativeTarget,et)&&(this.isProjectionDirty=!1),et||(et=rJ()),nK(et,this.relativeTarget)),eu&&(this.animationValues=ei,nz(ei,en,this.latestValues,er,ep,ef)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=er},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation($){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&((0,tR.Pn)(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tR.Wi.update(()=>{nI.hasAnimatedSinceResize=!0,this.currentAnimation=ig(0,iv,{...$,onUpdate:ee=>{this.mixTargetDelta(ee),$.onUpdate&&$.onUpdate(ee)},onComplete:()=>{$.onComplete&&$.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let $=this.getStack();$&&$.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(iv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let $=this.getLead(),{targetWithTransforms:ee,target:et,layout:er,latestValues:en}=$;if(ee&&et&&er){if(this!==$&&this.layout&&er&&i$(this.options.animationType,this.layout.layoutBox,er.layoutBox)){et=this.target||rJ();let ee=rP(this.layout.layoutBox.x);et.x.min=$.target.x.min,et.x.max=et.x.min+ee;let er=rP(this.layout.layoutBox.y);et.y.min=$.target.y.min,et.y.max=et.y.min+er}nK(ee,et),np(ee,en),rD(this.projectionDeltaWithTransform,this.layoutCorrected,ee,en)}}registerSharedNode($,ee){this.sharedNodes.has($)||this.sharedNodes.set($,new ie),this.sharedNodes.get($).add(ee);let et=ee.options.initialPromotionConfig;ee.promote({transition:et?et.transition:void 0,preserveFollowOpacity:et&&et.shouldPreserveFollowOpacity?et.shouldPreserveFollowOpacity(ee):void 0})}isLead(){let $=this.getStack();return!$||$.lead===this}getLead(){var $;let{layoutId:ee}=this.options;return ee&&(null===($=this.getStack())||void 0===$?void 0:$.lead)||this}getPrevLead(){var $;let{layoutId:ee}=this.options;return ee?null===($=this.getStack())||void 0===$?void 0:$.prevLead:void 0}getStack(){let{layoutId:$}=this.options;if($)return this.root.sharedNodes.get($)}promote({needsReset:$,transition:ee,preserveFollowOpacity:et}={}){let er=this.getStack();er&&er.promote(this,et),$&&(this.projectionDelta=void 0,this.needsReset=!0),ee&&this.setOptions({transition:ee})}relegate(){let $=this.getStack();return!!$&&$.relegate(this)}resetRotation(){let{visualElement:$}=this.options;if(!$)return;let ee=!1,{latestValues:et}=$;if((et.rotate||et.rotateX||et.rotateY||et.rotateZ)&&(ee=!0),!ee)return;let er={};for(let ee=0;ee<im.length;ee++){let en="rotate"+im[ee];et[en]&&(er[en]=et[en],$.setStaticValue(en,0))}for(let ee in $.render(),er)$.setStaticValue(ee,er[ee]);$.scheduleRender()}getProjectionStyles($){var ee,et;if(!this.instance||this.isSVG)return;if(!this.isVisible)return iy;let er={visibility:""},en=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,er.opacity="",er.pointerEvents=tw(null==$?void 0:$.pointerEvents)||"",er.transform=en?en(this.latestValues,""):"none",er;let ei=this.getLead();if(!this.projectionDelta||!this.layout||!ei.target){let ee={};return this.options.layoutId&&(ee.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,ee.pointerEvents=tw(null==$?void 0:$.pointerEvents)||""),this.hasProjected&&!r6(this.latestValues)&&(ee.transform=en?en({},""):"none",this.hasProjected=!1),ee}let es=ei.animationValues||ei.latestValues;this.applyTransformsToTarget(),er.transform=ir(this.projectionDeltaWithTransform,this.treeScale,es),en&&(er.transform=en(es,er.transform));let{x:eo,y:eu}=this.projectionDelta;for(let $ in er.transformOrigin=`${100*eo.origin}% ${100*eu.origin}% 0`,ei.animationValues?er.opacity=ei===this?null!==(et=null!==(ee=es.opacity)&&void 0!==ee?ee:this.latestValues.opacity)&&void 0!==et?et:1:this.preserveOpacity?this.latestValues.opacity:es.opacityExit:er.opacity=ei===this?void 0!==es.opacity?es.opacity:"":void 0!==es.opacityExit?es.opacityExit:0,eB){if(void 0===es[$])continue;let{correct:ee,applyTo:et}=eB[$],en="none"===er.transform?es[$]:ee(es[$],ei);if(et){let $=et.length;for(let ee=0;ee<$;ee++)er[et[ee]]=en}else er[$]=en}return this.options.layoutId&&(er.pointerEvents=ei===this?tw(null==$?void 0:$.pointerEvents)||"":"none"),er}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach($=>{var ee;return null===(ee=$.currentAnimation)||void 0===ee?void 0:ee.stop()}),this.root.nodes.forEach(iI),this.root.sharedNodes.clear()}}}function iE($){$.updateLayout()}function iC($){var ee;let et=(null===(ee=$.resumeFrom)||void 0===ee?void 0:ee.snapshot)||$.snapshot;if($.isLead()&&$.layout&&et&&$.hasListeners("didUpdate")){let{layoutBox:ee,measuredBox:er}=$.layout,{animationType:en}=$.options,ei=et.source!==$.layout.source;"size"===en?rZ($=>{let er=ei?et.measuredBox[$]:et.layoutBox[$],en=rP(er);er.min=ee[$].min,er.max=er.min+en}):i$(en,et.layoutBox,ee)&&rZ(er=>{let en=ei?et.measuredBox[er]:et.layoutBox[er],es=rP(ee[er]);en.max=en.min+es,$.relativeTarget&&!$.currentAnimation&&($.isProjectionDirty=!0,$.relativeTarget[er].max=$.relativeTarget[er].min+es)});let es=rY();rD(es,ee,et.layoutBox);let eo=rY();ei?rD(eo,$.applyTransform(er,!0),et.measuredBox):rD(eo,ee,et.layoutBox);let eu=!n6(es),eh=!1;if(!$.resumeFrom){let er=$.getClosestProjectingParent();if(er&&!er.resumeFrom){let{snapshot:en,layout:ei}=er;if(en&&ei){let es=rJ();rL(es,et.layoutBox,en.layoutBox);let eo=rJ();rL(eo,ee,ei.layoutBox),n9(es,eo)||(eh=!0),er.options.layoutRoot&&($.relativeTarget=eo,$.relativeTargetOrigin=es,$.relativeParent=er)}}}$.notifyListeners("didUpdate",{layout:ee,snapshot:et,delta:eo,layoutDelta:es,hasLayoutChanged:eu,hasRelativeTargetChanged:eh})}else if($.isLead()){let{onExitComplete:ee}=$.options;ee&&ee()}$.options.transition=void 0}function i_($){iT.totalNodes++,$.parent&&($.isProjecting()||($.isProjectionDirty=$.parent.isProjectionDirty),$.isSharedProjectionDirty||($.isSharedProjectionDirty=!!($.isProjectionDirty||$.parent.isProjectionDirty||$.parent.isSharedProjectionDirty)),$.isTransformDirty||($.isTransformDirty=$.parent.isTransformDirty))}function iR($){$.isProjectionDirty=$.isSharedProjectionDirty=$.isTransformDirty=!1}function ix($){$.clearSnapshot()}function iI($){$.clearMeasurements()}function iP($){$.isLayoutDirty=!1}function iA($){let{visualElement:ee}=$.options;ee&&ee.getProps().onBeforeLayoutMeasure&&ee.notify("BeforeLayoutMeasure"),$.resetTransform()}function iO($){$.finishAnimation(),$.targetDelta=$.relativeTarget=$.target=void 0,$.isProjectionDirty=!0}function iD($){$.resolveTargetDelta()}function iN($){$.calcProjection()}function ik($){$.resetRotation()}function iM($){$.removeLeadSnapshot()}function iL($,ee,et){$.translate=(0,rI.C)(ee.translate,0,et),$.scale=(0,rI.C)(ee.scale,1,et),$.origin=ee.origin,$.originPoint=ee.originPoint}function ij($,ee,et,er){$.min=(0,rI.C)(ee.min,et.min,er),$.max=(0,rI.C)(ee.max,et.max,er)}function iB($,ee,et,er){ij($.x,ee.x,et.x,er),ij($.y,ee.y,et.y,er)}function iF($){return $.animationValues&&void 0!==$.animationValues.opacityExit}let iV={duration:.45,ease:[.4,0,.1,1]},iU=$=>"undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().includes($),iz=iU("applewebkit/")&&!iU("chrome/")?Math.round:tW.Z;function iq($){$.min=iz($.min),$.max=iz($.max)}function iH($){iq($.x),iq($.y)}function i$($,ee,et){return"position"===$||"preserve-aspect"===$&&!rA(n8(ee),n8(et),.2)}let iG=iw({attachResizeListener:($,ee)=>tO($,"resize",ee),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),iW={current:void 0},iK=iw({measureScroll:$=>({x:$.scrollLeft,y:$.scrollTop}),defaultParent:()=>{if(!iW.current){let $=new iG({});$.mount(window),$.setOptions({layoutScroll:!0}),iW.current=$}return iW.current},resetTransform:($,ee)=>{$.style.transform=void 0!==ee?ee:"none"},checkIsScrollRoot:$=>"fixed"===window.getComputedStyle($).position}),iQ={pan:{Feature:nR},drag:{Feature:nC,ProjectionNode:iK,MeasureLayout:nk}};var iY=et(9032),iX=et(2806),iJ=et(5656);let iZ=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function i0($){let ee=iZ.exec($);if(!ee)return[,];let[,et,er]=ee;return[et,er]}let i1=4;function i2($,ee,et=1){(0,rg.k)(et<=i1,`Max CSS variable fallback depth detected in property "${$}". This may indicate a circular fallback dependency.`);let[er,en]=i0($);if(!er)return;let ei=window.getComputedStyle(ee).getPropertyValue(er);if(ei){let $=ei.trim();return(0,iJ.P)($)?parseFloat($):$}return(0,eG.tm)(en)?i2(en,ee,et+1):en}function i4($,{...ee},et){let er=$.current;if(!(er instanceof Element))return{target:ee,transitionEnd:et};for(let en in et&&(et={...et}),$.values.forEach($=>{let ee=$.get();if(!(0,eG.tm)(ee))return;let et=i2(ee,er);et&&$.set(et)}),ee){let $=ee[en];if(!(0,eG.tm)($))continue;let ei=i2($,er);ei&&(ee[en]=ei,et||(et={}),void 0===et[en]&&(et[en]=$))}return{target:ee,transitionEnd:et}}var i3=et(788),i6=et(607);let i5=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),i9=$=>i5.has($),i8=$=>Object.keys($).some(i9),i7=$=>$===i6.Rx||$===e5.px,se=($,ee)=>parseFloat($.split(", ")[ee]),st=($,ee)=>(et,{transform:er})=>{if("none"===er||!er)return 0;let en=er.match(/^matrix3d\((.+)\)$/);if(en)return se(en[1],ee);{let ee=er.match(/^matrix\((.+)\)$/);return ee?se(ee[1],$):0}},sr=new Set(["x","y","z"]),sn=eV._.filter($=>!sr.has($));function si($){let ee=[];return sn.forEach(et=>{let er=$.getValue(et);void 0!==er&&(ee.push([et,er.get()]),er.set(et.startsWith("scale")?1:0))}),ee.length&&$.render(),ee}let ss={width:({x:$},{paddingLeft:ee="0",paddingRight:et="0"})=>$.max-$.min-parseFloat(ee)-parseFloat(et),height:({y:$},{paddingTop:ee="0",paddingBottom:et="0"})=>$.max-$.min-parseFloat(ee)-parseFloat(et),top:($,{top:ee})=>parseFloat(ee),left:($,{left:ee})=>parseFloat(ee),bottom:({y:$},{top:ee})=>parseFloat(ee)+($.max-$.min),right:({x:$},{left:ee})=>parseFloat(ee)+($.max-$.min),x:st(4,13),y:st(5,14)};ss.translateX=ss.x,ss.translateY=ss.y;let so=($,ee,et)=>{let er=ee.measureViewportBox(),en=ee.current,ei=getComputedStyle(en),{display:es}=ei,eo={};"none"===es&&ee.setStaticValue("display",$.display||"block"),et.forEach($=>{eo[$]=ss[$](er,ei)}),ee.render();let eu=ee.measureViewportBox();return et.forEach(et=>{let er=ee.getValue(et);er&&er.jump(eo[et]),$[et]=ss[et](eu,ei)}),$},sl=($,ee,et={},er={})=>{ee={...ee},er={...er};let en=Object.keys(ee).filter(i9),ei=[],es=!1,eo=[];if(en.forEach(en=>{let eu;let eh=$.getValue(en);if(!$.hasValue(en))return;let ef=et[en],ep=(0,i3.C)(ef),eg=ee[en];if((0,t5.C)(eg)){let $=eg.length,ee=null===eg[0]?1:0;ef=eg[ee],ep=(0,i3.C)(ef);for(let et=ee;et<$&&null!==eg[et];et++)eu?(0,rg.k)((0,i3.C)(eg[et])===eu,"All keyframes must be of the same type"):(eu=(0,i3.C)(eg[et]),(0,rg.k)(eu===ep||i7(ep)&&i7(eu),"Keyframes must be of the same dimension as the current value"))}else eu=(0,i3.C)(eg);if(ep!==eu){if(i7(ep)&&i7(eu)){let $=eh.get();"string"==typeof $&&eh.set(parseFloat($)),"string"==typeof eg?ee[en]=parseFloat(eg):Array.isArray(eg)&&eu===e5.px&&(ee[en]=eg.map(parseFloat))}else(null==ep?void 0:ep.transform)&&(null==eu?void 0:eu.transform)&&(0===ef||0===eg)?0===ef?eh.set(eu.transform(ef)):ee[en]=ep.transform(eg):(es||(ei=si($),es=!0),eo.push(en),er[en]=void 0!==er[en]?er[en]:ee[en],eh.jump(eg))}}),!eo.length)return{target:ee,transitionEnd:er};{let et=eo.indexOf("height")>=0?window.pageYOffset:null,en=so(ee,$,eo);return ei.length&&ei.forEach(([ee,et])=>{$.getValue(ee).set(et)}),$.render(),eP.j&&null!==et&&window.scrollTo({top:et}),{target:en,transitionEnd:er}}};function su($,ee,et,er){return i8(ee)?sl($,ee,et,er):{target:ee,transitionEnd:er}}let sh=($,ee,et,er)=>{let en=i4($,ee,er);return su($,ee=en.target,et,er=en.transitionEnd)},sf={current:null},sp={current:!1};function sg(){if(sp.current=!0,eP.j){if(window.matchMedia){let $=window.matchMedia("(prefers-reduced-motion)"),ee=()=>sf.current=$.matches;$.addListener(ee),ee()}else sf.current=!1}}var sm=et(9220);function sy($,ee,et){let{willChange:er}=ee;for(let en in ee){let ei=ee[en],es=et[en];if((0,ez.i)(ei))$.addValue(en,ei),(0,sm.L)(er)&&er.add(en);else if((0,ez.i)(es))$.addValue(en,(0,ip.BX)(ei,{owner:$})),(0,sm.L)(er)&&er.remove(en);else if(es!==ei){if($.hasValue(en)){let ee=$.getValue(en);ee.hasAnimated||ee.set(ei)}else{let ee=$.getStaticValue(en);$.addValue(en,(0,ip.BX)(void 0!==ee?ee:ei,{owner:$}))}}}for(let er in et)void 0===ee[er]&&$.removeValue(er);return ee}let sv=new WeakMap,sS=Object.keys(ex),sT=sS.length,sw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],sE=eS.length;class sC{constructor({parent:$,props:ee,presenceContext:et,reducedMotionConfig:er,visualState:en},ei={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>tR.Wi.render(this.render,!1,!0);let{latestValues:es,renderState:eo}=en;this.latestValues=es,this.baseTarget={...es},this.initialValues=ee.initial?{...es}:{},this.renderState=eo,this.parent=$,this.props=ee,this.presenceContext=et,this.depth=$?$.depth+1:0,this.reducedMotionConfig=er,this.options=ei,this.isControllingVariants=eT(ee),this.isVariantNode=ew(ee),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!($&&$.current);let{willChange:eu,...eh}=this.scrapeMotionValuesFromProps(ee,{});for(let $ in eh){let ee=eh[$];void 0!==es[$]&&(0,ez.i)(ee)&&(ee.set(es[$],!1),(0,sm.L)(eu)&&eu.add($))}}scrapeMotionValuesFromProps($,ee){return{}}mount($){this.current=$,sv.set($,this),this.projection&&!this.projection.instance&&this.projection.mount($),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(($,ee)=>this.bindToMotionValue(ee,$)),sp.current||sg(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||sf.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){for(let $ in sv.delete(this.current),this.projection&&this.projection.unmount(),(0,tR.Pn)(this.notifyUpdate),(0,tR.Pn)(this.render),this.valueSubscriptions.forEach($=>$()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[$].clear();for(let $ in this.features)this.features[$].unmount();this.current=null}bindToMotionValue($,ee){let et=eV.G.has($),er=ee.on("change",ee=>{this.latestValues[$]=ee,this.props.onUpdate&&tR.Wi.update(this.notifyUpdate,!1,!0),et&&this.projection&&(this.projection.isTransformDirty=!0)}),en=ee.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set($,()=>{er(),en()})}sortNodePosition($){return this.current&&this.sortInstanceNodePosition&&this.type===$.type?this.sortInstanceNodePosition(this.current,$.current):0}loadFeatures({children:$,...ee},et,er,en){let ei,es;for(let $=0;$<sT;$++){let et=sS[$],{isEnabled:er,Feature:en,ProjectionNode:eo,MeasureLayout:eu}=ex[et];eo&&(ei=eo),er(ee)&&(!this.features[et]&&en&&(this.features[et]=new en(this)),eu&&(es=eu))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&ei){this.projection=new ei(this.latestValues,this.parent&&this.parent.projection);let{layoutId:$,layout:et,drag:er,dragConstraints:es,layoutScroll:eo,layoutRoot:eu}=ee;this.projection.setOptions({layoutId:$,layout:et,alwaysMeasureLayout:!!er||es&&ep(es),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"==typeof et?et:"both",initialPromotionConfig:en,layoutScroll:eo,layoutRoot:eu})}return es}updateFeatures(){for(let $ in this.features){let ee=this.features[$];ee.isMounted?ee.update():(ee.mount(),ee.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rJ()}getStaticValue($){return this.latestValues[$]}setStaticValue($,ee){this.latestValues[$]=ee}makeTargetAnimatable($,ee=!0){return this.makeTargetAnimatableFromInstance($,this.props,ee)}update($,ee){($.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=$,this.prevPresenceContext=this.presenceContext,this.presenceContext=ee;for(let ee=0;ee<sw.length;ee++){let et=sw[ee];this.propEventSubscriptions[et]&&(this.propEventSubscriptions[et](),delete this.propEventSubscriptions[et]);let er=$["on"+et];er&&(this.propEventSubscriptions[et]=this.on(et,er))}this.prevMotionValues=sy(this,this.scrapeMotionValuesFromProps($,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant($){return this.props.variants?this.props.variants[$]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext($=!1){if($)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){let $=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&($.initial=this.props.initial),$}let ee={};for(let $=0;$<sE;$++){let et=eS[$],er=this.props[et];(em(er)||!1===er)&&(ee[et]=er)}return ee}addVariantChild($){let ee=this.getClosestVariantNode();if(ee)return ee.variantChildren&&ee.variantChildren.add($),()=>ee.variantChildren.delete($)}addValue($,ee){ee!==this.values.get($)&&(this.removeValue($),this.bindToMotionValue($,ee)),this.values.set($,ee),this.latestValues[$]=ee.get()}removeValue($){this.values.delete($);let ee=this.valueSubscriptions.get($);ee&&(ee(),this.valueSubscriptions.delete($)),delete this.latestValues[$],this.removeValueFromRenderState($,this.renderState)}hasValue($){return this.values.has($)}getValue($,ee){if(this.props.values&&this.props.values[$])return this.props.values[$];let et=this.values.get($);return void 0===et&&void 0!==ee&&(et=(0,ip.BX)(ee,{owner:this}),this.addValue($,et)),et}readValue($){var ee;return void 0===this.latestValues[$]&&this.current?null!==(ee=this.getBaseTargetFromProps(this.props,$))&&void 0!==ee?ee:this.readValueFromInstance(this.current,$,this.options):this.latestValues[$]}setBaseTarget($,ee){this.baseTarget[$]=ee}getBaseTarget($){var ee;let{initial:et}=this.props,er="string"==typeof et||"object"==typeof et?null===(ee=(0,tv.o)(this.props,et))||void 0===ee?void 0:ee[$]:void 0;if(et&&void 0!==er)return er;let en=this.getBaseTargetFromProps(this.props,$);return void 0===en||(0,ez.i)(en)?void 0!==this.initialValues[$]&&void 0===er?void 0:this.baseTarget[$]:en}on($,ee){return this.events[$]||(this.events[$]=new nL.L),this.events[$].add(ee)}notify($,...ee){this.events[$]&&this.events[$].notify(...ee)}}class s_ extends sC{sortInstanceNodePosition($,ee){return 2&$.compareDocumentPosition(ee)?1:-1}getBaseTargetFromProps($,ee){return $.style?$.style[ee]:void 0}removeValueFromRenderState($,{vars:ee,style:et}){delete ee[$],delete et[$]}makeTargetAnimatableFromInstance({transition:$,transitionEnd:ee,...et},{transformValues:er},en){let ei=(0,iX.P$)(et,$||{},this);if(er&&(ee&&(ee=er(ee)),et&&(et=er(et)),ei&&(ei=er(ei))),en){(0,iX.GJ)(this,et,ei);let $=sh(this,et,ei,ee);ee=$.transitionEnd,et=$.target}return{transition:$,transitionEnd:ee,...et}}}function sR($){return window.getComputedStyle($)}class sx extends s_{constructor(){super(...arguments),this.type="html"}readValueFromInstance($,ee){if(eV.G.has(ee)){let $=(0,iY.A)(ee);return $&&$.default||0}{let et=sR($),er=((0,eG.f9)(ee)?et.getPropertyValue(ee):et[ee])||0;return"string"==typeof er?er.trim():er}}measureInstanceViewportBox($,{transformPagePoint:ee}){return ng($,ee)}build($,ee,et,er){eQ($,ee,et,er.transformTemplate)}scrapeMotionValuesFromProps($,ee){return tm($,ee)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:$}=this.props;(0,ez.i)($)&&(this.childSubscription=$.on("change",$=>{this.current&&(this.current.textContent=`${$}`)}))}renderInstance($,ee,et,er){tf($,ee,et,er)}}class sI extends s_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps($,ee){return $[ee]}readValueFromInstance($,ee){if(eV.G.has(ee)){let $=(0,iY.A)(ee);return $&&$.default||0}return ee=tp.has(ee)?ee:(0,th.D)(ee),$.getAttribute(ee)}measureInstanceViewportBox(){return rJ()}scrapeMotionValuesFromProps($,ee){return ty($,ee)}build($,ee,et,er){tr($,ee,et,this.isSVGTag,er.transformTemplate)}renderInstance($,ee,et,er){tg($,ee,et,er)}mount($){this.isSVGTag=ts($.tagName),super.mount($)}}let sP=($,ee)=>ej($)?new sI(ee,{enableHardwareAcceleration:!1}):new sx(ee,{enableHardwareAcceleration:!0}),sA={layout:{ProjectionNode:iK,MeasureLayout:nk}},sO={...rp,...t6,...iQ,...sA},sD=eM(($,ee)=>tA($,ee,sO,sP))},9261:($,ee,et)=>{"use strict";et.d(ee,{D:()=>er});let er=$=>$.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},9028:($,ee,et)=>{"use strict";et.d(ee,{Xp:()=>es,f9:()=>en,tm:()=>ei});let er=$=>ee=>"string"==typeof ee&&ee.startsWith($),en=er("--"),ei=er("var(--"),es=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g},2858:($,ee,et)=>{"use strict";et.d(ee,{T:()=>es});var er=et(993),en=et(6529),ei=et(9032);function es($,ee){let et=(0,ei.A)($);return et!==en.h&&(et=er.P),et.getAnimatableNone?et.getAnimatableNone(ee):void 0}},9032:($,ee,et)=>{"use strict";et.d(ee,{A:()=>es});var er=et(4244),en=et(6529);let ei={...et(3384).j,color:er.$,backgroundColor:er.$,outlineColor:er.$,fill:er.$,stroke:er.$,borderColor:er.$,borderTopColor:er.$,borderRightColor:er.$,borderBottomColor:er.$,borderLeftColor:er.$,filter:en.h,WebkitFilter:en.h},es=$=>ei[$]},788:($,ee,et)=>{"use strict";et.d(ee,{$:()=>eo,C:()=>eu});var er=et(607),en=et(9574),ei=et(8933);let es={test:$=>"auto"===$,parse:$=>$},eo=[er.Rx,en.px,en.aQ,en.RW,en.vw,en.vh,es],eu=$=>eo.find((0,ei.l)($))},3384:($,ee,et)=>{"use strict";et.d(ee,{j:()=>es});var er=et(607),en=et(9574);let ei={...er.Rx,transform:Math.round},es={borderWidth:en.px,borderTopWidth:en.px,borderRightWidth:en.px,borderBottomWidth:en.px,borderLeftWidth:en.px,borderRadius:en.px,radius:en.px,borderTopLeftRadius:en.px,borderTopRightRadius:en.px,borderBottomRightRadius:en.px,borderBottomLeftRadius:en.px,width:en.px,maxWidth:en.px,height:en.px,maxHeight:en.px,size:en.px,top:en.px,right:en.px,bottom:en.px,left:en.px,padding:en.px,paddingTop:en.px,paddingRight:en.px,paddingBottom:en.px,paddingLeft:en.px,margin:en.px,marginTop:en.px,marginRight:en.px,marginBottom:en.px,marginLeft:en.px,rotate:en.RW,rotateX:en.RW,rotateY:en.RW,rotateZ:en.RW,scale:er.bA,scaleX:er.bA,scaleY:er.bA,scaleZ:er.bA,skew:en.RW,skewX:en.RW,skewY:en.RW,distance:en.px,translateX:en.px,translateY:en.px,translateZ:en.px,x:en.px,y:en.px,z:en.px,perspective:en.px,transformPerspective:en.px,opacity:er.Fq,originX:en.$C,originY:en.$C,originZ:en.px,zIndex:ei,fillOpacity:er.Fq,strokeOpacity:er.Fq,numOctaves:ei}},8933:($,ee,et)=>{"use strict";et.d(ee,{l:()=>er});let er=$=>ee=>ee.test($)},9255:($,ee,et)=>{"use strict";et.d(ee,{G:()=>en,_:()=>er});let er=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],en=new Set(er)},6800:($,ee,et)=>{"use strict";et.d(ee,{x:()=>es});var er=et(941);function en($){let ee={};return $.values.forEach(($,et)=>ee[et]=$.get()),ee}function ei($){let ee={};return $.values.forEach(($,et)=>ee[et]=$.getVelocity()),ee}function es($,ee,et){let es=$.getProps();return(0,er.o)(es,ee,void 0!==et?et:es.custom,en($),ei($))}},941:($,ee,et)=>{"use strict";function er($,ee,et,er={},en={}){return"function"==typeof ee&&(ee=ee(void 0!==et?et:$.custom,er,en)),"string"==typeof ee&&(ee=$.variants&&$.variants[ee]),"function"==typeof ee&&(ee=ee(void 0!==et?et:$.custom,er,en)),ee}et.d(ee,{o:()=>er})},2806:($,ee,et)=>{"use strict";et.d(ee,{GJ:()=>eE,P$:()=>e_,CD:()=>eS,gg:()=>ew});var er=et(5656),en=et(9444),ei=et(2882),es=et(1345),eo=et(993),eu=et(2858),eh=et(4244),ef=et(788),ep=et(8933);let eg=[...ef.$,eh.$,eo.P],em=$=>eg.find((0,ep.l)($));var ey=et(6800);function ev($,ee,et){$.hasValue(ee)?$.getValue(ee).set(et):$.addValue(ee,(0,es.BX)(et))}function eS($,ee){let et=(0,ey.x)($,ee),{transitionEnd:er={},transition:en={},...es}=et?$.makeTargetAnimatable(et,!1):{};for(let ee in es={...es,...er}){let et=(0,ei.Y)(es[ee]);ev($,ee,et)}}function eT($,ee){[...ee].reverse().forEach(et=>{let er=$.getVariant(et);er&&eS($,er),$.variantChildren&&$.variantChildren.forEach($=>{eT($,ee)})})}function ew($,ee){return Array.isArray(ee)?eT($,ee):"string"==typeof ee?eT($,[ee]):void eS($,ee)}function eE($,ee,et){var ei,eh;let ef=Object.keys(ee).filter(ee=>!$.hasValue(ee)),ep=ef.length;if(ep)for(let eg=0;eg<ep;eg++){let ep=ef[eg],ey=ee[ep],ev=null;Array.isArray(ey)&&(ev=ey[0]),null===ev&&(ev=null!==(eh=null!==(ei=et[ep])&&void 0!==ei?ei:$.readValue(ep))&&void 0!==eh?eh:ee[ep]),null!=ev&&("string"==typeof ev&&((0,er.P)(ev)||(0,en.W)(ev))?ev=parseFloat(ev):!em(ev)&&eo.P.test(ey)&&(ev=(0,eu.T)(ep,ey)),$.addValue(ep,(0,es.BX)(ev,{owner:$})),void 0===et[ep]&&(et[ep]=ev),null!==ev&&$.setBaseTarget(ep,ev))}}function eC($,ee){if(ee)return(ee[$]||ee.default||ee).from}function e_($,ee,et){let er={};for(let en in $){let $=eC(en,ee);if(void 0!==$)er[en]=$;else{let $=et.getValue(en);$&&(er[en]=$.get())}}return er}},4766:($,ee,et)=>{"use strict";function er($,ee){-1===$.indexOf(ee)&&$.push(ee)}function en($,ee){let et=$.indexOf(ee);et>-1&&$.splice(et,1)}et.d(ee,{cl:()=>en,y4:()=>er})},4351:($,ee,et)=>{"use strict";et.d(ee,{u:()=>er});let er=($,ee,et)=>Math.min(Math.max(et,$),ee)},7222:($,ee,et)=>{"use strict";et.d(ee,{K:()=>en,k:()=>ei});var er=et(254);let en=er.Z,ei=er.Z},9398:($,ee,et)=>{"use strict";et.d(ee,{j:()=>er});let er="undefined"!=typeof document},5656:($,ee,et)=>{"use strict";et.d(ee,{P:()=>er});let er=$=>/^\-?\d*\.?\d+$/.test($)},9444:($,ee,et)=>{"use strict";et.d(ee,{W:()=>er});let er=$=>/^0[^.\s]+$/.test($)},8626:($,ee,et)=>{"use strict";et.d(ee,{C:()=>er});let er=($,ee,et)=>-et*$+et*ee+$},254:($,ee,et)=>{"use strict";et.d(ee,{Z:()=>er});let er=$=>$},5313:($,ee,et)=>{"use strict";et.d(ee,{z:()=>en});let er=($,ee)=>et=>ee($(et)),en=(...$)=>$.reduce(er)},4843:($,ee,et)=>{"use strict";et.d(ee,{Y:()=>er});let er=($,ee,et)=>{let er=ee-$;return 0===er?1:(et-$)/er}},2882:($,ee,et)=>{"use strict";et.d(ee,{Y:()=>ei,p:()=>en});var er=et(4034);let en=$=>!!($&&"object"==typeof $&&$.mix&&$.toValue),ei=$=>(0,er.C)($)?$[$.length-1]||0:$},3562:($,ee,et)=>{"use strict";et.d(ee,{L:()=>en});var er=et(4766);class en{constructor(){this.subscriptions=[]}add($){return(0,er.y4)(this.subscriptions,$),()=>(0,er.cl)(this.subscriptions,$)}notify($,ee,et){let er=this.subscriptions.length;if(er){if(1===er)this.subscriptions[0]($,ee,et);else for(let en=0;en<er;en++){let er=this.subscriptions[en];er&&er($,ee,et)}}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}},8825:($,ee,et)=>{"use strict";et.d(ee,{X:()=>en,w:()=>er});let er=$=>1e3*$,en=$=>$/1e3},207:($,ee,et)=>{"use strict";et.d(ee,{h:()=>en});var er=et(3729);function en($){let ee=(0,er.useRef)(null);return null===ee.current&&(ee.current=$()),ee.current}},9038:($,ee,et)=>{"use strict";et.d(ee,{L:()=>en});var er=et(3729);let en=et(9398).j?er.useLayoutEffect:er.useEffect},1033:($,ee,et)=>{"use strict";function er($,ee){return ee?1e3/ee*$:0}et.d(ee,{R:()=>er})},1345:($,ee,et)=>{"use strict";et.d(ee,{BX:()=>eh});var er=et(3562),en=et(1033),ei=et(228);let es=$=>!isNaN(parseFloat($)),eo={current:void 0};class eu{constructor($,ee={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=($,ee=!0)=>{this.prev=this.current,this.current=$;let{delta:et,timestamp:er}=ei.frameData;this.lastUpdated!==er&&(this.timeDelta=et,this.lastUpdated=er,ei.Wi.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),ee&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ei.Wi.postRender(this.velocityCheck),this.velocityCheck=({timestamp:$})=>{$!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=$,this.canTrackVelocity=es(this.current),this.owner=ee.owner}onChange($){return this.on("change",$)}on($,ee){this.events[$]||(this.events[$]=new er.L);let et=this.events[$].add(ee);return"change"===$?()=>{et(),ei.Wi.read(()=>{this.events.change.getSize()||this.stop()})}:et}clearListeners(){for(let $ in this.events)this.events[$].clear()}attach($,ee){this.passiveEffect=$,this.stopPassiveEffect=ee}set($,ee=!0){ee&&this.passiveEffect?this.passiveEffect($,this.updateAndNotify):this.updateAndNotify($,ee)}setWithVelocity($,ee,et){this.set(ee),this.prev=$,this.timeDelta=et}jump($){this.updateAndNotify($),this.prev=$,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return eo.current&&eo.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?(0,en.R)(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start($){return this.stop(),new Promise(ee=>{this.hasAnimated=!0,this.animation=$(ee),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function eh($,ee){return new eu($,ee)}},2550:($,ee,et)=>{"use strict";et.d(ee,{$:()=>ei});var er=et(2983);function en($){let ee="",et="",er="",en="";return $.length>5?(ee=$.substring(1,3),et=$.substring(3,5),er=$.substring(5,7),en=$.substring(7,9)):(ee=$.substring(1,2),et=$.substring(2,3),er=$.substring(3,4),en=$.substring(4,5),ee+=ee,et+=et,er+=er,en+=en),{red:parseInt(ee,16),green:parseInt(et,16),blue:parseInt(er,16),alpha:en?parseInt(en,16)/255:1}}let ei={test:(0,et(9658).i)("#"),parse:en,transform:er.m.transform}},5124:($,ee,et)=>{"use strict";et.d(ee,{J:()=>eo});var er=et(607),en=et(9574),ei=et(8246),es=et(9658);let eo={test:(0,es.i)("hsl","hue"),parse:(0,es.d)("hue","saturation","lightness"),transform:({hue:$,saturation:ee,lightness:et,alpha:es=1})=>"hsla("+Math.round($)+", "+en.aQ.transform((0,ei.Nw)(ee))+", "+en.aQ.transform((0,ei.Nw)(et))+", "+(0,ei.Nw)(er.Fq.transform(es))+")"}},4244:($,ee,et)=>{"use strict";et.d(ee,{$:()=>eo});var er=et(8246),en=et(2550),ei=et(5124),es=et(2983);let eo={test:$=>es.m.test($)||en.$.test($)||ei.J.test($),parse:$=>es.m.test($)?es.m.parse($):ei.J.test($)?ei.J.parse($):en.$.parse($),transform:$=>(0,er.HD)($)?$:$.hasOwnProperty("red")?es.m.transform($):ei.J.transform($)}},2983:($,ee,et)=>{"use strict";et.d(ee,{m:()=>eh});var er=et(4351),en=et(607),ei=et(8246),es=et(9658);let eo=$=>(0,er.u)(0,255,$),eu={...en.Rx,transform:$=>Math.round(eo($))},eh={test:(0,es.i)("rgb","red"),parse:(0,es.d)("red","green","blue"),transform:({red:$,green:ee,blue:et,alpha:er=1})=>"rgba("+eu.transform($)+", "+eu.transform(ee)+", "+eu.transform(et)+", "+(0,ei.Nw)(en.Fq.transform(er))+")"}},9658:($,ee,et)=>{"use strict";et.d(ee,{d:()=>ei,i:()=>en});var er=et(8246);let en=($,ee)=>et=>!!((0,er.HD)(et)&&er.mj.test(et)&&et.startsWith($)||ee&&Object.prototype.hasOwnProperty.call(et,ee)),ei=($,ee,et)=>en=>{if(!(0,er.HD)(en))return en;let[ei,es,eo,eu]=en.match(er.KP);return{[$]:parseFloat(ei),[ee]:parseFloat(es),[et]:parseFloat(eo),alpha:void 0!==eu?parseFloat(eu):1}}},6529:($,ee,et)=>{"use strict";et.d(ee,{h:()=>eu});var er=et(993),en=et(8246);let ei=new Set(["brightness","contrast","saturate","opacity"]);function es($){let[ee,et]=$.slice(0,-1).split("(");if("drop-shadow"===ee)return $;let[er]=et.match(en.KP)||[];if(!er)return $;let es=et.replace(er,""),eo=ei.has(ee)?1:0;return er!==et&&(eo*=100),ee+"("+eo+es+")"}let eo=/([a-z-]*)\(.*?\)/g,eu={...er.P,getAnimatableNone:$=>{let ee=$.match(eo);return ee?ee.map(es).join(" "):$}}},993:($,ee,et)=>{"use strict";et.d(ee,{P:()=>ew,V:()=>em});var er=et(9028),en=et(254),ei=et(4244),es=et(607),eo=et(8246);function eu($){var ee,et;return isNaN($)&&(0,eo.HD)($)&&((null===(ee=$.match(eo.KP))||void 0===ee?void 0:ee.length)||0)+((null===(et=$.match(eo.dA))||void 0===et?void 0:et.length)||0)>0}let eh={regex:er.Xp,countKey:"Vars",token:"${v}",parse:en.Z},ef={regex:eo.dA,countKey:"Colors",token:"${c}",parse:ei.$.parse},ep={regex:eo.KP,countKey:"Numbers",token:"${n}",parse:es.Rx.parse};function eg($,{regex:ee,countKey:et,token:er,parse:en}){let ei=$.tokenised.match(ee);ei&&($["num"+et]=ei.length,$.tokenised=$.tokenised.replace(ee,er),$.values.push(...ei.map(en)))}function em($){let ee=$.toString(),et={value:ee,tokenised:ee,values:[],numVars:0,numColors:0,numNumbers:0};return et.value.includes("var(--")&&eg(et,eh),eg(et,ef),eg(et,ep),et}function ey($){return em($).values}function ev($){let{values:ee,numColors:et,numVars:er,tokenised:en}=em($),es=ee.length;return $=>{let ee=en;for(let en=0;en<es;en++)ee=en<er?ee.replace(eh.token,$[en]):en<er+et?ee.replace(ef.token,ei.$.transform($[en])):ee.replace(ep.token,(0,eo.Nw)($[en]));return ee}}let eS=$=>"number"==typeof $?0:$;function eT($){let ee=ey($);return ev($)(ee.map(eS))}let ew={test:eu,parse:ey,createTransformer:ev,getAnimatableNone:eT}},607:($,ee,et)=>{"use strict";et.d(ee,{Fq:()=>ei,Rx:()=>en,bA:()=>es});var er=et(4351);let en={test:$=>"number"==typeof $,parse:parseFloat,transform:$=>$},ei={...en,transform:$=>(0,er.u)(0,1,$)},es={...en,default:1}},9574:($,ee,et)=>{"use strict";et.d(ee,{$C:()=>ef,RW:()=>ei,aQ:()=>es,px:()=>eo,vh:()=>eu,vw:()=>eh});var er=et(8246);let en=$=>({test:ee=>(0,er.HD)(ee)&&ee.endsWith($)&&1===ee.split(" ").length,parse:parseFloat,transform:ee=>`${ee}${$}`}),ei=en("deg"),es=en("%"),eo=en("px"),eu=en("vh"),eh=en("vw"),ef={...es,parse:$=>es.parse($)/100,transform:$=>es.transform(100*$)}},8246:($,ee,et)=>{"use strict";et.d(ee,{HD:()=>eo,KP:()=>en,Nw:()=>er,dA:()=>ei,mj:()=>es});let er=$=>Math.round(1e5*$)/1e5,en=/(-)?([\d]*\.?[\d])+/g,ei=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,es=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function eo($){return"string"==typeof $}},9220:($,ee,et)=>{"use strict";et.d(ee,{L:()=>en});var er=et(815);function en($){return!!((0,er.i)($)&&$.add)}},815:($,ee,et)=>{"use strict";et.d(ee,{i:()=>er});let er=$=>!!($&&$.getVelocity)},981:($,ee,et)=>{"use strict";et.d(ee,{rJP:()=>es,s5I:()=>en,t0C:()=>ei});var er=et(7554);function en($){return(0,er.w_)({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-92.4 233.5h-63.9c-50.1 0-59.8 23.8-59.8 58.8v77.1h119.6l-15.6 120.7h-104V912H539.2V602.2H434.9V481.4h104.3v-89c0-103.3 63.1-159.6 155.3-159.6 44.2 0 82.1 3.3 93.2 4.8v107.9z"},child:[]}]})($)}function ei($){return(0,er.w_)({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 378.7c-73.4 0-133.3 59.9-133.3 133.3S438.6 645.3 512 645.3 645.3 585.4 645.3 512 585.4 378.7 512 378.7zM911.8 512c0-55.2.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165zM512 717.1c-113.5 0-205.1-91.6-205.1-205.1S398.5 306.9 512 306.9 717.1 398.5 717.1 512 625.5 717.1 512 717.1zm213.5-370.7c-26.5 0-47.9-21.4-47.9-47.9s21.4-47.9 47.9-47.9 47.9 21.4 47.9 47.9a47.84 47.84 0 0 1-47.9 47.9z"},child:[]}]})($)}function es($){return(0,er.w_)({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M885.6 230.2L779.1 123.8a80.83 80.83 0 0 0-57.3-23.8c-21.7 0-42.1 8.5-57.4 23.8L549.8 238.4a80.83 80.83 0 0 0-23.8 57.3c0 21.7 8.5 42.1 23.8 57.4l83.8 83.8A393.82 393.82 0 0 1 553.1 553 395.34 395.34 0 0 1 437 633.8L353.2 550a80.83 80.83 0 0 0-57.3-23.8c-21.7 0-42.1 8.5-57.4 23.8L123.8 664.5a80.89 80.89 0 0 0-23.8 57.4c0 21.7 8.5 42.1 23.8 57.4l106.3 106.3c24.4 24.5 58.1 38.4 92.7 38.4 7.3 0 14.3-.6 21.2-1.8 134.8-22.2 268.5-93.9 376.4-201.7C828.2 612.8 899.8 479.2 922.3 344c6.8-41.3-6.9-83.8-36.7-113.8z"},child:[]}]})($)}},9921:($,ee,et)=>{"use strict";et.d(ee,{aHS:()=>en});var er=et(7554);function en($){return(0,er.w_)({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})($)}},9868:($,ee,et)=>{"use strict";et.d(ee,{Pwq:()=>ei,X_s:()=>en});var er=et(7554);function en($){return(0,er.w_)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"21",y1:"10",x2:"3",y2:"10"},child:[]},{tag:"line",attr:{x1:"21",y1:"6",x2:"3",y2:"6"},child:[]},{tag:"line",attr:{x1:"21",y1:"14",x2:"3",y2:"14"},child:[]},{tag:"line",attr:{x1:"21",y1:"18",x2:"3",y2:"18"},child:[]}]})($)}function ei($){return(0,er.w_)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"21",y1:"10",x2:"7",y2:"10"},child:[]},{tag:"line",attr:{x1:"21",y1:"6",x2:"3",y2:"6"},child:[]},{tag:"line",attr:{x1:"21",y1:"14",x2:"3",y2:"14"},child:[]},{tag:"line",attr:{x1:"21",y1:"18",x2:"7",y2:"18"},child:[]}]})($)}},7554:($,ee,et)=>{"use strict";et.d(ee,{w_:()=>eS});var er=et(3729),en={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ei=er.createContext&&er.createContext(en),es=["attr","size","title"];function eo($,ee){if(null==$)return{};var et,er,en=eu($,ee);if(Object.getOwnPropertySymbols){var ei=Object.getOwnPropertySymbols($);for(er=0;er<ei.length;er++)et=ei[er],!(ee.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call($,et)&&(en[et]=$[et])}return en}function eu($,ee){if(null==$)return{};var et,er,en={},ei=Object.keys($);for(er=0;er<ei.length;er++)et=ei[er],ee.indexOf(et)>=0||(en[et]=$[et]);return en}function eh(){return(eh=Object.assign?Object.assign.bind():function($){for(var ee=1;ee<arguments.length;ee++){var et=arguments[ee];for(var er in et)Object.prototype.hasOwnProperty.call(et,er)&&($[er]=et[er])}return $}).apply(this,arguments)}function ef($,ee){var et=Object.keys($);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols($);ee&&(er=er.filter(function(ee){return Object.getOwnPropertyDescriptor($,ee).enumerable})),et.push.apply(et,er)}return et}function ep($){for(var ee=1;ee<arguments.length;ee++){var et=null!=arguments[ee]?arguments[ee]:{};ee%2?ef(Object(et),!0).forEach(function(ee){eg($,ee,et[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(et)):ef(Object(et)).forEach(function(ee){Object.defineProperty($,ee,Object.getOwnPropertyDescriptor(et,ee))})}return $}function eg($,ee,et){return(ee=em(ee))in $?Object.defineProperty($,ee,{value:et,enumerable:!0,configurable:!0,writable:!0}):$[ee]=et,$}function em($){var ee=ey($,"string");return"symbol"==typeof ee?ee:String(ee)}function ey($,ee){if("object"!=typeof $||null===$)return $;var et=$[Symbol.toPrimitive];if(void 0!==et){var er=et.call($,ee||"default");if("object"!=typeof er)return er;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===ee?String:Number)($)}function ev($){return $&&$.map(($,ee)=>er.createElement($.tag,ep({key:ee},$.attr),ev($.child)))}function eS($){return ee=>er.createElement(eT,eh({attr:ep({},$.attr)},ee),ev($.child))}function eT($){var ee=ee=>{var et,{attr:en,size:ei,title:eu}=$,ef=eo($,es),eg=ei||ee.size||"1em";return ee.className&&(et=ee.className),$.className&&(et=(et?et+" ":"")+$.className),er.createElement("svg",eh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},ee.attr,en,ef,{className:et,style:ep(ep({color:$.color||ee.color},ee.style),$.style),height:eg,width:eg,xmlns:"http://www.w3.org/2000/svg"}),eu&&er.createElement("title",null,eu),$.children)};return void 0!==ei?er.createElement(ei.Consumer,null,$=>ee($)):ee(en)}},6783:($,ee,et)=>{"use strict";function er($){return $&&$.__esModule?$:{default:$}}et.r(ee),et.d(ee,{_:()=>er,_interop_require_default:()=>er})},4399:($,ee,et)=>{"use strict";et.d(ee,{s5I:()=>en,t0C:()=>ei});var er=et(2498);function en($){return(0,er.w_)({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-92.4 233.5h-63.9c-50.1 0-59.8 23.8-59.8 58.8v77.1h119.6l-15.6 120.7h-104V912H539.2V602.2H434.9V481.4h104.3v-89c0-103.3 63.1-159.6 155.3-159.6 44.2 0 82.1 3.3 93.2 4.8v107.9z"},child:[]}]})($)}function ei($){return(0,er.w_)({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 378.7c-73.4 0-133.3 59.9-133.3 133.3S438.6 645.3 512 645.3 645.3 585.4 645.3 512 585.4 378.7 512 378.7zM911.8 512c0-55.2.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165zM512 717.1c-113.5 0-205.1-91.6-205.1-205.1S398.5 306.9 512 306.9 717.1 398.5 717.1 512 625.5 717.1 512 717.1zm213.5-370.7c-26.5 0-47.9-21.4-47.9-47.9s21.4-47.9 47.9-47.9 47.9 21.4 47.9 47.9a47.84 47.84 0 0 1-47.9 47.9z"},child:[]}]})($)}},2498:($,ee,et)=>{"use strict";et.d(ee,{w_:()=>eS});var er=et(2),en={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ei=er.createContext&&er.createContext(en),es=["attr","size","title"];function eo($,ee){if(null==$)return{};var et,er,en=eu($,ee);if(Object.getOwnPropertySymbols){var ei=Object.getOwnPropertySymbols($);for(er=0;er<ei.length;er++)et=ei[er],!(ee.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call($,et)&&(en[et]=$[et])}return en}function eu($,ee){if(null==$)return{};var et,er,en={},ei=Object.keys($);for(er=0;er<ei.length;er++)et=ei[er],ee.indexOf(et)>=0||(en[et]=$[et]);return en}function eh(){return(eh=Object.assign?Object.assign.bind():function($){for(var ee=1;ee<arguments.length;ee++){var et=arguments[ee];for(var er in et)Object.prototype.hasOwnProperty.call(et,er)&&($[er]=et[er])}return $}).apply(this,arguments)}function ef($,ee){var et=Object.keys($);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols($);ee&&(er=er.filter(function(ee){return Object.getOwnPropertyDescriptor($,ee).enumerable})),et.push.apply(et,er)}return et}function ep($){for(var ee=1;ee<arguments.length;ee++){var et=null!=arguments[ee]?arguments[ee]:{};ee%2?ef(Object(et),!0).forEach(function(ee){eg($,ee,et[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(et)):ef(Object(et)).forEach(function(ee){Object.defineProperty($,ee,Object.getOwnPropertyDescriptor(et,ee))})}return $}function eg($,ee,et){return(ee=em(ee))in $?Object.defineProperty($,ee,{value:et,enumerable:!0,configurable:!0,writable:!0}):$[ee]=et,$}function em($){var ee=ey($,"string");return"symbol"==typeof ee?ee:String(ee)}function ey($,ee){if("object"!=typeof $||null===$)return $;var et=$[Symbol.toPrimitive];if(void 0!==et){var er=et.call($,ee||"default");if("object"!=typeof er)return er;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===ee?String:Number)($)}function ev($){return $&&$.map(($,ee)=>er.createElement($.tag,ep({key:ee},$.attr),ev($.child)))}function eS($){return ee=>er.createElement(eT,eh({attr:ep({},$.attr)},ee),ev($.child))}function eT($){var ee=ee=>{var et,{attr:en,size:ei,title:eu}=$,ef=eo($,es),eg=ei||ee.size||"1em";return ee.className&&(et=ee.className),$.className&&(et=(et?et+" ":"")+$.className),er.createElement("svg",eh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},ee.attr,en,ef,{className:et,style:ep(ep({color:$.color||ee.color},ee.style),$.style),height:eg,width:eg,xmlns:"http://www.w3.org/2000/svg"}),eu&&er.createElement("title",null,eu),$.children)};return void 0!==ei?er.createElement(ei.Consumer,null,$=>ee($)):ee(en)}},1513:$=>{"use strict";$.exports={i8:"1.9.14"}},6541:$=>{"use strict";$.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},9987:$=>{"use strict";$.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}}}}}}')},7674:$=>{"use strict";$.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},3795:$=>{"use strict";$.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')}};